<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">52 posts tagged with &quot;KCL&quot; | KCL programming language.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kcl-lang.github.io/blog/tags/kcl/page/6"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="52 posts tagged with &quot;KCL&quot; | KCL programming language."><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://kcl-lang.github.io/blog/tags/kcl/page/6"><link data-rh="true" rel="alternate" href="https://kcl-lang.github.io/blog/tags/kcl/page/6" hreflang="en"><link data-rh="true" rel="alternate" href="https://kcl-lang.github.io/zh-CN/blog/tags/kcl/page/6" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://kcl-lang.github.io/blog/tags/kcl/page/6" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://I3BKOKGSD5-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="KCL programming language. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="KCL programming language. Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="KCL programming language." href="/opensearch.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MZD1X1PB2Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MZD1X1PB2Q",{anonymize_ip:!0})</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.cb3bdb25.css">
<link rel="preload" href="/assets/js/runtime~main.be2a8212.js" as="script">
<link rel="preload" href="/assets/js/main.7bf3e221.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Give us a star ‚≠êÔ∏è - If you are using KCL or think it is an interesting project, we would love a star and record on <a target="_blank" rel="noopener noreferrer" href="https://github.com/kcl-lang/kcl">Github</a> and <a target="_blank" rel="noopener noreferrer" href="https://github.com/kcl-lang/kcl/issues/578">Record Issue</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/kcl-logo.png" alt="KCL Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/kcl-logo.png" alt="KCL Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" docid="intro/kcl-intro" href="/docs/user_docs/getting-started/">Get Started</a><a class="navbar__item navbar__link" href="/docs/reference/lang/tour">Reference</a><a class="navbar__item navbar__link" href="/docs/tools/cli/">Tools</a><a href="https://artifacthub.io/packages/search?org=kcl&amp;sort=relevance&amp;page=1" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" sidebarid="modules">Modules<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="http://101.42.3.224/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" sidebarid="playground">Playground<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/kcl-lang/examples" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" sidebarid="examples">Examples<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/docs/community/intro/">Community</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/tools/cli/">0.7.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/tools/cli/">Next</a></li><li><a class="dropdown__link" href="/docs/tools/cli/">0.7.0</a></li><li><a class="dropdown__link" href="/docs/0.6.0/tools/cli/">0.6.0</a></li><li><a class="dropdown__link" href="/docs/0.5.6/tools/cli/">0.5.6</a></li><li><a class="dropdown__link" href="/docs/0.5.5/tools/cli/">0.5.5</a></li><li><a class="dropdown__link" href="/docs/0.5.4/tools/cli/">0.5.4</a></li><li><a class="dropdown__link" href="/docs/0.5.3/tools/cli/">0.5.3</a></li><li><a class="dropdown__link" href="/docs/0.5.2/tools/cli/">0.5.2</a></li><li><a class="dropdown__link" href="/docs/0.5.1/tools/cli/">0.5.1</a></li><li><a class="dropdown__link" href="/docs/0.5.0/tools/cli/">0.5.0</a></li><li><a class="dropdown__link" href="/docs/0.4.6/tools/cli/">0.4.6</a></li><li><a class="dropdown__link" href="/docs/0.4.5/events/2022/kcl_paper">0.4.5</a></li><li><a class="dropdown__link" href="/docs/0.4.4/events/2022/kcl_paper">0.4.4</a></li><li><a class="dropdown__link" href="/docs/0.4.3/events/2022/kcl_paper">0.4.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/blog/tags/kcl/page/6" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-CN/blog/tags/kcl/page/6" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</a></li><li><a href="https://github.com/kcl-lang/kcl-lang.io/issues/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024-02-22-newsletter">KCL Newsletter (2024 02.02 - 2024.02.22)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024-02-05-lfs-guide">2024 LFX Mentorship Internship Launch:KCL Open Source Community Welcomes Your Participation!!!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024-02-01-biweekly-newsletter">KCL Biweekly Newsletter (2024 01.19 - 2024.02.01) | KCL v0.7.5 Released and Flux Integration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024-01-18-biweekly-newsletter">KCL Biweekly Newsletter (2024 01.04 - 2024.01.18) | KCL v0.7.4 Released!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024-01-04-biweekly-newsletter">KCL Biweekly Newsletter (2023 12.22 - 2024.01.04) | Crossplane KCL Integration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-12-25-ten-ways-for-kubernetes-config-management">10 Ways for Kubernetes Declarative Configuration Management</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-12-21-biweekly-newsletter">KCL Biweekly Newsletter (2023 12.07 - 12.21) | KCL v0.7.2 is released and KubeVela/OAM integration is available now!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-12-19-how-to-apply-kcl-config-to-cluster">How to Apply KCL Configuration to Cluster</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-12-18-cloud-native-configuration-language-kcl">Cloud Native Configuration and Policy Language - KCL</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-12-18-kcl-kcd-shenzhen-meeting">KCL &amp;&amp; KusionStack Introduction at CNCF KCD ShenZhen 2023 Meeting</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-12-15-kubevela-integration">Efficient Cloud Native Application Deployment - KCL and KubeVela Integration Quick Guide</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-12-09-kcl-new-semantic-model">Unlocking Advanced Code Intelligence with the KCL Semantic Model</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-12-09-engineering-config-policy-with-kcl-meeting">Exploration of KCL in Engineering Configuration and Policy Scenarios</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-12-07-biweekly-newsletter">KCL Biweekly Newsletter (2023 11.24 - 12.07) | How to Use Different Kubernetes Patch Strategies in KCL?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-11-30-kcl-0.7.0-release">KCL v0.7.0 Release Blog</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-11-23-biweekly-newsletter">KCL Biweekly Newsletter (2023 11.09 - 11.23) | Cloud-Native Modules, Language, and Toolchain Update Express!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-11-20-search-k8s-module-on-artifacthub">Kubernetes Modules Here Are All You Need!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-11-08-biweekly-newsletter">KCL Biweekly Newsletter (2023 10.26 - 11.08) | Better IDE Experience Enhancements and More Cloud-Native Modules</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-10-25-biweekly-newsletter">KCL Biweekly Newsletter (2023 10.12 - 10.25) | FindReferences and Rename in IDE, ArtifactHub integration in KPM!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-10-23-cloud-native-supply-chain-krm-kcl-spec">A New Paradigm for Cloud Native Configuration and Policy Management - KRM KCL Specification</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-10-21-kcl-kcd-hangzhou-meeting">KCL Introduction at CNCF KCD Hangzhou 2023 Meeting</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-10-11-biweekly-newsletter">KCL Biweekly Newsletter (2023 09.07 - 10.11) | v0.6.0 Is Out - Enhancement on IDE Extensions and Package Management!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-09-19-kcl-joining-cncf-sandbox">KCL Joining CNCF as a Sandbox Project! üéâ</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-09-15-kcl-0.6.0-release">KCL v0.6.0 Release Blog</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-09-06-dcm-using-kcl">A New Paradigm for Dynamic Configuration Management - KRM KCL Specification</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-09-06-biweekly-newsletter">KCL Biweekly Newsletter (2023 08.24 - 09.06) | Kubernetes Operator, IDE Extensions and v0.5.6 are out!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-09-04-maintainer-jakezhu9-blog">Congratulations to jakezhu9 for becoming a KCL Community Maintainer! KCL Import Tool Welcomes Enhanced Features!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-platform-engineering-tech-summit">KCL Introduction Platform Engineering Tech Summit 2023 Meeting</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-08-31-helmfile-kcl-plugin">5-Minute Gameplay with Helmfile KCL Plugin for Easy Management of Kubernetes Helm Charts</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-08-23-biweekly-newsletter">KCL Biweekly Newsletter (2023 08.10 - 08.23) | KCL v0.5.3, v0.5.4 and v0.5.5 are out!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-08-09-biweekly-newsletter">KCL Biweekly Newsletter (2023 07.26 - 08.09) | KCL v0.5.1 and v0.5.2 is out!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-07-31-kcl-github-argocd-gitops">Implementing GitOps using Github, Argo CD, and KCL to Simplify DevOps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-07-18-kcl-intro-slides">KCL Introduction Slides</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-kcl-0.5.0-release-blog">KCL v0.5.0 Release Blog</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/10/kcl-LSP">Rewrite KCL LSP in Rust</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-07-08-kcl-waic-meeting">KCL Introduction on WAIC 2023 Meeting</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-06-29-k8s-sidecar-2">Talking about the SideCar design pattern in K8S - Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-06-05-k8s-sidecar-1">Talking about the Sidecar design pattern in K8S - Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-05-30-vs-helm">Differences between KCL and Helm</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-05-20-vs-kustomize">Differences between KCL and Kustomize</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-new-version-feature-interpretation-kclvm-go-feature-overview">See Goodbye to Old KCL Go SDK, the New One is Out!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-kcl-0.4.6-release-blog">KCL v0.4.6 Release Blog</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-03-26-kcl-os2atc-meeting">KCL Introduction on OS2ATC 2022 Meeting</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-kcl-0.4.6-alpha.1-release-blog">KCL v0.4.6-alpha.1 Release Blog</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-kcl-playground-0.4.5-release">The new playground of the KCL programming language is coming!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-kcl-0.4.5-release-blog">KCL v0.4.5 Release Blog</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-kcl-osdt-meeting">KCL Introduction on OSDT 2022 Meeting</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-kcl-0.4.4-release-blog">KCL v0.4.4 Release Blog</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-kcl-rewrite-with-rust">40x Faster! We rewrote our project with Rust</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-kcl-setta-meeting">KCL Introduction on SETTA 2022 Meeting</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-kcl-setta-paper">KCL papers were accepted by SETTA 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022-declarative-config-overview">The Landscape of Declarative Configuration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021-kcl-intro">KCL Introduction on GIAC 2021 Meeting</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>52 posts tagged with &quot;KCL&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023-12-15-kubevela-integration">Efficient Cloud Native Application Deployment - KCL and KubeVela Integration Quick Guide</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-12-15T00:00:00.000Z" itemprop="datePublished">December 15, 2023</time> ¬∑ <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">KCL Team Member</span></div><small class="avatar__subtitle" itemprop="description">KCL Team Member</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="cover" src="/assets/images/cover-c640e1eb03f64663e0c2a8902a36a702.png" width="712" height="350" class="img_ev3q"></p><h1>Introduction</h1><p><a href="https://kubevela.net/" target="_blank" rel="noopener noreferrer">KubeVela</a> is a modern application delivery system hosted by the CNCF Foundation. It is built on the Open Application Model (OAM) specification and aims to abstract the complexity of Kubernetes, providing a set of simple and easy-to-use command-line tools and APIs for developers to deploy and operate cloud-native applications without worrying about the underlying details.</p><p><a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">KCL</a> is a configuration and policy language for cloud-native scenarios, hosted by the CNCF Foundation. It aims to improve the writing of complex configurations, such as cloud-native Kubernetes configurations, using mature programming language techniques and practices. KCL focuses on building better modularity, scalability, and stability around configuration, as well as easier logic writing, automation, and integration with the toolchain.</p><p>KCL exists in a completely open cloud-native world and is not tied to any orchestration/engine tools or Kubernetes controllers. It can provide API abstraction, composition, and validation capabilities for both Kubernetes clients and runtime.</p><p>Users can choose suitable cloud-native tools such as Kubectl, Helm, Kustomize, KPT, KusionStack, KubeVela, Helmfile, Crossplane, or ArgoCD to combine with KCL and apply configurations to the cluster based on their specific scenarios.</p><p><img loading="lazy" alt="integration" src="/assets/images/integration-c0c6e40b3644da0976464727ec78cfdd.png" width="2606" height="672" class="img_ev3q"></p><p>This blog is the first in a series that explores the efficient deployment and operation of cloud-native applications using KCL and KubeVela together. We will share more advanced usage in future articles, so stay tuned.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-kcl-with-kubevela">Using KCL with KubeVela<a href="#using-kcl-with-kubevela" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><p>Using KCL with KubeVela has the following benefits:</p><ul><li><strong>Simpler configuration</strong>: KCL provides stronger templating capabilities, such as conditions and loops, for KubeVela OAM configurations at the client level, reducing the need for repetitive YAML writing. At the same time, the reuse of KCL model libraries and toolchains enhances the experience and management efficiency of configuration and policy writing.</li><li><strong>Better maintainability</strong>: KCL provides a configuration file structure that is more conducive to version control and team collaboration, instead of relying solely on YAML. When combined with OAM application models written in KCL, application configurations become easier to maintain and iterate.</li><li><strong>Simplified operations</strong>: By combining the simplicity of KCL configurations with the ease of use of KubeVela, daily operational tasks such as deploying, updating, scaling, or rolling back applications can be simplified. Developers can focus more on the applications themselves rather than the tedious details of the deployment process.</li><li><strong>Improved cross-team collaboration</strong>: By using KCL&#x27;s configuration chunk writing and package management capabilities in conjunction with KubeVela, clearer boundaries can be defined, allowing different teams (such as development, testing, and operations teams) to collaborate systematically. Each team can focus on tasks within their scope of responsibility, delivering, sharing, and reusing their own configurations without worrying about other aspects.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow">Workflow<a href="#workflow" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><p><img loading="lazy" alt="workflow" src="/assets/images/workflow-65f3b48f48ffc200fd831743c0738a81.png" width="1058" height="340" class="img_ev3q"></p><p>In this example, we use the KCL Playground application (written in Go and HTML5) as an example and use KCL to define the OAM configuration that needs to be deployed. The overall workflow is as follows:</p><ul><li>Application code development produces a Docker image.</li><li>Write OAM configurations using KCL.</li><li>Deploy configurations using KubeVela.</li><li>Verify the running status of the application.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="specific-steps">Specific Steps<a href="#specific-steps" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="0-prerequisites">0. Prerequisites<a href="#0-prerequisites" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3><ul><li>Familiarize yourself with basic Unix/Linux commands.</li><li>Familiarize yourself with using Git.</li><li>Understand the basics of Kubernetes.</li><li>Understand KubeVela.</li><li>Understand the basics of KCL.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-configure-the-kubernetes-cluster">1. Configure the Kubernetes Cluster<a href="#1-configure-the-kubernetes-cluster" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3><p>Install <a href="https://github.com/k3d-io/k3d" target="_blank" rel="noopener noreferrer">K3d</a> and create a cluster.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">k3d cluster create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: You can use other methods to create your own Kubernetes cluster, such as kind, minikube, etc., in this scenario.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-install-kubevela">2. Install KubeVela<a href="#2-install-kubevela" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3><ul><li>Install the KubeVela CLI.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSl https://kubevela.net/script/install.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Install KubeVela Core.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vela </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-write-oam-configurations">3. Write OAM Configurations<a href="#3-write-oam-configurations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3><ul><li>Install KCL.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://kcl-lang.io/script/install-cli.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Create a new project and add OAM dependencies.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod init kcl-play-svc </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> kcl-play-svc </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kcl mod </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> oam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Write the following code in main.k.</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> oam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oam</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Application </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kcl-play-svc&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">components </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;webservice&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        properties </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kcllang/kcl&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> expose </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cmd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;kcl&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;play&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: You can see documents here: <a href="https://artifacthub.io/packages/kcl/kcl-module/oam" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/kcl/kcl-module/oam</a> or in the IDE extension.</p></blockquote><p><img loading="lazy" alt="oam-definition-hover" src="/assets/images/oam-definition-hover-bf557b943b8e7abe7c4d13e91d1c48d9.png" width="1048" height="630" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-deploy-the-application-and-verify">4. Deploy the application and verify.<a href="#4-deploy-the-application-and-verify" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3><ul><li>Apply the configuration.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl run </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> vela up -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Port forward the service.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vela port-forward kcl-play-svc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then we can see the KCL Playground application running successfully in the browser.</p><p><img loading="lazy" alt="kcl-play-svc" src="/assets/images/kcl-play-svc-17cdd017ee58347075be64904d62e73f.png" width="2326" height="858" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><p>Through this guide, we have learned how to deploy cloud-native applications using KubeVela and KCL. In future blogs, we will explain how to further extend the capabilities of KubeVela by using KCL on the client side such as</p><ul><li>Using the inheritance, composition, and validation capabilities of KCL to extend the OAM model and define application abstractions that are better suited to your infrastructure or organization.</li><li>Using the modularized configuration capabilities of KCL to organize OAM multi-environment configurations with conditions, logic, loops, and modularity. For example, distribute longer App Definitions into different files to reduce boilerplate configurations.</li><li>Further integration with projects like KusionStack and ArgoCD to achieve better GitOps.</li><li>Incorporate more cloud-native capabilities or Kubernetes Operators such as KubeBlocks and Crossplane to improve database management and provide programmable access to unified cloud APIs and Kubernetes APIs.</li><li>And many other use cases...</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kcl">KCL</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kube-vela">KubeVela</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023-12-09-kcl-new-semantic-model">Unlocking Advanced Code Intelligence with the KCL Semantic Model</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-12-09T00:00:00.000Z" itemprop="datePublished">December 9, 2023</time> ¬∑ <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">KCL Team Member</span></div><small class="avatar__subtitle" itemprop="description">KCL Team Member</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-the-kcl-semantic-model">What is the KCL semantic model?<a href="#what-is-the-kcl-semantic-model" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><p><img loading="lazy" alt="image.png" src="/assets/images/01-a4f6cb66bb886db68b7fb33069e7d7bc.png" width="1480" height="1238" class="img_ev3q"></p><ul><li>&quot;Semantic model&quot; refers to the in-memory representation of modules, functions, and types that appear in source code. This representation is fully &quot;resolved&quot;: all expressions have types (note that there may be expression types that cannot be deduced in the KCL, they will be defined as any <strong>Type</strong>), and all references are bound to declarations, etc.</li><li>The client can submit a small amount of input data (typically changes to a single file) and get a new code model to explain the changes.</li><li>The underlying engine ensures that the model is <strong>Lazy (on demand) and incremental</strong> computational and can be updated quickly for small changes.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-does-kcl-need-a-new-semantic-model">Why does KCL need a new semantic model?<a href="#why-does-kcl-need-a-new-semantic-model" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><p>First, we can take a brief look at the design of the old semantic model: <img loading="lazy" alt="image.png" src="/assets/images/02-40975ad67009f082400bce523d31386c.png" width="1216" height="812" class="img_ev3q"> the old semantic model can be simply regarded as a collection of a large number of scopes, in which different scopes store the parent-child nodes between the scopes, as well as the symbol strings and corresponding types contained therein. It can simply meet the requirements of the compiler for type checking and code generation. But a simple structure involving an advanced tool chain, such as an IDE, is not sufficient. A few examples of typical IDE queries:</p><ul><li>What is the type of the AST node under the corresponding position?</li><li>Where are all the references to the current AST node? Ôºàfind referenceÔºâ</li><li>Which node is referenced by the current AST node? Ôºàfind definitionÔºâ</li><li>All symbols accessible at the current position?</li></ul><p>Only the old semantic model is used, which requires the IDE to traverse the AST for many times and perform repeated calculations. We can simply analyze the problems of the old semantic model, and we can find that:</p><ul><li>The old semantic model was more difficult to query information, and only stored the mapping from character string to symbol</li><li>The association between symbols and the weak association between symbols and scopes often leads to the need to traverse all scopes when querying for relevant information</li><li>A large amount of intermediate information is discarded in the analysis process and is not cached, resulting in repeated operations for multiple queries.</li></ul><p>In short, the old semantic model can not meet the query needs of the advanced tool chain, and a lot of information is missing. On the other hand, the old semantic model does not support incremental compilation, which also reduces the user experience of the tool chain.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="main-idea-map-reduce">Main Idea: Map Reduce<a href="#main-idea-map-reduce" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><p>The idea of the Map Reduce architecture is to split the analysis into a relatively simple indexing phase and a separate full analysis phase.</p><p>The core constraint of indexing is that it runs on a per-file basis, with the indexer taking the text of a single file, parsing it, and spitting out some data about that file. The indexer cannot touch other files. Full analysis can read other files and use the information in the index to save effort.</p><p>This sounds too abstract, so let&#x27;s look at a concrete example-Java. In Java, each file begins with a package declaration. The indexer concatenates the package name with the class name to get the fully qualified name. It also collects the set of methods declared in the class, the list of superclasses and interfaces, and so on.</p><p>The data for each file is merged into an index that maps fully qualified names (FQNs) to classes. The index is inexpensive to update, and when a file modification request arrives, the contribution to that file in the index is removed, the text of the file is changed, and the indexer runs on the new text and adds the new contribution. The amount of work to be done is proportional to the number of files changed and is independent of the total number of files.</p><p>Let&#x27;s see how to use the FQN index to quickly provide completion.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// File ./mypackage/Foo.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package mypackage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.*;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Bar f() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new Bar();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// File ./mypackage/Bar.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package mypackage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Bar {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void g() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// File ./Main.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import mypackage.Foo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Main {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Foo.f().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The user just entered <code>Foo.f().</code> We need to clarify that the receiver expression type is <code>Bar</code> and suggest <code>g </code> as completion.</p><p>Firstly, when the file <code>Main.java</code> is modified, we run the indexer on this individual file without any changes (the file still contains the class <code>Main</code> with static <code>main</code> methods), so we do not need to update the FQN index.</p><p>Next, we need to resolve the name <code>Foo</code>. We parsed the file <code>Main.java</code> and noticed the <code>import mypackage.Foo</code> and search for <code>mypackage.Foo</code> in the FQN index. In the index, we found that <code>Foo</code> has a static method <code>f</code>, so we successfully resolved the call to <code>f()</code>. The index also stores the return type of <code>f</code>, but please note that the index stores the string <code>Bar</code> instead of a direct reference to the class <code>Bar</code>.</p><p>The reason for doing this is that the <code>import java.util.*</code> in <code>Foo.java</code> can cause the <code>Bar</code> to be inferred as either <code>java.util.Bar&#x27;</code> or <code>mypackage.Bar</code>, the indexer doesn&#x27;t know which one it is because it can only &quot;see&quot; the text of the file <code>Foo.java</code>. In other words, although the index does store the return types of methods, it stores them in an unresolved form.</p><p>The next step is to parse the identifier <code>Bar</code> in the context of <code>Foo.java</code>. This will continue to use FQN indexing and navigate to class <code>mypackage.Bar</code>. So in the end, we found the method <code>g</code> that we wanted to complete.</p><p>During the completion process, only three files were touched upon in total. The FQN index allows us to completely ignore all other files in the project.</p><p>One problem with the methods described so far is that parsing types from indexes requires a lot of work. For example, if <code>Foo.f&#x27;</code> is called multiple times, this task may be repeated. The solution is to add a cache. The name resolution result will be remembered, so only one resolution is required. Any changes will cause the cache to completely invalid - the cost of rebuilding the cache using indexes is not that high.</p><p>To summarize, the working principle of the first method is as follows:</p><ol><li>Each file is independently and parallelly indexed, generating a &quot;stub&quot; - a set of visible top-level declarations with unresolved types.</li><li>Merge all stubs into one indexed data structure.</li><li>Name parsing and type inference are mainly based on stubs.</li><li>Name resolution is lazy (we only parse types from stubs when needed) and memory based (each type is parsed only once).</li><li>The cache will be completely invalidated every time a change is made</li><li>The index is incrementally updated:<ul><li>If the editor has not changed the stub of the file, there is no need to change the index.</li><li>Otherwise, the old index will be deleted and the new index will be added again</li></ul></li></ol><p>This method is simple enough and has excellent performance. Most of the work is mainly in the indexing phase, and we can execute these tasks in parallel. Two examples of this architecture are <a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener noreferrer">IntelliJ</a> And <a href="https://sorbet.org/" target="_blank" rel="noopener noreferrer">Sorbet</a>.</p><p>The main drawback of this method is that it is only effective when it is effective - specifically, not every language has a clearly defined concept of FQN. But overall, designing modules and name parsing is always good for languages, and specifically, in the current situation, KCL just meets this condition.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-semantic-model-pipeline">New Semantic Model Pipeline<a href="#new-semantic-model-pipeline" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><p>The overall pipeline of the new semantic model is as follows:
<img loading="lazy" alt="image.png" src="/assets/images/03-c2c78dc8d47dd97ac1ae13c114b6c30d.png" width="954" height="772" class="img_ev3q"></p><p><img loading="lazy" alt="image.png" src="/assets/images/04-f50a1ff5aa06ed172217d6176fafdb14.png" width="960" height="778" class="img_ev3q"></p><p><img loading="lazy" alt="image.png" src="/assets/images/05-1a4d9bc6eb1226873d9264609ddff30b.png" width="1316" height="1296" class="img_ev3q">
Compared with the analysis process of the original semantic model, the new semantic model adds two rounds of pass, namer and advanced <!-- -->_<!-- --> resolve, so as to enhance the support for the advanced tool chain without affecting the original compiler process.</p><ul><li>The <code>resolver</code> is based on file level work, mainly involving the initialization of the <code>GlobalState</code>, parsing the source code into AST, and establishing the mapping of AST nodes to types for later stages to use. Therefore, we can cache the output of a single file index to completely skip parsing the file when its content has not changed.</li><li>The early stage of <code>namer</code> will also be based on file level work, which collects global symbols defined in the file, and then merges the symbols based on FQN to obtain a unique <code>GlobalState</code><ul><li>Based on file level, it means we can easily perform incremental compilation in the first two stages</li></ul></li><li><code>advanced_resolver</code> will traverse the AST to resolve local symbols and point symbol references to their definitions, while setting the owner symbol for the local scope, such as <code>Schema</code> and <code>Package</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="semantic-database-globalstate">Semantic Database: GlobalState<a href="#semantic-database-globalstate" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><p>The core structure of the new semantic model is <code>core::GlobalState</code> that the tool chain mainly uses it to complete the interaction and query with the compiler.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// GlobalState is used to store semantic information of KCL source code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Default, Debug, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct GlobalState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // store all allocated symbols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols: KCLSymbolData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // store all allocated scopes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scopes: ScopeData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // store package infomation for name mapping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    packages: PackageDB,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // store semantic information after analysis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) sema_db: SemanticDB,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>GlobalState</code> is used as a semantic database for the new semantic model and is the final product of semantic analysis, mainly containing four aspects of information:</p><ul><li><code>SymbolData</code>: stores all symbols in the AST and their corresponding semantic information, and maintain the reference relationship.</li><li><code>ScopeData</code>: stores all scopes involved in the AST, while separating symbols, maintaining symbol visibility and scope nesting relationships</li><li><code>PackageDB</code>: stores package information, such as a collection of files for the package, import information, and so on.</li><li><code>SemanticDB</code>: stores auxiliary information to speed up queries, such as symbol sorting and position caching.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="symboldata">SymbolData<a href="#symboldata" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3><p><code>SymbolData</code> is responsible for managing the allocation of symbols and storing the allocated symbols and related semantic information. Here we borrow the arena design of rust to access the relevant symbols.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Default, Debug, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct KCLSymbolData {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) values: Arena&lt;ValueSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) packages: Arena&lt;PackageSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) attributes: Arena&lt;AttributeSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) schemas: Arena&lt;SchemaSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) type_aliases: Arena&lt;TypeAliasSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) unresolved: Arena&lt;UnresolvedSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) rules: Arena&lt;RuleSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) symbols_info: SymbolDB,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the new semantic model, we use <code>core::SymbolRef</code> to represent a reference to a symbol, and also use <code>SymbolRef</code> to access <code>SymbolData</code> for the specific symbol information.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Debug, Clone, Copy, PartialEq, Eq, PartialOrd, Ord, Hash)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct SymbolRef {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) id: generational_arena::Index,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) kind: SymbolKind,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Specifically, Symbols with different types will be taken out from <code>SymbolData</code> according to <code>SymbolRef::kind</code> and converted to abstract <code>trait Symbol</code>.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pub type KCLSymbol = dyn Symbol&lt;SymbolData = KCLSymbolData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SemanticInfo = KCLSymbolSemanticInfo&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn get_symbol(&amp;self, id: SymbolRef) -&gt; Option&lt;&amp;KCLSymbol&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        match id.get_kind() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SymbolKind::Schema =&gt; self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .schemas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .get(id.get_id())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .map(|symbol| symbol as &amp;KCLSymbol),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pub trait Symbol {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type SymbolData;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type SemanticInfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_sema_info(&amp;self) -&gt; &amp;Self::SemanticInfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn is_global(&amp;self) -&gt; bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_range(&amp;self) -&gt; Range;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_owner(&amp;self) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_definition(&amp;self) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_name(&amp;self) -&gt; String;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_id(&amp;self) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_attribute(&amp;self, ...) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn has_attribute(&amp;self, ...) -&gt; bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_all_attributes(&amp;self, ...) -&gt; Vec&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn simple_dump(&amp;self) -&gt; String;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn full_dump(&amp;self, data: &amp;Self::SymbolData) -&gt; Option&lt;String&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>hrough this trait, the tool chain can easily complete the query of symbol semantic information and reference relationship.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scopedata">ScopeData<a href="#scopedata" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3><p>The design idea of <code>ScopeData</code> is actually similar to <code>SymbolData</code>, it stores <code>Scope</code> with different types and using <code>ScopeRef</code> to access them.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Default, Debug, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct ScopeData {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// map pkgpath to root_scope</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) root_map: IndexMap&lt;String, ScopeRef&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) locals: generational_arena::Arena&lt;LocalSymbolScope&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) roots: generational_arena::Arena&lt;RootSymbolScope&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pub trait Scope {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type SymbolData;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_filename(&amp;self) -&gt; &amp;str;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_parent(&amp;self) -&gt; Option&lt;ScopeRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_children(&amp;self) -&gt; Vec&lt;ScopeRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn contains_pos(&amp;self, pos: &amp;Position) -&gt; bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_owner(&amp;self) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn look_up_def(&amp;self, ...) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_all_defs(&amp;self, ...) -&gt; HashMap&lt;String, SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn dump(&amp;self, scope_data: &amp;ScopeData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            symbol_data: &amp;Self::SymbolData) -&gt; Option&lt;String&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="semanticdb">SemanticDB<a href="#semanticdb" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h3><p><code>SemanticDB</code> is essentially the caching and integration of partial semantic information of semantic objects. Its main function is to accelerate the maintenance and querying of internal information in <code>GlobalState</code>.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Debug, Default, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct SemanticDB {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) file_sema_map: IndexMap&lt;String, FileSemanticInfo&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Debug, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct FileSemanticInfo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) filename: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) symbols: Vec&lt;SymbolRef&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) scopes: Vec&lt;ScopeRef&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) symbol_locs: IndexMap&lt;SymbolRef, CachedLocation&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) local_scope_locs: IndexMap&lt;ScopeRef, CachedRange&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">‚Äã</a></h2><p>The new semantic model of KCL essentially only does two things, one is to sink the repeated calculation of the tool chain in the application layer to the semantic layer, and design a corresponding mechanism to simplify the information query, and the other is to re-analyze and cache the information lost in the semantic analysis process. There are several main purposes for doing so:</p><ul><li>The calculation process is gathered, and the intrusion of the application layer into the semantic core of the compiler is prevented</li><li>The cache mechanism is improved, and the implementation of incremental compilation is simplified, so that the query speed is accelerated.</li><li>Improve maintainability by simplifying the development of the application layer tool chain and reducing the handling of Corner Cases by the tool chain</li></ul><p>In practice, the above objectives are basically achieved. After migration, the code volume of LSP related functions is reduced by about 60%, and the compilation speed is increased by about 500% after incremental compilation.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kcl">KCL</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/semantic">Semantic</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/tags/kcl/page/5"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/tags/kcl/page/7"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Document</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/user_docs/getting-started/intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/user_docs/guides">User Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reference/lang/tour">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/user_docs/support">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resource</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/kusionstack/kcl" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/community/intro">Community</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kusionstack.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">KusionStack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
          <br>
          <br>
          <strong>¬© KCL Authors 2023 | Documentation Distributed under <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a> </strong> 
          <br>
          <br>
          ¬© 2023 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.
        </div></div></div></footer></div>
<script src="/assets/js/runtime~main.be2a8212.js"></script>
<script src="/assets/js/main.7bf3e221.js"></script>
</body>
</html>