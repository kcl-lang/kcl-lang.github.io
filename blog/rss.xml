<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>KCL programming language. Blog</title>
        <link>https://kcl-lang.github.io/blog</link>
        <description>KCL programming language. Blog</description>
        <lastBuildDate>Tue, 30 Apr 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[KCL Newsletter (2024.04.17 - 2024.04.30)]]></title>
            <link>https://kcl-lang.github.io/blog/2024-04-30-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2024-04-30-newsletter</guid>
            <pubDate>Tue, 30 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest news, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thanks to to all contributors for their outstanding work over the past twenty days (2024.04.04 - 2024.04.17). Here is an overview of the key content.</p><p><strong>🏄 Language Update</strong></p><ul><li>KCL has added support for the Alpine Linux and Fedora Linux platforms.</li><li>Support for the evaluation of lambda closures.</li><li>Fixed a bug of the union of schema instances failed within list comprehensions.</li><li>Fixed the calling process error of lambda methods within schemas.</li><li>Fixed a bug that APIs could not be found on the Windows system.</li><li>Fixed a parallel compilation error caused by lock file failures.</li></ul><p><strong>⛵️ API Update</strong></p><ul><li><p>OverrideFile API supports insertion of non-exist variables.</p></li><li><p>Override API supports taking the variable name as one assignment value.</p></li><li><p>Override API fixes configuration merge failure due to whitespace.</p></li></ul><p><strong>🚪 CLI Update</strong></p><ul><li>Optimized the format of the output json.</li></ul><p><strong>🔥 SDK Update</strong></p><ul><li><p>KCL Python SDK is released to pypi.</p><p><strong><a href="https://pypi.org/project/kcl-lib/" target="_blank" rel="noopener noreferrer">https://pypi.org/project/kcl-lib/</a></strong></p></li><li><p>KCL Node JS SDK is released to npm.</p><p><strong><a href="https://www.npmjs.com/search?q=kcl-lib" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/search?q=kcl-lib</a></strong></p></li><li><p>KCL Java SDK is released to Github Package.</p><p><strong><a href="https://github.com/orgs/kcl-lang/packages?repo_name=lib" target="_blank" rel="noopener noreferrer">https://github.com/orgs/kcl-lang/packages?repo_name=lib</a></strong></p></li></ul><p><strong>💻 IDE Update</strong></p><ul><li>KCL VScode supports the highlight of kcl.mod and kcl.mod.lock.</li></ul><p><img loading="lazy" alt="kclmod" src="/assets/images/kclmod-9b32967a2d2269dd61cfbf1f98c977b2.png" width="507" height="298" class="img_ev3q">
<img loading="lazy" alt="kclmodlock" src="/assets/images/kclmodlock-06d79abf2d831dcbfa5cbb4351ecb9ae.png" width="690" height="295" class="img_ev3q"></p><p><strong>📬️ KCL Package Management Tool Update</strong></p><ul><li><p><code>downloader</code> is added for api to support custom three-party dependencies download process.</p></li><li><p>Fixed an issue where the repository specified in the url was invalid when adding dependencies using the oci url.</p></li><li><p>Fixed an issue where calling api output logs failed</p></li></ul><p><strong>📦️ KCL Modules Update</strong></p><ul><li><p>Provide <code>Argo-cd-order</code> which is a module for ordering argocd sync operations.</p></li><li><p>Provide crossplane-provider-gcp-upjet which is spec definition for crossplane-provider-upjet-gcp.</p></li><li><p>crossplane is updated to version 1.15.2.</p></li></ul><p><strong>📘 Doc Update</strong></p><ul><li><p>Added SDK related documents.</p></li><li><p>Added rust api documentation.</p></li><li><p>Added node-js api documentation.</p></li><li><p>Updated the OverrideFile API spec specification.</p></li><li><p>Added KCL Nix installation document.</p></li><li><p>Add package management tool supports Registry list.</p></li><li><p>Added more Q&amp;A.</p></li></ul><p><strong>🎈 Community</strong></p><ul><li>Viktor Farcic, a well-known KOL, YouTuber, and DevOpsToolkit channel manager, reviewed KCL and introduced KCL as a solution for how to better manage Kubernetes configuration lists and handle data structures.</li></ul><p><img loading="lazy" alt="youtuber" src="/assets/images/youtuber-6e2ae6057f0195bb702efb2f374aeb32.png" width="990" height="490" class="img_ev3q"></p><p>  The video link: <strong><a href="https://www.youtube.com/watch?v=Gn6btuH3ULw" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=Gn6btuH3ULw</a></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We'd like to thank all the community participants from the past two weeks.</p><p>The following are listed in no particular order:</p><ul><li><p>Thanks to @bozaro for the contribution to the KCL Go SDK 🙌</p></li><li><p>Thanks to @jheyduk for the contribution to the Kubectl KCL plugin 🙌</p></li><li></li><li><p>Thanks to @shruti2522，@metacoma contribution to the KCL 🙌</p></li><li><p>Thanks to @metacoma，@aleeriz contribution to the KCL modules 🙌</p></li><li><p>Thanks to @XiaoK29 contribution to the KCL go SDK 🙌</p></li><li><p>Thanks to @d4v1d03 contribution to the KCL Website Docs 🙌</p></li><li><p>Thanks to @shruti2522 contribution to the KCL IDE 🙌</p></li><li><p>Thanks to @Tom van Dinther contributions to Nix support for KCL Cli 🙌</p></li><li><p>Thanks to @steeling, @Stephen C, @Henri Williams, @Hai Wu, @Even Solberg, @Sergey Ryabin, @Shashank Mittal @Abhishek and others for their valuable suggestions and feedback while using KCL recently 🙌</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/9" target="_blank" rel="noopener noreferrer">KCL v0.9.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL Newsletter (2024.04.04 - 2024.04.17)]]></title>
            <link>https://kcl-lang.github.io/blog/2024-04-17-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2024-04-17-newsletter</guid>
            <pubDate>Wed, 17 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest news, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thanks to to all contributors for their outstanding work over the past twenty days (2024.04.04 - 2024.04.17). Here is an overview of the key content.</p><p><strong>🏄 Language Updates</strong></p><ul><li>The <code>instances()</code> method of Schema has added a new keyword parameter <code>full_pkg</code> for reading all instances corresponding to the Schema in the code.</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alice </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Alice"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">all_persons </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instances</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Added the <code>template</code> system module for manipulation of templates in KCL.</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">content </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token triple-quoted-string string" style="color:#e3116c">"""\</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&lt;div class="entry"&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">{{#if author}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&lt;h1&gt;{{firstName}} {{lastName}}&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">{{/if}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Yehuda"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Katz"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>⛵️ Toolchain Updates</strong></p><ul><li>The OverrideFile API supports modifying/deleting non-schema type fields.</li><li>New ListVariable API for reading the values of variables in KCL files.</li></ul><p><strong>🔥 SDK Updates</strong></p><ul><li>The KCL Go SDK has been released in version 0.8.4.</li><li>The KCL Rust SDK has added the <code>llvm</code> feature, allowing to choose whether to use the LLVM, defaulting to off. When the LLVM feature is turned off, binary size can be reduced by 90%. Dependencies can be added in the following way:</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cargo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> --git https://github.com/kcl-lang/lib</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The initial release of the KCL Node.js SDK. Repository link: <a href="https://github.com/kcl-lang/lib/tree/main/nodejs" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/lib/tree/main/nodejs</a>. Contributions are welcome.</li></ul><ul><li><code>__test__/test_data/schema.k</code></li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema AppConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AppConfig </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>execProgram</code></li></ul><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> execProgram</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ExecProgramArgs </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl-lib"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">execProgram</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ExecProgramArgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"__test__/test_data/schema.k"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">yamlResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 'app:\n  replicas: 2'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>listVariables</code></li></ul><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> listVariables</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ListVariablesArgs </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl-lib"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">listVariables</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">ListVariablesArgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"__test__/test_data/schema.k"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">variables</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"app"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 'AppConfig {replicas: 2}'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>loadPackage</code></li></ul><div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> loadPackage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LoadPackageArgs </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl-lib"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadPackage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">LoadPackageArgs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"__test__/test_data/schema.k"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">symbols</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>💻 IDE Updates</strong></p><ul><li>Added compilation unit caching to enhance IDE performance.</li></ul><p><strong>🌼 Integration Updates</strong></p><ul><li>Crossplane KCL Function supports reading Function Context parameters for passing parameters to different functions.<ul><li>Support reading the function context across different functions.</li><li>Support reading the function details to set sensitive information.</li><li>Support setting the status field of XR to output user information.</li><li>Fixed errors related to concurrent requests when issuing clusters under multiple XR resources.</li></ul></li><li>KCL has released a Nix package, allowing installation of the KCL command line tools with <code>nix-shell</code> or <code>devbox shell</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We'd like to thank all the community participants from the past two weeks.</p><p>The following are listed in no particular order:</p><ul><li>Thanks to @bozaro for the contribution to the KCL Go SDK 🙌</li><li>Thanks to @jheyduk for the contribution to the Kubectl KCL plugin 🙌</li><li>Thanks to @shashank-iitbhu for the contribution to the quick fix feature for KCL IDE syntax 🙌</li><li>Thanks to @d4v1d03 for the contribution to the KCL official website FAQ documentation 🙌</li><li>Thanks to @octonawish-akcodes for the contribution to the automatic dependency update feature for KCL IDE based on kcl.mod 🙌</li><li>Thanks to @utnim2 for the contribution to the restart kcl-language-server command for KCL IDE 🙌</li><li>Thanks to @AkashKumar7902 for the contribution to the KCL package management tool MVS algorithm 🙌</li><li>Thanks to @steeling, @bozaro, @vtomilov, @sanzoghenzo, @folliehiyuki, @markphillips100, @wilsonwang371, @zargor, @aleeriz, @reckless-huang, @zhuxw, @jheyduk, @Vitaly Tomilov, @Sergey Ryabin, @Stephen C, @ytsarev and others for their valuable suggestions and feedback while using KCL recently. 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/9" target="_blank" rel="noopener noreferrer">KCL v0.9.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL Newsletter (2024.03.20 - 2024.04.03)]]></title>
            <link>https://kcl-lang.github.io/blog/2024-04-03-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2024-04-03-newsletter</guid>
            <pubDate>Wed, 03 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest news, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thanks to to all contributors for their outstanding work over the past twenty days (2024.03.06 - 2024.03.20). Here is an overview of the key content:</p><p>Certainly! Here's the translation for the provided content:</p><p><strong>🏄 Language Updates</strong>
<strong>Release of versions 0.8.3 and 0.8.4 for KCL</strong></p><p>The mainly updates:</p><ul><li>Added file system built-in methods <code>file.abs</code> to compute the absolute file path and <code>file.exists</code> to determine if a file exists.</li></ul><p><strong>🔧 Toolchain Updates</strong></p><ul><li>KCL package manager: Added support for oci URLs in the <code>kcl.mod</code> file.</li><li>KCL package manager: Removed updates of indirect dependencies in <code>kcl.mod</code>.</li><li>KCL package manager: Removed checksum verification for local dependencies.</li><li>KCL package manager: Fixed an issue where local dependency version numbers were missing.</li><li>KCL package manager: Fixed the issue of missing local dependencies.</li><li>KCL package manager: Fixed an internal bug that caused the creation of symbolic links to fail.</li></ul><p><strong>🔥 SDK Updates</strong></p><ul><li>Release of version 0.8.3 for the KCL Go SDK.</li><li>KCL Go SDK fixed a panic issue that occurred during the ParseFile process.</li><li>KCL Go SDK supports setting the kcl compiler automatic download through environment variables.</li></ul><p><strong>💻 IDE Update</strong></p><ul><li>Fixed format function of IDE for unsaved code.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We'd like to thank all the community participants from the past two weeks.</p><p>the following are listed in no particular order:</p><ul><li>Thanks to @bozaro for the contributions to the KCL Go SDK 🙌</li><li>Thanks to @reckless-huang for the contributions to the KCL Go SDK 🙌</li><li>Thanks to @vemoo for the contributions to the KCL IDE 🙌</li><li>Thanks to @wilsonwang371 for the contributions to the KCL docker image and KCL website 🙌</li><li>Thanks to @d4v1d03 for the contributions to the KCL website 🙌</li><li>Thanks to @liangyuanpeng for the contributions to KCL github action 🙌</li><li>Thanks to @octonawish-akcodes for the contributions to KCL IDE 🙌</li><li>Thanks to @AkashKumar7902 for the contributions to KCL package management tool 🙌</li><li>Thanks to @empath-nirvana for the contributions to crossplane function-kcl 🙌</li><li>Thanks to @reckless-huang, @steeling, @vfarcic, @wilsonwang371, and others for their valuable suggestions and feedback during the recent use of KCL 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/9" target="_blank" rel="noopener noreferrer">KCL v0.9.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Newsletter</category>
        </item>
        <item>
            <title><![CDATA[Comparison between Pkl and KCL]]></title>
            <link>https://kcl-lang.github.io/blog/2024-03-22-pkl-kcl-comparison</link>
            <guid>https://kcl-lang.github.io/blog/2024-03-22-pkl-kcl-comparison</guid>
            <pubDate>Fri, 22 Mar 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[What is Pkl]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-pkl">What is Pkl<a href="#what-is-pkl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Pkl is a domain-specific programming language aimed at addressing the <strong>complexity of configurations</strong> such as repeated configurations and error verification. It is mainly targeted at cloud-native and application configuration scenarios. The primary goals of its technical product as a whole can be summarized as follows:</p><ul><li><strong>Safety</strong>: Provide safety by capturing validation errors before deployment.</li><li><strong>Scalability</strong>: The language can be used in both simple and complex scenarios.</li><li><strong>Programmability</strong>: Improve the experience of writing configuration code with first-class IDE support.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-kcl">What is KCL<a href="#what-is-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>KCL is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. It is hosted by the Cloud Native Computing Foundation (CNCF) as a Sandbox Project. With advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="differences-between-pkl-and-kcl">Differences between Pkl and KCL<a href="#differences-between-pkl-and-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="design-philosophy">Design Philosophy<a href="#design-philosophy" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The design philosophy of the two languages can be glimpsed from their respective official slogans. Pkl's slogan is Programmable, Scalable, and Safe, while KCL's slogan is Mutation, Validation, and Abstraction. It can be understood that KCL, compared to Pkl, is more focused on specific cloud-native domain issues such as complexity and security, and is closer to the cloud-native description method (Mutation and Validation are derived from Kubernetes' MutationWebhook and ValidationWebhook, using Abstraction to combat complexity). KCL converges the language's design for specific domains, reduces unnecessary designs, and enhances functionality and developer usability. It tries to reference simpler language styles such as Python and Go, excluding unexpected features and side effects. It strengthens stability and consistency by combining language technology and GitOps, ensures configuration determinism by enforcing strong immutability and conflict detection, shields user-side details through code reuse and abstraction combining default value filling, and supports business validation of configuration data through custom validation expressions. It also integrates with more cloud-native tools or projects such as Kustomize, Helm, and Crossplane to provide more scenario functionality.</p><p>In contrast, Pkl is more "general" and "modern" in design compared to KCL, not only in its language design elements but also in its specific language features. Pkl is designed to be Turing complete and its overall language design is more like Swift and Kotlin, implying that it can be used for more than just "configuration" scenarios. It features object-oriented keywords similar to Java and pipeline operators such as |&gt;, not commonly found in other common programming languages. Moreover, many of Pkl's features and tools are implemented by Pkl itself, to a certain extent demonstrating Pkl's capabilities. There are many use cases for Pkl, which cannot be exhaustively listed here.</p><p>I personally am very fond of Pkl's modern language features, signifying its powerful functionality and the ease of acceptance for developers writing libraries. However, from a negative perspective, this undoubtedly brings additional complexity and learning thresholds for a domain-specific language. KCL, on the other hand, strikes a balance between configuration data and powerful general language features. For example, KCL does not have procedural for loops like Pkl, and while it provides language features with a partial object-oriented focus, it does not introduce complex inheritance chains and polymorphism like Pkl. Additionally, KCL adopts some functional language features, and its functions are designed to be "pure" without extra side effects. This allows KCL to integrate with upper-level business systems for more automation while avoiding the most complex extreme scenarios, offering many built-in library functions for common scenarios.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="language-features">Language Features<a href="#language-features" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Overall, KCL and Pkl both support variable definition, references, and type definition, but there are differences in the degree of support and syntax semantics. They both support common programming language features such as arithmetic, logic, list comprehensions, conditions, functions, standard libraries, and importing third-party modules. However, the support methods and syntax are different, but they have drawn inspiration from general-purpose programming languages. Both partially or mixingly support user-defined types and object-oriented features. In terms of data file integration, KCL and Pkl can directly import JSON/YAML data types, JSON Schema, Kubernetes CRD, and other type definitions.</p><p>Additionally, KCL and Pkl both have many built-in language features for configuration operations, data validation, and security compliance to meet the needs of configuration scenarios. For example, they support configuration auto-merge features, field range checks, type checks, regular expressions, and more. The difference is that KCL adopts partial object-oriented features by separating data type checks and constraint checks, allowing KCL to provide more static analysis capabilities to meet the needs of IDEs or other toolchains. In contrast, Pkl requires constraint definitions to be written together with type definitions and performs type checks and constraint validation uniformly at runtime.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-tools">Developer Tools<a href="#developer-tools" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In terms of developer tools, both Pkl and KCL prioritize developer productivity, providing a wide range of language tools and IDE plugin support. In addition to basic language tools, the Pkl website primarily offers support for three IDE plugins: IntelliJ, NeoVim, and VS Code. Interestingly, KCL currently also provides support for these three IDE plugins, although their functions and focuses are slightly different.</p><p>Due to Pkl being developed in Java and Kotlin, it can be easily adapted to the JetBrains IDE plugin ecosystem. As a result, the IntelliJ plugin support for Pkl is the most comprehensive. However, since Pkl itself does not provide a Language Server, the NeoVim and VS Code plugins are based on the Tree Sitter parser generator, offering only basic highlighting and code folding, without more advanced features such as definition navigation, code refactoring, and autocompletion. Although Pkl is an Apple project, it is not developed in Swift, and there are no IDE plugins for XCode.</p><p>Conversely, KCL, being developed in Rust, provides Language Server support, enabling easy integration with IDE plugins other than VS Code, including NeoVim and some emerging LSP-supporting IDEs or editors. KCL's Language Server offers complete features such as code highlighting, autocompletion, navigation, refactoring, and quick fixes. Since IntelliJ provides limited LSP support only in its professional version, we have supplemented the IntelliJ plugin with corresponding Java implementation support. However, compared to the VS Code KCL plugin, the functionality of the IntelliJ plugin currently has room for improvement and enhancement.</p><p>In conclusion, both Pkl and KCL have room for improvement in terms of developer productivity. Due to differences in the implementation of IDE plugins, there is a need for further improvement of the IDE experience and workflow through greater collaboration with the open-source community.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-language-bindings">Multiple Language Bindings<a href="#multiple-language-bindings" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In order to better integrate the configuration language into user applications, Pkl provides bindings for four different languages: Java, Kotlin, Swift, and Go. Interestingly, KCL also offers four SDKs, including Go, Python, Java, and Rust.</p><p>Prior to Pkl's open-source release, KCL was one of the few, if not the only, projects to officially provide multiple language bindings and IDE plugins. This accomplishment was the result of the joint efforts and accumulated contributions from the community users and developers. Despite having few core maintainers, Pkl, upon its open-source release, provided many features that could be compared to those of KCL. This suggests that a considerable amount of effort and time went into its development, and it is commendable.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The comparison table below summarizes the features of Pkl and KCL for reference.</p><table><thead><tr><th>Features</th><th>Pkl</th><th>KCL</th></tr></thead><tbody><tr><td>Open Source License</td><td>Apache-2.0</td><td>Apache-2.0</td></tr><tr><td>Programming Language</td><td>Java, Kotlin</td><td>Rust</td></tr><tr><td>Language Style</td><td>Similar to Swift, Kotlin</td><td>Similar to Python, Go</td></tr><tr><td>Language Functionality</td><td>Strong</td><td>Medium</td></tr><tr><td>Compilation Execution Method</td><td>JIT</td><td>AOT</td></tr><tr><td>Runtime Performance</td><td>Medium</td><td>Medium</td></tr><tr><td>Incremental Compilation</td><td>✅</td><td>✅</td></tr><tr><td>Standard Library</td><td>✅</td><td>✅</td></tr><tr><td>Package Management Tool</td><td>✅</td><td>✅</td></tr><tr><td>Formatting Tool</td><td>❌</td><td>✅</td></tr><tr><td>Documentation Tool</td><td>❌</td><td>✅</td></tr><tr><td>Testing Tool</td><td>✅</td><td>✅</td></tr><tr><td>Debugging Tool</td><td>❌</td><td>❌</td></tr><tr><td>IDE Plugins</td><td>IntelliJ, NeoVim, VS Code</td><td>IntelliJ, NeoVim, VS Code</td></tr><tr><td>Multi-language SDKs</td><td>Java, Kotlin, Swift, Go</td><td>Go, Python, Java, Rust</td></tr><tr><td>Multi-language Plugins</td><td>❌</td><td>Go, Python</td></tr><tr><td>Language Server</td><td>❌</td><td>✅</td></tr><tr><td>Spring Framework Support</td><td>✅</td><td>❌</td></tr><tr><td>OCI Registry Support</td><td>❌</td><td>✅</td></tr><tr><td>Community Model Library</td><td>✅</td><td>✅</td></tr><tr><td>REST Server Support</td><td>✅</td><td>✅</td></tr><tr><td>Export Configuration Data</td><td>JSON, YAML, TOML, plist, etc.</td><td>JSON, YAML</td></tr><tr><td>Import from Other Data or Schema</td><td>✅</td><td>✅</td></tr><tr><td>Kubernetes Configuration Support</td><td>✅</td><td>✅</td></tr><tr><td>Cloud-native Tool Integration Support</td><td>❌</td><td>✅</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>KCL Website: <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/</a></li><li>KCL GitHub Repository: <a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl</a></li><li>Pkl Website: <a href="https://pkl-lang.org/" target="_blank" rel="noopener noreferrer">https://pkl-lang.org/</a></li><li>Pkl GitHub Repository: <a href="https://github.com/apple/pkl" target="_blank" rel="noopener noreferrer">https://github.com/apple/pkl</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL Newsletter (2024.03.06 - 2024.03.20)]]></title>
            <link>https://kcl-lang.github.io/blog/2024-03-20-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2024-03-20-newsletter</guid>
            <pubDate>Wed, 20 Mar 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest news, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thanks to to all contributors for their outstanding work over the past twenty days (2024.03.06 - 2024.03.20). Here is an overview of the key content:</p><p><strong>📦 Module Updates</strong></p><ul><li>Added new kubeadm configuration module.</li><li>Updated Knative Operator module to align with upstream Knative CRD definitions.</li></ul><p><strong>🏄 Language Updates</strong></p><p><strong>KCL has released v0.8.1 and v0.8.2</strong>, mainly including the following updates:</p><ul><li>Enhanced error messages for simplified experience when binary expression types do not match.</li><li>Fixed abnormal error of high-order lambda functions capturing local scope closure variables.</li><li>Removed inequality comparison operations for uncommon list data types.</li></ul><p><strong>🔧 Toolchain Updates</strong></p><ul><li>Fixed an issue in the kcl import tool where input Kubernetes CRDs with the regex property conflicted with the KCL regex system library.</li><li>Fixed a syntax error in the KCL file output when the input Kubernetes CRD properties had complex default values in the kcl import tool.</li><li>Added support for setting the version of a newly created KCL module with the <code>--version</code> flag in the kcl mod init command.</li><li>Commands such as kcl run, kcl mod add, and kcl mod pull now support accessing private Git repositories.</li><li>Fixed a path error encountered when running the kcl run command on a local OCI Registry on Windows.</li></ul><p><strong>🔥 SDK Updates</strong></p><ul><li>The KCL Rust, Go, and Java SDKs have released version 0.8, primarily synchronizing with KCL syntax and semantic updates.</li><li>The KCL Python SDK has released versions 0.8.0.2 and 0.7.6, addressing the issue of outdated dependencies for <code>protobuf</code> and <code>pyyaml</code>.</li></ul><p><strong>💻 IDE Updates</strong></p><ul><li>Support for multiple quick fix repair options.</li></ul><p><img loading="lazy" alt="multiple-quick-fix" src="/assets/images/multiple-quick-fix-671571e92fd0bf529c126fa653bb9c20.png" width="1076" height="362" class="img_ev3q"></p><p><strong>🎁 API Updates</strong></p><ul><li>Added <code>ListOptions</code> API, which can read all <code>option</code> function call information in KCL projects.</li></ul><p><strong>🚢 Integration Updates</strong></p><ul><li>Crossplane KCL Function has released version 0.3.2, supporting access to non-HTTPS protocol OCI Registries and local debugging.</li></ul><p><strong>🌐 Website Updates</strong></p><ul><li>Enabled the <code>kcl-lang.dev</code> domain, allowing access to the KCL website through both <code>kcl-lang.io</code> and <code>kcl-lang.dev</code>.</li><li>Optimized website loading speed for an improved documentation experience on the KCL website.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all the community contributors over the past two weeks, listed in no particular order:</p><ul><li>Thank you to @bozaro for the contribution to the KCL Go SDK with the Go language plugin API. 🙌</li><li>Thank you to @shashank-iitbhu for enhancing the quick fix feature in the KCL IDE, adding support for multiple fix options. 🙌</li><li>Thank you to @octonawish-akcodes for the ongoing contribution to the KCL IDE, automatically monitoring kcl.mod dependencies and updating them. 🙌</li><li>Thank you to @liangyuanpeng for fixing the CLA Bot CI automatic PR locking, contributing to the kubeadm model, and supporting the version setting feature in <code>kcl mod init</code>. 🙌</li><li>Thank you to @Stefano Borrelli, @sfshumaker, @eshepelyuk, @vtomilov, @ricochet1k, @yjsnly, @markphillips100, @userxiaosi, @wilsonwang371, @steeling, @bozaro, @nizq, @reckless-huang, @folliehiyuki, @samuel-deal-tisseo, @MrGuoRanDuo, and @MattHodge for providing valuable suggestions and feedback while using KCL recently. 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/9" target="_blank" rel="noopener noreferrer">KCL v0.9.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.8.0 Release Blog]]></title>
            <link>https://kcl-lang.github.io/blog/2024-03-06-kcl-0.8.0-release</link>
            <guid>https://kcl-lang.github.io/blog/2024-03-06-kcl-0.8.0-release</guid>
            <pubDate>Wed, 06 Mar 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL team is pleased to announce that KCL v0.8.0 is now available! This release has brought three key updates to everyone: <strong>Language</strong>, <strong>Tools</strong>, and <strong>Integrations</strong>.</p><ul><li><p><em>Use KCL language, tools and IDE extensions with more complete features and fewer errors to improve code writing experience and efficiency.</em></p></li><li><p><em>More comprehensive and rich community ecosystem integration, improving operation and maintenance experience.</em></p></li><li><p><em>More comprehensive KCL third-party dependencies, easier integration with cloud-native ecosystem.</em></p></li></ul><p>KCL v0.8.0 is now available for download at <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.8.0" target="_blank" rel="noopener noreferrer">KCL v0.8.0 Release Page</a> or <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">KCL Official Website</a>.</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF). KCL improves the writing of numerous complex configurations, such as cloud-native scenarios, through its mature programming language technology and practice. It is dedicated to building better modularity, scalability, and stability around configurations, simpler logic writing, faster automation, and great built-in or API-driven integrations.</p><p>This blog will introduce the content of KCL v0.8.0 and recent developments in the KCL community to readers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="language-updates">Language Updates<a href="#language-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-grammar-and-semantics-updates">🚗 Grammar and Semantics Updates<a href="#-grammar-and-semantics-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-supports-show-hidden">KCL supports <code>show-hidden</code><a href="#kcl-supports-show-hidden" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL v0.8.0 adds support for <code>--show-hidden</code> to display private variables.</p><p>The <code>main.k</code></p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">a = {_b = 1}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Compile by <code>kcl run main.k --show-hidden</code>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">a</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">_b</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-supports-arguments-and-keyword-arguments-union">KCL supports arguments and keyword arguments union<a href="#kcl-supports-arguments-and-keyword-arguments-union" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL v0.8.0 adds support for arguments and keyword arguments union. Schema instances with arguments will union arguments during union operations.</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Person[separator]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    firstName: str = "John"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastName: str</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fullName: str = firstName + separator + lastName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x = Person(" ") {lastName = "Doe"}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">y = Person("-") {lastName = "Doe1"}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">z = x | y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The compiled result is as follows:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> John</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Doe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">fullName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> John Doe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> John</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Doe1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">fullName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> John</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Doe1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">z</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> John</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Doe1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">fullName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> John</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Doe1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-supports-scalar-yaml-stream-output">KCL supports scalar yaml stream output<a href="#kcl-supports-scalar-yaml-stream-output" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In v0.8.0, by using <code>yaml_stream</code> method, you can output the result of yaml scalar.</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x0 = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x1 = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">manifests.yaml_stream([x0, x1])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The compiled result is as follows:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-removes-the-__settings__-attribute-in-the-compiled-output">KCL removes the <code>__settings__</code> attribute in the compiled output<a href="#kcl-removes-the-__settings__-attribute-in-the-compiled-output" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In v0.8.0, the <code>__settings__</code> attribute is removed from the compiled output.</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Person:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    __settings__: {str:str} = {"output_type": "STANDALONE"}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name?: str</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age?: int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    school?: str</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a = Person{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: "a",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The compiled result is as follows.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">a</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-supports-the-key-and-value-evaluation-in-the-config-expression">KCL supports the key and value evaluation in the config expression<a href="#kcl-supports-the-key-and-value-evaluation-in-the-config-expression" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In v0.8.0, KCL supports the key and value evaluation in the config expression.</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">_data = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "a": 'foo'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "b": 'bar'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r0 = [{v = k} for k, v in _data]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r1 = [{k = v} for k, v in _data]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r2 = [{k.foo = v} for k, v in _data]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r3 = [[k] for k, v in _data]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r4 = [[k, v] for k, v in _data]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The compiled result is as follows.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">r0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">r1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">a</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">b</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">r2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">a</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">b</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">r3</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">r4</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-diagnostic-optimization">🚀 Diagnostic Optimization<a href="#-diagnostic-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL uses the <code>elif</code> keyword in the <code>if</code> block, not <code>else if</code>.</p><p>Compile the following KCL program:</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if True: a = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else if False: b = 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The diagnostic information in KCL has added suggestions for error correction:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">E1001</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: InvalidSyntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> main.k:2:6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> False: b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">      ^ </span><span class="token string" style="color:#e3116c">'else if'</span><span class="token plain"> here is invalid </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> KCL, consider using the </span><span class="token string" style="color:#e3116c">'elif'</span><span class="token plain"> keyword</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-language-writing-experience-optimization">🚀 Language writing experience optimization<a href="#-language-writing-experience-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-standard-library-adds-file-system-access-functions">KCL standard library adds file system access functions<a href="#kcl-standard-library-adds-file-system-access-functions" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL has added methods to access the file system. In v0.8.0, it supports methods such as <code>read</code>, <code>glob</code>, etc. to access the file system.</p><p>By using the <code>read</code>, you can read the contents of a file as a string.</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a = file.read("hello.txt")</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Add the following content to the <code>hello.txt</code> file:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Hello World </span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The compilation result is as follows:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">a: Hello World </span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By combining the <code>json.decode</code> method, you can easily deserialize a JSON file.</p><p>Add the following content to the <code>hello.json</code> file:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"John"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"age"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>KCL program:</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_a = json.decode(file.read("hello.json"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name = _a.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age = _a.age</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The compilation result is as follows:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> John</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>More details - <a href="https://kcl-lang.io/zh-CN/docs/reference/model/file/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/zh-CN/docs/reference/model/file/</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-compiler-supports-the-use-of-environment-variable-kcl_cache_path-to-specify-the-cache-path">KCL Compiler supports the use of environment variable <code>KCL_CACHE_PATH</code> to specify the cache path<a href="#kcl-compiler-supports-the-use-of-environment-variable-kcl_cache_path-to-specify-the-cache-path" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL Compiler will cache the generated code to the directory specified by the environment variable <code>KCL_CACHE_PATH</code>. If not specified, it will be generated to the project root directory.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-plugin-system-supports-using-golang-to-write-kcl-plugins">KCL Plugin System supports using Golang to write KCL plugins<a href="#kcl-plugin-system-supports-using-golang-to-write-kcl-plugins" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL Plugin System supports using Golang to write KCL plugins. The following is an example of using Golang to define the <code>hello</code> plugin.</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package hello_plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "kcl-lang.io/kcl-go/pkg/plugin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func init() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    plugin.RegisterPlugin(plugin.Plugin{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Name: "hello",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MethodMap: map[string]plugin.MethodSpec{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "add": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Body: func(args *plugin.MethodArgs) (*plugin.MethodResult, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    v := args.IntArg(0) + args.IntArg(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return &amp;plugin.MethodResult{V: v}, nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With the <code>hello</code> plugin, you can use the <code>add</code> method in the KCL program.</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "fmt"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "kcl-lang.io/kcl-go/pkg/kcl"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "kcl-lang.io/kcl-go/pkg/native"                // Import the native API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ "kcl-lang.io/kcl-go/pkg/plugin/hello_plugin" // Import the hello plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Note we use `native.MustRun` here instead of `kcl.MustRun`, because it needs the cgo feature.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yaml := native.MustRun("main.k", kcl.WithCode(code)).GetRawYamlResult()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt.Println(yaml)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const code = `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import kcl_plugin.hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name = "kcl"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">three = hello.add(1,2) # 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-kcl-supports-linux-arm64">😸 KCL supports linux arm64<a href="#-kcl-supports-linux-arm64" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL v0.8.0 adds support for the Linux arm64 platform in the release product.</p><p>You can find the compressed package with the suffix <code>linux-arm64</code> on the <a href="https://github.com/kcl-lang/kcl/releases" target="_blank" rel="noopener noreferrer">KCL Release Page</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-sdk--api-updates">🏄 SDK &amp; API Updates<a href="#-sdk--api-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rust-sdk">Rust SDK<a href="#rust-sdk" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL Rust SDK provides a series of APIs for compiling, validating, testing, and formatting KCL files.</p><p><a href="https://github.com/kcl-lang/lib" target="_blank" rel="noopener noreferrer">KCL Rust SDK: https://github.com/kcl-lang/lib</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="java-sdk">Java SDK<a href="#java-sdk" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL Java SDK adds syntax tree, scope, symbol, and other syntax and semantic structure definitions and related query APIs.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="go-sdk">Go SDK<a href="#go-sdk" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>KCL Doc supports output in OpenAPI format.</li><li>Go SDK add APIs for parsing.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="api-update">API Update<a href="#api-update" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>KCL API adds API for validating JSON and YAML files.</li><li>Introducing syntax and semantic analysis APIs for analyzing KCL code.</li><li>Introducing a binary artifact build API for caching compilation results.</li><li>Introducing a binary artifact execution API for directly running compiled results, avoiding redundant compilation and improving performance.</li><li>Introducing a code generation API to programmatically implement KCL code generation instead of writing complex templates.</li></ul><p>More updates can be found <a href="https://kcl-lang.io/docs/reference/xlang-api/go-api" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-other-updates-and-bug-fixes">🐞 Other Updates and Bug Fixes<a href="#-other-updates-and-bug-fixes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Fixed compilation errors caused by using the -S compilation parameter in KCL CLI.</li><li>Corrected an issue in the kcl fmt tool where an extra newline was added at the end when formatting lambda expressions.</li><li>Resolved an error in Schema Doc code completion snippets.</li><li>Fixed a recursive check error for required properties in Schema objects.</li><li>Enhanced the robustness of Schema index signature type checks.</li><li>Addressed an issue where string identifiers like “$if” were not correctly defined within Schema.</li><li>Optimized error messages for unexpected tokens in syntax errors.</li><li>Rectified variable calculations in unexpected dictionary comprehension expressions where the key and loop variable were the same.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ide--toolchain-updates">IDE &amp; Toolchain Updates<a href="#ide--toolchain-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-updates">IDE Updates<a href="#ide-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ide-semantic-level-highlighting-enhancement">IDE semantic-level highlighting enhancement<a href="#ide-semantic-level-highlighting-enhancement" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL IDE previously only supported KCL syntax highlighting, as shown in the figure below:</p><p><img loading="lazy" alt="old-ide" src="/assets/images/old-ide-835ff47b36b5e23f304f8092c3afd989.png" width="435" height="151" class="img_ev3q"></p><p>We have gradually introduced a new KCL semantic model in the past year. With the support of the new semantic model, KCL IDE now supports semantic-level highlighting. Code that is semantically related will be highlighted in the same way.</p><p><img loading="lazy" alt="new-ide" src="/assets/images/new-ide-a62fcf4ef6b9d078f77a7e15af161e17.png" width="287" height="145" class="img_ev3q"></p><p>For more information about the KCL semantic model, see:
<a href="https://kcl-lang.io/zh-CN/blog/2023-12-09-kcl-new-semantic-model" target="_blank" rel="noopener noreferrer">Unlocking Advanced Code Intelligence with the KCL Semantic Model</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ide-supports-completion-of-builtin-methods">IDE supports completion of builtin methods<a href="#ide-supports-completion-of-builtin-methods" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL IDE supports completion of builtin methods, as shown in the figure below:</p><p><img loading="lazy" alt="builtin-completion" src="/assets/images/builtin-ide-0e090b72218a4258d2a1831527920d08.gif" width="1218" height="456" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ide-supports-quick-fix-for-variable-reference-errors">IDE supports quick fix for variable reference errors<a href="#ide-supports-quick-fix-for-variable-reference-errors" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL IDE supports quick fix for variable reference errors, as shown in the figure below:</p><p><img loading="lazy" alt="quick-fix" src="/assets/images/quick-fix-960989191f14be672e644c4fa97c4522.gif" width="1218" height="496" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ide-supports-incremental-parsing-and-asynchronous-compilation">IDE supports incremental parsing and asynchronous compilation<a href="#ide-supports-incremental-parsing-and-asynchronous-compilation" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>IDE supports incremental parsing and asynchronous compilation through the new semantic model, which improves the compilation speed and writing experience.</p><p>More details: <a href="https://kcl-lang.io/zh-CN/blog/2023-12-09-kcl-new-semantic-model" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/zh-CN/blog/2023-12-09-kcl-new-semantic-model</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ide-lsp-bug-fixes">IDE LSP bug fixes<a href="#ide-lsp-bug-fixes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>Fixed an issue where string interpolation variables in assert statements couldn’t navigate.</li><li>Corrected an exception-triggering issue in function autocompletion within strings.</li><li>Resolved an autocompletion error when a comment followed a string.</li><li>Fixed an issue where internal property symbols in schemas couldn’t navigate.</li><li>Addressed an exception in alias semantic checks and autocompletion for import statements.</li><li>Rectified autocompletion issues in check expressions within schemas.</li><li>Fixed autocompletion errors in nested schema definitions.</li><li>Resolved missing hover information for certain elements.</li><li>Ensured consistent symbol types for autocompletion across different syntaxes.</li><li>Distinguished between schema type and instance autocompletion symbols.</li><li>Standardized schema comment documentation autocompletion format.</li><li>Fixed issues where symbols within configuration block if statements couldn’t navigate or autocompletion was affected.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vet-tool-updates">Vet Tool Updates<a href="#vet-tool-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In v0.8.0 release, we have optimized the diagnostic of the KCL verification tool. In the work of using the KCL verification tool to verify json/yaml files, the abnormal location of the json file will be accurately located.</p><p>Take <code>hello.json</code> as an example, we will verify the content of the json file through the following <code>main.k</code> file.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"age"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"message"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"This is Alice"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>main.k</code></p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema User:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: str</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age: int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message?: str</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can verify the content of the json file through the following command.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl vet hello.json main.k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can see the error location in the json file:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">E2G22</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: TypeError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> test.json:2:5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     </span><span class="token string" style="color:#e3116c">"name"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     ^ expected str, got int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> main.k:2:5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     name: str</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     ^ variable is defined here, its </span><span class="token builtin class-name">type</span><span class="token plain"> is str, but got int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-cli-supports-git-repository-as-a-compilation-entry">KCL cli supports git repository as a compilation entry<a href="#kcl-cli-supports-git-repository-as-a-compilation-entry" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>By using the following command, you can use the KCL git repository as a compilation entry.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl run </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">git url</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-mod-graph-supports-output-kcl-package-dependency-graph">kcl mod graph supports output KCL package dependency graph<a href="#kcl-mod-graph-supports-output-kcl-package-dependency-graph" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>You can use command <code>kcl mod graph</code> to output the KCL package dependency graph.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-package-management">KCL Package Management<a href="#kcl-package-management" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-package-management-supports-adding-git-dependencies-through-commit">KCL Package Management supports adding git dependencies through commit<a href="#kcl-package-management-supports-adding-git-dependencies-through-commit" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL Package Management adds the ability to add git repo dependencies through commit. For example, using <a href="https://github.com/KusionStack/catalog" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/catalog</a>，add commit <code>a29e3db</code> as a dependency. You can add it through editing the kcl.mod file or directly through the command line.</p><p>Edit the kcl.mod file as follows:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">catalog = { git = "https://github.com/KusionStack/catalog.git", commit = "a29e3db" }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or add it through the command line:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> --git https://github.com/KusionStack/catalog.git --commit a29e3db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-package-management-supports-the-dependency-name-with--">KCL Package Management supports the dependency name with <code>-</code><a href="#kcl-package-management-supports-the-dependency-name-with--" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL Package Management supports the dependency name with <code>-</code>. For example, you can add the <code>set-annotation</code> as a dependency through the following command:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> set-annotation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the KCL program, you can reference it through <code>set_annotation</code>.</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import set_annotation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-import-tool">KCL Import Tool<a href="#kcl-import-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Support mapping OpenAPI multiplyOf specification to KCL multiplyof function for validation.</li><li>Support outputting multiple KCL files from YAML Stream-formatted Kubernetes CRD files.</li><li>Support generating validation expressions for OpenAPI allOf keyword.</li><li>Support generating validation expressions for KCL array and dictionary types using all/any.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community-integrations--extensions-updates">Community Integrations &amp; Extensions Updates<a href="#community-integrations--extensions-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flux-kcl-controller-release">Flux KCL Controller Release<a href="#flux-kcl-controller-release" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>We have developed <a href="https://github.com/kcl-lang/flux-kcl-controller" target="_blank" rel="noopener noreferrer">Flux KCL Controller</a> to supports KCL integration with Flux. After installing Flux KCL Controller in the cluster, you can use the following resources to achieve continuous integration of KCL git repositories through FluxCD.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> source.toolkit.fluxcd.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GitRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 30s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># The URL of the git repository</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/awesome</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kusion/kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev.fluxcd/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">sourceRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GitRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>More details: <a href="https://kcl-lang.io/zh-CN/blog/2024-02-01-biweekly-newsletter/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/zh-CN/blog/2024-02-01-biweekly-newsletter/</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="codeql-kcl-tool">CodeQL KCL Tool<a href="#codeql-kcl-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>We finished CodeQL KCL dbschema definition and data extraction for KCL syntax and semantics. We can use CodeQL to query KCL code for static analysis and scanning to improve code security.</p><p>More details: <a href="https://github.com/kcl-lang/codeql-kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/codeql-kcl</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-modules-update">KCL Modules Update<a href="#kcl-modules-update" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>There are 303 KCL modules in the KCL v0.8.0 release on <a href="https://artifacthub.io" target="_blank" rel="noopener noreferrer">https://artifacthub.io</a>, mainly including new models related to Crossplane Provider and libraries related to JSON merge operations.</p><ul><li><p>KCL JSON Patch Library: <a href="https://artifacthub.io/packages/kcl/kcl-module/jsonpatch" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/kcl/kcl-module/jsonpatch</a></p></li><li><p>KCL JSON Merge Patch Library: <a href="https://artifacthub.io/packages/kcl/kcl-module/json_merge_patch" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/kcl/kcl-module/json_merge_patch</a></p></li><li><p>KCL Kubernetes Strategy Merge Patch Library: <a href="https://artifacthub.io/packages/kcl/kcl-module/strategic_merge_patch" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/kcl/kcl-module/strategic_merge_patch</a></p></li><li><p>KCL Crossplane and Crossplane Provider Series Models: <a href="https://artifacthub.io/packages/search?org=kcl&amp;sort=relevance&amp;page=1&amp;ts_query_web=crossplane" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/search?org=kcl&amp;sort=relevance&amp;page=1&amp;ts_query_web=crossplane</a></p></li><li><p>Kubernetes 1.29 version: <a href="https://artifacthub.io/packages/kcl/kcl-module/k8s/1.29.0" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/kcl/kcl-module/k8s/1.29.0</a></p></li><li><p>New Podinfo application configuration model, supports setting external dynamic parameters such as replicas, etc., can render Kubernetes resource configuration directly through a command, and can modify and customize resource templates based on this model.</p></li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl run oci://ghcr.io/kcl-lang/podinfo -D </span><span class="token assign-left variable" style="color:#36acaa">replicas</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>JSON Schema library released version 0.0.4, fixed type definition errors. You can execute the following command to update or add dependencies.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> jsonschema:0.0.4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-updates">Other Updates<a href="#other-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The full update and bugfix List of KCL v0.8.0 can be found at: <a href="https://github.com/kcl-lang/kcl/compare/v0.7.0...v0.8.0" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/compare/v0.7.0...v0.8.0</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-updates">Document Updates<a href="#document-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The versioning semantic option is added to the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a>. Currently, v0.4.x, v0.5.x, v0.6.x, v0.7.0 and v0.8.0 versions are supported.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community-updates">Community Updates<a href="#community-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-lfx-project-kickoff">KCL LFX Project KickOff<a href="#kcl-lfx-project-kickoff" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Congratulations to @AkashKumar7902, @octonawish-akcodes, @shashank-iitbhu for being selected for the CNCF KCL LFX project, and thanks to @Vanshikav123, @Amit Pandey for their active participation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-on-crossplane-function-market">KCL on Crossplane Function Market<a href="#kcl-on-crossplane-function-market" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>After the release of the combination function in Crossplane v1.14, the scope of using Crossplane to build cloud-native platforms has been rapidly expanded. The KCL team has followed up and proactively built a reusable function. The entire Crossplane ecosystem can now leverage the high-level experience and capabilities provided by KCL to build its own cloud-native platform.</p><p>More details: <a href="https://blog.crossplane.io/function-kcl/" target="_blank" rel="noopener noreferrer">https://blog.crossplane.io/function-kcl/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thanks to the community friends for their contributions to KCL v0.8.0. The following list is in no particular order:</p><ul><li>Thanks to @jakezhu9 for the continuous contribution to the kcl import tool 🤝</li><li>Thanks to @octonawish-akcodes for the continuous contributions to KCL code cleanup and FAQ documentation 🙌</li><li>Thanks to @satyazzz123 for contributing to the support of reading environment variables in KRM KCL 🙌</li><li>Thanks to @AkashKumar7902 for the contributions to the package management tool feature in KCL 🙌</li><li>Thanks to @UtkarshUmre for the contribution to the KCL linux-arm64 build CI 🙌</li><li>Thanks to @octonawish-akcodes and @d4v1d03 for the continuous contributions to KCL FAQ documentation and KCL IDE feature 🙌</li><li>Thanks to @octonawish-akcodes for the contribution to the Ansible KCL Module</li><li>Thanks to @AkashKumar7902 and @Vanshikav123 for the contributions to the package management tool feature in KCL 🙌</li><li>Thanks to @StevenLeiZhang for the contributions to KCL documentation and KCL plugin</li><li>Thanks to @patrycju, @Callum Lyall, @Matt Gowie, @ShiroDN, @FLAGLORD, @YiuTerran, @flyinox, @steeling, @Anoop, @Even Solberg, @Phillip Neumann, @Naxe, @rozaliev, @CloudZero357, @martingreber, @az, @Art3mK, @Erick, @TheChinBot, @Evgeny Shepelyuk, @yonas, @vtomilov, @Fdall, @bozaro, @starkers, and @MrGuoRanDuo for their valuable suggestions and feedback during the iteration process of KCL v0.8 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We expect to release KCL v0.9.0 in May 2024. For more details, please refer to KCL 2024 Roadmap and KCL v0.9.0 Milestone. If you have more ideas and needs, please feel free to raise Issues or Discussions in the KCL Github repository, and welcome to join our community for discussion 🙌 🙌 🙌</p><ul><li>KCL 2024 Roadmap: <a href="https://github.com/kcl-lang/kcl/issues/882" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/882</a></li><li>KCL v0.9.0 Milestone: <a href="https://github.com/kcl-lang/kcl/milestone/9" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/milestone/9</a></li><li>KCL GitHub Issues: <a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues</a></li><li>KCL GitHub Discussion: <a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">https://github.com/orgs/kcl-lang/discussions</a></li><li>KCL Community: <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information, see <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL FAQ</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/" target="_blank" rel="noopener noreferrer">KusionStack Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
        </item>
        <item>
            <title><![CDATA[Empowering Cloud-Native Platforms: The Synergy of KCL and Crossplane]]></title>
            <link>https://kcl-lang.github.io/blog/2024-03-04-crossplane-marketplace-kcl</link>
            <guid>https://kcl-lang.github.io/blog/2024-03-04-crossplane-marketplace-kcl</guid>
            <pubDate>Mon, 04 Mar 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Content sourced from the original Crossplane official blog post//blog.crossplane.io/function-kcl]]></description>
            <content:encoded><![CDATA[<blockquote><p><em>Content sourced from the original Crossplane official blog post: <a href="https://blog.crossplane.io/function-kcl" target="_blank" rel="noopener noreferrer">https://blog.crossplane.io/function-kcl</a></em></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p><strong>Since the release of the beta version of composite functions in Crossplane v1.14</strong>, the potential for building cloud-native platforms using Crossplane has been rapidly expanding. The KCL team promptly followed up and actively built a reusable function. <strong>The entire Crossplane ecosystem can now utilize the high-level experience and capabilities provided by KCL to build its own cloud-native platform</strong>.</p><p>Additionally, Crossplane announced that the KCL function has become the first third-party function component to be released to the Upbound Marketplace, available at <a href="https://marketplace.upbound.io/providers/crossplane-contrib/function-kcl" target="_blank" rel="noopener noreferrer">https://marketplace.upbound.io/providers/crossplane-contrib/function-kcl</a>. The source code can be found at <a href="https://github.com/crossplane-contrib/function-kcl" target="_blank" rel="noopener noreferrer">https://github.com/crossplane-contrib/function-kcl</a>, and contributions and feedback are welcome.</p><p>You can install the function-kcl with the following command and start using it across the entire Crossplane control plane:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">crossplane&nbsp;xpkg&nbsp;</span><span class="token function" style="color:#d73a49">install</span><span class="token plain">&nbsp;</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain">&nbsp;xpkg.upbound.io/crossplane-contrib/function-kcl:v0.2.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>The Crossplane team and community are thankful for the KCL team's significant contribution, and its substantial enhancement to the evolving Functions for Crossplane ecosystem!</strong></p><p><img loading="lazy" alt="crossplane-announcing" src="/assets/images/crossplane-announcing-c179962aa966b848c6fa8edb319cbd19.png" width="982" height="312" class="img_ev3q"></p><p>Crossplane, along with its composite model, allows developers to create higher-level abstractions that encapsulate and combine various types of cloud resources across different providers and services. Rendering these abstractions using composite functions can effectively enhance the template functionality of various provider resources while reducing the amount of YAML code required.</p><p>Combining KCL with Composition Functions offers several benefits:</p><ul><li><strong>Simplification of Complex Configurations</strong>: KCL provides a more concise syntax and structure as a DSL, reducing the complexity of configurations. When combined with Crossplane’s composite resources, you can create more intuitive and easy-to-understand configuration templates with loop and condition features, simplifying the definition and maintenance of resources instead of duplicate YAMLs.</li><li><strong>Reusability and Modularity</strong>: KCL supports modularity and code reuse through OCI Registry, which means you can create reusable configuration components. Combined with Crossplane, this promotes the modularity of composite resources, increases the reuse of configurations, and reduces errors.</li><li><strong>Automation and Policy-Driven</strong>: You can use KCL’s powerful features to write policies and constraints that, combined with Crossplane’s declarative resource management, can be automatically enforced, ensuring compliance within the cloud environment.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>There are two ways to combine KCL and Crossplane:</p><ul><li>One involves using KCL to write Crossplane composite functions and install them for use in a cluster, still using YAML to define the schema and input required by the app team. KCL is used to write rendering logic to Crossplane Managed Resource to interface with different cloud platforms or Kubernetes clusters. <strong>Note: This approach can install KCL functions for use in the cluster and also use the crossplane beta render command to complete Managed Resource rendering directly on the client.</strong></li></ul><p><img loading="lazy" alt="crossplane-kcl-func" src="/assets/images/crossplane-kcl-func-a14565483cfe0ca637e854df10f69dec.png" width="1548" height="1116" class="img_ev3q"></p><ul><li>The other method involves using KCL to entirely provide abstractions for application developers on the client side and generating Crossplane managed resources to deploy to a cluster, providing a unified programmable access layer for Kubernetes. Specific usage defines the schema input required by the app team using KCL Schema and writes the logic to render it to Crossplane Managed Resource to interface with different cloud platforms or Kubernetes clusters.</li></ul><p><img loading="lazy" alt="kcl-on-crossplane" src="/assets/images/kcl-on-crossplane-61f5204ee8b003e99a5f1246c8d72bd5.png" width="1546" height="1116" class="img_ev3q"></p><p><strong>For detailed instructions on both approaches, please refer to the Crossplane official blog content: <a href="https://blog.crossplane.io/function-kcl" target="_blank" rel="noopener noreferrer">https://blog.crossplane.io/function-kcl</a></strong></p><p><img loading="lazy" alt="crossplane-kcl-blog" src="/assets/images/crossplane-kcl-blog-c153cc8069d7edf95509a93112e87926.png" width="1158" height="1038" class="img_ev3q"></p><p>Both of these methods require a Registry to facilitate the work. The final choice between them may depend on your operational habits and environmental costs. Regardless of the chosen method, <strong>we recommend maintaining KCL code in Git for better GitOps implementation and better IDE experience and reusable modules</strong>, such as using the Crossplane AWS Module: <a href="https://github.com/kcl-lang/modules/tree/main/crossplane-provider-aws" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/modules/tree/main/crossplane-provider-aws</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The function-kcl project is now donated to the Crossplane community, and we encourage the entire community to test it and try using KCL (the latest advanced language experience provided by Crossplane Functions) to build a cloud-native control plane. We welcome contributions and feedback from the community on the GitHub repository. Let us know your thoughts! <a href="https://github.com/crossplane-contrib/function-kcl" target="_blank" rel="noopener noreferrer">https://github.com/crossplane-contrib/function-kcl</a></p><p>For more resources, please refer to:</p><ul><li>KCL Website: <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/</a></li><li>KusionStack Website: <a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">https://kusionstack.io/</a></li><li>KCL v0.9.0 Milestone: <a href="https://github.com/kcl-lang/kcl/milestone/9" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/milestone/9</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Crossplane</category>
        </item>
        <item>
            <title><![CDATA[KCL Newsletter (2024.02.02 - 2024.02.22)]]></title>
            <link>https://kcl-lang.github.io/blog/2024-02-22-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2024-02-22-newsletter</guid>
            <pubDate>Thu, 22 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations and polices, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest news, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thanks to to all contributors for their outstanding work over the past twenty days (2024.02.02 - 2024.02.22). Here is an overview of the key content:</p><p><strong>📦 Module Updates</strong></p><p>The JSON Schema module 0.0.4 has released, fixing type definition errors. You can update or add dependencies by running the following command:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> jsonschema:0.0.4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>🏄 Language Updates</strong></p><p>KCL has released preview version 0.8.0, mainly including the following updates:</p><ul><li>Added the file system library for reading KCL module information and system files, including the <code>read</code>, <code>glob</code>, <code>workdir</code>, and <code>modpath</code> functions. See more details in this <a href="https://github.com/kcl-lang/kcl/issues/1049" target="_blank" rel="noopener noreferrer">issue</a></li><li>Optimized syntax error messages for unexpected tokens.</li><li>Removed output for unexpected internal built-in type attributes in schema objects.</li><li>Fixed variable calculation in unexpected dictionary generation expressions where the key is the same as the loop variable.</li><li>Fixed errors in defining string identifiers within schemas, such as <code>"$if"</code>.</li></ul><p><strong>🔧 Toolchain Updates</strong></p><ul><li><code>kcl run</code> supports using the -H parameter to output hidden fields starting with <code>_</code>.</li><li><code>kcl run</code> supports running remote Git repository code directly.</li><li>Introduce the <code>kcl mod graph</code> subcommand used to output module dependency graphs.</li><li>Fixed formatting errors when there is an if statement within an else block.</li></ul><p><strong>💻 IDE Updates</strong></p><ul><li>Enhanced autocompletion and hover documentation for built-in functions and system libraries</li><li>Fixed issues with navigating and autocompleting if statements symbols within configuration blocks</li><li>Added quick fix feature for variable reference errors</li></ul><p><strong>🎁 API Updates</strong></p><ul><li>The <code>OverrideFile</code> API has added path for querying and modifying configurations, such as <code>a["b"].c</code></li><li>The <code>Run</code> API has added the <code>WithShowHidden</code> and the <code>WithTypePath</code> flags.</li></ul><p><strong>🚀 Plugin System Updates</strong></p><p>In addition to using Python for KCL plugin functions, it now supports using Go to write plugin functions for KCL, which is very simple to use.</p><ul><li>Define a plugin (using a hello plugin containing the add function as an example)</li></ul><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> hello_plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"kcl-lang.io/kcl-go/pkg/plugin"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    plugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RegisterPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Plugin</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"hello"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MethodMap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">plugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MethodSpec</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">"add"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Body</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">plugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MethodArgs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">plugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MethodResult</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    v </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IntArg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IntArg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">plugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MethodResult</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">V</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Use the plugin</li></ul><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"kcl-lang.io/kcl-go/pkg/kcl"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"kcl-lang.io/kcl-go/pkg/native"</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// Import the native API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl-lang.io/kcl-go/pkg/plugin/hello_plugin"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Import the hello plugin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Note we use `native.MustRun` here instead of `kcl.MustRun`, because it needs the cgo feature.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yaml </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> native</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MustRun</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"main.k"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithCode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetRawYamlResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">yaml</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">import kcl_plugin.hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">name = "kcl"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">three = hello.add(1,2) # 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>🚢 Integration Updates</strong></p><ul><li>Released initial version of Ansible KCL module, supporting basic execution of KCL code, with other functionalities being improved</li><li>Optimized Git Source functionality for KCL FluxCD Controller, with OCI Source functionality in progress</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @octonawish-akcodes and @d4v1d03 for their continuous contributions to KCL FAQ documentation and KCL IDE functionality 🙌</li><li>Thanks to @octonawish-akcodes for the contribution to the Ansible KCL Module</li><li>Thanks to @AkashKumar7902 and @Vanshikav123 for the contribution to the KCL package management tool functionality 🙌</li><li>Thanks to @StevenLeiZhang for the contribution to KCL documentation and KCL plugins</li><li>Thanks to @TheChinBot, @Evgeny Shepelyuk, @yonas, @steeling, @vtomilov, @Fdall, @CloudZero357, @bozaro, @starkers, @MrGuoRanDuo and @FLAGLORD, among others, for their valuable feedback and suggestions while using KCL recently. 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community. See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/8" target="_blank" rel="noopener noreferrer">KCL v0.8.0 Milestone</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/9" target="_blank" rel="noopener noreferrer">KCL v0.9.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Newsletter</category>
        </item>
        <item>
            <title><![CDATA[2024 LFX Mentorship Internship Launch:KCL Open Source Community Welcomes Your Participation!!!]]></title>
            <link>https://kcl-lang.github.io/blog/2024-02-05-lfs-guide</link>
            <guid>https://kcl-lang.github.io/blog/2024-02-05-lfs-guide</guid>
            <pubDate>Mon, 05 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><ul><li><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></li><li><strong><em>KCL Github Repo: <a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang</a></em></strong></li></ul><p>For those interested in cloud-native, platform engineering,compiler, package management tools, and IDEs, we invite you to apply for the 2024 Spring Linux Foundation LFX Mentorship project. You can earn a minimum of $3000 for completing the project! Apply now!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lfx-mentorship-project">LFX Mentorship Project<a href="#lfx-mentorship-project" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We have three Mentorship projects, covering package management tools, compiler, and IDEs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-add-version-management-for-kcl-package-management-tool">1. Add version management for KCL package management tool<a href="#1-add-version-management-for-kcl-package-management-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL package management tool (kpm) currently supports uploading, downloading, and distributing KCL packages, but does not support version management of KCL packages. In the process of using kpm to add third-party dependencies to KCL package, kpm will automatically download all third-party dependencies based on the dependency relationship. If different versions of the same package appear during the download, the corresponding selection strategy should be provided according to the package version management policy to select the appropriate version for download.</p><p>In this project, you need to add the package version management part of kpm to ensure that kpm can select the appropriate third-party dependencies.</p><ul><li>More details: <a href="https://github.com/kcl-lang/kpm/issues/246" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/issues/246</a></li><li>Pretest: <a href="https://github.com/kcl-lang/kpm/issues/263" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/issues/263</a></li><li>Apply Link: <a href="https://mentorship.lfx.linuxfoundation.org/project/06b5baee-bdcd-4f5e-9a1a-454191445a01" target="_blank" rel="noopener noreferrer">https://mentorship.lfx.linuxfoundation.org/project/06b5baee-bdcd-4f5e-9a1a-454191445a01</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-kcl-ide-quick-fix">2. KCL IDE Quick Fix<a href="#2-kcl-ide-quick-fix" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>For KCL IDE, develop a quick fix feature. When a KCL program has a compilation error in the IDE, the Quick Fix feature can provide quick problem fixes at the location of the KCL program error based on the user's error type.</p><p>In this project, you need to develop different Quick Fix functions for IDE based on the error type of the KCL program.</p><ul><li>More Details: <a href="https://github.com/kcl-lang/kcl/issues/997" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/997</a></li><li>Pretest: <a href="https://github.com/kcl-lang/kcl/issues/1020" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/1020</a></li><li>Apply Link: <a href="https://mentorship.lfx.linuxfoundation.org/project/391edda7-239d-4471-a36a-c03c24e024cb" target="_blank" rel="noopener noreferrer">https://mentorship.lfx.linuxfoundation.org/project/391edda7-239d-4471-a36a-c03c24e024cb</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-kcl-ide-automatically-loads-kcl-third-party-dependencies">3. KCL IDE automatically loads KCL third-party dependencies<a href="#3-kcl-ide-automatically-loads-kcl-third-party-dependencies" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL IDE is the most direct interface for KCL users. It often fails to find third-party dependencies. Currently, KCL's package management tool kpm has provided the ability to automatically download and update third-party dependencies, but users still need to update third-party libraries through the command line, which affects the user's development experience. Therefore, KCL IDE needs to be integrated with KCL's package management tool kpm to provide the ability to automatically download and update third-party libraries for the IDE.</p><p>In this project, you need to use the ability of kpm to implement common functions in the IDE, such as automatically downloading third-party dependencies, automatically updating third-party dependencies when kcl.mod changes, and Quick Fix triggering third-party dependencies automatic download, to ensure that KCL IDE can provide a more complete development experience with the support of package management tools.</p><ul><li>More Details: <a href="https://github.com/kcl-lang/kcl/issues/998" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/998</a></li><li>Pretest: <a href="https://github.com/kcl-lang/kcl/issues/1031" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/1031</a></li><li>Apply Link: <a href="https://mentorship.lfx.linuxfoundation.org/project/59d5fb6c-153d-4e46-9d1f-2948641b0471" target="_blank" rel="noopener noreferrer">https://mentorship.lfx.linuxfoundation.org/project/59d5fb6c-153d-4e46-9d1f-2948641b0471</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-how-to-apply">4. How to Apply<a href="#4-how-to-apply" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Apply for your favorite project on the LFX mentorship platform. You can visit the LFX mentorship platform through the following link. The application starts on January 29, 2024, and ends on February 13, 2024.</p><ul><li><a href="https://mentorship.lfx.linuxfoundation.org/" target="_blank" rel="noopener noreferrer">https://mentorship.lfx.linuxfoundation.org/</a></li></ul><p>If you have any questions, please feel free to get more information directly from the corresponding issue or discuss with us:</p><ul><li><p>KCL package version management <a href="https://github.com/kcl-lang/kpm/issues/246" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/issues/246</a></p></li><li><p>KCL Quick Fix <a href="https://github.com/kcl-lang/kcl/issues/997" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/997</a></p></li><li><p>KCL IDE dependency update <a href="https://github.com/kcl-lang/kcl/issues/998" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/998</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-project-timeline">5. Project Timeline<a href="#5-project-timeline" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><table><thead><tr><th>Event</th><th>Start Date</th><th>End Date</th></tr></thead><tbody><tr><td>Mentee Applications Open</td><td>January 29</td><td>February 13, 5:00 PM PDT</td></tr><tr><td>Application Review/Admission Decisions/HR Paperwork</td><td>February 13</td><td>February 27, 5:00 PM PDT</td></tr><tr><td>Mentorship Program Begins with Initial Work Assignments</td><td>March 4 (Week 1)</td><td></td></tr><tr><td>Midterm Mentee Evaluations / First Stipend Payments</td><td>April 10 (Week 6)</td><td></td></tr><tr><td>Final Mentee Evaluations Due / Mentee Feedback Submission Due / Second and Final Stipend Payment Approvals</td><td>May 22, 5:00 PM PST (Week 12)</td><td></td></tr><tr><td>Last Day of Term</td><td>May 31</td><td></td></tr></tbody></table>]]></content:encoded>
            <category>KCL</category>
            <category>LFX-Mentorship</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2024.01.19 - 2024.02.01) | KCL v0.7.5 Released and Flux Integration]]></title>
            <link>https://kcl-lang.github.io/blog/2024-02-01-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2024-02-01-biweekly-newsletter</guid>
            <pubDate>Thu, 01 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thanks to to all contributors for their outstanding work over the past two weeks (01.19 2024 - 02.01 2024). Here is an overview of the key content:</p><p><strong>📦 Module Updates</strong></p><ul><li>Added the <code>podinfo</code> application configuration module, supporting the setting of external dynamic parameters such as <code>replicas</code>. You can directly render Kubernetes manifests with a single command, and customize KCL templates based on this module.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl run oci://ghcr.io/kcl-lang/podinfo -D </span><span class="token assign-left variable" style="color:#36acaa">replicas</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>🏄 Language Updates</strong></p><ul><li>Improved error messages when object attribute are not found at compile time.</li><li>Fixed the recursive check error for mandatory attribute of schema objects.</li><li>Enhanced the robustness of type-checking for schema index signatures.</li></ul><p><strong>🔧 Toolchain Updates</strong></p><ul><li><strong>Documentation Tools Updates</strong>: Added support for HTML escaping of multiline strings in generated Markdown documentation.</li><li><strong>CodeQL KCL Tools</strong>: Preliminary support for the CodeQL KCL dbschema definition and data extraction from KCL syntax and semantics, enabling static analysis and scanning of KCL code through CodeQL queries to improve code security.</li></ul><p><strong>💻 IDE Updates</strong></p><ul><li><p><strong>Semantic Highlighting</strong></p><ul><li>KCL IDE optimized semantic highlighting.</li></ul></li><li><p><strong>Enhancement for Completion Features</strong></p><ul><li>Fixed the issue with erroneous completions after strings followed by comments.</li><li>Fixed the issue where internal property symbols in Schema could not be navigated.</li></ul></li></ul><p><strong>🎁 API Updates</strong></p><ul><li>Added syntax and semantic analysis APIs for analyzing KCL code.</li><li>Added APIs to build binary artifacts for caching compilation results.</li><li>Added APIs to run binary artifacts directly, avoiding recompilation and improving performance.</li><li>Added code generation APIs to programmatically implement KCL code generation instead of writing complex templates.</li></ul><p><strong>🚀 SDK Updates</strong></p><ul><li>Updated KCL Go SDK to version 0.7.5.</li><li>Updated KCL Python SDK to version 0.7.5.</li><li>Updated KCL Rust SDK to version 0.7.5.</li><li>Added definitions for syntax trees, scopes, symbols, and other syntactic and semantic structures to the KCL Java SDK, along with related query APIs.</li></ul><p>For more details, visit: <a href="https://github.com/kcl-lang/lib" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/lib</a></p><p><strong>🚢 Integration Updates</strong></p><ul><li>In addition to the ArgoCD KCL plugin, KCL now supports GitOps for KCL configurations stored in Git/OCI repositories using the KCL Flux Controller. For more details, visit <a href="https://github.com/kcl-lang/flux-kcl-controller" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/flux-kcl-controller</a>. Contributions are welcome 👏.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @octonawish-akcodes for contributions to KCL code cleanup and FAQ documents. 🙌</li><li>Thanks to @satyazzz123 for contributions to the KRM KCL's support for reading environment variables. 🙌</li><li>Thanks to @AkashKumar7902 for contributions to the KCL package management tool functionality. 🙌</li><li>Thanks to @UtkarshUmre for contributions to the KCL linux-arm64 build CI scripts. 🙌</li><li>Thanks to @steeling, @rozaliev, @CloudZero357, @martingreber, @az, @Art3mK, @AdmiralNemo, and @Erick for valuable suggestions and feedback during the past two weeks of using KCL. 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flux-kcl-integration">Flux KCL Integration<a href="#flux-kcl-integration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Using KCL together with GitOps tools like Flux has the following benefits:</p><ul><li>The abstraction and programmability capabilities of KCL can help simplify complex Kubernetes deployment configurations, reducing the error rate of manually writing YAML files. It allows for configuration constraint checks at compile-time, making it easier to detect errors. Additionally, it eliminates redundant configuration templates, improves the scalability of configurations across multiple environments and tenants, and enhances configurability and maintainability.</li><li>KCL allows developers to define the required resources for an application in a declarative manner. Combining KCL with Flux enables better implementation of Infrastructure as Code (IaC), improving deployment efficiency and simplifying application configuration management.</li><li>With Flux, developers and operations teams can manage the deployment of applications by separately modifying application and configuration code. The Flux Controller automatically synchronizes changes to the configuration, enabling continuous deployment and ensuring consistency. In case of issues, quick rollbacks can be achieved.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflow">Workflow<a href="#workflow" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In this example, we use a Python Flask application and GitHub Actions as a CI example. The Flux KCL Controller is deployed in the cluster as a CD example. KCL is used to define the Kubernetes resources that need to be deployed.</p><blockquote><p>Note: You can use any containerized application and different CI/CD systems like GitLab CI, Jenkins CI, or ArgoCD in this scenario.</p></blockquote><p>We divide the Python Flask application code and configuration code into two repositories to separate the concerns of different roles such as developers and operations teams.</p><ul><li>Business code repository: <a href="https://github.com/kcl-lang/flask-demo" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/flask-demo</a></li><li>Manifests repository: <a href="https://github.com/kcl-lang/flask-demo-kcl-manifests" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/flask-demo-kcl-manifests</a></li></ul><p>The overall workflow is as follows:</p><ol><li>Pull the application code from GitHub.</li><li>Develop the application code and commit it to the GitHub repository.</li><li>Trigger GitHub Actions to compile the application code, generate a container image, and push the container image to the Docker Hub container registry.</li><li>Trigger GitHub Actions to update the Kubernetes manifest deployment files defined by KCL based on the version of the container image in the docker.io container registry.</li><li>The Flux KCL Controller retrieves the changes to the Kubernetes manifest defined by KCL and updates the deployment to the Kubernetes cluster.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="specific-steps">Specific Steps<a href="#specific-steps" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-prepare-a-kubernetes-cluster">1. Prepare a Kubernetes Cluster<a href="#1-prepare-a-kubernetes-cluster" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><ul><li>Install <a href="https://github.com/k3d-io/k3d" target="_blank" rel="noopener noreferrer">K3d</a> and create a cluster:</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">k3d cluster create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: You can use other methods to create your own Kubernetes cluster, such as kind, minikube, etc.</p></blockquote><ul><li>Install kubectl</li><li>Install kustomize</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-install-flux-kcl-controller">2. Install Flux KCL Controller<a href="#2-install-flux-kcl-controller" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><p><img loading="lazy" alt="flux-kcl-workflow" src="/assets/images/flux-kcl-workflow-2034d3f8dd5679d0a74f94d8067e8110.png" width="1498" height="454" class="img_ev3q"></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/flux-kcl-controller.git </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> flux-kcl-controller </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-configure-the-git-repository-for-continuous-delivery">3. Configure the Git Repository for Continuous Delivery<a href="#3-configure-the-git-repository-for-continuous-delivery" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><p>Define the <code>GitRepository</code> and <code>KCLRun</code> objects in the <code>gitrepo.yaml</code> file to configure the Git repository to be monitored for continuous delivery and additional parameters required for running KCL configurations.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> source.toolkit.fluxcd.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GitRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10s </span><span class="token comment" style="color:#999988;font-style:italic"># Check the repository every 10s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lang/flask</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manifests.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main </span><span class="token comment" style="color:#999988;font-style:italic"># Monitor the main branch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev.fluxcd/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">git</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">sourceRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GitRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Deploy the objects to the cluster using the command <code>kubectl apply -f gitrepo.yaml</code>.</p><blockquote><p>If you are using a private repository, you need to configure private repository access credentials using private key credentials. Refer to here for more details.</p></blockquote><blockquote><p>Note: You can also use <a href="https://fluxcd.io/flux/components/source/ocirepositories/" target="_blank" rel="noopener noreferrer">OCIRepository</a> in this scenario to continuously deliver the <code>oci://ghcr.io/kcl-lang/podinfo</code> configuration package mentioned at the beginning of the article. For example, the following configuration:</p></blockquote><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> source.toolkit.fluxcd.io/v1beta2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> OCIRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> podinfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 5m0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//ghcr.io/kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lang/podinfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev.fluxcd/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">git</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">sourceRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> OCIRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> podinfo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="4-commit-the-application-code">4. Commit the Application Code<a href="#4-commit-the-application-code" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><p>After submitting in the <code>flask-demo</code> repository, Github will automatically build a container image and push it to the Docker hub. It will also then trigger the Action of the <code>flask-demo-kcl-manifest</code> repository and modify the image value in the deployment manifest repository through <a href="/docs/user_docs/guides/automation">KCL Automation API</a>. Now let's create a submission in the <code>flask-demo</code> repository, and we can see that the code submission triggers the Github CI process for the application repository.</p><p><img loading="lazy" src="/assets/images/app-ci-8be610b01c177f72ff2f2f617b7305bd.png" width="2252" height="1038" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="5-configuration-automatic-update">5. Configuration Automatic Update<a href="#5-configuration-automatic-update" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><p>After the Github CI process in the application repository is completed, an automatic update configuration CI will be triggered in the repository where the KCL configuration is stored and submitted to the main branch of the <code>flask-demo-kcl-manifests</code> repository. The commit information is as follows</p><p><img loading="lazy" src="/assets/images/image-auto-update-514f27b74172b114a5dc877e98fd88f4.png" width="2240" height="1090" class="img_ev3q"></p><ul><li>We can obtain the deployment manifest source code for compilation and validation</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/flask-demo-kcl-manifests.git/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> flask-demo-kcl-manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout main </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kcl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output YAML is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcllang/flask_demo:6428cff4309afc8c1c40ad180bb9cfd82546be3e"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From the above configuration, it can be seen that the image of the resource is indeed automatically updated to the newly constructed image value.</p><p>At the same time, the Flux KCL Controller will automatically pull the configuration and update it to the cluster. This achieves an end-to-end automation process for submitting business code and deploying Kubernetes, where only the business code needs to be submitted. Of course, it can be further combined with Flagger to implement various deployment strategies such as canary releases, blue-green deployments, etc.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community. See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/8" target="_blank" rel="noopener noreferrer">KCL v0.8.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2024.01.04 - 2024.01.18) | KCL v0.7.4 Released!]]></title>
            <link>https://kcl-lang.github.io/blog/2024-01-18-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2024-01-18-biweekly-newsletter</guid>
            <pubDate>Thu, 18 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (01.04 2024 - 01.18 2024). Here is an overview of the key content:</p><p><strong>🌞 KCL Update</strong></p><ul><li>v0.7.4 released, adding support for Linux arm64.</li></ul><p><strong>🎁 API Update</strong></p><ul><li>Added APIs for syntax and semantic analysis</li></ul><p><strong>🔧 Toolchain Update</strong></p><ul><li><p><strong>kcl-go sdk update</strong></p><ul><li>KCL Doc tool supports output in OpenAPI format.</li><li>Added Parsing related APIs.</li></ul></li><li><p><strong>Import tool update</strong></p><ul><li>Optimized the user experience of the import tool to generate KCL, and added support for keywords oneOf and allOf.</li></ul></li><li><p><strong>KCL Package Management Tool</strong></p><ul><li>Released v0.6.0, which supports adding dependencies via git commit.</li></ul></li></ul><p><strong>💻 IDE Update</strong></p><ul><li><p><strong>Semantic Highlighting</strong></p><ul><li>KCL IDE optimized semantic highlighting.</li></ul></li><li><p><strong>Enhancement for Completion Features</strong></p><ul><li>Fixed the completion error in nested schema definitions</li><li>Fixed the missing hover information</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @jakezhu9 for his continuous contribution to the kcl import tool 🤝</li><li>Thanks to @AdmiralNemo, @Phillip Neumann, @Naxe, @steeling, etc. for their valuable feedback and suggestions in the use of KCL 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-ide-semantic-highlighting-enhancement">KCL IDE Semantic Highlighting Enhancement<a href="#kcl-ide-semantic-highlighting-enhancement" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL IDE previously only supported KCL syntax highlighting, as shown in the figure below:</p><p><img loading="lazy" src="/assets/images/old-ide-835ff47b36b5e23f304f8092c3afd989.png" width="435" height="151" class="img_ev3q"></p><p>This year, we gradually enabled the new KCL semantic architecture model. With the support of the new semantic architecture, KCL IDE supports semantic-level highlighting, and the code related to semantics will be highlighted in the same way.</p><p><img loading="lazy" src="/assets/images/new-ide-a62fcf4ef6b9d078f77a7e15af161e17.png" width="287" height="145" class="img_ev3q"></p><p>For more information about the KCL semantic architecture model, please refer to:</p><p><a href="https://kcl-lang.io/blog/2023-12-09-kcl-new-semantic-model" target="_blank" rel="noopener noreferrer">Unlocking Advanced Code Intelligence with the KCL Semantic Model</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-package-management-tool-supports-adding-git-dependencies-via-commit">KCL Package Management Tool Supports Adding Git Dependencies via Commit<a href="#kcl-package-management-tool-supports-adding-git-dependencies-via-commit" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL Package Management Tool supports adding git dependencies via commit.
Take <a href="https://github.com/KusionStack/catalog" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/catalog</a> as an example, add commit a29e3db as a dependency. You can add it directly through the dependency in the kcl.mod file or the command line.</p><p>Edit the kcl.mod file as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">catalog = { git = "https://github.com/KusionStack/catalog.git", commit = "a29e3db" }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or add it via the command line:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod add --git https://github.com/KusionStack/catalog.git --commit a29e3db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-import-tool-enhancement">KCL Import Tool Enhancement<a href="#kcl-import-tool-enhancement" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The import tool supports the generation with oneOf and allOf keywords. Take the oneOf keyword as an example, save the following content in the file oneof.json.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"http://json-schema.org/draft-07/schema#"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"$id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://example.com/schemas/book.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"title"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"author"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"$comment"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"oneOf for types"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"oneOf"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"array"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"items"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"integer"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"category"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"$comment"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"oneOf for objects"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"oneOf"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"title"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Through the import command, you can generate the corresponding KCL file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl import oneof.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can see that the generated oneof.k file content is as follows.</p><div class="language-kcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This file was generated by the KCL auto-gen tool. DO NOT EDIT.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Editing this file might prove futile when you re-run the KCL auto-gen generate command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Book:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    r"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Book</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title : str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    author : str | [str] | int, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    category : BookCategoryOneOf0 | BookCategoryOneOf1, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    """</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title?: str</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    author?: str | [str] | int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    category?: BookCategoryOneOf0 | BookCategoryOneOf1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema BookCategoryOneOf0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    r"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BookCategoryOneOf0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name : str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    """</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name?: str</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema BookCategoryOneOf1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    r"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BookCategoryOneOf1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title : str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    """</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title?: str</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community. See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/8" target="_blank" rel="noopener noreferrer">KCL v0.8.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 12.22 - 2024.01.04) | Crossplane KCL Integration]]></title>
            <link>https://kcl-lang.github.io/blog/2024-01-04-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2024-01-04-biweekly-newsletter</guid>
            <pubDate>Thu, 04 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (12.22 2023 - 01.04 2024). Here is an overview of the key content:</p><p><strong>🔧 Toolchain Update</strong></p><p><strong>Package Management Tool Update</strong></p><ul><li>Adds support for automatic translation of external package names containing the - symbol to an underscore <!-- -->_<!-- --> that KCL recognizes, such as set-annotation -&gt; set_annotation</li><li>Fixes a null pointer error caused when kcl mod add encounters a mismatch between the Registry package version and the version of the package already present locally</li></ul><p><strong>💻 IDE Update</strong></p><p><strong>Semantic Highlighting</strong></p><ul><li>KCL IDE now supports semantic-level highlighting, avoiding differences in highlighting across various IDE plugins</li></ul><p><strong>Enhancement for Completion Features</strong></p><ul><li>Differentiates between Schema type and instance completion symbols</li><li>Unifies the format for Schema comment documentation completion</li><li>Fixes inconsistencies in completion symbol types across different syntaxes</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @FLAGLORD, @YiuTerran, @flyinox, @steeling, @Anoop, @Phillip Neumann, and @Even Solberg for their valuable feedback and discussions during the promotion and usage of KCL 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-kcl-to-write-crossplane-composition-functions">Using KCL to Write Crossplane Composition Functions<a href="#using-kcl-to-write-crossplane-composition-functions" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Crossplane and its XRs allow developers to create higher-level abstractions that can encapsulate and compose multiple types of cloud resources across different providers and services. Using Composition Functions to render these abstractions can effectively enhance template capabilities for various provider resources while reducing the amount of YAML code needed.</p><p>Combining KCL with Composition Functions offers several benefits:</p><ul><li><strong>Simplification of Complex Configurations</strong>: KCL provides a more concise syntax and structure as a DSL, reducing the complexity of configurations. When combined with Crossplane’s composite resources, you can create more intuitive and easy-to-understand configuration templates with loop and condition features, simplifying the definition and maintenance of resources instead of duplicate YAML and Go code snippets.</li><li><strong>Reusability and Modularity</strong>: KCL supports modularity and code reuse through OCI Registry, which means you can create reusable configuration components. Combined with Crossplane, this promotes the modularity of composite resources, increases the reuse of configurations, and reduces errors.</li><li><strong>Automation and Policy-Driven</strong>: You can use KCL’s powerful features to write policies and constraints that, combined with Crossplane’s declarative resource management, can be automatically enforced, ensuring compliance within the cloud environment.</li></ul><p>Additionally, you can refer to <a href="https://kcl-lang.io/docs/user_docs/getting-started/intro#how-to-choose" target="_blank" rel="noopener noreferrer">here</a> to learn about the differences between KCL and other configuration formats or DSLs.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>Prepare a Kubernetes cluster</li><li>Install Kubectl</li><li>Install <a href="https://docs.crossplane.io/" target="_blank" rel="noopener noreferrer">Crossplane and Crossplane CLI 1.14+</a></li><li>Install Go 1.21+</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start">Quick Start<a href="#quick-start" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Let’s write a KCL function abstraction which generates managed resources <code>VPC</code> and <code>InternetGateway</code> with an input resource <code>Network</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-install-the-crossplane-kcl-function">1. Install the Crossplane KCL Function<a href="#1-install-the-crossplane-kcl-function" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><p>Installing a function creates a function pod. The function logic is processed as a pipeline step in a composition that may create managed resources when triggered through specified parameters.</p><p>Install a Function with a Crossplane Function object setting the <code>spec.package</code> value to the location of the function package.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: pkg.crossplane.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Function</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: kcl-function</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  package: xpkg.upbound.io/crossplane-contrib/function-kcl:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-apply-the-composition-resource">2. Apply the Composition Resource<a href="#2-apply-the-composition-resource" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><p>You can apply the composition resource with the inline KCL code into the cluster.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: apiextensions.crossplane.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Composition</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: xlabels.fn-demo.crossplane.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    provider: aws</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  writeConnectionSecretsToNamespace: crossplane-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  compositeTypeRef:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    apiVersion: fn-demo.crossplane.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    kind: XNetwork</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  mode: Pipeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  pipeline:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - step: normal</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    functionRef:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      name: kcl-function</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    input:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      apiVersion: krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      kind: KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        name: basic</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        # Generate new resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        target: Resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        # OCI, Git or inline source</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        # source: oci://ghcr.io/kcl-lang/crossplane-xnetwork-kcl-function</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        # source: github.com/kcl-lang/modules/crossplane-xnetwork-kcl-function</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        source: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          # Get the XR spec fields</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          id = option("params")?.oxr?.spec.id or ""</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          # Render XR to crossplane managed resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          network_id_labels = {"networks.meta.fn.crossplane.io/network-id" = id} if id else {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          vpc = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              apiVersion = "ec2.aws.upbound.io/v1beta1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              kind = "VPC"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              metadata.name = "vpc"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              metadata.labels = network_id_labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              spec.forProvider = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                  region = "eu-west-1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                  cidrBlock = "192.168.0.0/16"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                  enableDnsSupport = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                  enableDnsHostnames = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          gateway = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              apiVersion = "ec2.aws.upbound.io/v1beta1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              kind = "InternetGateway"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              metadata.name = "gateway"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              metadata.labels = network_id_labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              spec.forProvider = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                  region = "eu-west-1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                  vpcIdSelector.matchControllerRef = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          items = [vpc, gateway]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-create-crossplane-xrd">3. Create Crossplane XRD<a href="#3-create-crossplane-xrd" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><p>We define a schema using the crossplane XRD for the input resource <code>Network</code>, it has a field named <code>id</code> which denotes the network id.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: apiextensions.crossplane.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: CompositeResourceDefinition</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: xnetworks.fn-demo.crossplane.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  group: fn-demo.crossplane.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  names:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    kind: XNetwork</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    plural: xnetworks</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  claimNames:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    kind: Network</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    plural: networks</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  versions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - name: v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      served: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      referenceable: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      schema:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        openAPIV3Schema:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          type: object</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          properties:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              type: object</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              properties:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                id:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                  type: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                  description: ID of this Network that other objects will use to refer to it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              required:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                - id</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="4-apply-the-crossplane-xr">4. Apply the Crossplane XR<a href="#4-apply-the-crossplane-xr" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: fn-demo.crossplane.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Network</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: network-test-functions</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  id: network-test-functions</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="5-verify-the-generated-managed-resources">5. Verify the Generated Managed Resources<a href="#5-verify-the-generated-managed-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><ul><li>VPC</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get VPC -o yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> network-id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      networks.meta.fn.crossplane.io/network-id: network-test-functions</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>InternetGateway</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get InternetGateway -o yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> network-id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      networks.meta.fn.crossplane.io/network-id: network-test-functions</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It can be seen that we have indeed successfully generated <code>VPC</code> and <code>InternetGateway</code> resources, and their fields meet expectations.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="6-debugging-kcl-functions-locally">6. Debugging KCL Functions Locally<a href="#6-debugging-kcl-functions-locally" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h5><p>See <a href="https://github.com/crossplane-contrib/function-kcl" target="_blank" rel="noopener noreferrer">here</a> for more information and examples.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="client-enhancements">Client Enhancements<a href="#client-enhancements" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>It can be seen that the above abstract code often requires a crossplane as a control plane intermediary, and you can still complete the abstraction in a fully client-side manner and directly generate crossplane managed resources to reduce the burden on the cluster.</p><p>On the client side, there are two methods to render managed resources. One method is to use the <code>crossplane beta render</code> command, and the other is to render directly using the <code>kcl run</code> command. The usage for the former can be found here. For the latter, the usage is as follows.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl run oci://ghcr.io/kcl-lang/crossplane-xnetwork-kcl-function -S items -D </span><span class="token assign-left variable" style="color:#36acaa">params</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'{"oxr": {"spec": {"id": "network-test-functions"}}}'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ec2.aws.upbound.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> VPC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vpc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks.meta.fn.crossplane.io/network-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> network</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">functions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">forProvider</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">region</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">west</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cidrBlock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.168.0.0/16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enableDnsSupport</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enableDnsHostnames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ec2.aws.upbound.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InternetGateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks.meta.fn.crossplane.io/network-id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> network</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">functions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">forProvider</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">region</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">west</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">vpcIdSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matchControllerRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Both methods require a registry (usually docker.io) to assist in completing the work. The ultimate choice between them may depend on your operational habits and environmental costs. Regardless of the method chosen, we recommend maintaining your KCL code in Git to better implement GitOps and obtain a better IDE experience and reusable modules such as the <a href="https://github.com/kcl-lang/modules/tree/main/crossplane-provider-aws" target="_blank" rel="noopener noreferrer">Crossplane AWS Provider Modules</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community. See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/8" target="_blank" rel="noopener noreferrer">KCL v0.8.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[10 Ways for Kubernetes Declarative Configuration Management]]></title>
            <link>https://kcl-lang.github.io/blog/2023-12-25-ten-ways-for-kubernetes-config-management</link>
            <guid>https://kcl-lang.github.io/blog/2023-12-25-ten-ways-for-kubernetes-config-management</guid>
            <pubDate>Mon, 25 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Kubernetes has become the de facto standard for managing containerized applications. However, with its widespread adoption, the complexity of managing its configuration has also increased. To address this complexity, Kubernetes' declarative configuration management model has emerged to simplify this process. In this article, we will explore what Kubernetes declarative configuration is, why it is necessary, and the various ways it can be managed.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/cover-26257c2a7dc6503e03b9fc420808b984.png" width="644" height="424" class="img_ev3q"></p><p>Kubernetes has become the de facto standard for managing containerized applications. However, with its widespread adoption, the complexity of managing its configuration has also increased. To address this complexity, Kubernetes' declarative configuration management model has emerged to simplify this process. In this article, we will explore what Kubernetes declarative configuration is, why it is necessary, and the various ways it can be managed.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-kubernetes-declarative-configuration">What is Kubernetes Declarative Configuration<a href="#what-is-kubernetes-declarative-configuration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Kubernetes declarative configuration refers to the practice of declaring the desired state of applications and their resources in Kubernetes manifest files. Rather than issuing imperative commands to change the state of the cluster, it's easier to simply describe the expected state and let Kubernetes strive to match the actual state to the declared state. Specifically, in the declarative API, you describe "what" you want (for example, a Pod running a specific image) rather than a series of operations to achieve a certain target state ("how" to achieve it). This model simplifies system interactions because users only need to focus on the end goal without handling the specific steps to achieve it.</p><p>Kubernetes' declarative APIs are typically utilized through manifest files in YAML or JSON format. These files define the desired state of Kubernetes resources such as Pods, Services, Deployments, ConfigMaps, etc. Users submit these manifest files to the Kubernetes API server, which then has its control plane components, like controllers and schedulers, enforce these specifications and ensure that the actual state of the cluster matches them.</p><p>Declarative APIs support version control, automated deployment, rollback, scaling, and self-healing features, which significantly enhance the capability to manage large-scale, distributed systems. For example, if you want to deploy an application, you don't need to tell Kubernetes how to create each Pod, how to schedule them on nodes, or how to manage their lifecycle. Instead, you simply create a resource object like a Deployment, define the desired number of replicas and other attributes of the application containers, and then leave it to Kubernetes to handle. Kubernetes will monitor the state of this Deployment and take necessary actions to maintain or restore the desired state.</p><p>This declarative model elevates the system's level of abstraction, allowing developers and operators to focus on the application's behavior and requirements rather than the underlying operational commands and processes. As organizations adopt Kubernetes for large-scale application deployment, managing complex configurations and manifests becomes critical.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-ways-to-manage-kubernetes-declarative-configuration">What are the Ways to Manage Kubernetes Declarative Configuration<a href="#what-are-the-ways-to-manage-kubernetes-declarative-configuration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="structured-key-value-pair">Structured Key-Value Pair<a href="#structured-key-value-pair" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Structured key-value pair meets the minimum data declaration requirements (int, string, list, dict, etc.). Declarative API meets the development demands of X as Data with the rapid development and application of cloud-native technology. Machine-readable and writable, human-readable.</p><ul><li>Pros.<ul><li>Simple syntax, easy to write and read.</li><li>Rich multilingual APIs.</li><li>Various path tools for data query, such as XPath, JsonPath, etc.</li></ul></li><li>Cons.<ul><li>Too much redundant information: when the configuration scale is large, it is difficult to maintain the configuration, because important configuration information is hidden in a large number of irrelevant repetitive data details.</li><li>Lack of functionality: constraint, complex logic, test, debug, abstraction, etc.</li><li><a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a>'s patches are basically by fixing several patch merge strategies</li></ul></li></ul><p>Representative technologies of structured KV include:</p><ul><li>JSON/YAML: It is very convenient for reading and automation, and has different languages API support.</li><li><a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a>: It provides a solution to customize the Kubernetes resource base configuration and differential configuration without <strong>template</strong> and <strong>DSL</strong>. It does not solve the constraint problem itself, but needs to cooperate with a large number of additional tools to check constraints, such as <a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">Kube-linter</a>, <a href="https://github.com/bridgecrewio/checkov" target="_blank" rel="noopener noreferrer">Checkov</a> and <a href="https://github.com/kubescape/kubescape" target="_blank" rel="noopener noreferrer">kubescape</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="templated-key-value-pair">Templated Key-Value Pair<a href="#templated-key-value-pair" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The Templated KV has the capability of static configuration data and dynamic parameters, and can output different static configuration data with one template+dynamic parameters. The advantages and disadvantages are as follows:</p><ul><li>Pros.<ul><li>Simple configuration logic and loop support.</li><li>External dynamic parameter support.</li></ul></li><li>Cons.<ul><li>It is easy to fall into the trap that all configurations are template parameters.</li><li>When the configuration scale becomes larger, it is difficult for developers and tools to maintain and analyze them.</li></ul></li></ul><p>Representative technologies of templated KV include:</p><ul><li><a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm</a>: The package management tool of Kubernetes resources, which manages the configuration of Kubernetes resources through the configuration template.</li><li><a href="https://github.com/helmfile/helmfile" target="_blank" rel="noopener noreferrer">Helmfile</a>: Helmfile is a declarative tool used to assist users in configuring and managing Helm charts running in Kubernetes clusters. Besides, Helmfile extends the functionality of Helm, making it easier and more repeatable to manage multiple Helm charts.</li><li>Other configuration templates: Java Velocity, Go Template and other text template engines are very suitable for HTML writing templates. However,when used in configuration scenarios, they are difficult for developers and tools to maintain and analyze.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="programmable-key-value-pair">Programmable Key-Value Pair<a href="#programmable-key-value-pair" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><code>Configuration as Code (CaC)</code> uses code to generate configuration, just like engineers only need to write advanced GPL code, rather than manually writing error-prone and difficult-to-understand server binary code.</p><ul><li><p>Configuration changes are treated as seriously as code changes, and unit tests and integration tests can also be executed.</p></li><li><p>Code modularization is a key reason why maintaining configuration code is easier than manually editing configuration files such as JSON/YAML.</p></li><li><p>Capability</p><ul><li>Necessary programming language abilities (variable definitions, logical judgments, loops, assertions, etc.).</li><li>Necessary template capability, which supports the definition of data templates and the use of templates to obtain new configuration data.</li><li>Code modularity: structure definition and package management.</li><li>Machine-readable and writable, human-readable and writable.</li></ul></li><li><p>Pros.</p><ul><li>Necessary programming ability.</li><li>Code modularization and abstraction.</li><li>Configuration template and override ability.</li></ul></li><li><p>Cons.</p><ul><li>Insufficient type check.</li><li>Insufficient constraint capacity.</li><li>Many runtime errors.</li></ul></li></ul><p>Representative technologies of programmable KV include:</p><ul><li><a href="https://github.com/rix0rrr/gcl" target="_blank" rel="noopener noreferrer">GCL</a>: A declarative configuration programming language implemented in Python provides the necessary language capabilities to support template abstraction. However, the compiler itself is written in Python, and the language itself is interpreted and executed. For large template instances (such as Kubernetes models), the performance is poor.</li><li><a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">HCL</a>: A Go implementation structured configuration language. The native syntax of HCL is inspired by libucl and nginx configurations. It is used to create a structured configuration language that is friendly to humans and machines, mainly for DevOps tools, server configurations, and resource configurations as a <a href="https://www.terraform.io/language" target="_blank" rel="noopener noreferrer">Terraform language</a>.</li><li><a href="https://github.com/google/jsonnet" target="_blank" rel="noopener noreferrer">Jsonnet</a>: A data template language implemented in C++, suitable for application and tool developers, can generate configuration data and organize, simplify and manage large configurations without side effects.</li><li><a href="https://github.com/open-policy-agent/opa" target="_blank" rel="noopener noreferrer">OPA</a>: While OPA is an open-source, general-purpose policy engine capable of enforcing unified and context-aware policies throughout the stack, it can also accept and output data in formats such as JSON, effectively functioning as a tool for generating or modifying configurations. Although it does not provide out-of-the-box schema definition support, it allows the integration of JsonSchema definitions.</li><li><a href="https://github.com/bazelbuild/starlark" target="_blank" rel="noopener noreferrer">Starlark</a>: Starlark is a language for describing build transformations, inspired by Python, but with features that make it suitable for embedding in software like Bazel. It can be used for configuration generation due to its capability for deterministic evaluation and expressing complex build transformations.</li><li><a href="https://kubernetes.io/docs/reference/using-api/cel/" target="_blank" rel="noopener noreferrer">CEL</a>: CEL is an expression language designed to be simple, fast, portable, and safe. While it is not directly a configuration language, CEL is used by Kubernetes as the foundation for complex field selection and filtering operations within its API. CEL can serve as a tool for validating and constraining configurations based on specific expressions.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="typed-key-value-pair">Typed Key-Value Pair<a href="#typed-key-value-pair" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Capability<ul><li>Based on programmable K-V, typed K-V has more capabilities of type constraints.</li></ul></li><li>Pros.<ul><li>The configuration merge is completely idempotent, which naturally prevents configuration conflicts.</li><li>Rich constraint syntax for writing configuration.</li><li>Abstract the type and value constraints into the same form, which is simple to write.</li><li>Configuration order independent.</li></ul></li><li>Cons.<ul><li>The concepts of graph merging and idempotent merging are complex, and the understanding cost is high.</li><li>The mixed definition of type and value improves the degree of abstraction and the cost of understanding. All constraints are checked at runtime, and there is a performance bottleneck for the large-scale configuration code.</li><li>It is difficult to implement multi-tenant and multi-environment scenarios that want to configure coverage and modification.</li><li>For constrained scenarios with conditions, the user interface for writing hybrid definitions of definition and verification is unfriendly.</li></ul></li></ul><p>Representative technologies of typed KV include:</p><ul><li><a href="https://github.com/cue-lang/cue" target="_blank" rel="noopener noreferrer">CUE</a>: The core problem CUE solves is "type checking", which is mainly used in configuration constraint verification scenarios and simple cloud native configuration scenarios.</li><li><a href="https://github.com/dhall-lang/dhall-lang" target="_blank" rel="noopener noreferrer">Dhall</a>: Dhall is a programmable configuration language that combines features like JSON, functions, types, and import capabilities. Its style leans towards functional programming, so if you're familiar with functional-style languages such as Haskell, you might find Dhall to be quite intuitive.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="modeled-key-value-pair">Modeled Key-Value Pair<a href="#modeled-key-value-pair" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Pros.<ul><li>High-level language modeling capability as the core description<ul><li>Modeling</li><li>Immutability</li><li>Constraints</li></ul></li><li>High scalability through automatic merge mechanism of isolated config blocks.</li><li>Writing and testing methods like a high-level programming language.</li><li>Machine-readable and writable, human-readable and writable.</li></ul></li><li>Cons.<ul><li>The expansion of new models and ecological construction requires certain R&amp;D costs</li></ul></li></ul><p>Representative technologies of modeled KV include:</p><ul><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a>: A declarative configuration and policy programming language implemented by Rust, which improves the writing of a large number of complex configurations through mature programming language technology and practice, and is committed to building better modularity, scalability and stability around configuration, simpler logic writing, fast automation and good ecological extensionally.</li><li><a href="https://github.com/tweag/nickel" target="_blank" rel="noopener noreferrer">Nickel</a>：Nickel is a straightforward configuration language aimed at automatically generating static configuration files. Essentially, it's akin to JSON with the addition of functions and types.</li></ul><p>Additionally, both KCL and Nickel feature a similar progressive typing system (static + dynamic), merging strategies, functions, and constraint definitions. The difference lies in the fact that KCL is a language similar to Python, whereas Nickel is more akin to JSON. Moreover, KCL offers a schema keyword to differentiate between configuration definitions and configuration data to prevent them from being mixed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-purpose-languages-and-cdks">General-Purpose Languages and CDKs<a href="#general-purpose-languages-and-cdks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In addition to defining Kubernetes resources using DSLs, we can also employ general-purpose languages for definition. However, general-purpose languages are typically overkill, as they go beyond what needs to be resolved, and they come with a variety of security concerns, such as capability boundaries (initiating local threads, accessing I/O, networking, code infinite loops, etc.), which can be unsafe. For instance, in the domain of music, there are specific musical notes used to represent music, which facilitate learning and communication in ways that cannot be clearly articulated by ordinary language.</p><p>Furthermore, general-purpose languages, due to their diversity, come with the cost of unified maintenance, management, and automation. They are usually used to write client-side runtime code and are an extension of server-side runtime, making them unsuitable for writing configurations unrelated to runtime. These are ultimately compiled into binaries that start processes, and their stability and scalability are difficult to control. In contrast, configuration languages are typically used to write data, complemented by simple logic to describe the expected final outcome, which is then consumed by compilers or engines.</p><p>Representative technologies for general-purpose languages and CDKs include:</p><ul><li><a href="https://www.pulumi.com/docs/" target="_blank" rel="noopener noreferrer">Pulumi</a> - Pulumi enables the use of common programming languages such as TypeScript, Python, Go, and .NET to write code that defines and deploys cloud infrastructure and application services. Pulumi also supports YAML or DSLs that can be compiled into YAML, such as KCL.</li><li><a href="https://cdk8s.io/" target="_blank" rel="noopener noreferrer">CDK8s</a> - CDK8s is used to define Kubernetes resources and applications. CDK8s uses the high-level abstraction concept called constructs to represent various Kubernetes resources such as deployments, services, and configurations. Developers can write code in programming languages like TypeScript, Python, and Java, and CDK8s will translate this code into standard Kubernetes YAML manifests that can be directly applied to a Kubernetes cluster.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hybrid-structured-and-programmable-kv">Hybrid Structured and Programmable KV<a href="#hybrid-structured-and-programmable-kv" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Some tools primarily employ structured KV for configuration management but also provide additional extensions to handle complex scenarios, eliminating the need for extensive YAML templating. For instance, some cloud-native tools offer function extensions that can be implemented in general-purpose languages such as Go, TypeScript, or DSLs like KCL.</p><ul><li><a href="https://github.com/carvel-dev/ytt" target="_blank" rel="noopener noreferrer">YTT</a> - YTT is a templating tool that understands YAML structure. It helps you easily configure complex software via reusable templates and user provided values using the Starlark language.</li><li><a href="https://kpt.dev/" target="_blank" rel="noopener noreferrer">KPT</a> - KPT and KPT Functions are used to decouple data and logic definitions, using a Git repository as the source of truth for configurations while managing Kubernetes configurations declaratively without losing extensibility.</li><li><a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a> - Similar to KPT, Kustomize and Kustomize Functions can also decouple data and logic definitions.</li><li><a href="https://www.crossplane.io/" target="_blank" rel="noopener noreferrer">Crossplane</a> - Crossplane and Crossplane Composite Functions are used to decouple XR and Composite resource definitions. XRs allow developers to create higher-level abstractions that can encapsulate and compose multiple types of cloud resources across different providers and services. Using Crossplane Composite Functions to render these abstractions can effectively enhance template capabilities for various provider resources while reducing the amount of YAML code needed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-or-runtime-tools-including-operators-and-kubernetes-crds">Client or Runtime Tools including Operators and Kubernetes CRDs<a href="#client-or-runtime-tools-including-operators-and-kubernetes-crds" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Kubernetes offers Mutation Webhooks and Validation Webhooks that can modify or validate Kubernetes resource objects at runtime before they are persisted.</p><p>Representative technologies for Operators and Kubernetes CRDs include:</p><ul><li><a href="https://kusionstack" target="_blank" rel="noopener noreferrer">KusionStack</a> - KusionStack is a modern application delivery and management toolchain that enables developers to specify desired intent in a declarative way and then using a consistent workflow to drive continuous deployment through application lifecycle. Besides, KusionStack provides cloud native operations, observable, and insightful resources that meet the K8s standard through <code>KusionStack Operation</code> and <code>Controller Mesh</code></li><li><a href="https://kubevela.io/docs/" target="_blank" rel="noopener noreferrer">KubeVela</a> - KubeVela is a modern application delivery system based on the Open Application Model (OAM) specification, providing developers and operation teams with a simplified and unified approach to deploying, managing, and operating applications.</li><li><a href="https://www.crossplane.io/" target="_blank" rel="noopener noreferrer">Crossplane</a> - Crossplane is an open-source multicloud control plane that provides infrastructure as code capabilities on Kubernetes. Crossplane enables you to define XRDs and XRs to manage and compose cloud resources (such as databases, storage, and compute resources) directly from the Kubernetes API.</li><li><a href="https://github.com/radius-project/radius" target="_blank" rel="noopener noreferrer">Radius</a> - Radius is a cloud-native, portable application platform that makes app development easier for teams building cloud-native apps.</li><li><a href="https://github.com/kcl-lang/kcl-operator" target="_blank" rel="noopener noreferrer">KCL Operator</a> - KCL Operator brings programming capabilities to Kubernetes resource configurations at runtime based on the KCL language, utilizing the flexibility of DSL to avoid the complexity of developing Webhooks while integrating with KCL's existing <a href="https://github.com/kcl-lang/modules" target="_blank" rel="noopener noreferrer">modules</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gitops-tools">GitOps Tools<a href="#gitops-tools" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>GitOps is a system management practice that uses Git as the source of truth, storing the declarative descriptions of application deployment and infrastructure configuration in a Git repository. GitOps tools usually offer automated continuous deployment capabilities and ensure that the real-time state of the Kubernetes cluster matches the configuration in the Git repository. GitOps tools commonly provide native support or plugin integration with various Kubernetes configuration definition methods (structured, templated, programmable key-value pair, such as Kustomize, Helm, Jsonnet, KCL, etc.).</p><p>Representative technologies for GitOps include:</p><ul><li><a href="https://argo-cd.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">ArgoCD</a> - ArgoCD is a declarative GitOps continuous delivery tool used for automating Kubernetes configuration, monitoring, and management. It automates deployment and updates of applications and configurations by tracking changes in the Git repository. ArgoCD offers a visual interface along with extensive control and security features, and it supports various configuration management tools such as Helm, Kustomize, Jsonnet, etc.</li><li><a href="https://fluxcd.io/" target="_blank" rel="noopener noreferrer">FluxCD</a> - FluxCD is another popular GitOps tool that allows developers to use a Git repository as the sole source of configuration. Flux automatically ensures that the state of the Kubernetes cluster is synchronized with the configuration in the Git repository. It supports automatic updates, meaning Flux can monitor Docker image repositories for new images and push updates to the cluster.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="infra-from-code-ifc-tools">Infra from Code (IfC) Tools<a href="#infra-from-code-ifc-tools" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Infra from Code (IfC) is an approach to infrastructure management similar to IaC (Infrastructure as Code), where code defines and manages the underlying infrastructure, typically via code intent deduction rather than explicitly defining infrastructure code.</p><ul><li><a href="https://github.com/winglang/wing" target="_blank" rel="noopener noreferrer">Winglang</a> - Winglang is a new cloud-oriented programming language that combines infrastructure and runtime code in one language, supporting multiple build targets such as AWS and Kubernetes. Additionally, Winglang provides built-in libraries for direct manipulation of containers and Helm Chart configurations.</li><li><a href="https://github.com/pluto-lang/pluto" target="_blank" rel="noopener noreferrer">Plutolang</a> - Pluto is a new open-source programming language designed to help developers write cloud applications, making it easier to utilize cloud services. Developers can directly use required resources such as KV databases and message queues in their code based on business needs. Pluto uses static code analysis to obtain the infrastructure resource topology the application depends on and deploys the corresponding resource instances and applications on the specified cloud platform or Kubernetes.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Each management approach has its specific advantages and applications. For simple projects, native Kubernetes YAML files and ConfigMaps may be all that's needed. For more complex projects that require stronger templating capabilities and package management, options like Helm or Kustomize might be chosen. If you need to handle configuration programmatically or integrate Kubernetes into a broader cloud infrastructure management system, Infrastructure as Code (IaC) tools such as Terraform and Pulumi, or DSLs like KCL and CUE, might be more suitable.</p><p>GitOps tools offer a method of continuous deployment centered around Git. Meanwhile, Operators and CRDs allow users to customize and extend Kubernetes' own capabilities to fit the needs of specific applications. These management methods are not mutually exclusive; in fact, in practical configuration management work, they are often complementary, and teams can choose and combine the tools and methods that best suit their specific needs.</p><p>Do you know of other ways? Feel free to add. ❤️</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>Terraform Language: <a href="https://www.terraform.io/language" target="_blank" rel="noopener noreferrer">https://www.terraform.io/language</a></li><li>Terraform Kubernetes Provider: <a href="https://github.com/hashicorp/terraform-provider-kubernetes" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-kubernetes</a></li><li>Terraform Provider AWS: <a href="https://github.com/hashicorp/terraform-provider-aws" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-aws</a></li><li>Pulumi: <a href="https://www.pulumi.com/docs/" target="_blank" rel="noopener noreferrer">https://www.pulumi.com/docs/</a></li><li>Pulumi vs. Terraform: <a href="https://www.pulumi.com/docs/intro/vs/terraform/" target="_blank" rel="noopener noreferrer">https://www.pulumi.com/docs/intro/vs/terraform/</a></li><li>Google SRE Work Book Configuration Design: <a href="https://sre.google/workbook/configuration-design/" target="_blank" rel="noopener noreferrer">https://sre.google/workbook/configuration-design/</a></li><li>Google Borg Paper: <a href="https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43438.pdf" target="_blank" rel="noopener noreferrer">https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43438.pdf</a></li><li>Holistic Configuration Management at Facebook: <a href="https://sigops.org/s/conferences/sosp/2015/current/2015-Monterey/printable/008-tang.pdf" target="_blank" rel="noopener noreferrer">https://sigops.org/s/conferences/sosp/2015/current/2015-Monterey/printable/008-tang.pdf</a></li><li>JSON Spec: <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">https://www.json.org/json-en.html</a></li><li>YAML Spec: <a href="https://yaml.org/spec/" target="_blank" rel="noopener noreferrer">https://yaml.org/spec/</a></li><li>GCL: <a href="https://github.com/rix0rrr/gcl" target="_blank" rel="noopener noreferrer">https://github.com/rix0rrr/gcl</a></li><li>HCL: <a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/hcl</a></li><li>CUE: <a href="https://github.com/cue-lang/cue" target="_blank" rel="noopener noreferrer">https://github.com/cue-lang/cue</a></li><li>KCL: <a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl</a></li><li>Nickel: <a href="https://github.com/tweag/nickel" target="_blank" rel="noopener noreferrer">https://github.com/tweag/nickel</a></li><li>Jsonnet: <a href="https://github.com/google/jsonnet" target="_blank" rel="noopener noreferrer">https://github.com/google/jsonnet</a></li><li>Dhall: <a href="https://github.com/dhall-lang/dhall-lang" target="_blank" rel="noopener noreferrer">https://github.com/dhall-lang/dhall-lang</a></li><li>Thrift: <a href="https://github.com/Thriftpy/thriftpy2" target="_blank" rel="noopener noreferrer">https://github.com/Thriftpy/thriftpy2</a></li><li>Kustomize: <a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">https://kustomize.io/</a></li><li>YTT: <a href="https://github.com/carvel-dev/ytt" target="_blank" rel="noopener noreferrer">https://github.com/carvel-dev/ytt</a></li><li>KPT: <a href="https://kpt.dev/" target="_blank" rel="noopener noreferrer">https://kpt.dev/</a></li><li>Kube-linter: <a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">https://github.com/stackrox/kube-linter</a></li><li>Checkov: <a href="https://github.com/bridgecrewio/checkov" target="_blank" rel="noopener noreferrer">https://github.com/bridgecrewio/checkov</a></li><li>How Terraform Works: A Visual Intro: <a href="https://betterprogramming.pub/how-terraform-works-a-visual-intro-6328cddbe067" target="_blank" rel="noopener noreferrer">https://betterprogramming.pub/how-terraform-works-a-visual-intro-6328cddbe067</a></li><li>How Terraform Works: Modules Illustrated: <a href="https://awstip.com/terraform-modules-illustrate-26cbc48be83a" target="_blank" rel="noopener noreferrer">https://awstip.com/terraform-modules-illustrate-26cbc48be83a</a></li><li>TFLint: <a href="https://github.com/terraform-linters/tflint" target="_blank" rel="noopener noreferrer">https://github.com/terraform-linters/tflint</a></li><li>Helm: <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">https://helm.sh/</a></li><li>Helm vs. Kustomize: <a href="https://harness.io/blog/helm-vs-kustomize" target="_blank" rel="noopener noreferrer">https://harness.io/blog/helm-vs-kustomize</a></li><li>KubeVela: <a href="https://kubevela.io/docs/" target="_blank" rel="noopener noreferrer">https://kubevela.io/docs/</a></li><li>Radius: <a href="https://github.com/radius-project/radius" target="_blank" rel="noopener noreferrer">https://github.com/radius-project/radius</a></li><li>Crossplane: <a href="https://www.crossplane.io/" target="_blank" rel="noopener noreferrer">https://www.crossplane.io/</a></li><li>ArgoCD: <a href="https://argo-cd.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">https://argo-cd.readthedocs.io/en/stable/</a></li><li>FluxCD: <a href="https://fluxcd.io/" target="_blank" rel="noopener noreferrer">https://fluxcd.io/</a></li><li>Helmfile: <a href="https://helmfile.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">https://helmfile.readthedocs.io/en/latest/</a></li><li>CDK8s: <a href="https://cdk8s.io/" target="_blank" rel="noopener noreferrer">https://cdk8s.io/</a></li><li><a href="https://medium.com/@sushantkapare1717/helm-vs-kustomize-in-kubernetes-cc063bbb4b0e" target="_blank" rel="noopener noreferrer">Helm vs. Kustomize in Kubernetes</a></li><li>Winglang: <a href="https://github.com/winglang/wing" target="_blank" rel="noopener noreferrer">https://github.com/winglang/wing</a></li><li>Plutolang: <a href="https://github.com/pluto-lang/pluto" target="_blank" rel="noopener noreferrer">https://github.com/pluto-lang/pluto</a></li><li><a href="https://blog.terramate.io/infrastructure-as-code-landscape-in-2023-e2dad4fb87d3" target="_blank" rel="noopener noreferrer">Infrastructure as Code Landscape in 2023</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
            <category>Landscape</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 12.07 - 12.21) | KCL v0.7.2 is released and KubeVela/OAM integration is available now!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-12-21-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2023-12-21-biweekly-newsletter</guid>
            <pubDate>Thu, 21 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (11.24 - 12.07 2023). Here is an overview of the key content:</p><p><strong>📦 Model Updates</strong></p><p>KCL model quantity increased to <strong>300</strong>, added KCL models for k8s 1.29.</p><p><strong>🔧 Toolchain Updates</strong></p><ul><li><p><strong>Import Tool Updates</strong></p><ul><li>Import tool supports OpenAPI allOf keyword validation expression generation</li><li>Import tool supports KCL array and dictionary type all/any validation expression generation</li><li>Import tool fixes JSON Schema array generation KCL code snippet error and string escape error</li></ul></li><li><p><strong>🏄 Package Management Tool Updates</strong></p><ul><li>Added support for third-party libraries with hyphens in their names.</li><li>Fixed the problem that the update function cannot automatically pass kcl.mod and kcl.mod.lock.</li></ul></li></ul><p><strong>💻 KCL Updates</strong></p><ul><li>KCL compilation cache path supports using environment variables KCL_CACHE_PATH to specify</li><li>Fixed the compilation error that may be caused by the compilation parameter -S of KCL CLI</li><li>Fixed the error that kcl fmt tool adds an empty line at the end when formatting lambda expressions.</li><li>Fixed Schema Doc completion code snippet error</li></ul><p><strong>📒 IDE Updates</strong></p><ul><li>Fixed the problem that the variable completion in the check statement is invalid</li><li>VSCode Extension updated to version 0.1.3, updated the highlighting and completion of some keywords</li><li>Added completion of builtin functions</li><li>Optimized the style of function completion</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="efficient-cloud-native-application-deployment---kcl-and-kubevela-integration-quick-guide">Efficient Cloud Native Application Deployment - KCL and KubeVela Integration Quick Guide<a href="#efficient-cloud-native-application-deployment---kcl-and-kubevela-integration-quick-guide" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">KCL</a> is a configuration and policy language for cloud-native scenarios, hosted by the CNCF Foundation. It aims to improve the writing of complex configurations, such as cloud-native Kubernetes configurations, using mature programming language techniques and practices. KCL focuses on building better modularity, scalability, and stability around configuration, as well as easier logic writing, automation, and integration with the toolchain.</p><p>KCL exists in a completely open cloud-native world and is not tied to any orchestration/engine tools or Kubernetes controllers. It can provide API abstraction, composition, and validation capabilities for both Kubernetes clients and runtime.</p><p><a href="https://kubevela.net/" target="_blank" rel="noopener noreferrer">KubeVela</a> is a modern application delivery system hosted by the CNCF Foundation. It is built on the Open Application Model (OAM) specification and aims to abstract the complexity of Kubernetes, providing a set of simple and easy-to-use command-line tools and APIs for developers to deploy and operate cloud-native applications without worrying about the underlying details.</p><p>Using KCL with KubeVela has the following benefits:</p><ul><li><strong>Simpler configuration</strong>: KCL provides stronger templating capabilities, such as conditions and loops, for KubeVela OAM configurations at the client level, reducing the need for repetitive YAML writing. At the same time, the reuse of KCL model libraries and toolchains enhances the experience and management efficiency of configuration and policy writing.</li><li><strong>Better maintainability</strong>: KCL provides a configuration file structure that is more conducive to version control and team collaboration, instead of relying solely on YAML. When combined with OAM application models written in KCL, application configurations become easier to maintain and iterate.</li><li><strong>Simplified operations</strong>: By combining the simplicity of KCL configurations with the ease of use of KubeVela, daily operational tasks such as deploying, updating, scaling, or rolling back applications can be simplified. Developers can focus more on the applications themselves rather than the tedious details of the deployment process.</li><li><strong>Improved cross-team collaboration</strong>: By using KCL's configuration chunk writing and package management capabilities in conjunction with KubeVela, clearer boundaries can be defined, allowing different teams (such as development, testing, and operations teams) to collaborate systematically. Each team can focus on tasks within their scope of responsibility, delivering, sharing, and reusing their own configurations without worrying about other aspects.</li></ul><p>Taking the KCL Playground application (written in Go and HTML5) as an example, we use KCL to define the OAM configuration that needs to be deployed. The overall workflow is as follows:</p><ul><li><p>Prepare</p><ul><li>Configure the Kubernetes cluster</li><li>Install KubeVela</li><li>Install KCL</li></ul></li><li><p>New project and add OAM dependency</p></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod init kcl-play-svc &amp;&amp; cd kcl-play-svc &amp;&amp; kcl mod add oam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Write code in main.k</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import oam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oam.Application {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata.name = "kcl-play-svc"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec.components = [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name = metadata.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        type = "webservice"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        properties = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image = "kcllang/kcl"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports = [{port = 80, expose = True}]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cmd = ["kcl", "play"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Run command to deploy configuration</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl run | vela up -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Port forwarding</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vela port-forward kcl-play-svc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then we can see the KCL Playground application running successfully in the browser</p><p><img loading="lazy" alt="kcl-play-svc" src="/assets/images/kcl-play-svc-17cdd017ee58347075be64904d62e73f.png" width="2326" height="858" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-optimized-the-style-of-function-completion">IDE Optimized the Style of Function Completion<a href="#ide-optimized-the-style-of-function-completion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="ide-func" src="/assets/images/ide-func-96160828de7f06d68aa5c50f372008c2.gif" width="870" height="427" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community. See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/8" target="_blank" rel="noopener noreferrer">KCL v0.8.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[How to Apply KCL Configuration to Cluster]]></title>
            <link>https://kcl-lang.github.io/blog/2023-12-19-how-to-apply-kcl-config-to-cluster</link>
            <guid>https://kcl-lang.github.io/blog/2023-12-19-how-to-apply-kcl-config-to-cluster</guid>
            <pubDate>Tue, 19 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[What is KCL]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-kcl">What is KCL<a href="#what-is-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. It is hosted by the Cloud Native Computing Foundation (CNCF) as a Sandbox Project. With advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="several-ways-to-deploy-kcl-configuration-to-a-cluster">Several Ways to Deploy KCL Configuration to a cluster<a href="#several-ways-to-deploy-kcl-configuration-to-a-cluster" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="cloud-native-tool-integration" src="/assets/images/cloud-native-tool-integration-b2157c3d2b3210c16f145176928e2cfc.png" width="1386" height="608" class="img_ev3q"></p><p>Since KCL can output YAML/JSON files, theoretically, any method that supports deploying YAML/JSON configurations to a cluster can be used to deploy KCL configurations. Usually, KCL files are stored in Git or Module Registry for easy sharing among different roles and teams. However, KCL can do much more than that, and the main ways to deploy KCL configurations to a cluster are as follows.</p><ul><li><strong>Using kubectl</strong>: The most basic way to access a Kubernetes cluster is using Kubectl. We can directly deploy the Kubernetes YAML configuration files generated by KCL to the cluster using the kubectl apply command. This method is simple and suitable for deploying a small number of resources.</li><li><strong>Using CI/CD tools</strong>: CI/CD tools (such as Jenkins, GitLab CI, CircleCI, ArgoCD, FluxCD, etc.) can be used to achieve GitOps automation deployment of Kubernetes YAML configuration files to the cluster. By defining CI/CD processes and configuration files, automated building and deployment to the cluster can be achieved.</li><li><strong>Using tools that support KRM Function specification</strong>: Kubernetes Resource Model (KRM) Function allows users to use other languages, including KCL, to enhance YAML template and logic writing capabilities, such as writing conditions, loops, etc. These tools mainly include Kustomize, KPT, Crossplane, etc. Although Helm does not natively support KRM Function, we can combine Helm and Kustomize to achieve it.</li><li><strong>Using client/runtime custom abstract configuration tools for deployment</strong>: KusionStack, KubeVela, etc. Of course, KCL allows you to customize your preferred application configuration model.</li><li><strong>Using KCL Operator</strong> with Kubernetes Mutation Webhook and Validation Webhook support for runtime configuration or policy writing.</li><li><strong>Using configuration management tools</strong>: Combine configuration management tools (such as Puppet, Chef, Ansible, etc.) to automate the deployment of Kubernetes YAML configurations to the cluster. These tools can achieve dynamic configuration deployment by defining KCL templates and variables.</li></ul><p>The reasons for KCL supporting multiple deployment methods and cloud-native tool integration are as follows:</p><ul><li><strong>Flexibility</strong>: Different deployment methods are suitable for different scenarios and needs, so providing multiple choices allows users to choose the most suitable way to deploy applications or configurations according to their specific situations.</li><li><strong>Cloud-native tool ecosystem</strong>: Kubernetes is a widely used platform with a large ecosystem of tools and technologies. Supporting multiple deployment methods can provide users with more choices to meet their usage habits and technological preferences.</li><li><strong>Specifications and standards</strong>: The Kubernetes community is working to promote standards and specifications, such as OAM, KRM Function specifications, and Helm Charts. By providing multiple support methods through a unified KRM KCL specification and KCL Module, different specification and standard requirements can be met.</li><li><strong>Automation and integration</strong>: Some deployment methods can be integrated through automation tools and CI/CD pipelines to achieve automated deployment processes. Therefore, providing multiple ways can meet different automation and integration needs.</li></ul><p>In conclusion, supporting multiple deployment methods can provide users with greater flexibility and choice, allowing them to deploy applications or configurations according to their needs and preferences. The specific usage of each deployment method is as follows:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-kubectl">Using Kubectl<a href="#using-kubectl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><a href="https://kcl-lang.io/blog/2023-11-20-search-k8s-module-on-artifacthub" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/blog/2023-11-20-search-k8s-module-on-artifacthub</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-cicd-tools">Using CI/CD Tools<a href="#using-cicd-tools" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><a href="https://kcl-lang.io/blog/2023-07-31-kcl-github-argocd-gitops" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/blog/2023-07-31-kcl-github-argocd-gitops</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-krm-function">Using KRM Function<a href="#using-krm-function" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><a href="https://kcl-lang.io/blog/2023-10-23-cloud-native-supply-chain-krm-kcl-spec" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/blog/2023-10-23-cloud-native-supply-chain-krm-kcl-spec</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-custom-abstract-configuration-tools">Using Custom Abstract Configuration Tools<a href="#using-custom-abstract-configuration-tools" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><a href="https://kcl-lang.io/blog/2023-12-15-kubevela-integration" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/blog/2023-12-15-kubevela-integration</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-kcl-operator">Using KCL Operator<a href="#using-kcl-operator" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/mutate-manifests/kcl-operator" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/mutate-manifests/kcl-operator</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-configuration-management-tools">Using Configuration Management Tools<a href="#using-configuration-management-tools" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><a href="https://github.com/kcl-lang/kcl/issues/952" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/952</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>KubeVela</category>
        </item>
        <item>
            <title><![CDATA[Cloud Native Configuration and Policy Language - KCL]]></title>
            <link>https://kcl-lang.github.io/blog/2023-12-18-cloud-native-configuration-language-kcl</link>
            <guid>https://kcl-lang.github.io/blog/2023-12-18-cloud-native-configuration-language-kcl</guid>
            <pubDate>Mon, 18 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[This blog is a review of the content of the KCL language part of the speech at the 2023 CNCF KCD ShenZhen meeting by KusionStack leader Dayuan Li and KCL project Maintainer Zhe Zong. The main content of this article is a review of the content of the KCL language part of the speech, the activity link//community.cncf.io/events/details/cncf-kcd-hangzhou-presents-kcd-shenzhen-2023/]]></description>
            <content:encoded><![CDATA[<blockquote><p>This blog is a review of the content of the KCL language part of the speech at the 2023 CNCF KCD ShenZhen meeting by KusionStack leader Dayuan Li and KCL project Maintainer Zhe Zong. The main content of this article is a review of the content of the KCL language part of the speech, the activity link: <a href="https://community.cncf.io/events/details/cncf-kcd-shenzhen-presents-kcd-shenzhen-2023/" target="_blank" rel="noopener noreferrer">https://community.cncf.io/events/details/cncf-kcd-hangzhou-presents-kcd-shenzhen-2023/</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-the-cloud-native-era-infrastructure-as-code-iac-is-the-core-of-developer-experience">In the cloud-native era, infrastructure as code (IaC) is the core of developer experience<a href="#in-the-cloud-native-era-infrastructure-as-code-iac-is-the-core-of-developer-experience" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In today's rapidly developing technical world, infrastructure as code (IaC) has become the key to automating and managing cloud resources, and IaC has also become the core part of developer experience, bringing convenience and efficiency, but it also brings a series of challenges.</p><p><img loading="lazy" alt="intro-iac-en.png" src="/assets/images/intro-iac-en-24f19f34296b78e89bf45196bf351c2b.png" width="2138" height="1204" class="img_ev3q"></p><p>First of all, application developers need to face the complex infrastructure and platform concepts provided by k8s, which has caused a high cognitive burden and affected the software delivery experience of higher-level application developers.</p><p>Therefore, we urgently need a way to reduce the cognitive burden of developers, provide efficient dynamic configuration management, and ensure the reliability of configuration through standard configuration testing and verification methods to ensure the efficiency and security of infrastructure.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-native-configuration-and-policy-language---kcl">Cloud Native Configuration and Policy Language - KCL<a href="#cloud-native-configuration-and-policy-language---kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>So we tried to design a new configuration language KCL to solve many of the problems mentioned above by designing the language syntax and enhancing the surrounding tools.</p><p><img loading="lazy" alt="intro-kcl-en.png" src="/assets/images/intro-kcl-en-620552ad604cb8c0dee26482f984a580.png" width="2138" height="1204" class="img_ev3q"></p><p>KCL language starts from the three aspects of <strong>dynamic configuration management</strong>, <strong>configuration reliability verification and testing</strong> and <strong>reducing developer cognitive burden</strong> mentioned above. We propose three main design concepts, <strong>Mutation</strong>, <strong>Validation</strong> and <strong>Abstraction</strong>, and we also use these three design concepts as the core slogan of KCL homepage.</p><p>Around the three design concepts, KCL has done some design on the language syntax:</p><ul><li>To use KCL for dynamic configuration management, the language side needs to provide syntaxes such as flow control and lambda expressions that can describe program behavior.</li><li>To do configuration reliability related verification and testing: you need to give this language the ability to check the configuration content through a strong type system, assert, check and other syntaxes to support the testing and verification process.</li><li>To reduce developer cognitive burden and development cost: KCL provides a <code>Schema</code> model to abstract the data structure. For developers, it shields unnecessary fields, and provides rich third-party library resources through the package management mechanism, reducing the cost of developers directly writing models.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-language-features">KCL language features<a href="#kcl-language-features" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>I have listed some small code snippets that can reflect the language features in the ppt:</p><p><img loading="lazy" alt="kcl-feature-en.png" src="/assets/images/kcl-feature-en-f2f593bb6434dec8f72281ff74f125f4.png" width="2138" height="1204" class="img_ev3q"></p><p>At first, the leftmost picture shows the flow control, lambda expression, and python-style loop expression that are similar to general-purpose programming languages. Then, the middle picture shows the assert statement provided for verification and testing, and the check block of the schema. Through the strategy written in check, the fields in the schema can be checked. Finally, the rightmost picture is to use the schema to define the data structure and instantiate the configuration. And you can see that in this example, the strong type system of KCL has also demonstrated the ability to check the configuration type. If the type of a field is written incorrectly in the process of instantiating the configuration using the schema, the error will be checked at the compilation stage. The last picture is to use the third-party library of k8s to create an nginx pod. Some unnecessary fields have been shielded, and the application developer only needs to fill in a few fields to complete the configuration writing.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl--krm--dynamic-configuration-management">KCL &amp; KRM &amp; Dynamic Configuration Management<a href="#kcl--krm--dynamic-configuration-management" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>KCL provides some dynamic behaviors such as check, assert statements, type system, Schema abstraction, etc. However, when we try to use the above features for configuration management, we find that the language features of KCL alone are not enough. To solve the problems in the IaC field, we must also consider the stock configuration. It is obviously not a suitable way to push down all the stock configurations and use KCL to rebuild them, and it cannot be realized.</p><p>Therefore, in addition to working on language mechanisms, we also need to have the ability to integrate with the community ecology to make the role of KCL language features play on other configuration languages, so that KCL can truly solve the problems in the IaC field. Under the premise of minimizing the changes to the stock configuration, give full play to the role of KCL language features, and solve the problems of dynamic configuration, reliability verification, and reducing the cognitive burden of developers.</p><p><img loading="lazy" alt="kcl-krm-en.png" src="/assets/images/kcl-krm-en-9fb61630676c4b13ca8747c731b6a5fa.png" width="2138" height="1204" class="img_ev3q"></p><p>Therefore, we proposed the <a href="https://github.com/kcl-lang/krm-kcl" target="_blank" rel="noopener noreferrer">KCL KRM specification</a>, based on this specification, we can use the capabilities of the KCL language to dynamically configure, verify and abstract the resources in KRM.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-ecological-integration">KCL Ecological Integration<a href="#kcl-ecological-integration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Based on the KCL &amp; KRM specification, we have developed some peripheral tools to better integrate KCL with the surrounding tool ecology.</p><p><img loading="lazy" alt="kcl-integration-en.png" src="/assets/images/kcl-integration-en-f97e9c99f840340fe050cd5759b244d0.png" width="2138" height="1204" class="img_ev3q"></p><ul><li>Data structure import and export: KCL provides import/export tools, which support using KCL to import/export data structures from JsonSchema, Terraform, etc., to reduce the process of duplicating data modeling in the development process, and make KCL effect is applied to stock configuration.</li><li>Plugins: KCL provides plugins for tools such as kubectl, kustomize, helm/helmfile, etc. Users can choose the appropriate engine such as Kubectl, KusionStack, KubeVela or Helmfile according to different scenarios to combine with KCL to make the configuration effective to the cluster.</li><li>KCL Operator: Developed <a href="https://github.com/kcl-lang/kcl-operator" target="_blank" rel="noopener noreferrer">KCL Operator</a> to integrate with Kubernetes, and automatically modify the configuration at runtime without the need to repeatedly develop Kubernetes Webhook to write a large amount of configuration processing logic.</li></ul><p>KCL is built in a completely open cloud-native world. KCL is almost not strongly bound to any orchestration/engineering tools, and can provide API abstraction, combination and verification capabilities for both clients and runtimes at the same time.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-toolchain">KCL Toolchain<a href="#kcl-toolchain" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Although KCL is a domain language. KCL also provides a toolchain that is basically equivalent to the capabilities of general programming languages, such as formatting, testing, documentation , package management tools, etc. to help better write, understand and check the written configuration or strategy; through VS Code and other IDE plug-ins and Playground to reduce the cost of configuration writing and sharing; through Rust, Go, and Python multi-language SDK to automate the management and execution of configuration.</p><p>For IDE plug-ins, KCL currently mainly provides VS Code, IntelliJ and NeoVim. The three IDE plug-ins are based on the same KCL Language Server to implement the same capabilities such as completion, jump, hover, code refactoring, and formatting.</p><p><img loading="lazy" alt="kcl-tools-en.png" src="/assets/images/kcl-tools-en-0ee2e3d1ecde40feb74ff6af14b96be2.png" width="2138" height="1204" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="artifacthub--kcl"><strong>Artifacthub &amp; KCL</strong><a href="#artifacthub--kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>KCL has been integrated with ArtifactHub, which is used as the model market of KCL, providing more than 200+ KCL models, covering multiple aspects such as configuration editing, verification and model abstraction. If you are interested, you can take a look at whether there are models you are interested in, or if you have good ideas to share with everyone, you can also contribute your KCL package to ArtifactHub.</p><p><img loading="lazy" alt="kcl-ah-en.png" src="/assets/images/kcl-ah-en-25ddb9a41ad68a4a2d121e28e09e48c7.png" width="2138" height="1204" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="some-practical-cases">Some practical cases<a href="#some-practical-cases" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Finally, I will show some simple cases to of the use of KCL.</p><p><img loading="lazy" alt="kcl-mut-en.png" src="/assets/images/kcl-mut-en-6ed0284e11bca1500796d398cf56c002.png" width="2138" height="1204" class="img_ev3q"></p><p>At first, if the KCL Operator is installed in the cluster, then the configuration on the right can be mutated through the configuration file on the left. The behavior code is written in KCL in the source field, and the annotation is dynamically added to the configuration file on the right.</p><p><img loading="lazy" alt="kcl-vet-en.png" src="/assets/images/kcl-vet-en-dd078c8c2de87f206375bc64a8b8c81e.png" width="2138" height="1204" class="img_ev3q"></p><p>Then, in this case, the configuration content generated by terraform plan is verified using the configuration verification tool kcl-vet provided by KCL.</p><p><img loading="lazy" alt="kcl-abs-en.png" src="/assets/images/kcl-abs-en-adf564c78a0e180078fdbeec32d8c3fa.png" width="2138" height="1204" class="img_ev3q"></p><p>Finally, in this case, the abstraction of the configuration is demonstrated. We can get the Kubernetes manifests by directly writing the KCL program, or by writing the configuration using KCL &amp; KRM and compiling it into the corresponding Kubernetes manifests.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>KCL language is a domain language focusing on cloud-native configuration management. It provides a series of language features, such as strong type system, Schema abstraction, flow control, lambda expression, assert statement, check statement, etc., to solve the problems in the cloud-native configuration management field, such as dynamic configuration management, configuration reliability verification and testing, and reducing developer cognitive burden. At the same time, KCL also provides a series of peripheral tools, such as IDE plug-ins, ArtifactHub integration, KCL Operator, etc., to improve the development experience of developers and reduce development costs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-resources">Other Resources<a href="#other-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information about KCL, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL HomePage</a></li><li><a href="https://github.com/kcl-lang/" target="_blank" rel="noopener noreferrer">KCL GitHub Repo</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack HomePage</a></li><li><a href="https://github.com/KusionStack/" target="_blank" rel="noopener noreferrer">KusionStack GitHub Repo</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Meeting</category>
        </item>
        <item>
            <title><![CDATA[KCL && KusionStack Introduction at CNCF KCD ShenZhen 2023 Meeting]]></title>
            <link>https://kcl-lang.github.io/blog/2023-12-18-kcl-kcd-shenzhen-meeting</link>
            <guid>https://kcl-lang.github.io/blog/2023-12-18-kcl-kcd-shenzhen-meeting</guid>
            <pubDate>Mon, 18 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Download PDF (Chinese)]]></description>
            <content:encoded><![CDATA[<p><a href="https://kcl-lang.io/talks/kcl-cncf-kcd-shenzhen2023.pdf" target="_blank" rel="noopener noreferrer">Download PDF (Chinese)</a></p><p><img loading="lazy" alt="Talk Cover" src="/assets/images/talk-cover-43bb207d2e2feea61c1884a6dd39f90c.png" width="2108" height="1188" class="img_ev3q"></p>]]></content:encoded>
            <category>KCL</category>
            <category>Meeting</category>
        </item>
        <item>
            <title><![CDATA[Efficient Cloud Native Application Deployment - KCL and KubeVela Integration Quick Guide]]></title>
            <link>https://kcl-lang.github.io/blog/2023-12-15-kubevela-integration</link>
            <guid>https://kcl-lang.github.io/blog/2023-12-15-kubevela-integration</guid>
            <pubDate>Fri, 15 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[cover]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="cover" src="/assets/images/cover-c640e1eb03f64663e0c2a8902a36a702.png" width="712" height="350" class="img_ev3q"></p><h1>Introduction</h1><p><a href="https://kubevela.net/" target="_blank" rel="noopener noreferrer">KubeVela</a> is a modern application delivery system hosted by the CNCF Foundation. It is built on the Open Application Model (OAM) specification and aims to abstract the complexity of Kubernetes, providing a set of simple and easy-to-use command-line tools and APIs for developers to deploy and operate cloud-native applications without worrying about the underlying details.</p><p><a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">KCL</a> is a configuration and policy language for cloud-native scenarios, hosted by the CNCF Foundation. It aims to improve the writing of complex configurations, such as cloud-native Kubernetes configurations, using mature programming language techniques and practices. KCL focuses on building better modularity, scalability, and stability around configuration, as well as easier logic writing, automation, and integration with the toolchain.</p><p>KCL exists in a completely open cloud-native world and is not tied to any orchestration/engine tools or Kubernetes controllers. It can provide API abstraction, composition, and validation capabilities for both Kubernetes clients and runtime.</p><p>Users can choose suitable cloud-native tools such as Kubectl, Helm, Kustomize, KPT, KusionStack, KubeVela, Helmfile, Crossplane, or ArgoCD to combine with KCL and apply configurations to the cluster based on their specific scenarios.</p><p><img loading="lazy" alt="integration" src="/assets/images/integration-c0c6e40b3644da0976464727ec78cfdd.png" width="2606" height="672" class="img_ev3q"></p><p>This blog is the first in a series that explores the efficient deployment and operation of cloud-native applications using KCL and KubeVela together. We will share more advanced usage in future articles, so stay tuned.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-kcl-with-kubevela">Using KCL with KubeVela<a href="#using-kcl-with-kubevela" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Using KCL with KubeVela has the following benefits:</p><ul><li><strong>Simpler configuration</strong>: KCL provides stronger templating capabilities, such as conditions and loops, for KubeVela OAM configurations at the client level, reducing the need for repetitive YAML writing. At the same time, the reuse of KCL model libraries and toolchains enhances the experience and management efficiency of configuration and policy writing.</li><li><strong>Better maintainability</strong>: KCL provides a configuration file structure that is more conducive to version control and team collaboration, instead of relying solely on YAML. When combined with OAM application models written in KCL, application configurations become easier to maintain and iterate.</li><li><strong>Simplified operations</strong>: By combining the simplicity of KCL configurations with the ease of use of KubeVela, daily operational tasks such as deploying, updating, scaling, or rolling back applications can be simplified. Developers can focus more on the applications themselves rather than the tedious details of the deployment process.</li><li><strong>Improved cross-team collaboration</strong>: By using KCL's configuration chunk writing and package management capabilities in conjunction with KubeVela, clearer boundaries can be defined, allowing different teams (such as development, testing, and operations teams) to collaborate systematically. Each team can focus on tasks within their scope of responsibility, delivering, sharing, and reusing their own configurations without worrying about other aspects.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow">Workflow<a href="#workflow" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="workflow" src="/assets/images/workflow-65f3b48f48ffc200fd831743c0738a81.png" width="1058" height="340" class="img_ev3q"></p><p>In this example, we use the KCL Playground application (written in Go and HTML5) as an example and use KCL to define the OAM configuration that needs to be deployed. The overall workflow is as follows:</p><ul><li>Application code development produces a Docker image.</li><li>Write OAM configurations using KCL.</li><li>Deploy configurations using KubeVela.</li><li>Verify the running status of the application.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="specific-steps">Specific Steps<a href="#specific-steps" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="0-prerequisites">0. Prerequisites<a href="#0-prerequisites" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Familiarize yourself with basic Unix/Linux commands.</li><li>Familiarize yourself with using Git.</li><li>Understand the basics of Kubernetes.</li><li>Understand KubeVela.</li><li>Understand the basics of KCL.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-configure-the-kubernetes-cluster">1. Configure the Kubernetes Cluster<a href="#1-configure-the-kubernetes-cluster" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Install <a href="https://github.com/k3d-io/k3d" target="_blank" rel="noopener noreferrer">K3d</a> and create a cluster.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">k3d cluster create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: You can use other methods to create your own Kubernetes cluster, such as kind, minikube, etc., in this scenario.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-install-kubevela">2. Install KubeVela<a href="#2-install-kubevela" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Install the KubeVela CLI.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSl https://kubevela.net/script/install.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Install KubeVela Core.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vela </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-write-oam-configurations">3. Write OAM Configurations<a href="#3-write-oam-configurations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Install KCL.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://kcl-lang.io/script/install-cli.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Create a new project and add OAM dependencies.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod init kcl-play-svc </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> kcl-play-svc </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kcl mod </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> oam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Write the following code in main.k.</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> oam</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oam</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Application </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl-play-svc"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">components </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"webservice"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        properties </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcllang/kcl"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> expose </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cmd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"play"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: You can see documents here: <a href="https://artifacthub.io/packages/kcl/kcl-module/oam" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/kcl/kcl-module/oam</a> or in the IDE extension.</p></blockquote><p><img loading="lazy" alt="oam-definition-hover" src="/assets/images/oam-definition-hover-bf557b943b8e7abe7c4d13e91d1c48d9.png" width="1048" height="630" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-deploy-the-application-and-verify">4. Deploy the application and verify.<a href="#4-deploy-the-application-and-verify" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Apply the configuration.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl run </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> vela up -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Port forward the service.</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vela port-forward kcl-play-svc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then we can see the KCL Playground application running successfully in the browser.</p><p><img loading="lazy" alt="kcl-play-svc" src="/assets/images/kcl-play-svc-17cdd017ee58347075be64904d62e73f.png" width="2326" height="858" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Through this guide, we have learned how to deploy cloud-native applications using KubeVela and KCL. In future blogs, we will explain how to further extend the capabilities of KubeVela by using KCL on the client side such as</p><ul><li>Using the inheritance, composition, and validation capabilities of KCL to extend the OAM model and define application abstractions that are better suited to your infrastructure or organization.</li><li>Using the modularized configuration capabilities of KCL to organize OAM multi-environment configurations with conditions, logic, loops, and modularity. For example, distribute longer App Definitions into different files to reduce boilerplate configurations.</li><li>Further integration with projects like KusionStack and ArgoCD to achieve better GitOps.</li><li>Incorporate more cloud-native capabilities or Kubernetes Operators such as KubeBlocks and Crossplane to improve database management and provide programmable access to unified cloud APIs and Kubernetes APIs.</li><li>And many other use cases...</li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>KubeVela</category>
        </item>
        <item>
            <title><![CDATA[Exploration of KCL in Engineering Configuration and Policy Scenarios]]></title>
            <link>https://kcl-lang.github.io/blog/2023-12-09-engineering-config-policy-with-kcl-meeting</link>
            <guid>https://kcl-lang.github.io/blog/2023-12-09-engineering-config-policy-with-kcl-meeting</guid>
            <pubDate>Sat, 09 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Download Chinese PDF]]></description>
            <content:encoded><![CDATA[<p><a href="https://kcl-lang.io/talks/engineering-config-policy-with-kcl.pdf" target="_blank" rel="noopener noreferrer">Download Chinese PDF</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>Meeting</category>
        </item>
        <item>
            <title><![CDATA[Unlocking Advanced Code Intelligence with the KCL Semantic Model]]></title>
            <link>https://kcl-lang.github.io/blog/2023-12-09-kcl-new-semantic-model</link>
            <guid>https://kcl-lang.github.io/blog/2023-12-09-kcl-new-semantic-model</guid>
            <pubDate>Sat, 09 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[What is the KCL semantic model?]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-the-kcl-semantic-model">What is the KCL semantic model?<a href="#what-is-the-kcl-semantic-model" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="image.png" src="/assets/images/01-a4f6cb66bb886db68b7fb33069e7d7bc.png" width="1480" height="1238" class="img_ev3q"></p><ul><li>"Semantic model" refers to the in-memory representation of modules, functions, and types that appear in source code. This representation is fully "resolved": all expressions have types (note that there may be expression types that cannot be deduced in the KCL, they will be defined as any <strong>Type</strong>), and all references are bound to declarations, etc.</li><li>The client can submit a small amount of input data (typically changes to a single file) and get a new code model to explain the changes.</li><li>The underlying engine ensures that the model is <strong>Lazy (on demand) and incremental</strong> computational and can be updated quickly for small changes.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-does-kcl-need-a-new-semantic-model">Why does KCL need a new semantic model?<a href="#why-does-kcl-need-a-new-semantic-model" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>First, we can take a brief look at the design of the old semantic model: <img loading="lazy" alt="image.png" src="/assets/images/02-40975ad67009f082400bce523d31386c.png" width="1216" height="812" class="img_ev3q"> the old semantic model can be simply regarded as a collection of a large number of scopes, in which different scopes store the parent-child nodes between the scopes, as well as the symbol strings and corresponding types contained therein. It can simply meet the requirements of the compiler for type checking and code generation. But a simple structure involving an advanced tool chain, such as an IDE, is not sufficient. A few examples of typical IDE queries:</p><ul><li>What is the type of the AST node under the corresponding position?</li><li>Where are all the references to the current AST node? （find reference）</li><li>Which node is referenced by the current AST node? （find definition）</li><li>All symbols accessible at the current position?</li></ul><p>Only the old semantic model is used, which requires the IDE to traverse the AST for many times and perform repeated calculations. We can simply analyze the problems of the old semantic model, and we can find that:</p><ul><li>The old semantic model was more difficult to query information, and only stored the mapping from character string to symbol</li><li>The association between symbols and the weak association between symbols and scopes often leads to the need to traverse all scopes when querying for relevant information</li><li>A large amount of intermediate information is discarded in the analysis process and is not cached, resulting in repeated operations for multiple queries.</li></ul><p>In short, the old semantic model can not meet the query needs of the advanced tool chain, and a lot of information is missing. On the other hand, the old semantic model does not support incremental compilation, which also reduces the user experience of the tool chain.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="main-idea-map-reduce">Main Idea: Map Reduce<a href="#main-idea-map-reduce" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The idea of the Map Reduce architecture is to split the analysis into a relatively simple indexing phase and a separate full analysis phase.</p><p>The core constraint of indexing is that it runs on a per-file basis, with the indexer taking the text of a single file, parsing it, and spitting out some data about that file. The indexer cannot touch other files. Full analysis can read other files and use the information in the index to save effort.</p><p>This sounds too abstract, so let's look at a concrete example-Java. In Java, each file begins with a package declaration. The indexer concatenates the package name with the class name to get the fully qualified name. It also collects the set of methods declared in the class, the list of superclasses and interfaces, and so on.</p><p>The data for each file is merged into an index that maps fully qualified names (FQNs) to classes. The index is inexpensive to update, and when a file modification request arrives, the contribution to that file in the index is removed, the text of the file is changed, and the indexer runs on the new text and adds the new contribution. The amount of work to be done is proportional to the number of files changed and is independent of the total number of files.</p><p>Let's see how to use the FQN index to quickly provide completion.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// File ./mypackage/Foo.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package mypackage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.*;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Bar f() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new Bar();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// File ./mypackage/Bar.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package mypackage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Bar {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void g() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// File ./Main.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import mypackage.Foo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Main {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Foo.f().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The user just entered <code>Foo.f().</code> We need to clarify that the receiver expression type is <code>Bar</code> and suggest <code>g </code> as completion.</p><p>Firstly, when the file <code>Main.java</code> is modified, we run the indexer on this individual file without any changes (the file still contains the class <code>Main</code> with static <code>main</code> methods), so we do not need to update the FQN index.</p><p>Next, we need to resolve the name <code>Foo</code>. We parsed the file <code>Main.java</code> and noticed the <code>import mypackage.Foo</code> and search for <code>mypackage.Foo</code> in the FQN index. In the index, we found that <code>Foo</code> has a static method <code>f</code>, so we successfully resolved the call to <code>f()</code>. The index also stores the return type of <code>f</code>, but please note that the index stores the string <code>Bar</code> instead of a direct reference to the class <code>Bar</code>.</p><p>The reason for doing this is that the <code>import java.util.*</code> in <code>Foo.java</code> can cause the <code>Bar</code> to be inferred as either <code>java.util.Bar'</code> or <code>mypackage.Bar</code>, the indexer doesn't know which one it is because it can only "see" the text of the file <code>Foo.java</code>. In other words, although the index does store the return types of methods, it stores them in an unresolved form.</p><p>The next step is to parse the identifier <code>Bar</code> in the context of <code>Foo.java</code>. This will continue to use FQN indexing and navigate to class <code>mypackage.Bar</code>. So in the end, we found the method <code>g</code> that we wanted to complete.</p><p>During the completion process, only three files were touched upon in total. The FQN index allows us to completely ignore all other files in the project.</p><p>One problem with the methods described so far is that parsing types from indexes requires a lot of work. For example, if <code>Foo.f'</code> is called multiple times, this task may be repeated. The solution is to add a cache. The name resolution result will be remembered, so only one resolution is required. Any changes will cause the cache to completely invalid - the cost of rebuilding the cache using indexes is not that high.</p><p>To summarize, the working principle of the first method is as follows:</p><ol><li>Each file is independently and parallelly indexed, generating a "stub" - a set of visible top-level declarations with unresolved types.</li><li>Merge all stubs into one indexed data structure.</li><li>Name parsing and type inference are mainly based on stubs.</li><li>Name resolution is lazy (we only parse types from stubs when needed) and memory based (each type is parsed only once).</li><li>The cache will be completely invalidated every time a change is made</li><li>The index is incrementally updated:<ul><li>If the editor has not changed the stub of the file, there is no need to change the index.</li><li>Otherwise, the old index will be deleted and the new index will be added again</li></ul></li></ol><p>This method is simple enough and has excellent performance. Most of the work is mainly in the indexing phase, and we can execute these tasks in parallel. Two examples of this architecture are <a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener noreferrer">IntelliJ</a> And <a href="https://sorbet.org/" target="_blank" rel="noopener noreferrer">Sorbet</a>.</p><p>The main drawback of this method is that it is only effective when it is effective - specifically, not every language has a clearly defined concept of FQN. But overall, designing modules and name parsing is always good for languages, and specifically, in the current situation, KCL just meets this condition.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-semantic-model-pipeline">New Semantic Model Pipeline<a href="#new-semantic-model-pipeline" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The overall pipeline of the new semantic model is as follows:
<img loading="lazy" alt="image.png" src="/assets/images/03-c2c78dc8d47dd97ac1ae13c114b6c30d.png" width="954" height="772" class="img_ev3q"></p><p><img loading="lazy" alt="image.png" src="/assets/images/04-f50a1ff5aa06ed172217d6176fafdb14.png" width="960" height="778" class="img_ev3q"></p><p><img loading="lazy" alt="image.png" src="/assets/images/05-1a4d9bc6eb1226873d9264609ddff30b.png" width="1316" height="1296" class="img_ev3q">
Compared with the analysis process of the original semantic model, the new semantic model adds two rounds of pass, namer and advanced <!-- -->_<!-- --> resolve, so as to enhance the support for the advanced tool chain without affecting the original compiler process.</p><ul><li>The <code>resolver</code> is based on file level work, mainly involving the initialization of the <code>GlobalState</code>, parsing the source code into AST, and establishing the mapping of AST nodes to types for later stages to use. Therefore, we can cache the output of a single file index to completely skip parsing the file when its content has not changed.</li><li>The early stage of <code>namer</code> will also be based on file level work, which collects global symbols defined in the file, and then merges the symbols based on FQN to obtain a unique <code>GlobalState</code><ul><li>Based on file level, it means we can easily perform incremental compilation in the first two stages</li></ul></li><li><code>advanced_resolver</code> will traverse the AST to resolve local symbols and point symbol references to their definitions, while setting the owner symbol for the local scope, such as <code>Schema</code> and <code>Package</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="semantic-database-globalstate">Semantic Database: GlobalState<a href="#semantic-database-globalstate" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The core structure of the new semantic model is <code>core::GlobalState</code> that the tool chain mainly uses it to complete the interaction and query with the compiler.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// GlobalState is used to store semantic information of KCL source code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Default, Debug, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct GlobalState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // store all allocated symbols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols: KCLSymbolData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // store all allocated scopes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scopes: ScopeData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // store package infomation for name mapping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    packages: PackageDB,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // store semantic information after analysis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) sema_db: SemanticDB,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>GlobalState</code> is used as a semantic database for the new semantic model and is the final product of semantic analysis, mainly containing four aspects of information:</p><ul><li><code>SymbolData</code>: stores all symbols in the AST and their corresponding semantic information, and maintain the reference relationship.</li><li><code>ScopeData</code>: stores all scopes involved in the AST, while separating symbols, maintaining symbol visibility and scope nesting relationships</li><li><code>PackageDB</code>: stores package information, such as a collection of files for the package, import information, and so on.</li><li><code>SemanticDB</code>: stores auxiliary information to speed up queries, such as symbol sorting and position caching.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="symboldata">SymbolData<a href="#symboldata" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><code>SymbolData</code> is responsible for managing the allocation of symbols and storing the allocated symbols and related semantic information. Here we borrow the arena design of rust to access the relevant symbols.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Default, Debug, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct KCLSymbolData {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) values: Arena&lt;ValueSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) packages: Arena&lt;PackageSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) attributes: Arena&lt;AttributeSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) schemas: Arena&lt;SchemaSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) type_aliases: Arena&lt;TypeAliasSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) unresolved: Arena&lt;UnresolvedSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) rules: Arena&lt;RuleSymbol&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) symbols_info: SymbolDB,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the new semantic model, we use <code>core::SymbolRef</code> to represent a reference to a symbol, and also use <code>SymbolRef</code> to access <code>SymbolData</code> for the specific symbol information.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Debug, Clone, Copy, PartialEq, Eq, PartialOrd, Ord, Hash)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct SymbolRef {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) id: generational_arena::Index,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) kind: SymbolKind,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Specifically, Symbols with different types will be taken out from <code>SymbolData</code> according to <code>SymbolRef::kind</code> and converted to abstract <code>trait Symbol</code>.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pub type KCLSymbol = dyn Symbol&lt;SymbolData = KCLSymbolData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SemanticInfo = KCLSymbolSemanticInfo&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn get_symbol(&amp;self, id: SymbolRef) -&gt; Option&lt;&amp;KCLSymbol&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        match id.get_kind() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SymbolKind::Schema =&gt; self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .schemas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .get(id.get_id())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .map(|symbol| symbol as &amp;KCLSymbol),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pub trait Symbol {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type SymbolData;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type SemanticInfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_sema_info(&amp;self) -&gt; &amp;Self::SemanticInfo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn is_global(&amp;self) -&gt; bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_range(&amp;self) -&gt; Range;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_owner(&amp;self) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_definition(&amp;self) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_name(&amp;self) -&gt; String;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_id(&amp;self) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_attribute(&amp;self, ...) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn has_attribute(&amp;self, ...) -&gt; bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_all_attributes(&amp;self, ...) -&gt; Vec&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn simple_dump(&amp;self) -&gt; String;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn full_dump(&amp;self, data: &amp;Self::SymbolData) -&gt; Option&lt;String&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>hrough this trait, the tool chain can easily complete the query of symbol semantic information and reference relationship.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scopedata">ScopeData<a href="#scopedata" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The design idea of <code>ScopeData</code> is actually similar to <code>SymbolData</code>, it stores <code>Scope</code> with different types and using <code>ScopeRef</code> to access them.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Default, Debug, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct ScopeData {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// map pkgpath to root_scope</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) root_map: IndexMap&lt;String, ScopeRef&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) locals: generational_arena::Arena&lt;LocalSymbolScope&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) roots: generational_arena::Arena&lt;RootSymbolScope&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pub trait Scope {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type SymbolData;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_filename(&amp;self) -&gt; &amp;str;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_parent(&amp;self) -&gt; Option&lt;ScopeRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_children(&amp;self) -&gt; Vec&lt;ScopeRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn contains_pos(&amp;self, pos: &amp;Position) -&gt; bool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_owner(&amp;self) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn look_up_def(&amp;self, ...) -&gt; Option&lt;SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn get_all_defs(&amp;self, ...) -&gt; HashMap&lt;String, SymbolRef&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn dump(&amp;self, scope_data: &amp;ScopeData,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            symbol_data: &amp;Self::SymbolData) -&gt; Option&lt;String&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="semanticdb">SemanticDB<a href="#semanticdb" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><code>SemanticDB</code> is essentially the caching and integration of partial semantic information of semantic objects. Its main function is to accelerate the maintenance and querying of internal information in <code>GlobalState</code>.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Debug, Default, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct SemanticDB {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) file_sema_map: IndexMap&lt;String, FileSemanticInfo&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Debug, Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct FileSemanticInfo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) filename: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) symbols: Vec&lt;SymbolRef&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) scopes: Vec&lt;ScopeRef&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) symbol_locs: IndexMap&lt;SymbolRef, CachedLocation&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) local_scope_locs: IndexMap&lt;ScopeRef, CachedRange&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The new semantic model of KCL essentially only does two things, one is to sink the repeated calculation of the tool chain in the application layer to the semantic layer, and design a corresponding mechanism to simplify the information query, and the other is to re-analyze and cache the information lost in the semantic analysis process. There are several main purposes for doing so:</p><ul><li>The calculation process is gathered, and the intrusion of the application layer into the semantic core of the compiler is prevented</li><li>The cache mechanism is improved, and the implementation of incremental compilation is simplified, so that the query speed is accelerated.</li><li>Improve maintainability by simplifying the development of the application layer tool chain and reducing the handling of Corner Cases by the tool chain</li></ul><p>In practice, the above objectives are basically achieved. After migration, the code volume of LSP related functions is reduced by about 60%, and the compilation speed is increased by about 500% after incremental compilation.</p>]]></content:encoded>
            <category>KCL</category>
            <category>Semantic</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 11.24 - 12.07) | How to Use Different Kubernetes Patch Strategies in KCL?]]></title>
            <link>https://kcl-lang.github.io/blog/2023-12-07-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2023-12-07-biweekly-newsletter</guid>
            <pubDate>Thu, 07 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (11.24 - 12.07 2023). Here is an overview of the key content:</p><p><strong>📦 Module Update</strong></p><p>The number of KCL models has increased to <strong>240</strong>, mainly including models related to Crossplane Provider and libraries related to JSON merging operations.</p><ul><li>KCL JSON Patch library:<em><a href="https://artifacthub.io/packages/kcl/kcl-module/jsonpatch" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/kcl/kcl-module/jsonpatch</a></em></li><li>KCL JSON Merge Patch library: <em><a href="https://artifacthub.io/packages/kcl/kcl-module/json_merge_patch" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/kcl/kcl-module/json_merge_patch</a></em></li><li>KCL Kubernetes Strategy Merge Patch library: <em><a href="https://artifacthub.io/packages/kcl/kcl-module/strategic_merge_patch" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/kcl/kcl-module/strategic_merge_patch</a></em></li><li>KCL Crossplane and Crossplane Provider series models: <em><a href="https://artifacthub.io/packages/search?org=kcl&amp;sort=relevance&amp;page=1&amp;ts_query_web=crossplane" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/search?org=kcl&amp;sort=relevance&amp;page=1&amp;ts_query_web=crossplane</a></em></li></ul><p><strong>🔧 Toolchain Update</strong></p><ul><li><strong>Documentation Tool Updates</strong><ul><li>Support documentation generation for third-party libraries that models depend on, such as the <code>k8s</code> module.</li></ul></li><li><strong>Validation Tool Updates</strong><ul><li>Support validation results and error localization to YAML/JSON files, outputting error line and column number information.</li></ul></li><li><strong>Import Tool Updates</strong><ul><li>Support mapping OpenAPI <code>multiplyOf</code> specification to KCL <code>multiplyof</code> function for validation.</li><li>Support outputting YAML Stream format Kubernetes CRD files into multiple KCL files.</li><li>Optimize KCL code generation by removing empty check statements.</li></ul></li></ul><p><strong>🏄 SDK Update</strong></p><p>In addition to the existing Go and Python SDKs in KCL, a new Rust SDK has been added (without LLVM dependency), which includes APIs for KCL file compilation, validation, testing, and code formatting.</p><p><strong>💻 IDE Updates</strong></p><ul><li><strong>Developer Experience</strong><ul><li>Support incremental parsing and asynchronous compilation to enhance performance.</li></ul></li><li><strong>Bug Fixes</strong><ul><li>Fixed the issue where string interpolation variables in assert statements cannot be navigated.</li><li>Fixed the issue where exceptional triggering of function completion in strings.</li><li>Fixed the issue with alias semantic check and completion in import statements.</li><li>Fixed the issue with check expression completion in schemas.</li></ul></li></ul><p><strong>📒 Documentation Updates</strong></p><ul><li>Added index cards for KCL system library documentation for easy navigation: <em><a href="https://kcl-lang.io/docs/reference/model/overview" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/reference/model/overview</a></em></li><li>Updated KCL CLI reference documentation: <em><a href="https://kcl-lang.io/docs/tools/cli/kcl/overview" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/tools/cli/kcl/overview</a></em></li><li>Updated KCL API reference documentation: <em><a href="https://kcl-lang.io/docs/reference/xlang-api/overview" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/reference/xlang-api/overview</a></em></li><li>KCL 2023 &amp; 2024 Roadmap document: <em><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/community/release-policy/roadmap</a></em></li><li>Supplemented project structure introduction and FAQ for Intellij KCL repository: <em><a href="https://github.com/kcl-lang/intellij-kcl/pull/18" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/intellij-kcl/pull/18</a></em></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @professorabhay for supporting KCL testing diff function 🙌 <em><a href="https://github.com/kcl-lang/kcl/issues/940" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/940</a></em></li><li>Thanks to @patrycju, @Callum Lyall, @Even Solberg, @Matt Gowie, and @ShiroDN for their valuable feedback and discussions during the promotion and usage of KCL 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-kubernetes-strategy-merge-patch-to-update-configurations-in-kcl">Using Kubernetes Strategy Merge Patch to Update Configurations in KCL<a href="#using-kubernetes-strategy-merge-patch-to-update-configurations-in-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the current version of KCL, various <strong>attribute operators</strong> are supported to update and override configurations. However, the capability is relatively atomic and cannot cover the typical configuration strategy scenarios in cloud-native environments.</p><p>For Kubernetes configurations, it is common to use the <code>JSON Merge Patch</code> and <code>Strategy Merge Patch</code> capabilities natively supported by Kubernetes e.g., using tools such as <code>kubectl patch</code>, <code>kustomize</code>, and other patching capabilities supported by cloud-native configuration and policy tools.</p><p>To avoid repeatedly using KCL attribute operators to write configuration patch template codes when dealing with Kubernetes configurations, we provide the <strong>Kubernetes Strategy Merge Patch library</strong> for updating Kubernetes configurations. This library supports all merging strategies defined by native Kubernetes objects, such as overwriting, modifying, and adding items to list objects. Here is how to use it:</p><p>Create a new project and add the Strategy Merge Patch library dependency:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod init </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kcl mod </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> strategic_merge_patch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Write the configuration patch code in <code>main.k</code> (using the <code>labels</code>, <code>replicas</code>, and <code>container</code> attributes of a <code>Deployment</code> template as an example):</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> strategic_merge_patch </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">original </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-app"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-container-1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-image-1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-container-2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-image-2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patch </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-container-1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-new-image-1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-container-3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"my-image-3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">got </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">original</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> patch</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run the command to get the output:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output will be:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">original</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">patch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">new</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">got</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">new</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As seen in the output, the labels, replicas, and container fields of the Deployment template have all been updated with the correct values. For more documentation and usage examples, please refer to <a href="https://artifacthub.io/packages/kcl/kcl-module/strategic_merge_patch" target="_blank" rel="noopener noreferrer">the document</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community. See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/8" target="_blank" rel="noopener noreferrer">KCL v0.8.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.7.0 Release Blog]]></title>
            <link>https://kcl-lang.github.io/blog/2023-11-30-kcl-0.7.0-release</link>
            <guid>https://kcl-lang.github.io/blog/2023-11-30-kcl-0.7.0-release</guid>
            <pubDate>Thu, 30 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL team is pleased to announce that KCL v0.7.0 is now available! This release has brought three key updates to everyone: <strong>Language</strong>, <strong>Tools</strong>, and <strong>Integrations</strong>.</p><ul><li><p><em>Use KCL language, tools and IDE extensions with more complete features and fewer errors to improve code writing experience and efficiency.</em></p></li><li><p><em>The new KCL CLI integrates KCL package management, doc, test and other peripheral ecosystems.</em></p></li><li><p><em>The rich KCL third-party library market artifacthub.io provides more than 200 KCL third-party libraries for you to choose from.</em></p></li></ul><p>KCL v0.7.0 is now available for download at <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.7.0" target="_blank" rel="noopener noreferrer">KCL v0.7.0 Release Page</a> or <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">KCL Official Website</a>.</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF). KCL improves the writing of numerous complex configurations, such as cloud-native scenarios, through its mature programming language technology and practice. It is dedicated to building better modularity, scalability, and stability around configurations, simpler logic writing, faster automation, and great built-in or API-driven integrations.</p><p>This blog will introduce the content of KCL v0.7.0 and recent developments in the KCL community to readers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="language-updates">Language Updates<a href="#language-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-new-kcl-cli">⭐️ New KCL CLI<a href="#️-new-kcl-cli" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>When compiling, use <code>kcl</code>, when downloading packages, use <code>kpm</code>, if you have a KCL model that you want to send to the cluster, you also need to use <code>kusion</code>, kcl is the compilation command, <code>kpm run</code> can also be compiled, I also found <code>kusion compile</code> in the kusion command line, do you have the same confusion, what is the relationship between these tools? How do I use them?</p><p>For this reason, we provide you with a new KCL CLI, the goal is to include the KCL ecosystem together, to provide you with a unified and concise operation page, everything, one-click direct.</p><p>The new KCL CLI will continue to use <code>kcl</code> as the command prefix, and currently provides multiple sub-commands including compilation, package management, and formatting tools.</p><p><img loading="lazy" alt="cli-help" src="/assets/images/cli-help-ac296258bd181406f51407cb459d3aed.png" width="1454" height="1266" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-diagnostic-information-optimization">🔧 Diagnostic Information Optimization<a href="#-diagnostic-information-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>We have tried to add repair suggestions in some error messages. If you are frustrated by the KCL compilation failure, you may wish to listen to the compiler's suggestions.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sub </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> s1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The_first_kcl_program </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">The_first_kcl_program</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let's listen to what the compiler says. You may have written <code>s1</code> as <code>s</code> by mistake.</p><p><img loading="lazy" alt="did you mean" src="/assets/images/did-you-mean-c2cb0ea05c662fa22633d564216676b5.png" width="1134" height="186" class="img_ev3q"></p><p>KCL cannot find the third-party library used in the package? Try <code>kcl mod add</code>, if it still doesn't work, we have prepared more than 200 KCL models for you on artifacthub.io, come and have a look, there is always one that suits you!</p><p><img loading="lazy" alt="try-kcl-mod-add" src="/assets/images/try-kcl-mod-add-465bb8082896a1c61c1ec9e698bf9222.png" width="1048" height="284" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-language-writing-experience-optimization">🚀 Language Writing Experience Optimization<a href="#-language-writing-experience-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="removed-indentation-check-in-some-code-blocks">Removed indentation check in some code blocks<a href="#removed-indentation-check-in-some-code-blocks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In some code blocks, whether the indentation is aligned has become less important.</p><p>If your code is written like this</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema TestIndent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_indent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TestIndent </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"test"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"test"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the past, you may have encountered a lot of red errors, but now this is not a mistake, <code>kcl fmt</code> will help you tidy it up.</p><p><img loading="lazy" alt="kcl-fmt" src="/assets/images/kclfmt-d4f2588cc56651010ca6444150529d55.gif" width="942" height="834" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lambda-expression-type-annotation">Lambda expression type annotation<a href="#lambda-expression-type-annotation" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In the new version of KCL, we have added type annotations for lambda expressions, and you can write lambda with type annotations in the new version of KCL.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">identity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Test</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Test </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"hello"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> identity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Test </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"hello"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-api-updates">🏄 API Updates<a href="#-api-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>New KCL unit test API: <em><a href="https://github.com/kcl-lang/kcl/pull/904" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/904</a></em></li><li>KCL schema parsing API enhancement version <code>GetFullSchemaType</code> supports obtaining KCL package related information with third-party libraries. <em><a href="https://github.com/kcl-lang/kcl/pull/906" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/906</a></em></li><li>New KCL symbol renaming API: <em><a href="https://github.com/kcl-lang/kcl/pull/890" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/890</a></em></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-other-updates-and-bug-fixes">🐞 Other Updates and Bug Fixes<a href="#-other-updates-and-bug-fixes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>KCL command-line tool supports compiling input file wildcards e.g., <code>kcl path/to/*.k</code></li><li>Fix the type inference error of dictionary types <a href="https://github.com/kcl-lang/kcl/pull/900" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/900</a></li><li>Fix the check of Schema parameters <a href="https://github.com/kcl-lang/kcl/pull/877/files" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/877/files</a></li><li>Fix the problem that the compilation cache of KCL programs with third-party libraries is invalid <a href="https://github.com/kcl-lang/kcl/pull/841" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/841</a></li><li>In the error message, complete the missing lambda type information <a href="https://github.com/kcl-lang/kcl/pull/771" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/771</a></li><li>Fix the problem of singular and plural in diagnostic information <a href="https://github.com/kcl-lang/kcl/pull/769" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/769</a></li><li>Fix the problem that the type check is invalid in the assignment statement with type annotation <a href="https://github.com/kcl-lang/kcl/pull/757" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/757</a></li><li>Add a check to prohibit duplicate import statements <a href="https://github.com/kcl-lang/kcl/pull/727" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/727</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ide--toolchain-updates">IDE &amp; Toolchain Updates<a href="#ide--toolchain-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-updates">IDE Updates<a href="#ide-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-ide-supports-goto-reference-and-renaming-of-symbols">KCL IDE supports goto reference and renaming of symbols<a href="#kcl-ide-supports-goto-reference-and-renaming-of-symbols" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>IDE supports goto reference of symbols, using <code>goto reference</code> or <code>find all references</code>:</p><p><img loading="lazy" alt="find-ref" src="/assets/images/FindRefs-8770a657ab949aae7dd82f9e52fc5090.png" width="1682" height="880" class="img_ev3q"></p><p>IDE supports renaming of symbols:</p><p><img loading="lazy" alt="rename" src="/assets/images/Rename-82061ac2cb03a77c542d5a4474797228.gif" width="832" height="513" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ide-supports-formatting-of-import-statements-and-union-types">IDE supports formatting of import statements and union types<a href="#ide-supports-formatting-of-import-statements-and-union-types" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>We have optimized the behavior of blank lines between import statements and other code blocks (formatted as one blank line) and the behavior of spaces between union types (formatted as separated by <code>|</code>):</p><p><img loading="lazy" alt="fmt" src="/assets/images/Format-bacf4e759fcb2a5a29f0f219b4dfa8ec.gif" width="590" height="269" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-ide-has-added-a-lot-of-completion-prompts">KCL IDE has added a lot of completion prompts<a href="#kcl-ide-has-added-a-lot-of-completion-prompts" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>We have added a lot of completion prompts for the <strong>configuration definition</strong>, which simplifies the user's mind of writing configuration based on the model and improves the efficiency of configuration editing. In addition, the parameter completion when calling the built-in function is enhanced. Talk is cheap, let's take a look at the effect directly:</p><p><img loading="lazy" alt="func-completion" src="/assets/images/module-function-completion-bee0f3843b5a931de523f25776bbb7a6.gif" width="850" height="401" class="img_ev3q"></p><p><img loading="lazy" alt="conf-completion" src="/assets/images/config-completion-99e49bbda5b33f7ff7fb3ecb54050d82.gif" width="640" height="302" class="img_ev3q"></p><p>And for the <strong>model design</strong>, we have also added a quick generation of docstring to reduce the boilerplate of typing by hand:</p><p><img loading="lazy" alt="gen-docstring" src="/assets/images/docstring-gen-882f1ecbd5845a659b1f0623b58ccb13.gif" width="1023" height="728" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a href="#performance" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>KCL has designed and restructured a new semantic model, as well as an API that supports nearest symbol search and symbol semantic information query.</li><li>The migration of IDE completion, jump, and hover functions to new semantic models significantly reduces the difficulty and code volume of IDE development.</li><li>The KCL compiler supports syntax incremental parsing and semantic incremental checking, which improves the performance of KCL compilation, construction, and IDE plugin usage in most scenarios by <strong>5-10 times</strong>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-ide-other-updates-and-bug-fixes">KCL IDE other updates and bug fixes<a href="#kcl-ide-other-updates-and-bug-fixes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>KCL IDE extension for IntelliJ 2023.2+</li><li>Fix the problem that the language service virtual file system related bug: the file dimension change will cause the language service to crash and must be restarted to recover, which has now been fixed.</li><li>Support import statement completion of external package dependencies introduced by package management tools</li><li>Fix the display position of the function parameter undefined type error</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-tool-updates">Test Tool Updates<a href="#test-tool-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Are you worried that your KCL program is written incorrectly? Why not come and test it? This update provides a new KCL test tool.</p><p>The new KCL test tool supports writing unit tests using KCL lambda and executing tests using the tool.</p><p>You can write your test cases through lambda expressions in the file with the suffix <code>_test.k</code>.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Convert the `App` model into Kubernetes Deployment and Service Manifests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test_kubernetesRender </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"app"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        containers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ngnix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ngnix"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deployment_got </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> kubernetesRender</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">assert</span><span class="token plain"> deployment_got</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">assert</span><span class="token plain"> deployment_got</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can run this test case and view the test results through <code>kcl test</code>.</p><p>After the test is passed, you will get the following results:</p><p><img loading="lazy" alt="test-pass" src="/assets/images/test-pass-6a4552ce41be999dfcc5ce13207545c5.png" width="1138" height="132" class="img_ev3q"></p><p>If your test fails, <code>kcl test</code> will output error information to help you troubleshoot the problem.</p><p><img loading="lazy" alt="test-failed" src="/assets/images/test-failed-c371087c0b1b18b877fd3b38fa98ab8f.png" width="1152" height="180" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-package-management">KCL Package Management<a href="#kcl-package-management" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The <code>update</code> command is added to the <code>kcl mod</code> command. The <code>update</code> command is used to automatically update local dependencies. <code>kcl mod update</code> will automatically download the missing third-party libraries for you. For details, please refer to: <a href="https://github.com/kcl-lang/kpm/pull/212" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/pull/212</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-import-tool">KCL Import Tool<a href="#kcl-import-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The KCL Import tool supports one-click generation of KCL configuration/models from YAML/JSON/CRD/Terraform Schema, realizing automated migration.</p><p>If you have the following yaml file:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.14.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can convert it to a KCL program through the command <code>kcl import test.yaml</code>.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">This file was generated by the KCL auto-gen tool. DO NOT EDIT.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Editing this file might prove futile when you re-run the KCL auto-gen generate command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx-deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>More details: <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/adopt-from-kubernetes" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/adopt-from-kubernetes</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community-integrations--extensions-updates">Community Integrations &amp; Extensions Updates<a href="#community-integrations--extensions-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-marketplace-with-artifacthub">KCL Marketplace with ArtifactHub<a href="#kcl-marketplace-with-artifacthub" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Through the integration of artifacthub.io, we have built a KCL third-party library market, where you can share your KCL programs with us. You can also choose freely and find the KCL third-party library that suits you!</p><p>Open the homepage of artifacthub.io, search for the keyword you need directly, and you can see the relevant content about the KCL third-party library!</p><p><img loading="lazy" alt="artifachub-index" src="/assets/images/artifachub-index-aa5f2faa8ee5f265e3ff0b10531408ff.png" width="1114" height="694" class="img_ev3q"></p><p>Click on the third-party library homepage, you can view the detailed content and related documents about the third-party library.</p><p><img loading="lazy" alt="pkg-page" src="/assets/images/pkg-page-7cb869241bab5d297ba22d1aa9b9d3de.png" width="1084" height="694" class="img_ev3q"></p><p>If you don't know how to use these third-party libraries, the button on the right can bring up the installation page for you.</p><p><img loading="lazy" alt="install-pkg" src="/assets/images/install-pkg-80641923d4cf4b6972f6fb1857846446.png" width="1102" height="664" class="img_ev3q"></p><p>Welcome to contribute your third-party libraries to the KCL community on artifacthub.io and make the KCL community more colorful!</p><p>Contributing to KCL Marketplace: <a href="https://kcl-lang.io/docs/user_docs/guides/package-management/how-to/publish_pkg_to_ah" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/package-management/how-to/publish_pkg_to_ah</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-updates">Other Updates<a href="#other-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The full update and bugfix List of KCL v0.7.0 can be found at: <a href="https://github.com/kcl-lang/kcl/compare/v0.6.0...v0.7.0" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/compare/v0.6.0...v0.7.0</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-updates">Document Updates<a href="#document-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The versioning semantic option is added to the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a>. Currently, v0.4.x, v0.5.x, v0.6.x and v0.7.0 versions are supported.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community-updates">Community Updates<a href="#community-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-officially-becomes-cncf-sandbox-project">KCL Officially Becomes CNCF Sandbox Project<a href="#kcl-officially-becomes-cncf-sandbox-project" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>🎉 🎉 🎉 On September 20, 2023, the KCL project passed the evaluation of the Technical Oversight Committee of the Cloud Native Computing Foundation (CNCF), the world's top open source foundation, and officially became a CNCF sandbox project.</p><p>More details - <a href="https://kcl-lang.io/blog/2023-09-19-kcl-joining-cncf-sandbox/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/blog/2023-09-19-kcl-joining-cncf-sandbox/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We expect to release KCL v0.8.0 in February 2024. For more details, please refer to KCL 2024 Roadmap and KCL v0.8.0 Milestone. If you have more ideas and needs, please feel free to raise Issues or Discussions in the KCL Github repository, and welcome to join our community for discussion 🙌 🙌 🙌</p><ul><li>KCL 2024 Roadmap: <a href="https://github.com/kcl-lang/kcl/issues/882" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/882</a></li><li>KCL v0.8.0 Milestone: <a href="https://github.com/kcl-lang/kcl/milestone/8" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/milestone/8</a></li><li>KCL GitHub Issues: <a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues</a></li><li>KCL GitHub Discussion: <a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">https://github.com/orgs/kcl-lang/discussions</a></li><li>KCL Community: <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information, see <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL FAQ</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 11.09 - 11.23) | Cloud-Native Modules, Language, and Toolchain Update Express!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-11-23-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2023-11-23-biweekly-newsletter</guid>
            <pubDate>Thu, 23 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (11.09 - 11.23 2023). Here is an overview of the key content:</p><p><strong>📦 Module Update</strong></p><ul><li>The number of KCL modules has been increased to <strong>200+</strong>, mainly adding validation modules related to <code>Pod</code>, <code>RBAC</code>, and reference documentation for Kubernetes 1.14-1.28.</li><li>Now we can search and browse the documentation and usage of all modules on the <code>Artifact Hub</code> website: <em><a href="https://artifacthub.io/packages/search?org=kcl&amp;sort=relevance&amp;page=1" target="_blank" rel="noopener noreferrer">https://artifacthub.io/packages/search?org=kcl&amp;sort=relevance&amp;page=1</a></em></li></ul><p><strong>💬 Language Update</strong></p><ul><li><strong>Developer Experience</strong><ul><li>Optimized syntax indentation check for configuration code blocks, no longer enforced as an error.</li><li>Support for using file path wildcards as compilation entry points.</li></ul></li><li><strong>Bug Fixes</strong><ul><li>Fixed type inference errors for some scenarios involving dictionary types.</li><li>Fix the check of the number of schema arguments.</li></ul></li></ul><p><strong>🔧 Toolchain Update</strong></p><ul><li><strong>Testing Tool Release</strong><ul><li>Support writing unit tests using KCL functions and executing tests using the tool.</li><li>Support filtering test cases using regular expressions.</li><li>Support fast failure for unit tests.</li></ul></li><li><strong>Import Tool Update</strong><ul><li>Fixed the generation of patterns to regular expression matching expressions: <em><a href="https://github.com/kcl-lang/kcl-openapi/pull/70" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-openapi/pull/70</a></em></li><li>Fixed the generation of minItems/maxItems to field length validation rules: <em><a href="https://github.com/kcl-lang/kcl-openapi/pull/69" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-openapi/pull/69</a></em></li><li>Fixed the generation of 0 or empty string as default values: <em><a href="https://github.com/kcl-lang/kcl-openapi/pull/69" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-openapi/pull/69</a></em></li><li>Fixed the generation of package names in the conversion from Kubernetes CRD to KCL Package: <code>${apiVersion}_${kind}</code>: <em><a href="https://github.com/kcl-lang/kcl-openapi/pull/68" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-openapi/pull/68</a></em></li></ul></li><li><strong>Package Manage Tool Update</strong><ul><li>Added the update command to automatically update local dependencies: <em><a href="https://github.com/kcl-lang/kpm/pull/212" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/pull/212</a></em></li></ul></li></ul><p><strong>💻 IDE Update</strong></p><ul><li><strong>Developer Experience</strong><ul><li>Support the completion of external package dependency import statements added by package management tools.</li></ul></li><li><strong>Bug Fixes</strong><ul><li>Fixed the display position of undefined type errors for function parameters.</li></ul></li></ul><p><strong>🏄 API Update</strong></p><ul><li>Added KCL Unit Testing API: <em><a href="https://github.com/kcl-lang/kcl/pull/904" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/904</a></em></li><li>Added KCL Symbol Renaming API: <em><a href="https://github.com/kcl-lang/kcl/pull/890" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/890</a></em></li></ul><p><strong>🔥 Architecture Upgrade</strong></p><ul><li>KCL has designed and reconstructed a new semantic model, as well as APIs that support nearest symbol lookup and symbol semantic information query.</li><li>IDE features such as autocomplete, definition, and hover have been migrated to the new semantic model, significantly reducing the difficulty and amount of code for IDE feature development.</li></ul><p><strong>🚀 Performance Improvement</strong></p><ul><li>The KCL compiler supports incremental parsing of syntax and incremental checking of semantics, significantly improving the performance of KCL compilation, build, and IDE plugin usage in most scenarios by <strong>5-10 times</strong>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @cr7258 for his contributions to the KCL model library and KCL documentation 🙌<ul><li><em><a href="https://github.com/kcl-lang/kcl-lang.io/pull/203" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-lang.io/pull/203</a></em></li><li><em><a href="https://github.com/kcl-lang/kcl-lang.io/pull/209" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-lang.io/pull/209</a></em></li><li><em><a href="https://github.com/kcl-lang/kcl-lang.io/pull/210" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-lang.io/pull/210</a></em></li><li><em><a href="https://github.com/kcl-lang/kcl-lang.io/pull/211" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-lang.io/pull/211</a></em></li><li><em><a href="https://github.com/kcl-lang/modules/pull/67" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/modules/pull/67</a></em></li></ul></li></ul><ul><li>Thanks to @XiaoK29 for his contributions to the code architecture refactoring of hover and reference lookup features in the KCL IDE, as well as the KCL documentation 🙌<ul><li><em><a href="https://github.com/kcl-lang/kcl/pull/887" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/887</a></em></li><li><em><a href="https://github.com/kcl-lang/kcl/pull/899" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/899</a></em></li><li><em><a href="https://github.com/kcl-lang/kcl-lang.io/pull/205" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-lang.io/pull/205</a></em></li></ul></li><li>Thanks to @MeenuyD, @negz for their discussions and support regarding the integration of Crossplane KCL Composition Functions 🙌<ul><li><em><a href="https://github.com/kcl-lang/kcl/issues/885" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/885</a></em></li></ul></li><li>Thanks to @kolloch for his valuable feedback on the Bazel KCL build rule script 🙌<ul><li><em><a href="https://github.com/kcl-lang/rules_kcl/pull/2" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/rules_kcl/pull/2</a></em></li></ul></li><li>Thanks to @Yun Lu, @Even Solberg, @Prahalad Ramji, @Matt Gowie, @ddh, and @mouuii for their valuable feedback and discussions during the promotion and usage of KCL 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="search-kcl-code-and-cloud-native-models-on-artifact-hub">Search KCL Code and Cloud-Native Models on Artifact Hub<a href="#search-kcl-code-and-cloud-native-models-on-artifact-hub" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Write or validate Kubernetes configurations using KCL k8s module.</li></ul><p><img loading="lazy" src="/assets/images/k8s-module-912b38ba6f9f47e59a536ba9212fffbf.png" width="2180" height="834" class="img_ev3q"></p><ul><li>Application delivery and and operation using the KCL Open Application Model (OAM) and the KubeVela controller.</li></ul><p><img loading="lazy" src="/assets/images/oam-module-bc32f420836145889ab5b02afb3a530b.png" width="1964" height="796" class="img_ev3q"></p><ul><li>Do configuration operations using KCL code libraries like <code>jsonpatch</code>.</li></ul><p><img loading="lazy" src="/assets/images/jsonpatch-module-2f9f35483b0d57221644c6788f13f1d8.png" width="1998" height="714" class="img_ev3q"></p><ul><li>Enhance application delivery experience through the <a href="https://github.com/KusionStack/catalog" target="_blank" rel="noopener noreferrer">Kusion Modules ecosystem</a> at the client side.</li></ul><p>In the future, we will explain the specific use cases and workflows of each module through a series of blogs. The source code for these modules is located at <em><a href="https://github.com/kcl-lang/modules" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/modules</a></em>. We welcome contributions from the community. ❤️</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community. See <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">here</a> to join us!</p><p>For more resources, please refer to</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/7" target="_blank" rel="noopener noreferrer">KCL v0.7.0 Milestone</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/8" target="_blank" rel="noopener noreferrer">KCL v0.8.0 Milestone</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[Kubernetes Modules Here Are All You Need!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-11-20-search-k8s-module-on-artifacthub</link>
            <guid>https://kcl-lang.github.io/blog/2023-11-20-search-k8s-module-on-artifacthub</guid>
            <pubDate>Mon, 20 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In previous updates, we have added package management capability to the KCL language, solving the issue of how to obtain and publish third-party libraries. However, a new problem arises during the development process where teammates are often unsure which library to use to address their specific problem. Before using a third-party library through the package management tool, it is necessary to select the appropriate library based on the specific requirements of the cloud-native operations and the capabilities of various third-party libraries.</p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>Therefore, we have leveraged the <a href="https://artifacthub.io/" target="_blank" rel="noopener noreferrer">ArtifactHub</a> project under CNCF to build a marketplace for KCL third-party libraries. In this marketplace, users with specific needs can freely choose the third-party libraries they require, while those who have ideas and are willing to share can also contribute and share their libraries in this marketplace. Next, we will use a simple example of publishing an application to familiarize ourselves with how to retrieve KCL third-party libraries on ArtifactHub and develop KCL programs based on the library documentation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>Install KCL: <em><a href="https://kcl-lang.io/docs/user_docs/getting-started/install/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install/</a></em></li></ul><ul><li>Install kubectl: <em><a href="https://kubernetes.io/docs/tasks/tools/#kubectl" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/tools/#kubectl</a></em></li><li>Install minikube: <em><a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener noreferrer">https://minikube.sigs.k8s.io/docs/start/</a></em></li></ul><p>Start minikube using the following command:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">minikube start --cache-images</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the Ingress controller is not installed in your minikube, you can use the following command to install it:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">minikube addons </span><span class="token builtin class-name">enable</span><span class="token plain"> ingress</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="helloworld-example">HelloWorld Example<a href="#helloworld-example" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>First, let's prepare a simple JavaScript application:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> express </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"express"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">express</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Define a route that responds to GET requests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Welcome to my web application!"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Start the server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Web app listening at http://localhost:</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">port</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Prepare an image for this application and upload it to the image registry:</p><div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM node:14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /usr/src/app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY package*.json ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN npm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [ "node", "app.js" ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, we will use the image <code>ghcr.io/test/my-web-app:1.0</code> to demonstrate the specific content. With the preparation work completed, we can now use KCL to write the corresponding release code.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-artifacthub-to-search-for-the-modules-you-need">Use ArtifactHub to search for the modules you need<a href="#use-artifacthub-to-search-for-the-modules-you-need" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>First, I want to publish my my-web-app application, and I need to use a third-party library for Kubernetes to accomplish my task. By searching for the keyword <code>k8s</code> on ArtifactHub, you can see the currently available third-party libraries for <code>k8s</code>.</p><p><img loading="lazy" alt="index-page" src="/assets/images/index-page-5be59bc5c5d26caa4dd532a2ab88e4ab.png" width="1060" height="601" class="img_ev3q"></p><p>On the homepage of the <code>k8s</code> module, you can find the documentation and more detailed information about the <code>k8s</code> module.</p><p><img loading="lazy" alt="k8s-page" src="/assets/images/k8s-page-ef5ac237c942bb5b7168b48dcf52b7a7.png" width="1068" height="758" class="img_ev3q"></p><p>The <code>INSTALL</code> button on the right provides you with the installation method for the <code>k8s</code> third-party library.</p><p><img loading="lazy" alt="k8s-install-page" src="/assets/images/k8s-install-page-2f6bcea900e6aa1d4927c2a071407d07.png" width="1080" height="613" class="img_ev3q"></p><p>Since we are using <code>k8s</code> as a dependency for our package, we can install it using the following command:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl mod init my-kubernetes-config </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> my-kubernetes-config </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kcl mod </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> k8s:1.28</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, we need to write the <code>deployment</code>, <code>service</code>, and <code>ingress</code> sections for the application release. We will use the <code>Deployment</code>, <code>Service</code>, and <code>Ingress</code> schemas from the <code>k8s</code> module we just added. For more information about schemas, you can refer to: <a href="https://kcl-lang.io/docs/next/reference/lang/tour#schema" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/next/reference/lang/tour#schema</a></p><p>If you are not familiar with these three contents, you can directly search in the details page of the model. Taking <code>Deployment</code> as an example, you can find more detailed information in the documentation.</p><p><img loading="lazy" alt="deployment" src="/assets/images/deployment-4c48cb0322567b7a9bb6fa72add27fe3.png" width="1080" height="490" class="img_ev3q"></p><p>Based on the documentation, we can write the following deployment config in the <code>main.k</code> file:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app-deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ghcr.io/test/my-web-app:1.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For the <code>Service</code> section, we can find related documentation.</p><p><img loading="lazy" alt="service" src="/assets/images/service-c9a8a508ff5a293adcaa6c222e3de5d4.png" width="1080" height="540" class="img_ev3q"></p><p>The corresponding <code>service</code> content is as follows:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">import</span><span class="token plain"> k8s.api.core.v1 as s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> s.Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata.name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app-service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec.selector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"app"</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec.ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        targetPort: </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>About <code>Ingress</code>, you can find related documentation.</p><p><img loading="lazy" alt="ingress" src="/assets/images/ingress-033c971c9a89d43c2dab5a2e533acedb.png" width="1080" height="579" class="img_ev3q"></p><p>The corresponding <code>ingress</code> content is as follows:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">networking</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ingress </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Ingress </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app-ingress"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rules </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app.example.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">paths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Prefix"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    backend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app-service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    backend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, add the following content to the <code>main.k</code> file to render the <code>deployment</code>, <code>service</code>, and <code>ingress</code> as the YAML stream format.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">manifests.yaml_stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can compile the corresponding KCL program and apply it to the cluster using the following command.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl run main.k </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> kubectl apply -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At this point, we have successfully deployed the application <code>my-web-app</code> with the help of <code>ArtifactHub</code>. Finally, let's take a look at the deployment effect through kubectl port forwarding. Use the following command to forward the port.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl port-forward service/web-app-service </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">:80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then use the following command or directly access <code>http://localhost:8080</code> in the browser to access our deployed application.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://localhost:8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to my web application</span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In this blog, we demonstrated how to select the appropriate KCL third-party library on ArtifactHub through a simple application deployment. Currently, there are more than 150+ KCL third-party libraries available on ArtifactHub for you to choose from. Come and check if there is a KCL model you need!</p><p>In the example provided in this blog, we used KCL to write the program for deploying the application. In future updates, we will further abstract the KCL program in this blog with features such as dynamic parameters and introduce more application models such as Open Application Model (OAM), and package them into a separate module for release on ArtifactHub. If you also have KCL modules that you want to share with others, we will continue to update detailed steps and guides to help you successfully publish your package. Stay tuned!</p>]]></content:encoded>
            <category>KCL</category>
            <category>Kubernetes</category>
            <category>Modules</category>
            <category>ArtifactHub</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 10.26 - 11.08) | Better IDE Experience Enhancements and More Cloud-Native Modules]]></title>
            <link>https://kcl-lang.github.io/blog/2023-11-08-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2023-11-08-biweekly-newsletter</guid>
            <pubDate>Wed, 08 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation (CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (10.26 - 10.08 2023). Here is an overview of the key content:</p><p><strong>🔧 Language and Toolchain Updates</strong></p><ul><li><p><strong>KCL IDE Updates</strong> - Supports for symbol find-references and rename; Optimized the formatting output for import statements and union types; Fixed the bug where file changes caused the language server to crash.</p></li><li><p><strong>KCL Package Management Tool KPM Updates</strong> - kpm is integrating with ArtifactHub, enabling KCL packages publishing to ArtifactHub.</p></li><li><p><strong>KCL Language Updates</strong> - Optimized error messages for mismatched parameter types in methods, providing clearer indications of the mismatch.</p></li><li><p><strong>Unified Interface of KCL Command-Line</strong> - Redesigned the command-line interface and workflow for KCL tools to achieve a unified experience.</p></li><li><p><strong>KCL IDE Update</strong> - More intelligent configuration value completion, property list completion, function parameter completion, built-in package reference completion, and docstring completion, etc.</p></li><li><p><strong>KCL Package Manage Tool Update</strong> - More smooth workflow for creating and publishing KCL packages: supports automated processes for package updates and releases based on versioning systems; additionally, custom configuration of metadata for KCL packages is now allowed.</p></li><li><p><strong>KCL Module Update</strong> - Out-of-the-box inclusion of over 120 KCL models: <a href="https://github.com/kcl-lang/artifacthub" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/artifacthub</a></p></li><li><p><strong>KCL Language Update</strong> - Improved error messages for schema attribute type mismatches, support for lambda type annotations, and fixes for individual compilation issues and more system libraries support e.g., validation, serialization, and deserialization of JSON/YAML strings.</p></li><li><p><strong>KCL Import Tool Release</strong>: Supports one-click generation of KCL configurations/models from YAML/JSON/CRD/Terraform Schema, enabling automated migration.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @jakezhu9 for the improvement of KCL benchmark from single-threaded Rc to Arc, and for fixing the bug related to reference paths in the KCL import tool. 🙌 <a href="https://github.com/kcl-lang/kcl-go/pull/170" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/170</a>, etc.</li><li>Thanks to @liangyuanpeng for contributing the <code>karmada</code> model package to KCL models, welcome! 🙌 <a href="https://github.com/kcl-lang/artifacthub/pull/48/files" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/artifacthub/pull/48/files</a></li><li>Additionally, thanks to @Matt Gowie, @ddh for their attention to KCL and valuable feedback. 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-extension-updates">IDE Extension Updates<a href="#ide-extension-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The KCL IDE extension has added a large number of completion suggestions, focusing on the core aspect of configuration definition, simplifying the mental process of users when writing configurations based on models, and improving the efficiency of configuration editing. Additionally, parameter completion when invoking built-in functions has been enhanced. Talk is cheap, let's directly see the results:</p><p><img loading="lazy" src="/assets/images/module-function-completion-bee0f3843b5a931de523f25776bbb7a6.gif" width="850" height="401" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/config-completion-99e49bbda5b33f7ff7fb3ecb54050d82.gif" width="640" height="302" class="img_ev3q"></p><p>For the model design phase, quick generation of document strings has also been added, reducing the need for manual boilerplate typing:</p><p><img loading="lazy" src="/assets/images/docstring-gen-882f1ecbd5845a659b1f0623b58ccb13.gif" width="1023" height="728" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-package-manager-updates">KCL Package Manager Updates<a href="#kcl-package-manager-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The package management tool has now interconnected the core workflow of KCL package creation, update, code review, and release. Based on this, over 120+ out-of-the-box KCL model packages have been added. Users can refer to the <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/publish-modules/" target="_blank" rel="noopener noreferrer">Writing and Publishing Kubernetes KCL Code Packages guide</a> to start using them immediately.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-language-updates">KCL Language Updates<a href="#kcl-language-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The optimization of error message output in the KCL compilation command continues to progress, aiming to provide clear and understandable guidance to help developers quickly locate and fix issues and write correct code. Recently, KCL has optimized the error messages for schema field type mismatches:</p><ul><li><p>before:
<img loading="lazy" src="/assets/images/schema-expr-type-error-before-fbb3b4d4a2222f4cb1418a1075f2582f.png" width="1080" height="185" class="img_ev3q"></p></li><li><p>after:
<img loading="lazy" src="/assets/images/schema-expr-type-error-after-5c78dffcaec4e93ed2770080dd198e64.png" width="1080" height="320" class="img_ev3q"></p></li></ul><p>Additionally, support has been added for adding type annotations in lambda expressions, and system libraries now support validation, serialization, and deserialization of JSON/YAML strings. The following issues have been fixed: cache invalidation for KCL programs with third-party libraries, path conflicts when compiling imported files across kcl.mod, and semantic checks for default value of KCL functions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-import-tool">KCL Import Tool<a href="#kcl-import-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Support for one-click generation of KCL configurations/models from YAML/JSON/CRD/Terraform Schema enables automated migration. Please refer to the <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/adopt-from-kubernetes" target="_blank" rel="noopener noreferrer">One-click Migration from Kubernetes Ecosystem to KCL guide</a> for more information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community.</p><p>For more resources, please refer to</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 Roadmap</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/7" target="_blank" rel="noopener noreferrer">KCL v0.7.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 10.12 - 10.25) | FindReferences and Rename in IDE, ArtifactHub integration in KPM!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-10-25-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2023-10-25-biweekly-newsletter</guid>
            <pubDate>Wed, 25 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is a constraint-based record and functional language hosted by Cloud Native Computing Foundation(CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is a constraint-based record and functional language hosted by Cloud Native Computing Foundation(CNCF) that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (10.12 - 10.25 2023). Here is an overview of the key content:</p><p><strong>🔧 Language and Toolchain Updates</strong></p><ul><li><strong>KCL IDE Updates</strong> - Supports for symbol find-references and rename; Optimized the formatting output for import statements and union types; Fixed the bug where file changes caused the language server to crash.</li><li><strong>KCL Package Management Tool KPM Updates</strong> - kpm is integrating with ArtifactHub, enabling KCL packages publishing to ArtifactHub.</li><li><strong>KCL Language Updates</strong> - Optimized error messages for mismatched parameter types in methods, providing clearer indications of the mismatch.</li><li><strong>Unified Interface of KCL Command-Line</strong> - Redesigned the command-line interface and workflow for KCL tools to achieve a unified experience.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @jakezhu9 for enhancing the KCL syntax parsing unit tests, migrating some test cases to the snaptest framework 🙌 <a href="https://github.com/kcl-lang/kcl/pull/794" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/pull/794</a></li><li>Thanks to @opsnull for correcting code examples in kcl-lang.io website 🙌 <a href="https://github.com/kcl-lang/kcl-lang.io/pull/182" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-lang.io/pull/182</a></li><li>Thanks to @prahaladramji for fixing and optimizing the formatting functionality in the KCL IntelliJ plugin 🙌 <a href="https://github.com/kcl-lang/intellij-kcl/pull/15" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/intellij-kcl/pull/15</a>, etc.</li><li>Thanks to @steeling, @prahaladramji, @liangyuanpen, @Kory Taborn, and others for valuable feedback and discussions while using KCL and the toolchain 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-extension-updates">IDE Extension Updates<a href="#ide-extension-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the upcoming release, the KCL IDE extension will support find/go-to references navigation, symbol renaming, and some optimizations for formatting import statements and union types. Additionally, virtual file system-related bugs causing language service crashes have been fixed.</p><p>Go-to references:
<img loading="lazy" src="/assets/images/FindRefs-8770a657ab949aae7dd82f9e52fc5090.png" width="1682" height="880" class="img_ev3q"></p><p>Rename symbols:
<img loading="lazy" src="/assets/images/Rename-82061ac2cb03a77c542d5a4474797228.gif" width="832" height="513" class="img_ev3q"></p><p>Formatting improvements for import statements and union types: optimized behavior for newlines between reference statements and other code blocks (formatted as a single newline) and spacing between union types (formatted with <code>|</code> as separators):
<img loading="lazy" src="/assets/images/Format-bacf4e759fcb2a5a29f0f219b4dfa8ec.gif" width="590" height="269" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-package-manager-updates">KCL Package Manager Updates<a href="#kcl-package-manager-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the upcoming release, KPM will support integration with <a href="https://artifacthub.io/" target="_blank" rel="noopener noreferrer">ArtifactHub</a>. You can now submit a PR to the <a href="https://github.com/kcl-lang/artifacthub" target="_blank" rel="noopener noreferrer">kcl-lang Registry repository</a> to publish your KCL packages on ArtifactHub. The pre-uploaded KCL Kubernetes package can be seen on the <a href="https://staging.artifacthub.io/packages/search?ts_query_web=kcl&amp;sort=relevance&amp;page=1" target="_blank" rel="noopener noreferrer">ArtifactHub staging page</a>. The functionality will be released in version v0.6.1:</p><p><img loading="lazy" src="/assets/images/artifacthubStaging-ae8bdb088c72f1d8828d074553c283fe.png" width="2204" height="1536" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-language-updates">KCL Language Updates<a href="#kcl-language-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The compilation command of KCL continues to improve error message output, aiming to provide clear and understandable guidance to help developers quickly identify and fix errors while writing correct code. Recently, error messages related to method parameter type mismatches have been optimized, clearly indicating parameter type mismatches:</p><p><img loading="lazy" src="/assets/images/error-msg-b9f86d8cb2dc9273d4a6ab951c562c96.png" width="1254" height="968" class="img_ev3q"></p><p>Additionally, a fix addressed the issue of lazy evaluation in property assignments, deferring the computation and constraint validation of property assignments until after configuration merging to avoid unnecessary compilation errors.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unified-interface-of-kcl-command-line">Unified Interface of KCL Command-Line<a href="#unified-interface-of-kcl-command-line" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>We are redesigning the command-line interface of KCL tools to achieve a unified user workflow, seamless integration with related tools and multi-language APIs, and command-line tool extensibility. Welcome to join the discussion if anyone are insterested: <a href="https://github.com/kcl-lang/kcl/issues/756" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/756</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="community-updates">Community Updates<a href="#community-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>With the inclusion in CNCF Sandbox, we are glad to announce that the CNCF KCL Slack channel is now available for KCL-related discussions. Feel free to join:</p><ol><li>Join the CNCF workspace by providing your email address: <a href="https://communityinviter.com/apps/cloud-native/cncf" target="_blank" rel="noopener noreferrer">https://communityinviter.com/apps/cloud-native/cncf</a></li><li>Join the CNCF KCL channel: <a href="https://cloud-native.slack.com/archives/C05TC96NWN8" target="_blank" rel="noopener noreferrer">https://cloud-native.slack.com/archives/C05TC96NWN8</a></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community.</p><p>For more resources, please refer to</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 Roadmap</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/7" target="_blank" rel="noopener noreferrer">KCL v0.7.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[A New Paradigm for Cloud Native Configuration and Policy Management - KRM KCL Specification]]></title>
            <link>https://kcl-lang.github.io/blog/2023-10-23-cloud-native-supply-chain-krm-kcl-spec</link>
            <guid>https://kcl-lang.github.io/blog/2023-10-23-cloud-native-supply-chain-krm-kcl-spec</guid>
            <pubDate>Mon, 23 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[This blog is a review of the content of the KCL speech at the 2023 CNCF KCD Hangzhou Conference. Activity link//community.cncf.io/events/details/cncf-kcd-hangzhou-presents-kcd-hangzhou-2023/]]></description>
            <content:encoded><![CDATA[<blockquote><p>This blog is a review of the content of the KCL speech at the 2023 CNCF KCD Hangzhou Conference. Activity link: <a href="https://community.cncf.io/events/details/cncf-kcd-hangzhou-presents-kcd-hangzhou-2023/" target="_blank" rel="noopener noreferrer">https://community.cncf.io/events/details/cncf-kcd-hangzhou-presents-kcd-hangzhou-2023/</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><blockquote><p>With the development of cloud-native technology, we are increasingly shifting towards cloud infrastructure. Infrastructure as code (IaC) tools like Kubernetes and Terraform have become increasingly popular for managing and deploying cloud API-based applications. However, this popularity has also brought about complexity and cognitive burden issues that have reached their peak in recent years.</p></blockquote><p><img loading="lazy" alt="cognitive-loading" src="/assets/images/cognitive-loading-en-c725fa24d0483dc1eee6b4fc067344e4.jpg" width="2076" height="1248" class="img_ev3q"></p><p>For Kubernetes, as the most widely used container orchestration system, Gartner predicts that by 2022, over 75% of organizations globally will be running containerized applications in production. The container management market is estimated to be around 300 million dollars, projected to surpass 1 billion dollars by 2025. Additionally, Kubernetes is steadily moving out of its troubled phase towards maturity and wider adoption<sup>[1]</sup>.</p><p>For Terraform, as the most widely used IaC tool, as of the time of writing this article, the Terraform VS Code plugin has an installation count of around 3.2 million, roughly one-third of the installation count of the Go VS Code plugin (around 10 million), and even surpasses the installation count of many general-purpose programming languages. For example, the Rust VS Code plugin has an installation count of around 2.3 million. Furthermore, HCL is the fastest-growing programming language on GitHub in 2022, surpassing all other general-purpose and domain-specific programming languages, forming a wide developer ecosystem<sup>[2]</sup>.</p><p>From this, it can be seen that Kubernetes and Terraform are becoming indispensable infrastructure projects in the cloud-native field and will continue to grow in the coming years. Although the nature of these two projects is not entirely the same, they are converging and becoming increasingly complex.</p><p>The increasing complexity of the cloud API represented by Kubernetes and Terraform can be attributed to several factors<sup>[3]</sup><sup>[4]</sup><sup>[5]</sup>:</p><ul><li><strong>Increasing capabilities</strong>: Kubernetes and cloud APIs are constantly evolving to meet the growing demands of applications and cloud computing. To meet user demands, they continuously introduce new features and capabilities such as auto-scaling, service discovery, load balancing, and permission management. The introduction of these new features increases the complexity of the system. Although we already have various automation methods, over time, the number of different resource types, potential settings for these resource types, and the complexity of relationships between these resource types grow exponentially.</li><li><strong>Complex configuration management requirements</strong>: As the scale of applications grows, configuring and managing Kubernetes and cloud APIs becomes increasingly complex. For example, managing a large number of container instances and resources, configuring complex networking and storage, implementing high availability and load balancing, and repeatedly performing configurations for different environments and topologies. These complex configuration and management requirements increase the complexity of Kubernetes and cloud APIs, often resulting in the emergence of "YAML engineers" or "markup language human-editing engineers" in the Kubernetes field.</li></ul><p>For cloud APIs, we can leverage IaC tools like Terraform to obtain a large number of pre-written module configurations and providers. However, for Kubernetes, there is still a lack of lightweight client-side configuration composition and abstraction solutions. Existing solutions or specifications struggle to strike a balance between abstraction capabilities and scalability. In extreme scenarios, developers often write a lot of glue code and scripts to handle configurations, which restricts stability and efficiency.</p><p>Therefore, we propose the KCL project and the KRM KCL specification, hoping to fill the gap in configuration languages and tools in the lightweight client-side cloud-native dynamic configuration field with more modern declarative configuration languages and tools. We aim to address the following issues:</p><ul><li><strong>Dimension explosion</strong>: Most static configurations, such as Kubernetes YAML configurations in the cloud-native field, need to be configured separately for each environment. In the worst case, it may introduce difficult-to-debug errors involving cross-environment dependencies, leading to poor stability and scalability.</li><li><strong>Configuration drift</strong>: There is often no standardized way to manage the dynamic configurations of applications and infrastructure for different environments. Adopting non-standard methods such as scripting and piecing together glue code can result in exponential complexity and configuration drift.</li><li><strong>Cognitive burden</strong>: Kubernetes and other platform technologies that serve as building platforms excel in unifying infrastructure details at the underlying level. However, they lack higher-level software delivery abstractions, which result in a higher cognitive burden for ordinary developers and affect the software delivery experience of higher-level application developers.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="concepts">Concepts<a href="#concepts" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl">KCL<a href="#kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="kcl-intro" src="/assets/images/kcl-intro-en-9b54f7cbc336d29703c36dd16bb83608.jpg" width="864" height="988" class="img_ev3q"></p><p>KCL is a specialized configuration policy language for the cloud-native domain. It was open-sourced in June 2022 and became a CNCF Sandbox project hosted by the CNCF foundation in September 2023. KCL aims to improve the user experience of writing cloud-native configuration policies and programmability at the Kubernetes API layer. The KCL project is currently included in the CNCF foundation's Automation &amp; Configuration Landscape. The "C" in KCL stands for Configuration, the "L" stands for Language, and the "K" is derived from the first letter of Kubernetes<sup>[6]</sup>.</p><p>Unlike general-purpose programming languages, KCL is a domain-specific programming language that solves nearly infinite variations of business scenarios and complexities with a convergent set of syntax and semantics. For example, within the Kubernetes domain alone, there are thousands of resources and a fragmented Operator ecosystem in the community. KCL encapsulates the thought process and approach of writing complex configurations and policies into its language features, avoiding the security risks and side effects associated with using general-purpose languages for configuration.</p><p>As a configuration language, KCL provides the most important functionality for application and platform developers/SREs, which is <strong>dynamic configuration management</strong>. Through code abstraction, we can build an application-centric model that shields developers from the complexities of infrastructure and platform concepts and provides them with an interface that is centered around the application and easy to understand. Additionally, KCL allows platform engineers to quickly extend and define their own models, and it provides rich manageability capabilities, including out-of-the-box KCL code libraries, semantic versioning, OCI Registry, language toolchains, and automation support.</p><p>Furthermore, KCL operates within a completely open cloud-native ecosystem and is not tightly coupled to any orchestration/engineering tools or Kubernetes controllers. In cloud-native supply chain scenarios and large-scale operational scenarios, KCL can provide API abstraction, composition, and validation capabilities for both the client and runtime. Users can choose suitable engines such as Kubectl<sup>[7]</sup>, KusionStack<sup>[8]</sup>, KubeVela<sup>[9]</sup>, or Helmfile<sup>[10]</sup> to combine with KCL and apply configurations to the cluster.</p><p><img loading="lazy" alt="kcl-concept" src="/assets/images/kcl-concept-en-81943e67538271ea37e82eeae5865ff6.jpg" width="2342" height="1088" class="img_ev3q"></p><p>In addition, KCL itself is a modern, high-level domain-specific programming language, which is a compiled static and strongly-typed language. KCL provides developers with the core capabilities of <strong>configuration (config)</strong>, <strong>model abstraction (schema)</strong>, <strong>logic (lambda)</strong>, and <strong>policies (rules)</strong> through a record and function-oriented language design.</p><p>KCL aims to provide programmability independent of the runtime, without providing system functionalities such as threads and IO locally. It strives to offer programming support that is stable, secure, low-noise, low side-effect, high-performance, easy to automate, and easy to manage in order to solve domain-specific problems.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="krm-kcl-specification">KRM KCL Specification<a href="#krm-kcl-specification" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="krm-kcl" src="/assets/images/krm-kcl-en-0b6480008ac363ad1dc00a04a9e4be34.jpg" width="2346" height="1134" class="img_ev3q"></p><p>The KRM KCL specification is a configuration specification based on the Kubernetes Resource Model (KRM). KRM is a generic configuration model used to describe and manage various cloud-native resources such as containers, pods, and services. KRM provides a unified way to define and manage these resources, enabling them to be portable and reusable across different environments<sup>[11]</sup>.</p><p>As one of the official Kubernetes specifications, the core concept of KRM is KRM functions. The input of KRM functions is a set of Kubernetes resources and the configuration of the KRM function, and the output is a set of Kubernetes resources along with the results of the function execution, such as error messages and debug information. KRM KCL is the implementation of KRM functions using KCL code and extends it with support for various code sources such as OCI Registry, Git, and HTTPS.</p><p>In the KRM KCL specification, the behaviors of the KCL configuration model are mainly divided into three categories:</p><ul><li><strong>Mutation</strong>: Takes input KCL parameters <code>params</code> and a list of KRM resources and outputs a modified list of KRM resources.</li><li><strong>Validation</strong>: Takes input KCL parameters <code>params</code> and a list of KRM resources and outputs the list of KRM resources and resource validation results.</li><li><strong>Abstraction</strong>: Takes input KCL parameters <code>params</code> and outputs a list of KRM resources.</li></ul><p>Using KCL, we can achieve the following capabilities programmatically:</p><ul><li>Modify resources using KCL, such as adding/modifying label tags or annotation comments based on certain conditions or injecting Sidecar container configurations in all Kubernetes Resource Model (KRM) resources containing PodTemplate.</li><li>Validate all KRM resources using KCL schema, such as constraining containers to only be launched in a root manner.</li><li>Generate KRM resources or abstract/combine different Kubernetes APIs using the abstraction model, for example, instantiating a web application configuration using the "web-service" model.</li></ul><p>With the help of KCL IDE and KCL package management tools, we can write models and upload them to the OCI Registry for model reuse. We can programmatically extend the support for the KRM KCL specification, and these models can be used separately in the client or runtime based on specific scenario requirements.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer Experience<a href="#developer-experience" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Regarding the mentioned domain-specific problems and the related concepts of KCL, we primarily provide three aspects of support to users: language, toolchain, and cloud-native integrations.</p><p><img loading="lazy" alt="workspace" src="/assets/images/workspace-4b43fe7e7bdf1bebdbdde2e63f01ea9a.png" width="1974" height="1164" class="img_ev3q"></p><p>Although KCL is a domain-specific language, it is comprehensive in its capabilities. KCL provides toolchain functionalities that are equivalent to general-purpose languages, such as formatting, testing, documentation, package management, etc., to assist in writing, understanding, and validating configurations or policies. IDE plugins like VS Code and Playground reduce the cost of configuration writing and sharing. Automation of configuration management and execution is achieved through multilingual SDKs in Rust, Go, and Python.</p><p><img loading="lazy" alt="ide" src="/assets/images/ide-5fe2523decb4b8e9e2a2f5843dd7efee.png" width="2432" height="1190" class="img_ev3q"></p><p>For IDE plugins, KCL currently mainly supports VS Code, IntelliJ, and NeoVim. These plugins, based on the same KCL Language Server, offer features like autocompletion, navigation, hover, code refactoring, and formatting<sup>[12]</sup>.</p><p><img loading="lazy" alt="integration" src="/assets/images/integration-en-bb7aa43466779961007e11f54d97091e.jpg" width="1130" height="1032" class="img_ev3q"></p><p>As a CNCF project, KCL is integrated with many other CNCF ecosystem projects. For example, KCL provides plugins for existing CNCF ecosystem configuration management tools like Kubectl, Helm, Kustomize, kpt, helmfile, etc. At runtime, KCL offers the KCL Kubernetes Operator to meet various configuration management needs. Additionally, we provide the following integration support:</p><ul><li><strong>Multilingual Support</strong>: We offer multilingual SDKs to help users work with KCL in different programming languages and integrate it into their own applications.</li><li><strong>Package Management Support</strong>: We provide KCL package management tools that allow distribution and reuse of configurations and policy code through standard OCI supply chain methods like Harbor, Docker Hub, GitHub Packages, etc.</li><li><strong>Schema and Data Migration Support</strong>: We support one-click migration of schema and data from other ecosystems to KCL Schema, including Go/Rust struct definitions, JsonSchema, Protobuf, OpenAPI, Terraform Provider Schema, JSON, YAML, and more.</li></ul><p><img loading="lazy" alt="artifact-hub" src="/assets/images/artifact-hub-e25e5aa9b3e59e2b6ad2674084a0f15f.png" width="1806" height="1250" class="img_ev3q"></p><p><img loading="lazy" alt="artifact-hub-k8s" src="/assets/images/artifact-hub-k8s-6ec143b33c6a33b239efa57bfa5cdffe.png" width="1080" height="753" class="img_ev3q"></p><p>Furthermore, KCL supports integration with ArtifactHub. You can publish your KCL package to ArtifactHub by submitting a PR to the <code>kcl-lang/artifacthub</code> repository. This allows you to see the effects of the uploaded KCL package on the ArtifactHub page, such as the k8s package<sup>[13]</sup>.</p><p>In addition to that, KCL provides many out-of-the-box cloud-native models, primarily covering <strong>Kubernetes</strong> and <strong>Terraform</strong> models. Developers can easily add corresponding configuration model dependencies or view the KCL source code with just one line of KCL command.</p><p><img loading="lazy" alt="performance" src="/assets/images/performance-a8764d525c4656280132e1c7c175ea75.png" width="1992" height="1070" class="img_ev3q"></p><p>In addition to the external work related to language, toolchain, and cloud-native integration, we have also made significant efforts to ensure stability and performance within KCL. In scenarios with large code bases or high computational requirements, KCL outperforms languages like CUE, Jsonnet, HCL, etc. Furthermore, KCL's progressive static typing system, immutability, schema, and validation rules ensure further stability of configurations.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="case-studies">Case Studies<a href="#case-studies" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes">Kubernetes<a href="#kubernetes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL currently focuses on the cloud-native domain, particularly in Kubernetes scenarios.</p><p><img loading="lazy" alt="k8s-mutation" src="/assets/images/k8s-mutation-en-ffaaa7012820913b4e2ecace85aab3f4.jpg" width="2168" height="898" class="img_ev3q"></p><p>As a small programming language within the cloud-native domain, KCL can be directly used to address simple tasks in the environment. For example, the <code>append-env</code> model can be used to inject environment variables into Kubernetes resources without the need for scripting. These models are shareable, reusable, and have been tested for code reliability, stability, and scalability.</p><p><img loading="lazy" alt="k8s-validation" src="/assets/images/k8s-validation-en-b7e2ddf425c2d1ea3711635cc5e51d17.jpg" width="2044" height="1048" class="img_ev3q"></p><p>In addition to in-place editing of Kubernetes configurations, KCL offers a variety of out-of-the-box models for Kubernetes configuration validation. These models address security and compliance issues in the cloud-native supply chain. For example, the <code>disallow-svc-lb</code> model can be used to validate whether the <code>Service</code> resource incorrectly sets the <code>LoadBalancer</code> type, and the <code>https-only</code> model can verify if the <code>Ingress</code> resource contains explicit annotations set to use https.</p><p>Compared to other policy tools or engines, the advantage of using KCL is that a validation model can be used both on the client side and at runtime. Schema and constraint conditions can be defined simultaneously in the programming language interface, without the need for additional OpenAPI Schema or JSON Schema integration.</p><p><img loading="lazy" alt="kcl-operator" src="/assets/images/kcl-operator-en-34c825bf2162b1eb5d2ade38f56d58e3.jpg" width="2146" height="1190" class="img_ev3q"></p><p>In addition to abstracting, editing, and verifying configurations on the client side, KCL also provides runtime support. KCL Operator provides Kubernetes cluster integration, allowing Access Webhook to generate, mutate, or validate resources based on KCL configuration when applying Kubernetes resources to the cluster. Webhook will capture creation, application, and editing operations, and <code>KCLRun</code> will execute resources on the configuration associated with each operation<sup>[14]</sup>.</p><p>Using the KCL Operator, resource configuration management and security verification can be automated in a lightweight manner within the Kubernetes cluster through KCL code in a few steps, without the need to repeatedly develop Webhook Server to dynamically modify and verify configurations at runtime.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform">Terraform<a href="#terraform" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Another scenario that KCL focuses on is the ecosystem model of Terraform.</p><p><img loading="lazy" alt="tf-validation" src="/assets/images/tf-validation-en-fac8400554b956c01a22935f66dab62d.jpg" width="1118" height="1122" class="img_ev3q"></p><p>In the cloud-native supply chain scenario, apart from the user's business code, it is often necessary to verify the security of the Infrastructure as Code (IaC) code. Therefore, KCL also provides validation models related to Terraform. For example, the example shown in the image only requires a few lines of KCL code to enforce the requirement of not deleting resources during automatic scaling operations in an AWS resource group<sup>[15]</sup>.</p><p>Compared to other policy engines or tools, KCL supports easy conversion from Terraform Provider Schema to KCL Schema, making policy writing more accessible.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="iac--gitops">IaC &amp; GitOps<a href="#iac--gitops" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="gitops" src="/assets/images/gitops-en-8e4a93c8553aa79c3adc8d54b08ad55e.jpg" width="2410" height="790" class="img_ev3q"></p><p>Whether it is the Kubernetes model or the Terraform model, and whether it is using the standalone KCL or KRM KCL configuration format, KCL supports integration with various CI/CD and GitOps tools. KCL allows developers to define the resources required for an application in a declarative manner. By combining KCL with GitOps tools, we can achieve better Infrastructure as Code (IaC) implementation, improve deployment efficiency, and simplify application configuration management<sup>[16]</sup>.</p><p>With GitOps, developers and operations teams can manage the deployment of applications by separately modifying application and configuration code. The GitOps toolchain can automatically change configurations based on the automation capabilities of KCL, enabling continuous deployment and ensuring consistency. If any issues arise, the GitOps toolchain allows for quick rollbacks.</p><p><img loading="lazy" alt="app-delivery" src="/assets/images/app-delivery-en-772f5db5dfd1e58faac7867060e13fc9.jpg" width="2114" height="968" class="img_ev3q"></p><p>KCL can also be used in conjunction with various CI/CD and application configuration delivery engines within an enterprise, such as KusionStack, to achieve separation of concerns, application-centric programmable model interfaces, and GitOps workflows. This simplifies the deployment and operations of scalable applications in today's hybrid and multi-cloud environments, enhancing release and operations efficiency as well as developer experience.</p><p><img loading="lazy" alt="k8s-abstraction" src="/assets/images/k8s-abstraction-en-3eec20bcc4e29fa52c56786a41f1f56b.jpg" width="2230" height="1042" class="img_ev3q"></p><p>Furthermore, with the Schema structure and automation API of KCL, we can integrate KCL into external systems and use CLI/API/UI forms to automate the addition, deletion, modification, and retrieval of KCL configurations. This not only enables GitOps and Infrastructure as Code (IaC) but also provides a user-friendly configuration management interface for developers. It supports changes to KCL code in the form of UI forms, improving the efficiency of configuration management and application delivery while avoiding configuration drift and other issues.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>This article mainly reviews the content of the KCL presentation at the CNCF KCD community conference. It discusses the challenges encountered in the cloud-native domain, especially in the Kubernetes and Terraform ecosystems, as well as the concepts, user experiences, and practices of the KRM KCL specification.</p><p>Of course, the problems that KCL can solve and the scenarios it can be applied to are much broader than what is covered in this article. Due to the limitations of the article length, we will continue to share the best practices of adopters in the community. We also welcome everyone to join our community for further discussions and exchanges ❤️.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-resources">More Resources<a href="#more-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">KusionStack Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>[1]<!-- --> Forecast Analysis: Container Management (Software and Services), Worldwide: <a href="https://www.gartner.com/en/documents/3985796" target="_blank" rel="noopener noreferrer">https://www.gartner.com/en/documents/3985796</a></li><li>[2]<!-- --> The top programming languages: <a href="https://octoverse.github.com/2022/top-programming-languages" target="_blank" rel="noopener noreferrer">https://octoverse.github.com/2022/top-programming-languages</a></li><li>[3]<!-- --> Declarative Application Management in Kubernetes: <a href="https://docs.google.com/document/d/1cLPGweVEYrVqQvBLJg6sxV-TrE5Rm2MNOBA_cxZP2WU/edit#" target="_blank" rel="noopener noreferrer">https://docs.google.com/document/d/1cLPGweVEYrVqQvBLJg6sxV-TrE5Rm2MNOBA_cxZP2WU/edit#</a></li><li>[4]<!-- --> CNCF Platform Engineering Whitepaper: <a href="https://tag-app-delivery.cncf.io/whitepapers/platforms/" target="_blank" rel="noopener noreferrer">https://tag-app-delivery.cncf.io/whitepapers/platforms/</a></li><li>[5]<!-- --> Google SRE Workbook: Configuration Specifics: <a href="https://sre.google/workbook/configuration-specifics/" target="_blank" rel="noopener noreferrer">https://sre.google/workbook/configuration-specifics/</a></li><li>[6]<!-- --> KCL Website: <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/</a></li><li>[7]<!-- --> Kubectl: <a href="https://kubernetes.io/docs/reference/kubectl/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/reference/kubectl/</a></li><li>[8]<!-- --> KusionStack: <a href="https://kusionstack.io" target="_blank" rel="noopener noreferrer">https://kusionstack.io</a></li><li>[9]<!-- --> KubeVela: <a href="https://kubevela.net" target="_blank" rel="noopener noreferrer">https://kubevela.net</a></li><li>[10]<!-- --> Helmfile: <a href="https://github.com/helmfile/helmfile" target="_blank" rel="noopener noreferrer">https://github.com/helmfile/helmfile</a></li><li>[11]<!-- --> KRM KCL Specification: <a href="https://github.com/kcl-lang/krm-kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/krm-kcl</a></li><li>[12]<!-- --> KCL IDE Extension: <a href="https://kcl-lang.io/docs/tools/Ide/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/tools/Ide/</a></li><li>[13]<!-- --> ArtifactHub KCL Integration: <a href="https://artifacthub.io/" target="_blank" rel="noopener noreferrer">https://artifacthub.io/</a></li><li>[14]<!-- --> KCL Operator: <a href="https://github.com/kcl-lang/kcl-operator" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-operator</a></li><li>[15]<!-- --> Terraform KCL Policy: <a href="https://kcl-lang.io/docs/user_docs/guides/%5B%5Dworking-with-terraform/validation" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/working-with-terraform/validation</a></li><li>[16]<!-- --> GitOps using KCL: <a href="https://kcl-lang.io/docs/user_docs/guides/gitops/gitops-quick-start" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/gitops/gitops-quick-start</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Meeting</category>
        </item>
        <item>
            <title><![CDATA[KCL Introduction at CNCF KCD Hangzhou 2023 Meeting]]></title>
            <link>https://kcl-lang.github.io/blog/2023-10-21-kcl-kcd-hangzhou-meeting</link>
            <guid>https://kcl-lang.github.io/blog/2023-10-21-kcl-kcd-hangzhou-meeting</guid>
            <pubDate>Sat, 21 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Download PDF (Chinese)]]></description>
            <content:encoded><![CDATA[<p><a href="https://kcl-lang.io/talks/kcl-cncf-kcd-hangzhou2023.pdf" target="_blank" rel="noopener noreferrer">Download PDF (Chinese)</a></p><p><img loading="lazy" alt="Talk Cover" src="/assets/images/talk-cover-589ff826defc21c1d2f6fec1ae565c72.png" width="2654" height="1490" class="img_ev3q"></p>]]></content:encoded>
            <category>KCL</category>
            <category>Meeting</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 09.07 - 10.11) | v0.6.0 Is Out - Enhancement on IDE Extensions and Package Management!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-10-11-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2023-10-11-biweekly-newsletter</guid>
            <pubDate>Wed, 11 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (09.07 - 10.11 2023). Here is an overview of the key content:</p><p><strong>🔧 Language and Toolchain Updates</strong></p><ul><li><strong>KCL v0.6.0 Release on 9/15</strong> - Updates to the language, toolchain, and community integration. Detailed information could be found <a href="/blog/2023-09-15-kcl-0.6.0-release">here</a>.</li><li><strong>KCL IDE Updates</strong> - Supports for hover tooltips on standard library and built-in functions, and quick fixes for KCL code errors. And a plugin compatible with Intellij IDEA 2023.2 is released.</li><li><strong>KCL Package Management Tool KPM Updates</strong> - <code>kpm run</code> now could compile KCL files and embeded with the import tool.</li><li><strong>KCL Documentation Tool Updates</strong> - The docstring Examples section is added to the output documentation.</li><li><strong>KCL Language Updates</strong> - Optimized error message output and added suggestions for fixing some errors.</li></ul><p><strong>📰 Official Website and Use Case Updates</strong></p><ul><li>KCL website adds v0.6.0 documentation version.</li><li>More KCL model examples for containers, services, and Pod Security Policy (PSP): <a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/krm-kcl/tree/main/examples</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @jakezhu9 for contributing the KCL Import tool to convert Terraform Schema to KCL Schema 🙌 <a href="https://github.com/kcl-lang/kcl-go/pull/152" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/152</a></li><li>Thanks to @jakezhu9 for contributing the integration of the Import tool to kpm 🙌 <a href="https://github.com/kcl-lang/kpm/pull/194" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/pull/194</a></li><li>Thanks to @zwpaper for contributions to KCL documentation and Tree Sitter Grammar 🙌 <a href="https://github.com/kcl-lang/tree-sitter-kcl/pull/1" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/tree-sitter-kcl/pull/1</a>, etc.</li><li>Thanks to @mrgleeco, @ghpu, @steeling, @prahaladramji, @zwpaper, and others for valuable feedback and discussions while using KCL and the toolchain 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-extension-updates">IDE Extension Updates<a href="#ide-extension-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the recent v0.6.0 release, the KCL IDE plugin has enhanced on hover tooltips for the standard library and builtin functions, along with support for quick fixes for KCL code errors. Additionally, end-to-end tests for the language server and integration tests for the konfig repository have been added to ensure the stability and iteration of the IDE plugin. In the upcoming release, a new <code>kcl-language-server version</code> subcommand has been added to display version information. Please refer to <a href="https://kcl-lang.io/docs/user_docs/getting-started/install/#2-install-kcl-ide-extension" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install/#2-install-kcl-ide-extension</a> for instructions on how to upgrade and install the KCL IDE extension in various IDE platforms.</p><p><img loading="lazy" src="/assets/images/hover-built-in-2e3135c5f212382ac87f2d177198d716.png" width="2044" height="1200" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="intellij-plugin">IntelliJ Plugin<a href="#intellij-plugin" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Besides, the IntelliJ plugin is now compatible with version 2023.2+ and can be downloaded from the following link: <a href="https://github.com/kcl-lang/intellij-kcl/releases" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/intellij-kcl/releases</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-package-manager-updates">KCL Package Manager Updates<a href="#kcl-package-manager-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The kpm run command now supports compiling KCL files and has integrated an import tool. Additionally, the <code>--quiet</code> option has been added to suppress output logs.</p><p><img loading="lazy" src="/assets/images/kpm-run-file-9c35e6124d10306f128268dd7e7e74aa.png" width="1136" height="816" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-language-updates">KCL Language Updates<a href="#kcl-language-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the upcoming release, the KCL compilation command has optimized error message output and added repair suggestions on some cases:</p><p><img loading="lazy" src="/assets/images/error-suggestion-79b2d1a49679a41080b465ae6dfdf5a2.png" width="1642" height="190" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-models-updates">KCL Models Updates<a href="#kcl-models-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the past few weeks, we have provided more usage examples for configuring and validating containers, services, and Pod Security Policy (PSP).</p><ul><li>readonly-root-fs</li><li>allowed-image-repos</li><li>deny-all</li><li>deny-endpoint-edit-default-role</li><li>disallow-ingress-wildcard</li><li>disallow-svc-lb</li><li>disallow-svc-node-port</li><li>disallowed-image-repos</li><li>horizontal-pod-auto-scaler</li><li>psp-allow-privilege-escalation</li><li>psp-app-armor</li><li>psp-capabilities</li><li>psp-flexvolume-drivers</li><li>required-image-digests</li><li>required-probes</li><li>validate-auto-mount-service-account-token</li><li>validate-container-limits</li><li>validate-container-requests</li><li>validate-deprecated-api</li><li>k8s_manifests_containers</li></ul><p>You can refer to the corresponding examples to incorporate the above configurations and validations: <a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/krm-kcl/tree/main/examples</a>. Now, let's explain using the Kubectl KCL plugin and the disallow-svc-lb model. The purpose of disallow-svc-lb is to validate Service resources and disallow the use of LoadBalancer as the Service type. Write the following YAML file (manifests.yaml):</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> disallow</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">svc</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">krm.kcl.dev/version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">krm.kcl.dev/type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">documentation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      A validation that prevents the creation of Service resources of type `LoadBalancer`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//ghcr.io/kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lang/disallow</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">svc</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MyApp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LoadBalancer </span><span class="token comment" style="color:#999988;font-style:italic"># The service type is incorrectly set to LoadBalancer.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Using the Kubectl KCL tool for resource validation on the client-side, we will get the following result:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl kcl apply -f manifests.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">A validation that prevents the creation of Service resources of type `LoadBalancer`, for Service: my-service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community.</p><p>For more resources, please refer to</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 Roadmap</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/7" target="_blank" rel="noopener noreferrer">KCL v0.7.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL Joining CNCF as a Sandbox Project! 🎉]]></title>
            <link>https://kcl-lang.github.io/blog/2023-09-19-kcl-joining-cncf-sandbox</link>
            <guid>https://kcl-lang.github.io/blog/2023-09-19-kcl-joining-cncf-sandbox</guid>
            <pubDate>Tue, 19 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[kcl-joining-cncf-sandbox]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="kcl-joining-cncf-sandbox" src="/assets/images/kcl-joining-cncf-sandbox-en-19415ca24b02ed087a00bd155ef4fc47.png" width="424" height="236" class="img_ev3q"></p><p><strong>On September 20, 2023, the KCL project was approved by the TOC of the Cloud Native Computing Foundation (CNCF) and officially became a CNCF Sandbox project</strong>.</p><p>This means that KCL has gained recognition from the cloud native open source community, ensuring the neutrality of the project and facilitating the participation of developers and partners in project construction. It is a significant step towards dynamic configuration management and automation capabilities for cloud native application delivery.</p><ul><li><em>Project Link: <a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl</a></em></li><li><em>Project Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></li></ul><p>By joining CNCF as a sandbox project, the KCL community aims to attract more developers and users to contribute and further promote the mature application of the project in cloud native scenarios. In addition, joining CNCF provides KCL with an enhanced platform for collaboration and innovation. It offers an opportunity to engage with a diverse community of developers, organizations, and industry experts at the forefront of cloud native technology. We look forward to collaborating with other CNCF projects, contributing our technical expertise, and exploring the possibilities of integrating with more CNCF projects.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-cncf">What is CNCF?<a href="#what-is-cncf" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>CNCF, short for Cloud Native Computing Foundation, is a sub-foundation under the Linux Foundation. CNCF is dedicated to building a sustainable ecosystem for cloud native software, covering areas such as storage, computing, orchestration, scheduling, CI/CD, DevOps, service governance, and service gateways.</p><p><em>Kubernetes is one of the most representative projects of CNCF</em>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-cncf-sandbox-project">What is CNCF Sandbox Project?<a href="#what-is-cncf-sandbox-project" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="cncf-sandbox-logo" src="/assets/images/cncf-sandbox-logo-b55f5b60a0d3ea098438ca67bd77a415.png" width="1080" height="243" class="img_ev3q"></p><p>The CNCF community classifies projects into Sandbox, Incubating, and Graduated. Well-known graduated projects include Kubernetes, Prometheus, Istio, ETCD, Containerd, ArgoCD, and Helm. For a complete list of graduated and incubating projects, you can visit <a href="https://www.cncf.io/projects/" target="_blank" rel="noopener noreferrer">https://www.cncf.io/projects/</a>.</p><p>Sandbox is a category created by CNCF to provide a beneficial and neutral home for open source projects to promote collaboration and development. Projects selected for the Sandbox are recognized by the CNCF Technical Oversight Committee (TOC) and have the potential for experimentation and development. You can find the list of Sandbox projects at <a href="https://www.cncf.io/sandbox-projects/" target="_blank" rel="noopener noreferrer">https://www.cncf.io/sandbox-projects/</a>. To enter the Sandbox, at least 66% of the TOC members (all 11 people listed at <a href="https://github.com/cncf/toc#members" target="_blank" rel="noopener noreferrer">https://github.com/cncf/toc#members</a>) need to vote in favor, which means at least 8 people.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-kcl">What is KCL?<a href="#what-is-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>KCL is an open-source, constraint-based record and function language. It aims to improve the writing of complex configurations, such as cloud-native Kubernetes configurations, using mature programming language techniques and practices. KCL focuses on modularity, extensibility, and stability around configuration, aiming to create a simpler logic writing experience and build a simpler path for automation and ecosystem integration.</p><p>Key milestones of the project include:</p><ul><li>May 2022: KCL was initiated and officially open-sourced by Ant Group.</li><li>June 2023: KCL became an official CNCF Landscape project.</li><li>September 2023: KCL was reviewed by the CNCF Application Delivery TAG and approved through TOC voting, officially becoming a CNCF Sandbox project (<a href="https://github.com/cncf/sandbox/issues/48" target="_blank" rel="noopener noreferrer">https://github.com/cncf/sandbox/issues/48</a>).</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-do-we-need-kcl">Why do we need KCL?<a href="#why-do-we-need-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Just like recording music with a staff and storing time series data in a sequential database, we use specialized configuration and policy languages to write and manage large-scale complex configurations and policies within specific problem domains of cloud native configuration and automation. Unlike high-level general-purpose languages with hybrid writing paradigms and hybrid engineering capabilities, the core logic of specialized languages is to solve domain problems with almost infinite changes and complexity through a converged finite set of syntax and semantics, and to deposit complex configuration and strategy writing ideas and methods into language characteristics.</p><p>In addition, KCL hopes to fill the gap in configuration languages and tools in the field of lightweight client cloud native dynamic configuration through more modern declarative configuration languages and tools, and address the following issues:</p><ul><li><strong>Configuration Bloat</strong>: Most static configurations such as Kubernetes YAML in the cloud native domain need to be configured separately for each environment; In the worst-case scenario, it may introduce difficult to debug errors involving environmental cross linking, with poor stability and scalability.</li><li><strong>Configuration Drift</strong>: There is often no standard way to manage the static configuration of applications and infrastructure in different environments. Using non-standard methods such as combining scripts and glue code can lead to exponential complexity growth and configuration drift.</li><li><strong>Cognitive loading</strong>: Kubernetes and others, as platform technology tools for building platforms, excel in the details of the underlying unified infrastructure, but lack higher-level abstraction for application software delivery, which has a high cognitive loading on ordinary developers and affects the software delivery experience of higher-level application developers.</li></ul><p>In response to the above issues, KCL expects to provide the following capabilities:</p><ul><li>Shielding the details and complexity of infrastructure and platforms through methods such as code <strong>abstraction</strong>, reducing the cognitive loading on developers.</li><li><strong>Mutate</strong> and <strong>Validate</strong> existing inventory configurations or templates to directly solve cloud generated small configuration scenarios such as Helm Chart configuration hard coding issues, but it goes far beyond that.</li><li>Improve team collaboration efficiency by <strong>managing large-scale configuration</strong> data across teams without side effects through language configuration.</li></ul><p>Specifically, KCL can</p><ul><li>Improve the ability of <strong>configuration semantic verification</strong> at the code level, such as schema definition, field optional/mandatory, type, range, and other configuration check and verification capabilities.</li><li>Provide the ability to write, combine, and abstract <!-- -->*<!-- -->*<!-- -->configuration blocks, such as structural definition, structural inheritance, constraint definition, and configuration policy merging.</li><li>Improve configuration flexibility through <strong>modern programming languages</strong> and <strong>writing code</strong>, such as conditional statements, loops, functions, package management, and other features to enhance configuration reuse capabilities.</li><li>Provide <strong>comprehensive tool chain support</strong>, rich IDE plugins, languages, and ecological tool chain support to reduce the threshold of getting started and improve the user experience.</li><li>By using <strong>package management tools</strong> and <strong>OCI registry</strong>, configurations can be shared, propagated, and delivered in a simpler way among different teams/roles.</li><li>Provide <strong>high-performance</strong> compilers to meet the requirements of large-scale configuration scenarios, such as meeting the rendering performance requirements of generating configurations of different environments and topologies based on deployment context from a baseline configuration, as well as the performance requirements of automatic configuration modification.</li><li>By enhancing its automation and integration capabilities through means such as <strong>multilingual SDK and KCL language plugin</strong>, it can significantly reduce the learning cost of KCL while leveraging the value of configuration and policy writing.</li></ul><p><img loading="lazy" src="/assets/images/kcl-overview-02a0d4a0f70d7adc22ab051eb794f3b8.png" width="702" height="419" class="img_ev3q"></p><p>In addition to the language itself, KCL also provides many additional tools such as formatting, testing, documentation, etc. to help you use, understand, and check the written configuration or strategy; Reduce the cost of configuration writing and sharing through IDE plugins such as VS Code, package management tools, and Playground; Automatically manage and execute configurations through Rust, Go, and Python multilingual SDKs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-can-kcl-do">What can KCL do?<a href="#what-can-kcl-do" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-configuration-management">Dynamic Configuration Management<a href="#dynamic-configuration-management" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="standalone-kcl-form" src="/assets/images/standalone-kcl-form-3fe553990c62b689edd434a623cfcba2.png" width="2252" height="1194" class="img_ev3q"></p><p>As a configuration language, the most important feature that KCL provides to application and platform developers/SREs is dynamic configuration management. Through code abstraction, we can build an application-centric model that shields complex infrastructure and platform concepts, providing developers with a centralized and easy-to-understand interface. Additionally, KCL allows platform personnel to quickly extend and define their own models, which can be shared and reused through the OCI registry.</p><p><img loading="lazy" alt="krm-kcl-form" src="/assets/images/krm-kcl-form-93ee5711170a1227cdb9cb2ad68654d5.png" width="2166" height="1076" class="img_ev3q"></p><p>Furthermore, KCL also supports direct integration with the Kubernetes Resource Model (KRM) specification. KRM KCL is a generic configuration model specification used to describe and manage various cloud native resources, such as container, pod, and service configurations and abstractions. The KRM KCL specification provides a unified way to define and manage these resources, enabling them to be portable and reusable across different environments. It operates in a fully open Kubernetes world, with minimal binding to any orchestration/engine tools or Kubernetes controllers. It allows platform personnel to extend their abstractions, configuration editing and validation logic, while providing a developer-friendly configuration management interface based on the separation of concerns.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gitops">GitOps<a href="#gitops" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="gitops" src="/assets/images/gitops-c677786c3b120ccbe4e8007313291a53.png" width="2182" height="1018" class="img_ev3q"></p><p>Whether using standalone KCL or KRM KCL configuration forms, we support integration between KCL and various CI/CD and GitOps tools. KCL allows developers to define the resources required by applications in a declarative manner. By combining KCL with GitOps tools, we can better achieve Infrastructure as Code (IaC), improve deployment efficiency, and simplify application configuration management.</p><p>With GitOps, developers and operations teams can manage application deployments by separately modifying application and configuration code. The GitOps toolchain can automatically make changes to the configuration based on the automation capabilities of KCL, enabling continuous deployment and ensuring consistency. If any issues arise, the GitOps toolchain can quickly roll back the changes.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="integrations">Integrations<a href="#integrations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="integration" src="/assets/images/integration-60f0e309485ebab3d8478a40017a8828.png" width="2192" height="1048" class="img_ev3q"></p><p>In addition to integrating with GitOps automation tools like ArgoCD, as a CNCF project, KCL has also integrated with many other CNCF ecosystem projects. For example, it provides KCL plugins for existing CNCF ecosystem configuration management tools such as Helm, Kustomize, and kpt. It also provides a KCL Kubernetes Operator at runtime to meet different configuration management needs. Furthermore, we offer the following integration support:</p><ul><li><strong>Multi-language support</strong>: We provide multi-language SDKs to help users operate KCL in different languages and integrate it into their own applications.</li><li><strong>Package management support</strong>: We provide the KPM package management tool to distribute and reuse KCL configurations through Docker Hub, GitHub container registry, etc.</li><li><strong>Schema migration support</strong>: We support one-click migration of schemas from other ecosystems to KCL schemas, such as Go/Rust struct definitions, JsonSchema, Protobuf, OpenAPI, Terraform Provider Schema, etc.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="practices">Practices<a href="#practices" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="practice-krm-kcl" src="/assets/images/practice-krm-kcl-e18153d2f7b57b6706db1ad767d11bdb.png" width="3538" height="1040" class="img_ev3q"></p><p>Firstly, as a small language in the cloud-native field, KCL can be directly used to solve simple problems in scenarios. For example, using the KCL model to directly inject environment variables for Kubernetes resources, and using the KCL model and Helm KCL plugins to non-invasively handle the hard-coded configuration of Helm Charts instead of directly modifying the Helm Chart by forking it.</p><p><img loading="lazy" alt="practice-konfig-gitops" src="/assets/images/practice-konfig-gitops-a1a7d2f8eaa9af8509612dd53d8f6250.png" width="1812" height="892" class="img_ev3q"></p><p>Secondly, KCL can also be used in conjunction with various CI/CD and application configuration delivery engines such as <a href="https://kusionstack.io" target="_blank" rel="noopener noreferrer">KusionStack</a> within enterprises to achieve separation of concerns, application-centric programmable model interfaces, and GitOps processes. This simplifies the deployment and operation of scaled applications in today's hybrid multi-cloud environments, improving release and operation efficiency and developer experience.</p><p>Of course, KCL can solve more problems and scenarios than mentioned above. We will continue to share best practices from adopters in the community, and we welcome everyone to join our community for further discussions and exchanges ❤️. <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="community" src="/assets/images/community-4be9cb803ff35e3209a7575e911c1cb0.png" width="2166" height="1092" class="img_ev3q"></p><p>In just one year of KCL being open source, we have released many versions and built the KCL community in collaboration with contributors and maintainers from all over the world. We have also gained recognition from some adopters, such as Youzan and Huawei. By joining CNCF, our goal is to increase project visibility and drive community adoption and participation, as strong and well-known foundation organizations are crucial for advancing the development of language ecosystems.</p><p>Additionally, we have received recognition from companions in the open-source community from all over the world, including China, North America, Europe, and Australia. We thank all the users and community developers who have accompanied KCL on this journey, and we welcome more companions to join our community and build together ❤️.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For KCL, joining CNCF does not mean the end, but a new beginning. We will work together with our community companions to build a better KCL language, toolchain, and IDE experience! Lastly, we welcome everyone to join our community for discussions and contributions 👏👏👏</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>KCL Website: <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/</a></li><li>KusionStack Website: <a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">https://kusionstack.io/</a></li><li>KCL Community: <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></li><li>KCL 2023 Roadmap: <a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/community/release-policy/roadmap</a></li><li>KCL GitHub Issues: <a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues</a></li><li>KCL GitHub Discussion: <a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">https://github.com/orgs/kcl-lang/discussions</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.6.0 Release Blog]]></title>
            <link>https://kcl-lang.github.io/blog/2023-09-15-kcl-0.6.0-release</link>
            <guid>https://kcl-lang.github.io/blog/2023-09-15-kcl-0.6.0-release</guid>
            <pubDate>Fri, 15 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL team is pleased to announce that KCL v0.6.0 is now available! This release has brought three key updates to everyone: <strong>Language</strong>, <strong>Tools</strong>, and <strong>Integrations</strong>.</p><ul><li><em>Use KCL language, tools and IDE extensions with more complete features and fewer errors to improve code writing experience and efficiency.</em></li><li><em>Use KPM, OCI Registry and other tools to directly use and share your cloud native domain models, reducing learning and hands-on costs.</em></li><li><em>Use cloud-native integration extensions such as Helmfile KCL plugin and KCL Operator to simultaneously support in-place mutation and validation of Kubernetes resources on both the client and runtime, avoiding hardcoded configurations.</em></li></ul><p>You can visit the <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.6.0" target="_blank" rel="noopener noreferrer">KCL release page</a> or the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a> to get KCL binary download link and more detailed release information.</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language. KCL improves the writing of numerous complex configurations, such as cloud-native scenarios, through its mature programming language technology and practice. It is dedicated to building better modularity, scalability, and stability around configurations, simpler logic writing, faster automation, and great built-in or API-driven integrations.</p><p>This blog will introduce the content of KCL v0.6.0 and recent developments in the KCL community to readers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="language">Language<a href="#language" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-type-system-enhancement">🔧 Type system enhancement<a href="#-type-system-enhancement" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Support automatic type inference for KCL configuration block attributes. Prior to version 0.6.0 of KCL, the key1 and key2 attributes in the code snippet below would be inferred as type str | int. With the updated version, we have further improved the precision of type inference for configuration attributes, so key1 and key2 will have more specific and precise corresponding types.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key1  </span><span class="token comment" style="color:#999988;font-style:italic"># The type of key1 is str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key2  </span><span class="token comment" style="color:#999988;font-style:italic"># The type of key2 is int</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition, we have optimized error messages for schema semantic checking, union type checking, and type checking errors in system library functions.</p><p>For more information, please refer to <a href="https://github.com/kcl-lang/kcl/pull/678" target="_blank" rel="noopener noreferrer">here</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-api-update">🏄 API Update<a href="#-api-update" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL Schema model parsing: The GetSchemaType API is used to retrieve KCL package-related information and default values for schema attributes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-bug-fixes">🐞 Bug Fixes<a href="#-bug-fixes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="fix-schema-requiredoptional-attribute-check-in-kcl">Fix schema required/optional attribute check in KCL<a href="#fix-schema-requiredoptional-attribute-check-in-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In previous versions of KCL, the required/optional attribute check for KCL would miss nested schema attribute checks. In version KCL v0.6.0, we have fixed such similar issues.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema S</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema L</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># In previous versions, the required attribute check for attributes 'a' and 'b' of S in [S] and {str:S} would be missed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># This issue has been fixed in KCL v0.6.0 and later versions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ss?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sss?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">l </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> L </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ss </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">S </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"b"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information, please see <a href="https://github.com/kcl-lang/kcl/pull/672" target="_blank" rel="noopener noreferrer">here</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ide--toolchain-updates">IDE &amp; Toolchain Updates<a href="#ide--toolchain-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-updates">IDE Updates<a href="#ide-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>Performance improvement for all IDE features</li><li>Support variable and schema attribute completion for KCL packages</li><li>Support KCL schema attribute document attribute hover</li><li>Support for quick fix of useless import statements</li></ul><p><img loading="lazy" alt="ide-quick-fix" src="/assets/images/ide-quick-fix-en-b84b68a5dba9b722fcb0af4d971bda5c.png" width="956" height="590" class="img_ev3q"></p><ul><li>Support right-click formatting of files and code fragments in VS Code.</li></ul><p><img loading="lazy" alt="ide-format" src="/assets/images/ide-format-en-165458e0d8caf511b596628baad634df.png" width="780" height="400" class="img_ev3q"></p><ul><li>Support hover for built-in functions and function information in system libraries</li></ul><p><img loading="lazy" alt="ide-func-hover" src="/assets/images/ide-func-hover-becc736d3b72be494da324901a48cafb.png" width="1726" height="306" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ide-extension-updates">IDE Extension Updates<a href="#ide-extension-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>We have integrated the KCL language server LSP into NeoVim and Idea, enabling the completion, navigation, and hover features supported by VS Code IDE in NeoVim and IntelliJ IDEA.</p><ul><li>NeoVim KCL Extension</li></ul><p><img loading="lazy" alt="kcl.nvim" src="/assets/images/overview-0667184faaf2ee0abe93374de277929b.png" width="1246" height="1121" class="img_ev3q"></p><ul><li>IntelliJ Extension</li></ul><p><img loading="lazy" alt="intellij" src="/assets/images/overview-1dbf1cc2cd1bbf6b03b06702335a10ce.png" width="1041" height="650" class="img_ev3q"></p><p>For more information on downloading, installation, and features of the IDE plugins, please refer to:</p><ul><li><a href="https://kcl-lang.io/docs/user_docs/getting-started/install#neovim" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install#neovim</a></li><li><a href="https://kcl-lang.io/docs/user_docs/getting-started/install#intellij-idea" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install#intellij-idea</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-formatting-tool-updates">KCL Formatting Tool Updates<a href="#kcl-formatting-tool-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Support formatting of configuration blocks with incorrect indentation</p><ul><li>Before formatting</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> y </span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>After formatting</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-documentation-tool-updates">KCL Documentation Tool Updates<a href="#kcl-documentation-tool-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Support for exporting Markdown documents</li><li>Support for exporting document index pages</li><li>Support for exporting documents with custom style templates</li><li>Support for HTML escaping in exported documents</li><li>Enhanced document generation to parse and render example code snippets in document comments</li><li>By tracking model updates in Github workflow and regenerating the documentation, automatic synchronization of the documentation can be achieved. Please refer to <a href="https://github.com/KusionStack/catalog/pull/31/files" target="_blank" rel="noopener noreferrer">here</a> for more details.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="generate-model-document-from-kpm-package">Generate model document from kpm package<a href="#generate-model-document-from-kpm-package" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ol><li>Create a kpm package and add documentation comments (using docstring) to the <code>Service</code> model. The documentation can include explanations, example code, and usage instructions to help other developers quickly get started and use it correctly.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜ kpm init demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">➜ cat &gt; demo/server.k &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    """</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Service is a kind of workload profile that describes how to run your application code. This</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    is typically used for long-running web applications that should "never" go down, and handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    short-lived latency-sensitive web requests, or events.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workloadType : str = "Deployment" | "StatefulSet", default is Deployment, required.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        workloadType represents the type of workload used by this Service. Currently, it supports several</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        types, including Deployment and StatefulSet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image : str, default is Undefined, required.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Image refers to the Docker image name to run for this container.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        More info: https://kubernetes.io/docs/concepts/containers/images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas : int, default is 2, required.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Number of container replicas based on this configuration that should be ran.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Instantiate a long-running service and its image is "nginx:v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc = Service {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        workloadType: "Deployment"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: "nginx:v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replica: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    """</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workloadType: "Deployment" | "StatefulSet"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: str</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replica: int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Generate the package documentation in Markdown format</li></ol><p>The following command will output the demo package documentation to the <code>doc/</code> directory in the current working directory:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl-go doc generate --file-path demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="docgen" src="/assets/images/docgen-5d4a8e13d9126ed8e7c4c7834bb73060.png" width="1846" height="1510" class="img_ev3q"></p><blockquote><p>For more usage details, please use <code>kcl-go doc generate -h</code> to refer to the help information.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-synchronization-of-documents-through-ci-pipelines">Automatic synchronization of documents through CI pipelines<a href="#automatic-synchronization-of-documents-through-ci-pipelines" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Implement automatic documentation synchronization through a pipeline By tracking model updates in a Github workflow and regenerating the documentation, automatic synchronization of the documentation can be achieved. You can refer to the approach in the <code>Kusionstack/catalog</code> repo to generate the documentation and automatically submit change PRs to the documentation repository.</p><p>By tracking model updates in Github workflow and regenerating documents, automatic document synchronization can be achieved. Can refer to the approach in the <a href="https://github.com/KusionStack/catalog/pull/31/files" target="_blank" rel="noopener noreferrer">Kusionstack/catalog</a> repo is to generate documents and automatically submit change PRs to the document repository.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-import-tool-updates">KCL Import Tool Updates<a href="#kcl-import-tool-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The KCL Import Tool now adds support for converting Terraform Provider Schema to KCL Schema based on Protobuf, JsonSchema OpenAPI models, and Go Structures, such as the following Terraform Provider Json (obtained through the command <code>terraform providers schema -json &gt; provider.json</code> , For more details, please refer to <a href="https://developer.hashicorp.com/terraform/cli/commands/providers/schema" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/terraform/cli/commands/providers/schema</a>)</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"format_version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"provider_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"registry.terraform.io/aliyun/alicloud"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"provider"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"block_types"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"resource_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"alicloud_db_instance"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"db_instance_type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"engine"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"required"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"security_group_ids"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"set"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"security_ips"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"set"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"map"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"block_types"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"alicloud_config_rule"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"compliance"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string" style="color:#e3116c">"list"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token property" style="color:#36acaa">"compliance_type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token property" style="color:#36acaa">"count"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"number"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"resource_types_scope"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"list"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"data_source_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then the tool can output the following KCL code</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">This file was generated by the KCL auto-gen tool. DO NOT EDIT.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Editing this file might prove futile when you re-run the KCL auto-gen generate command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema AlicloudConfigRule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    AlicloudConfigRule</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    compliance: [ComplianceObject], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    resource_types_scope: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compliance?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ComplianceObject</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource_types_scope?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema ComplianceObject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ComplianceObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    compliance_type: str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    count: int, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compliance_type?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema AlicloudDbInstance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    AlicloudDbInstance</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db_instance_type: str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    engine: str, required</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    security_group_ids: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    security_ips: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    tags: {str:str}, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db_instance_type?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    engine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    security_group_ids?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    security_ips?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isunique</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">security_group_ids</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isunique</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">security_ips</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="package-manage-tool-updates">Package Manage Tool Updates<a href="#package-manage-tool-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kpm-pull-supports-pulling-packages-by-package-name">kpm pull supports pulling packages by package name<a href="#kpm-pull-supports-pulling-packages-by-package-name" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>kpm supports pulling the corresponding package by using the <code>kpm pull &lt;package_name&gt;:&lt;package_version&gt;</code> command.</p><p>Taking the <code>k8s</code> package as an example, you can directly download the package to your local machine using the following commands:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm pull k8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm pull k8s:1.27</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The package downloaded with kpm pull will be saved in the directory <code>&lt;execution_directory&gt;/&lt;oci_registry&gt;/&lt;package_name&gt;</code>. For example, if you use the default kpm registry and run the kpm pull k8s command, you can find the downloaded content in the directory <code>&lt;execution_directory&gt;/ghcr.io/kcl-lang/k8s</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ tree ghcr.io/kcl-lang/k8s -L 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghcr.io/kcl-lang/k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── apiextensions_apiserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── apimachinery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── kcl.mod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── kcl.mod.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── kube_aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── vendor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6 directories, 2 files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kpm-supports-adding-local-paths-as-dependencies">kpm supports adding local paths as dependencies<a href="#kpm-supports-adding-local-paths-as-dependencies" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>"Different projects have different KCL packages, and there are dependencies between them. However, they are stored in different directories. I hope that these packages stored in different directories can be managed together, rather than having to put them together for them to compile." If you also have this need, you can try this feature. The kpm add command currently supports adding local paths as dependencies to a KCL package. You just need to run the command <code>kpm add &lt;local_package_path&gt;</code>, and your local package will be added as a third-party library dependency to the current package.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm pull k8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After completion, you can find the downloaded k8s package in the directory <code>"the_directory_where_you_executed_the_command/ghcr.io/kcl-lang/k8s"</code>.
Create a new KCL package using the <code>kpm init mynginx</code> command.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm init mynginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then, navigate into this package.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> mynginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Inside this package, you can use the kpm add command to add the k8s package you downloaded locally as a third-party library dependency to <code>mynginx</code>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/ghcr.io/kcl-lang/k8s/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, add the following content to <code>main.k</code>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">import</span><span class="token plain"> k8s.api.core.v1 as k8core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8core.Pod </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata.name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec.containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"main-container"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort: </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Normal compilation can be performed through the <code>kpm run</code> command.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kpm-adds-checking-for-existing-package-tags">kpm adds checking for existing package tags<a href="#kpm-adds-checking-for-existing-package-tags" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>We have added a check for duplicate tags in the <code>kpm push</code> command. In order to avoid situations where packages with the same tag have different content, we have added restrictions on the push function in the <code>kpm</code>. If the version of the kcl package you push already exists, you will not be able to push the current kcl package. You will receive the following information:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm: package </span><span class="token string" style="color:#e3116c">'my_package'</span><span class="token plain"> will be pushed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kpm: package version </span><span class="token string" style="color:#e3116c">'0.1.0'</span><span class="token plain"> already exists</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Modifying the content of a package that has already been pushed to the registry without changing the tag carries a high risk, as the package may already be in use by others. Therefore, if you need to push your package, we recommend:</p><ul><li>Change your tag and follow semantic versioning conventions.</li><li>If you must modify the content of a package without changing the tag, you will need to delete the existing tag from the registry.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="integrations">Integrations<a href="#integrations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="helmfile-kcl-plugin">Helmfile KCL Plugin<a href="#helmfile-kcl-plugin" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Helmfile is a declarative specification and tool for deploying Helm Charts. With the Helmfile KCL plugin, you can:</p><ul><li>Edit or verify Helm Chart through non-invasive hook methods, separating the data and logic parts of Kubernetes configuration management<ul><li>Modify resource labels/annotations, inject sidecar container configuration</li><li>Use KCL schema to validate resources</li><li>Define your own abstract application models</li></ul></li><li>Maintain multiple environment and tenant configurations elegantly, rather than simply copying and pasting.</li></ul><p>Here is a detailed explanation using a simple example. With the Helmfile KCL plugin, you do not need to install any components related to KCL. You only need the latest version of the Helmfile tool on your local device.</p><p>We can write a <code>helmfile.yaml</code> file as follows:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">repositories</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community.github.io/helm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">releases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">norbac</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;set</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;rbac.create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;transformers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token comment" style="color:#999988;font-style:italic">#&nbsp;Use&nbsp;KCL&nbsp;Plugin&nbsp;to&nbsp;mutate&nbsp;or&nbsp;validate&nbsp;Kubernetes&nbsp;manifests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"set-annotation"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config.kubernetes.io/function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;docker.io/kcllang/kustomize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v0.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">resource&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">if&nbsp;resource.kind&nbsp;==&nbsp;"Deployment"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;metadata.annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">"managed</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">by"&nbsp;=&nbsp;"helmfile</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&nbsp;for&nbsp;resource&nbsp;in&nbsp;option("resource_list").items</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above file, we referenced the Prometheus Helm Chart and injected the <code>managed-by="helmfile-kcl"</code> label into all deployment resources of Prometheus with just one line of KCL code. The following command can be used to deploy the above configuration to the Kubernetes cluster:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helmfile&nbsp;apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more use cases, please refer to <a href="https://github.com/kcl-lang/krm-kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/krm-kcl</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-operator">KCL Operator<a href="#kcl-operator" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL Operator provides cluster integration, allowing you to use Access Webhook to generate, mutate, or validate resources based on KCL configuration when apply resources to the cluster. Webhook will capture creation, application, and editing operations, and execute <a href="https://github.com/kcl-lang/krm-kcl" target="_blank" rel="noopener noreferrer">KCLRun</a> on the configuration associated with each operation, and the KCL programming language can be used to</p><ul><li>Add labels or annotations based on a condition.</li><li>Inject a sidecar container in all KRM resources that contain a <code>PodTemplate</code>.</li><li>Validating all KRM resources using KCL Schema, such as constraints on starting containers only in a root mode.</li><li>Generating KRM resources using an abstract model or combining and using different KRM APIs.</li></ul><p>Here is a simple resource annotation mutation example to introduce the usage of the KCL operator.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="0-prerequisites">0. Prerequisites<a href="#0-prerequisites" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Prepare a Kubernetes cluster like <code>k3d</code> the kubectl tool.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-install-kcl-operator">1. Install KCL Operator<a href="#1-install-kcl-operator" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kcl-lang/kcl-operator/main/config/all.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use the following command to observe and wait for the pod status to be <code>Running</code>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-deploy-kcl-annotation-setting-model">2. Deploy KCL Annotation Setting Model<a href="#2-deploy-kcl-annotation-setting-model" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  # Set dynamic parameters required for the annotation modification model, here we can add the labels we want to modify/add</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      managed-by: kcl-operator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  # Reference the annotation modification model on OCI</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  source: oci://ghcr.io/kcl-lang/set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-deploy-a-pod-to-verify-the-model-result">3. Deploy a Pod to Verify the Model Result<a href="#3-deploy-a-pod-to-verify-the-model-result" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Execute the following command to deploy a <code>Pod</code> resource:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    image: nginx:1.14.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - containerPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po nginx -o yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can see the following output:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    managed-by: kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can see that the Nginx Pod automatically added the annotation <code>managed-by=kcl-operator</code>.</p><p>In addition, besides referencing an existing model for the source field of the <code>KCLRun</code> resource, we can directly set KCL code for the source field to achieve the same effect. For example:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> set</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">operator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Resource modification can be achieved with just one line of KCL code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    items = [item | {metadata.annotations: option("params").annotations} for item in option("items")]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="registry" src="/assets/images/registry-b5cd8f6cff3682c13bd30d3ce0eeaa18.png" width="1972" height="1000" class="img_ev3q"></p><p>We have provided more than 30 built-in models, and you can find more code examples in the following link: <a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/krm-kcl/tree/main/examples</a></p><p>For example</p><ul><li>Use the <code>web-service</code> model to directly instantiate the Kubernetes resources required for a web application</li><li>Add annotations to existing k8s resources using the <code>set-annotation</code> model</li><li>Use the <code>https-only</code> model to verify that your <code>Ingress</code> configuration can only be set to https, otherwise an error will be reported.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vault-integration">Vault Integration<a href="#vault-integration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In just three steps, we can use <code>Vault</code> to store and manage sensitive information and use it in KCL.</p><p>Firstly, we install and use Vault to store <code>foo</code> and <code>bar</code> information.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vault kv put secret/foo </span><span class="token assign-left variable" style="color:#36acaa">foo</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vault kv put secret/bar </span><span class="token assign-left variable" style="color:#36acaa">bar</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then write the following KCL code (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"secret-store"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vault"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Valid format:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#  "ref+vault://PATH/TO/KV_BACKEND#/KEY"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ref+vault://secret/foo#/foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ref+vault://secret/bar#/bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"${metadata.name}:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, the decrypted configuration can be obtained through the <code>vals</code> command-line tool</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> vals </span><span class="token builtin class-name">eval</span><span class="token plain"> -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details and use cases, please refer to <a href="https://kcl-lang.io/docs/user_docs/guides/secret-management/vault" target="_blank" rel="noopener noreferrer">here</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gitlab-ci-integration">GitLab CI Integration<a href="#gitlab-ci-integration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Using KCL, we can not only use Github Action as CI for application publishing through GitOps, but also provide GitLab CI integration in this version. Please refer to: <em><a href="https://kcl-lang.io/docs/user_docs/guides/ci-integration/gitlab-ci" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/ci-integration/gitlab-ci</a></em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-updates-and-bug-fixes">Other Updates and Bug Fixes<a href="#other-updates-and-bug-fixes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>See <a href="https://github.com/kcl-lang/kcl/compare/v0.5.0...v0.6.0" target="_blank" rel="noopener noreferrer">here</a> for more updates and bug fixes.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="documents">Documents<a href="#documents" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The versioning semantic option is added to the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a>. Currently, v0.4.x, v0.5.x and v0.6.0 versions are supported.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>Thank @jakezhu9 for his contribution to converting KCL Import tools, including Terraform Provider Schema, JsonSchema, JSON, YAML, and other configuration formats/data to KCL schema/configurations 🙌</li><li>Thank @xxmao123 for her contribution to connecting KCL LSP language server to the Idea IDE extension 🙌</li><li>Thank @starkers for his contribution to the KCL NeoVim extension 🙌</li><li>Thank @starkers for adding KCL installation support to mason.nvim registry 🙌</li><li>Thank @Ekko for his contribution to the integration of KCL cloud native tools and KCL Operator 🙌</li><li>Thank @prahalaramji for the upgrade, update, and contribution to the KCL Homebrew installation script 🙌</li><li>Thank @yyxhero for providing assistance and support in the Helmfile KCL plugin support 🙌</li><li>Thank @nkabir, @mihaigalos, @prahalaramji, @yamin-oanda, @dhhopen, @magick93, @MirKml, @kolloch, @steeling, and others for their valuable feedback and discussion during the past two months of using KCL. 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information, see <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL FAQ</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
        </item>
        <item>
            <title><![CDATA[A New Paradigm for Dynamic Configuration Management - KRM KCL Specification]]></title>
            <link>https://kcl-lang.github.io/blog/2023-09-06-dcm-using-kcl</link>
            <guid>https://kcl-lang.github.io/blog/2023-09-06-dcm-using-kcl</guid>
            <pubDate>Fri, 08 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><blockquote><p>With the development of cloud-native technologies, we are increasingly shifting towards cloud infrastructure. Tools such as Kubernetes and Terraform have become increasingly popular for managing and deploying applications based on cloud APIs. However, along with this popularity, the complexity and cognitive burden associated with these tools have reached a peak in recent years.</p></blockquote><p><img loading="lazy" alt="cognitive-loading" src="/assets/images/cognitive-loading-cd34fd0e961c6bca77ebf85ae4a7c97d.png" width="1492" height="742" class="img_ev3q"></p><p>The increasing complexity of Kubernetes and cloud APIs can be attributed to several factors:</p><ul><li><strong>Growing functionality and capabilities</strong>: Kubernetes and cloud APIs continuously evolve to meet the growing demands of applications and the development of cloud computing. To fulfill user requirements, new functionalities and capabilities such as auto-scaling, service discovery, load balancing, and permission management are constantly introduced. The introduction of these new features adds to the complexity of the system. Despite the availability of various automation methods, over time, the exponential growth in the number of different resource types, potential settings for these resource types, and the complex relationships between them pose challenges.</li><li><strong>Complex configuration and management requirements</strong>: As applications scale, configuring and managing Kubernetes and cloud APIs becomes increasingly complex. This includes managing a large number of container instances and resources, configuring intricate networking and storage setups, ensuring high availability and load balancing, and repetitive configurations for different environments and topologies. These complex configuration and management requirements contribute to the overall complexity of Kubernetes and cloud APIs, sometimes leading to the emergence of "YAML engineers" as a joking reference.</li></ul><p>Despite the increasing complexity of Kubernetes and cloud APIs, they provide powerful functionalities and flexibility to help organizations effectively manage and scale their applications. By utilizing appropriate tools, engineering practices, and methods, this complexity can be alleviated, enabling efficient utilization of these technologies to meet business needs. Dynamic configuration management techniques are one of the approaches that can help address the complexity of Kubernetes and cloud APIs to a certain extent.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-dynamic-configuration-management">What is Dynamic Configuration Management<a href="#what-is-dynamic-configuration-management" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We follow the <a href="https://humanitec.com/blog/what-is-dynamic-configuration-management" target="_blank" rel="noopener noreferrer">original definition of Dynamic Configuration Management (DCM)</a> by its creator Chris Stephenson and extend it to a certain extent.</p><blockquote><p>Dynamic Configuration Management (DCM) is an approach to constructing the configuration of computational workloads. Developers create workload specifications that describe everything necessary for the workload to run successfully. These specifications are used to dynamically generate configurations for deploying the workload in specific environments. With DCM, developers do not need to define or maintain environment-specific configurations for their workloads.</p></blockquote><p>Dynamic Configuration Management means that developers describe the relationship between their workloads and resources in an <strong>abstract</strong> and <strong>environment-agnostic</strong> manner. They describe this relationship in a format called a workload specification or application-centric specification. The specification is generic and works across environments, which means it doesn't provide enough information to configure the workloads and resources themselves. To obtain executable configurations, we need to apply the specification to configuration baselines (for application and infrastructure configurations) and generate them based on the deployment context. For developers, Dynamic Configuration Management requires providing an application-centric configuration interface that they can understand. For platform engineers, Dynamic Configuration Management can help define how to handle configuration resources and workload specifications, leading to improved consistency and compliance within the organization. It also makes it easier to provide a self-service Internal Developer Platform (IDP).</p><p>In contrast to dynamic configuration management, static configuration management brings about a series of issues:</p><ul><li><strong>Configuration Bloat</strong>: Most static configurations require separate configurations for each environment, and in the worst case, it can introduce difficult-to-debug errors involving cross-linking between environments, leading to poor stability and scalability.</li><li><strong>Configuration Drift</strong>: Managing application and infrastructure configurations for different environments with static management approaches often lacks standardized methods for handling dynamic variations in configurations across environments. Employing non-standardized approaches can result in exponential complexity and lead to configuration drift.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-do-we-need-a-new-paradigm">Why Do We Need a New Paradigm<a href="#why-do-we-need-a-new-paradigm" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Just as music is recorded on musical sheets and time-series data is stored in time-series databases, a set of configuration and policy languages is used for writing and managing scalable and complex configurations and policies in the specific problem domain of platform engineering. Unlike high-level general-purpose languages with mixed paradigms and mixed engineering capabilities, these domain-specific languages are built upon a converged, finite syntax and semantic set to tackle the near-infinite variations and complexities of the domain's problems, consolidating the mindset and approach to writing complex configurations and policies into the language's features.</p><p>For cloud APIs, we can leverage Infrastructure as Code (IaC) tools like Terraform to obtain a vast library of pre-written module configurations. However, when it comes to Kubernetes, there is still a lack of lightweight client-side configuration composition and abstraction solutions. Existing solutions or specifications struggle to strike a balance between abstraction capabilities and scalability. In extreme scenarios, developers often resort to writing glue code and scripts to handle configuration processing logic, which hinders stability and efficiency. For instance, although tools like Helm Chart provide template programming, the programming experience and efficiency are subpar. Additionally, when users need to dynamically adjust dependencies on <code>values.yaml</code> parameters in Helm Charts or encounter upstream Helm Charts that don't support the required parameter settings, they often resort to forking and maintaining the upstream Helm Charts in an intrusive manner or supplementing with tools like Kustomize, incurring additional maintenance costs and complexities.</p><p>Therefore, we contemplate the need for a unified specification that can simultaneously support configuration language capabilities and, with minimal side effects, fulfill the requirements of stability, scalability, and efficiency in the context of scalable configuration scenarios. This specification should also address the problems inherent in static configuration management.</p><ul><li><strong>Abstraction and Composition Capabilities</strong>: By providing a programmable schema, the platform personnel can shield the underlying infrastructure details and platform, while offering developers a better and more stable API abstraction.</li><li><strong>Stability</strong>: By providing stable features out-of-the-box, such as rule writing and static typing, the specification enables risk mitigation and early error detection in version control systems (VCS), allowing for auditing, traceability, and rollback, and facilitating automation.</li><li><strong>Scalability</strong>: Similar to the application software supply chain, infrastructure configuration should be treated as part of the software supply chain. Users can distribute and reuse configurations in a standardized manner, easily accessing commonly used configurations in the open-source world. For internal platforms, we can easily write and extend configuration code.</li><li><strong>High performance</strong>: Since dynamic configuration management advocates generating configurations for different environments and topologies based on a baseline configuration and deployment context, there is a high demand for the rendering performance of the configuration code itself. Developers typically do not want to spend several minutes waiting for the actual configuration output, as it would hinder software iteration and upgrade efficiency.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="krm-kcl-specification">KRM KCL Specification<a href="#krm-kcl-specification" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The <a href="https://github.com/kcl-lang/krm-kcl" target="_blank" rel="noopener noreferrer">KRM KCL specification</a> is a configuration specification based on the Kubernetes Resource Model (KRM). KRM is a universal configuration model used to describe and manage various cloud-native resources such as containers, pods, and services. It provides a unified way to define and manage these resources, enabling portability and reuse across different environments. It exists within the open Kubernetes ecosystem, decoupled from any specific orchestration/engine tools or Kubernetes controllers. It allows platform personnel to extend their abstractions, configuration editing, and validation logic, while also enabling direct reuse of existing model abstractions from the community, such as the Open Application Model (OAM), which also complies with the KRM specification.</p><p>The <a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL programming language</a> is a core component of the KRM KCL specification. KCL is a declarative configuration language that allows users to describe the configuration requirements of their applications and associate them with underlying infrastructure. KCL has a rich syntax and semantics that can flexibly describe various configuration needs, such as environment variables, resource limits, dependencies, and more. KCL aims to hide the details of infrastructure and platforms by defining API abstractions, reducing the burden, and managing large-scale configurations across teams without side effects. It provides capabilities to write, combine, and abstract configuration blocks, such as structural definitions, constraints, and logic. In platform engineering practices, KCL is not just a key-value language but a domain-specific language tailored for the platform engineering field.</p><p>Another important feature of the KRM KCL specification is its support for dynamic configuration management. Traditional configuration management tools often rely on static configuration files that require manual modifications and deployments. The KRM KCL specification naturally provides a way to automatically modify configurations, which can be used standalone on the client-side or integrated with Kubernetes through the <a href="https://github.com/kcl-lang/kcl-operator" target="_blank" rel="noopener noreferrer">KCL Operator</a> to achieve runtime configuration modifications without the need for developing Kubernetes webhooks or writing extensive configuration processing logic.</p><p>In addition to dynamic configuration management, the KRM KCL specification offers several other advantages. Firstly, it is based on Kubernetes and seamlessly integrates with the existing Kubernetes ecosystem. Secondly, the KRM KCL specification provides a rich set of tools and libraries that make it easy for developers to create, test, and maintain configurations. Lastly, the KRM KCL specification adopts open standards, allowing for interoperability with other configuration management tools such as Kubectl, Helm, Kustomize, and more. It possesses the following characteristics:</p><ul><li><strong>Declarative</strong>: Configurations are abstracted and organized in code form, allowing users to view and edit them using editors or IDEs. The code clearly describes various aspects of resources, services, networks, and more.</li><li><strong>Final-state oriented</strong>: It is abstracted and implementation-agnostic, with highly abstracted and domain-specific underlying capabilities. The concrete business logic is written by users in a declarative manner. Users can avoid manual operations and non-uniform patterns introduced by private scripts through a unified description code and GitOps workflow, reducing security risks.</li><li><strong>Stability</strong>: Any modification to configuration code can potentially result in unexpected outcomes, exceptions, or failures. By combining version control and the stability features of the language itself, different versions of configuration code can be switched as needed through Git, with audibility, to meet the needs of development, testing, and production stages. For example, rolling back to a verified version in case of anomalies. Code-based version control effectively prevents configuration drift.</li><li><strong>Reusable and extensible</strong>: Configuration code often exhibits the characteristic of "write once, reuse multiple times". When combined with dynamically parameterized configuration code, the reuse of configurations in different environments and for different users becomes simple. Through integration with standard software supply chains such as OCI, configuration code is treated equally with business code, better achieving Infrastructure as Code (IaC).</li></ul><p>In summary, the KRM KCL specification presents a new paradigm for dynamic configuration management. Built upon KRM and KCL, it offers a more efficient and reliable configuration solution for modern software development. With its dynamic configuration management capabilities, flexible syntax and semantics, and integration with Kubernetes, the KRM KCL specification provides developers with an enhanced configuration management experience in cloud-native application development and microservices architectures.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to">How to<a href="#how-to" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="krm-kcl-form" src="/assets/images/krm-kcl-form-45fbde927c717df577661f7453bf5b54.png" width="2250" height="1208" class="img_ev3q"></p><p>In the KRM KCL specification, we categorize the behaviors of the KCL configuration model into three main types:</p><ul><li><strong>Mutation</strong>: Takes input KCL parameters params and a KRM list, and outputs a modified KRM list.</li><li><strong>Validation</strong>: Takes input KCL parameters params and a KRM list, and outputs a KRM list and resource validation results.</li><li><strong>Abstraction</strong>: Takes input KCL parameters params and outputs a KRM list.</li></ul><p>Using KCL, we can programmatically achieve the following capabilities:</p><ul><li>Modify resources using KCL, such as adding/modifying label tags or annotation comments based on certain conditions, or injecting sidecar container configurations into all Kubernetes Resource Model (KRM) resources that contain PodTemplates.</li><li>Validate all KRM resources using KCL schemas, such as constraints for launching containers only in a root manner.</li><li>Generate KRM resources using an abstraction model or combine and use different KRM APIs.</li></ul><p>Additionally, the configuration model source can reference OCI, Git, filesystem, and the original KCL code. With the help of KCL IDE and KPM package management tool, we can write models and upload them to OCI Registry for model reuse. These models can be used separately on the client-side or at runtime, depending on the specific scenario requirements.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-side">Client-side<a href="#client-side" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>We will use a classic web service workload as an example to demonstrate the usage of the KRM KCL specification on the client-side.</p><p>In addition, we provide plugin support for Kubernetes community configuration management tools such as Kubectl, Helm, Kustomize, KPT, etc., in a unified programming interface. With just a few lines of configuration code, you can non-invasively edit and validate existing Kustomize YAML files, Helm Charts, define your own abstraction models, and share and reuse them.</p><p>Here, we will provide a detailed explanation using the integration of KCL with the Kubectl tool as an example. You can find the installation instructions for the Kubectl KCL plugin at <a href="https://github.com/kcl-lang/kubectl-kcl" target="_blank" rel="noopener noreferrer">here</a>.</p><p>First, execute the following command to get a sample configuration:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/kubectl-kcl.git </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> ./kubectl-kcl/examples/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then, execute the following command to show the configuration:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> krm-kcl-abstraction.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: web-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      nginx:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - containerPort: </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - port: </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source: oci://ghcr.io/kcl-lang/web-service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above configuration, we use a pre-defined Kubernetes web service application abstraction model <code>oci://ghcr.io/kcl-lang/web-service</code> on the OCI registry, and configure the required fields for that model through the <code>params</code> field. By executing the following command, you can obtain the raw Kubernetes YAML output and deploy it to the cluster:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl kcl apply -f krm-kcl-abstraction.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/app created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/app created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition to using YAML as the user input interface, KCL can be used as a DSL for writing configurations and policies. It allows developers and platform personnel to write and maintain configurations on a large scale using a unified KCL writing style on the client-side.</p><p><img loading="lazy" alt="standalone-kcl-form" src="/assets/images/standalone-kcl-form-fe25553cd2ae8413a3c33071b7bace3d.png" width="2232" height="1274" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime">Runtime<a href="#runtime" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>At runtime, we provide Kubernetes cluster integration through the KCL Operator, allowing you to generate, mutate, or validate resources based on KCL configurations using an Access Webhook when applying resources to the cluster. The webhook captures create, apply, and edit operations and executes resources on the configuration associated with each operation using the <code>KCLRun</code> resource. With the KCL Operator, you can automate resource configuration management and security validation in a lightweight manner within a Kubernetes cluster using KCL code, without the need to develop a webhook server to dynamically modify and validate configurations at runtime.</p><p>Additionally, leveraging the modeling and abstraction capabilities of KCL, we can define functional abstractions/compositions for different resource APIs and expose them in the form of KCL schemas. Moreover, KCL schemas can be further automatically generated into OpenAPI schema definitions for other clients in the cluster to call, without the need for manually maintaining complex OpenAPI schema definitions for API abstractions/compositions.</p><p>Here is an example of using the KCL Operator to modify resource annotations.</p><p>Install the KCL Operator:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kcl-lang/kcl-operator/main/config/all.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use the following command to observe and wait for the pod status to be <code>Running</code>:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Deploy the annotation mutation model:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      managed-by: kcl-operator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  source: oci://ghcr.io/kcl-lang/set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Deploy a Pod resource to validate the model result:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    image: nginx:1.14.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - containerPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po nginx -o yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can see the following output:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    managed-by: kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can observe that the Nginx Pod automatically added the annotation <code>managed-by=kcl-operator</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Dynamic configuration management can reduce the complexity of modern cloud-native configurations. With the KRM KCL specification and standard OCI models, we can achieve dynamic configuration management, allowing platform personnel and application developers to easily utilize these settings and reduce cognitive load.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>Declarative Application Management in Kubernetes: <a href="https://docs.google.com/document/d/1cLPGweVEYrVqQvBLJg6sxV-TrE5Rm2MNOBA_cxZP2WU/edit#" target="_blank" rel="noopener noreferrer">https://docs.google.com/document/d/1cLPGweVEYrVqQvBLJg6sxV-TrE5Rm2MNOBA_cxZP2WU/edit#</a></li><li>CNCF Platforms White Paper: <a href="https://tag-app-delivery.cncf.io/whitepapers/platforms/" target="_blank" rel="noopener noreferrer">https://tag-app-delivery.cncf.io/whitepapers/platforms/</a></li><li>Google SRE Workbook: <a href="https://sre.google/workbook/configuration-specifics/" target="_blank" rel="noopener noreferrer">https://sre.google/workbook/configuration-specifics/</a></li><li>What is Dynamic Configuration Management: <a href="https://humanitec.com/blog/what-is-dynamic-configuration-management" target="_blank" rel="noopener noreferrer">https://humanitec.com/blog/what-is-dynamic-configuration-management</a></li><li>Implementing Dynamic Configuration Management with Score and Humanitec: <a href="https://humanitec.com/blog/implementing-dynamic-configuration-management-with-score-and-humanitec" target="_blank" rel="noopener noreferrer">https://humanitec.com/blog/implementing-dynamic-configuration-management-with-score-and-humanitec</a></li><li>What is Platform Engineering: <a href="https://platformengineering.org/blog/what-is-platform-engineering" target="_blank" rel="noopener noreferrer">https://platformengineering.org/blog/what-is-platform-engineering</a></li><li>What is Internal Developer Platform: <a href="https://internaldeveloperplatform.org/what-is-an-internal-developer-platform/" target="_blank" rel="noopener noreferrer">https://internaldeveloperplatform.org/what-is-an-internal-developer-platform/</a></li><li>What Team Structure is Right for DevOps to Flourish: <a href="https://web.devopstopologies.com/#anti-types" target="_blank" rel="noopener noreferrer">https://web.devopstopologies.com/#anti-types</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Kubernetes Resource Model</category>
            <category>Dynamic Configuration Management</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 08.24 - 09.06) | Kubernetes Operator, IDE Extensions and v0.5.6 are out!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-09-06-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2023-09-06-biweekly-newsletter</guid>
            <pubDate>Wed, 06 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (08.10-08.23 2023). Here is an overview of the key content:</p><p><strong>🔧 Language and Toolchain Updates</strong></p><ul><li><strong>KCL Import Tool Updates</strong> - Supports exporting JSON/YAML data to KCL configuration.</li><li><strong>KCL IDE Updates</strong> - Supports right-click formatting ability, formatting individual files or parts of KCL code.</li><li><strong>KCL Documentation Tool Updates</strong> - Exported documents support HTML escape.</li><li><strong>KCL Package Management Tool KPM Updates</strong> - <code>kpm run</code> command execution and error message optimization, supports running KCL packages located in local paths.</li><li><strong>KCL Language Updates</strong> - Optimized system package type check error messages and unified error message codes.</li></ul><p><strong>📰 Official Website and Use Case Updates</strong></p><ul><li>KCL website adds v0.5.6 documentation version.</li><li>Publishing KCL packages to docker.io or ghcr.io registries using Github Actions Example: <a href="https://github.com/kcl-lang/kpm/blob/main/docs/push_by_github_action.md" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/blob/main/docs/push_by_github_action.md</a></li><li>KCL Operator example: <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/mutate-manifests/kcl-operator" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/mutate-manifests/kcl-operator</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @jakezhu9 for the contribution of converting JSON and YAML configuration data to KCL configuration in the KCL Import Tool 🙌 <a href="https://github.com/kcl-lang/kcl-go/pull/141" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/141</a></li><li>Thanks to @xxmao123 and @starkers for their contributions to the KCL NeoVim and Idea IDE extensions 🙌 <a href="https://github.com/kcl-lang/intellij-kcl/pull/12" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/intellij-kcl/pull/12</a></li><li>Thanks to @kolloch, @prahaladramji, and others for their valuable feedback and discussions during the use of KCL in the past two weeks 🙌</li></ul><p><strong>Congratulations @jakezhu9 for becoming a KCL community Maintainer 🎉</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-operator">KCL Operator<a href="#kcl-operator" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL Operator provides cluster integration, allowing you to use Access Webhook to generate, mutate, or validate resources based on KCL configuration when apply resources to the cluster. Webhook will capture creation, application, and editing operations, and execute <a href="https://github.com/kcl-lang/krm-kcl" target="_blank" rel="noopener noreferrer">KCLRun</a> on the configuration associated with each operation, and the KCL programming language can be used to</p><ul><li>Add labels or annotations based on a condition.</li><li>Inject a sidecar container in all KRM resources that contain a <code>PodTemplate</code>.</li><li>Validating all KRM resources using KCL Schema, such as constraints on starting containers only in a root mode.</li><li>Generating KRM resources using an abstract model or combining and using different KRM APIs.</li></ul><p>With KCL Operator, you can automate resource configuration management and security validation in a Kubernetes cluster using lightweight KCL code, without the need to develop a webhook server to dynamically mutate and validate configurations at runtime.</p><p>Furthermore, leveraging KCL's modeling and abstraction capabilities, we can define functionality abstractions/compositions for different resource APIs and expose them in the form of KCL Schema. We can further generate OpenAPI Schema definitions from KCL Schema for other clients in the cluster to use, without manually maintaining complex OpenAPI Schema definitions for API abstractions/compositions. Here is an example of using KCL Operator to modify resource annotations:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="0-prerequisites">0. Prerequisites<a href="#0-prerequisites" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Prepare a Kubernetes cluster like <code>k3d</code> the kubectl tool.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-install-kcl-operator">1. Install KCL Operator<a href="#1-install-kcl-operator" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kcl-lang/kcl-operator/main/config/all.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use the following command to observe and wait for the pod status to be <code>Running</code>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-deploy-kcl-annotation-setting-model">2. Deploy KCL Annotation Setting Model<a href="#2-deploy-kcl-annotation-setting-model" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  # Set dynamic parameters required for the annotation modification model, here we can add the labels we want to modify/add</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      managed-by: kcl-operator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  # Reference the annotation modification model on OCI</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  source: oci://ghcr.io/kcl-lang/set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-deploy-a-pod-to-verify-the-model-result">3. Deploy a Pod to Verify the Model Result<a href="#3-deploy-a-pod-to-verify-the-model-result" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Execute the following command to deploy a <code>Pod</code> resource:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    image: nginx:1.14.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - containerPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po nginx -o yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can see the following output:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    managed-by: kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can see that the Nginx Pod automatically added the annotation <code>managed-by=kcl-operator</code>.</p><p>In addition, besides referencing an existing model for the source field of the <code>KCLRun</code> resource, we can directly set KCL code for the source field to achieve the same effect. For example:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> set</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">operator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Resource modification can be achieved with just one line of KCL code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    items = [item | {metadata.annotations: option("params").annotations} for item in option("items")]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We have provided more than 30 built-in models, and you can find more code examples in the following link: <a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/krm-kcl/tree/main/examples</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-extension-updates">IDE Extension Updates<a href="#ide-extension-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the past two weeks, we have integrated the KCL language server LSP into NeoVim and Idea, enabling the completion, navigation, and hover features supported by VS Code IDE in NeoVim and IntelliJ IDEA.</p><ul><li>NeoVim KCL Extension</li></ul><p><img loading="lazy" alt="kcl.nvim" src="/assets/images/overview-0667184faaf2ee0abe93374de277929b.png" width="1246" height="1121" class="img_ev3q"></p><ul><li>IntelliJ Extension</li></ul><p><img loading="lazy" alt="intellij" src="/assets/images/overview-1dbf1cc2cd1bbf6b03b06702335a10ce.png" width="1041" height="650" class="img_ev3q"></p><p>For more information on downloading, installation, and features of the IDE plugins, please refer to:</p><ul><li><a href="https://kcl-lang.io/docs/user_docs/getting-started/install#neovim" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install#neovim</a></li><li><a href="https://kcl-lang.io/docs/user_docs/getting-started/install#intellij-idea" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install#intellij-idea</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community.</p><p>For more resources, please refer to</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 Roadmap</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[Congratulations to jakezhu9 for becoming a KCL Community Maintainer! KCL Import Tool Welcomes Enhanced Features!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-09-04-maintainer-jakezhu9-blog</link>
            <guid>https://kcl-lang.github.io/blog/2023-09-04-maintainer-jakezhu9-blog</guid>
            <pubDate>Mon, 04 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[News Flash]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="news-flash">News Flash<a href="#news-flash" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="jakezhu9" src="/assets/images/jakezhu9-e86a88e78b79e456fe198fd44d6ec5a1.png" width="460" height="460" class="img_ev3q"></p><p>🎉 Recently, the KCL community welcomed a new member as a Maintainer. <strong>Congratulations to jakezhu9 on successfully being promoted as a community maintainer</strong>.</p><p>We would like to express our gratitude for his numerous contributions to the KCL Go SDK and the series of enhanced features he has brought to the KCL Import Tool, providing users with a more convenient and efficient experience in importing data and schemas. Here is a list of his recent significant contributions:</p><ul><li>🔧 Support for converting JSON/YAML data to KCL configuration: <a href="https://github.com/kcl-lang/kcl-go/pull/145" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/145</a></li><li>🔧 Support for converting Terraform Provider Schema to KCL Schema: <a href="https://github.com/kcl-lang/kcl-go/pull/141" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/141</a></li><li>🔧 Support for converting JsonSchema to KCL Schema: <a href="https://github.com/kcl-lang/kcl-go/pull/127" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/127</a></li></ul><p>The addition of the new Maintainer not only signifies jakezhu9's outstanding technical performance but also reflects the community's high recognition and trust in him.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="experience">Experience<a href="#experience" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Here are jakezhu9's reflections on participating in the KCL community:</p><p>I feel incredibly fortunate to be a part of the KCL community and contribute to the development and growth of the project. From the initial introduction to the KusionStack and KCL, powerful tools and languages in the cloud-native field, to fixing a simple bug in the project, and gradually designing and developing the conversion and generation aspects of KCL, I have not only improved my technical skills but also gained valuable experience in open-source contributions. I have experienced the joy and sense of accomplishment that comes with continuous progress. Every time I see one of my submitted PRs get merged, I feel a great sense of satisfaction. I am grateful to the KCL community and all the seniors and fellow contributors I have encountered along the way who have provided me with ideas and suggestions that have been incredibly helpful during my development process.</p><p>The KCL community is an open, vibrant, and opportune open-source community where developers from different companies and schools with diverse technical backgrounds collaborate and exchange ideas on GitHub and in community meetings. Together, they explore cutting-edge technical solutions and contribute efficient and concise code to the community. Whether you are a novice or an expert in open-source, you can quickly integrate into the community and actively participate. The harmonious and friendly atmosphere in the community makes me feel incredibly welcomed. In the future, I will continue to contribute more to the KCL community, and I warmly welcome interested students to join us and participate in the construction and development of the community together!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more resources, please refer to</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 Roadmap</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Meeting</category>
        </item>
        <item>
            <title><![CDATA[KCL Introduction Platform Engineering Tech Summit 2023 Meeting]]></title>
            <link>https://kcl-lang.github.io/blog/2023-platform-engineering-tech-summit</link>
            <guid>https://kcl-lang.github.io/blog/2023-platform-engineering-tech-summit</guid>
            <pubDate>Fri, 01 Sep 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Download PDF (Chinese)]]></description>
            <content:encoded><![CDATA[<p><a href="https://kcl-lang.github.io/talks/kcl-platform-engineering-tech-summit2023.pdf" target="_blank" rel="noopener noreferrer">Download PDF (Chinese)</a></p><p><img loading="lazy" alt="KCL Talk Cover" src="/assets/images/talk-cover-72827f4a8955d903dc92815cf3ebacb4.jpg" width="2484" height="1392" class="img_ev3q"></p>]]></content:encoded>
            <category>KCL</category>
            <category>Meeting</category>
        </item>
        <item>
            <title><![CDATA[5-Minute Gameplay with Helmfile KCL Plugin for Easy Management of Kubernetes Helm Charts]]></title>
            <link>https://kcl-lang.github.io/blog/2023-08-31-helmfile-kcl-plugin</link>
            <guid>https://kcl-lang.github.io/blog/2023-08-31-helmfile-kcl-plugin</guid>
            <pubDate>Thu, 31 Aug 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[What is KCL]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-kcl">What is KCL<a href="#what-is-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-helmfile">What is Helmfile<a href="#what-is-helmfile" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Helmfile is a declarative specification and tool for simplifying and managing Helm Charts. The Helmfile KCL Plugin provides additional functionality to the Helmfile tool, making it more convenient and efficient to use. With the Helmfile KCL Plugin, you can:</p><ul><li>Edit or validate Helm Chart configurations directly on the client-side using non-intrusive hooks. This allows you to separate the data and logic parts of Kubernetes configuration management without needing to fork the upstream Chart to modify internal logic include modifying resource labels/annotations and injecting Sidecar container configurations.</li><li>Validate Kubernetes resources using KCL Schema, define your own abstract models, and share them for reusability.</li></ul><p>In this blog, we will quickly guide you through getting started with the Helmfile KCL Plugin, enabling you to easily manage your Kubernetes Helm Charts.</p><p>We will explain in detail using a simple example. With the Helmfile KCL Plugin, you do not need to install any components related to KCL. You only need the latest version of the Helmfile tool (v0.156.0+) on your local machine.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-helmfile-kcl-plugin">Using the Helmfile KCL Plugin<a href="#using-the-helmfile-kcl-plugin" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-tool-installation">1. Tool Installation<a href="#1-tool-installation" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>First, make sure you have installed the Helmfile client tool. You can follow the instructions in the documentation link below.</p><p><a href="https://github.com/helmfile/helmfile" target="_blank" rel="noopener noreferrer">https://github.com/helmfile/helmfile</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-create-the-helmfile-configuration-file">2. Create the Helmfile Configuration File<a href="#2-create-the-helmfile-configuration-file" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Create a file named helmfile.yaml in the root directory of your project and write the configuration using Helmfile syntax. In this file, you can specify the Helm Charts to use, configuration values, and any other functionality supported by Helmfile. Additionally, you can use the features of the KCL Plugin in helmfile.yaml to load configurations and make in-place modifications and validations to the Helm Chart.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">repositories</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community.github.io/helm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">releases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">norbac</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">set</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">transformers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Use KCL Plugin to mutate or validate Kubernetes manifests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"set-annotation"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">config.kubernetes.io/function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              container:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                image: docker.io/kcllang/kustomize-kcl:v0.2.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            # A single line of KCL code can be used to modify workload configurations in-place.</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            items = [resource | {if resource.kind == "Deployment": metadata.annotations: {"managed-by" = "helmfile-kcl"}} for resource in option("resource_list").items]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above configuration, we reference the Prometheus Helm Chart and use a single line of KCL code to inject the label <code>managed-by="helmfile-kcl"</code> to all the Deployment resources of Prometheus.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-run-the-helmfile-tool">3. Run the Helmfile Tool<a href="#3-run-the-helmfile-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Once everything is set up, you can run the Helmfile command to deploy, manage, and maintain your Helm Charts. Use the following command to apply the configuration mentioned above to the cluster.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helmfile apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see the following output if everything goes well:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Adding repo prometheus-community https://prometheus-community.github.io/helm-charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"prometheus-community"</span><span class="token plain"> has been added to your repositories</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="want-more">Want More?<a href="#want-more" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For the above helmfile configuration, you can encapsulate it as a reusable logic for configuration modification without constantly writing and copying/pasting KCL code. Additionally, many commonly used Kubernetes configuration editing and validation code snippets are already packaged in the KCL official Registry: <a href="https://github.com/orgs/kcl-lang/packages" target="_blank" rel="noopener noreferrer">https://github.com/orgs/kcl-lang/packages</a></p><p><img loading="lazy" alt="registry" src="/assets/images/registry-f8060f021f94e6c708d5af3f88e2e8f4.png" width="1080" height="1064" class="img_ev3q"></p><p>In addition to supporting writing KCL code in configuration files, we also support directly referencing code snippets in Registry, as shown below</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">krm.kcl.dev/version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">krm.kcl.dev/type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">documentation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Requires Ingress resources to be HTTPS only.  Ingress resources must</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      include the `kubernetes.io/ingress.allow</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">http` annotation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> set to `false`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      By default a valid TLS </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> configuration is required</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> this can be made</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      optional by setting the `tlsOptional` parameter to `true`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">More info</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//kubernetes.io/docs/concepts/services</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">networking/ingress/</span><span class="token comment" style="color:#999988;font-style:italic">#tls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Use the OCI source</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//ghcr.io/kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lang/https</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">only</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Specific example codes can be found <a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">here</a></p><p>If you want to contribute more KCL code repositories, feel free to contact us and refer to the documentation for contribution: <a href="https://kcl-lang.io/zh-CN/docs/user_docs/guides/package-management/share_your_pkg/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/zh-CN/docs/user_docs/guides/package-management/share_your_pkg/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>This blog provided a quick getting started guide to help you master the basics of the Helmfile KCL Plugin in just 5 minutes. Now, you can start using this powerful tool to simplify and optimize your Kubernetes application deployment process!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more resources, please refer to</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 Roadmap</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 08.10 - 08.23) | KCL v0.5.3, v0.5.4 and v0.5.5 are out!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-08-23-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2023-08-23-biweekly-newsletter</guid>
            <pubDate>Wed, 23 Aug 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank you to all contributors for their outstanding work over the past two weeks (08.10-08.23 2023). Here is an overview of the key content:</p><p><strong>🔧 Language and Toolchain Updates</strong></p><ul><li><strong>KCL Formatting Tool Updates</strong> - Support for formatting code snippets with syntax errors and partial code snippets and automatic correction of indentation errors in configuration blocks.</li><li><strong>KCL Documentation Tool Updates</strong> - Support for exporting document index pages</li><li><strong>KCL Import Tool Updates</strong> - Support for converting Terraform Provider Schema to KCL Schema</li><li><strong>KCL Export Tool Updates</strong> - Support for exporting OpenAPI Spec from KCL Schema, integrating with OpenAPI ecosystem</li><li><strong>KCL IDE Updates</strong> - Support for compilation cache feature to improve performance of some IDE features and providing rich error messages and import statement quick fix capabilities</li><li><strong>KCL Package Management Tool Updates</strong> - Support for output information experience optimization for the <code>kpm push</code> command and adding duplicate tag check when pushing KCL package. Adding the <code>--vendor</code> parameter for the <code>kpm push</code> and <code>kpm pkg</code> commands to determine whether to package third-party libraries in KCL packages together</li><li><strong>KCL Language Updates</strong> - Optimize Schema semantic check and union type check error messages and support for exporting type output of configuration blocks.</li></ul><p>🏄 <strong>API Updates</strong></p><ul><li>KCL Schema model parsing GetSchemaType API newly added KCL package related information and schema attribute default values.</li></ul><p><strong>📰 Official Website and Use Case Updates</strong></p><ul><li>KCL package docker.io integration example: <em><a href="https://github.com/kcl-lang/kpm/blob/main/docs/publish_to_docker_reg.md" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/blob/main/docs/publish_to_docker_reg.md</a></em></li><li>KCL Gitlab CI integration example: <em><a href="https://kcl-lang.io/docs/user_docs/guides/ci-integration/gitlab-ci" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/ci-integration/gitlab-ci</a></em></li><li>KCL Vault and Vals Integration example: <em><a href="https://kcl-lang.io/docs/user_docs/guides/secret-management/vault" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/secret-management/vault</a></em></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The following are listed in no particular order:</p><ul><li>Thanks to @jakezhu9 for the contribution of the KCL Import Tool Terraform Schema to KCL Schema conversion 🙌 <a href="https://github.com/kcl-lang/kcl-go/pull/141" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/141</a></li><li>Thanks to @xxmao123 and @starkers for the discussion and contribution of the NeoVim KCL extension 🙌 <a href="https://github.com/kcl-lang/vim-kcl/pull/2" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/vim-kcl/pull/2</a></li><li>Thanks to @starkers for adding KCL installation support to the mason.nvim registry 🙌 <a href="https://github.com/mason-org/mason-registry/pull/2425" target="_blank" rel="noopener noreferrer">https://github.com/mason-org/mason-registry/pull/2425</a></li><li>Thanks to @prahaladramji for upgrading and updating the KCL Homebrew installation script 🙌 <a href="https://github.com/kcl-lang/homebrew-tap/pull/1" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/homebrew-tap/pull/1</a></li><li>Thanks to @yamin-oanda for the discussion of Pulumi's official KCL support 🙌 <a href="https://github.com/pulumi/pulumi/discussions/13722" target="_blank" rel="noopener noreferrer">https://github.com/pulumi/pulumi/discussions/13722</a></li><li>In addition, thanks to @nkabir, @mihaigalos, @prahaladramji, @yamin-oanda, @magick93, @MirKml, and others for their valuable feedback and discussions while using KCL in the past two weeks. 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-import-tool-updates">KCL Import Tool Updates<a href="#kcl-import-tool-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The KCL Import Tool now adds support for converting Terraform Provider Schema to KCL Schema based on Protobuf, JsonSchema OpenAPI models, and Go Structures, such as the following Terraform Provider Json (obtained through the command <code>terraform providers schema -json &gt; provider.json</code> , For more details, please refer to <a href="https://developer.hashicorp.com/terraform/cli/commands/providers/schema" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/terraform/cli/commands/providers/schema</a>)</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"format_version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"provider_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"registry.terraform.io/aliyun/alicloud"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"provider"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"block_types"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"resource_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"alicloud_db_instance"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"db_instance_type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"engine"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"required"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"security_group_ids"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"set"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"security_ips"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"set"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"map"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"block_types"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"alicloud_config_rule"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"compliance"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token string" style="color:#e3116c">"list"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token property" style="color:#36acaa">"compliance_type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token property" style="color:#36acaa">"count"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"number"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">"resource_types_scope"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"list"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"data_source_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then the tool can output the following KCL code</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">This file was generated by the KCL auto-gen tool. DO NOT EDIT.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Editing this file might prove futile when you re-run the KCL auto-gen generate command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema AlicloudConfigRule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    AlicloudConfigRule</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    compliance: [ComplianceObject], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    resource_types_scope: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compliance?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ComplianceObject</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource_types_scope?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema ComplianceObject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ComplianceObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    compliance_type: str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    count: int, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compliance_type?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema AlicloudDbInstance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    AlicloudDbInstance</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db_instance_type: str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    engine: str, required</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    security_group_ids: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    security_ips: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    tags: {str:str}, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db_instance_type?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    engine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    security_group_ids?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    security_ips?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isunique</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">security_group_ids</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isunique</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">security_ips</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-vault-integration">KCL Vault Integration<a href="#kcl-vault-integration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In just three steps, we can use Vault to store and manage sensitive information and use it in KCL.</p><p>Firstly, we install and use <code>Vault</code> to store <code>foo</code> and <code>bar</code> information</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vault kv put secret/foo </span><span class="token assign-left variable" style="color:#36acaa">foo</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vault kv put secret/bar </span><span class="token assign-left variable" style="color:#36acaa">bar</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then write the following KCL code (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"secret-store"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vault"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Valid format:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#  "ref+vault://PATH/TO/KV_BACKEND#/KEY"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ref+vault://secret/foo#/foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ref+vault://secret/bar#/bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"${metadata.name}:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, the decrypted configuration can be obtained through the <code>Vals</code> command-line tool</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> vals </span><span class="token builtin class-name">eval</span><span class="token plain"> -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>For more details and use cases, please refer to <a href="https://kcl-lang.io/docs/user_docs/guides/secret-management/vault" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/secret-management/vault</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>🎉 Congratulations to Zhu Junxing from Huazhong University of Science and Technology for successfully passing the mid-term assessment of the Gitlink Coding Summer Camp (GLCC) and completing the conversion of KCL Import tool Jsonschema and Terraform Provider Schema to KCL Schema. The community will grant him the KCL Community Maintainer role in the future.</li><li>💻 KCL participated in the CNCF TAG Application Delivery community meeting and reported on the project.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community. We will write more articles on the new features of KCL v0.5.x, so stay tuned!</p><p>For more resources, please refer to</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 Roadmap</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[KCL Biweekly Newsletter (2023 07.26 - 08.09) | KCL v0.5.1 and v0.5.2 is out!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-08-09-biweekly-newsletter</link>
            <guid>https://kcl-lang.github.io/blog/2023-08-09-biweekly-newsletter</guid>
            <pubDate>Wed, 09 Aug 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="/assets/images/biweekly-newsletter-fbbce78fb9c12bfc7ceee05a0a5f8870.png" width="1141" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language that enhances the writing of complex configurations, including those for cloud-native scenarios. With its advanced programming language technology and practices, KCL is dedicated to promoting better modularity, scalability, and stability for configurations. It enables simpler logic writing and offers ease of automation APIs and integration with homegrown systems.</p><p>This section will update the KCL language community's latest developments every two weeks, including features, website updates, and the latest community news, helping everyone better understand the KCL community!</p><p><strong><em>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In the past two weeks (2023 07.26 to 08.09), a total of 34 PRs were merged in all KCL projects. Thanks to all contributors for their outstanding work. The following is a summary of the merged PRs.</p><ul><li><strong>🔧 Language and toolchain updates</strong><ul><li>KCL document tool update - Markdown document export support</li><li>KCL import tool update - JsonSchema - KCL schema conversion support</li><li>KCL package management tool KPM supports setting compilation parameters in kcl.mod, optimizing command line prompts</li><li>KCL IDE extension autocomplete, jump, hover document display optimization and Vim and NeoVim KCL plugin support</li></ul></li><li><strong>🏄 API updates</strong><ul><li>KCL Schema model parsing GetSchemaType API newly added decorator information and package information fields</li></ul></li><li><strong>🏠 Community extension updates</strong><ul><li>Helmfile KCL plugin support</li></ul></li><li><strong>📰 Website and case updates</strong><ul><li>KCL website adds v0.5.x document version selection</li><li>Add KCL use case repository: <a href="https://github.com/kcl-lang/examples" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/examples</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-thanks">Special Thanks<a href="#special-thanks" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>Thanks to @jakezhu9 for contributing to the conversion of JsonSchema to KCL Schema in the KCL Import tool 🙌</li><li>Thanks to @xxmao123 for contributing to Vim and NeoVim KCL plugins 🙌</li><li>Thanks to @yyxhero for the help and support provided in Helmfile KCL plugin support 🙌</li><li>Thanks to @nkabir, @mihaigalos, @prahaladramji, @dhhopen, etc. for their valuable suggestions and discussions on using KCL 🙌</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="featured-updates">Featured Updates<a href="#featured-updates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-import-tool-update">KCL Import Tool Update<a href="#kcl-import-tool-update" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>On the basis of converting Protobuf, OpenAPI models, and Go structures into KCL Schema, the KCL Import tool adds support for converting JsonSchema to KCL Schema. For example, for the following JsonSchema:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"http://json-schema.org/draft-07/schema#"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"$id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"https://example.com/schemas/customer.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"$defs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"address"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"city"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"state"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"$ref"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"#/$defs/state"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"state"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"address"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"$ref"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"#/$defs/address"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After using the KCL Import tool, the output KCL code is as follows:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema&nbsp;Customer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Customer</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;str,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;address:&nbsp;Address,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;name?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;address?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;Address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema&nbsp;Address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Address</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;city:&nbsp;str,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;state:&nbsp;State,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;city?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;state?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema&nbsp;State</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;State</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;str,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;name?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token builtin">str</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="helmfile-kcl-plugin">Helmfile KCL Plugin<a href="#helmfile-kcl-plugin" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Helmfile is a declarative specification and tool for deploying Helm Charts. With the Helmfile KCL plugin, you can:</p><ul><li>Edit or verify Helm Chart through non-invasive hook methods, separating the data and logic parts of Kubernetes configuration management<ul><li>Modify resource labels/annotations, inject sidecar container configuration</li><li>Use KCL schema to validate resources</li><li>Define your own abstract application models</li></ul></li><li>Maintain multiple environment and tenant configurations elegantly, rather than simply copying and pasting.</li></ul><p>Here is a detailed explanation using a simple example. With the Helmfile KCL plugin, you do not need to install any components related to KCL. You only need the latest version of the Helmfile tool on your local device.</p><p>We can write a <code>helmfile.yaml</code> file as follows:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">repositories</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community.github.io/helm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">releases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">norbac</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;set</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;rbac.create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;transformers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token comment" style="color:#999988;font-style:italic">#&nbsp;Use&nbsp;KCL&nbsp;Plugin&nbsp;to&nbsp;mutate&nbsp;or&nbsp;validate&nbsp;Kubernetes&nbsp;manifests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"set-annotation"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config.kubernetes.io/function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;docker.io/kcllang/kustomize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v0.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">resource&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">if&nbsp;resource.kind&nbsp;==&nbsp;"Deployment"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;metadata.annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">"managed</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">by"&nbsp;=&nbsp;"helmfile</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&nbsp;for&nbsp;resource&nbsp;in&nbsp;option("resource_list").items</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above file, we referenced the Prometheus Helm Chart and injected the <code>managed-by="helmfile-kcl"</code> label into all deployment resources of Prometheus with just one line of KCL code. The following command can be used to deploy the above configuration to the Kubernetes cluster:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helmfile&nbsp;apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more use cases, please refer to <a href="https://github.com/kcl-lang/krm-kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/krm-kcl</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>❤️ Thanks to all KCL users and community members for their valuable feedback and suggestions in the community. We will write more articles on the new features of KCL v0.5.x, so stay tuned!</p><p>For more resources, please refer to</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack Website</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 Roadmap</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/releases/tag/v0.5.0" target="_blank" rel="noopener noreferrer">KCL v0.5.0 Release</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/releases/tag/v0.5.1" target="_blank" rel="noopener noreferrer">KCL v0.5.1 Release</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/releases/tag/v0.5.2" target="_blank" rel="noopener noreferrer">KCL v0.5.2&nbsp;Release</a></p></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Biweekly-Newsletter</category>
        </item>
        <item>
            <title><![CDATA[Implementing GitOps using Github, Argo CD, and KCL to Simplify DevOps]]></title>
            <link>https://kcl-lang.github.io/blog/2023-07-31-kcl-github-argocd-gitops</link>
            <guid>https://kcl-lang.github.io/blog/2023-07-31-kcl-github-argocd-gitops</guid>
            <pubDate>Mon, 31 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In modern software development, GitOps, as a single truth automation method for managing infrastructure and applications, plays a key role in improving efficiency and reducing Human error, and is now widely popular in cloud-native and other fields. However, there are not many practical examples related to GitOps. This blog will use KCL, Github and ArgoCD as examples to introduce GitOps in detail, hoping to help everyone practice their own GitOps automation process and simplify DevOps.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-gitops">What is GitOps<a href="#what-is-gitops" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>GitOps is a modern way to do continuous delivery. Its core idea is to have a Git repository which contains environmental and application configurations. An automated process is also needed for sync the config to cluster.</p><p>By changing the files in repository, developers can apply the applications automatically. The benefits of applying GitOps include:</p><ul><li>Increased productivity. Continuous delivery can speed up the time of deployment.</li><li>Lower the barrier for developer to deploy. By pushing code instead of container configuration, developers can easily deploy Kubernetes without knowing its internal implementation.</li><li>Trace the change records. Managing the cluster with Git makes every change traceable, enhancing the audit trail.</li><li>Recover the cluster with Git's rollback and branch.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gitops-with-kcl">GitOps with KCL<a href="#gitops-with-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Benefits of Using KCL and ArgoCD Together:</p><ul><li>KCL can help us <strong>simplify complex Kubernetes deployment configuration files</strong>, reduce the error rate of manually writing YAML files, control configuration constraint checking during compilation, and perceive errors immediately upon writing; At the same time, KCL can be used to eliminate redundant configuration templates, enhance the scalability of multi-environment and multi-tenant configurations, and improve the readability and maintainability of configurations.</li><li>ArgoCD can <strong>automate</strong> the deployment of Kubernetes applications, achieve continuous deployment, and provide comprehensive monitoring and control functions.</li><li>By combining KCL and ArgoCD, deployment efficiency can be improved, errors reduced, and management and monitoring of Kubernetes applications strengthened.</li><li>The combination of KCL and ArgoCD can also help us achieve <strong>Infrastructure as Code (IaC)</strong>, simplify application deployment and management, and better implement DevOps principles.</li></ul><p>With GitOps, developer and operation teams can manage application deployment and configuration by modifying KCL code and generating YAML files. The GitOps toolchain will automatically synchronize the changes to the Kubernetes cluster, enabling continuous deployment and ensuring consistency. If there are issues, the GitOps toolchain can be used to quickly rollback.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow">Workflow<a href="#workflow" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We hope to implement the end-to-end application development process by using containers, Continuous Integration (CI) for generation, and GitOps for Continuous Deployment (CD). In this scheme, we use a <strong>Flask application</strong> and <strong>Github Actions</strong> as examples.</p><blockquote><p>Note: You can use any containerized application and different CI systems such as <strong>Gitlab CI</strong>, <strong>Jenkins CI</strong>, etc. in this solution.</p></blockquote><p>We divide the Python Flask application code and configuration code into two repos, <em>to achieve the separation of concerns of different roles, such as developers and operation and maintenance teams</em></p><ul><li>App code repo: <a href="https://github.com/kcl-lang/flask-demo" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/flask-demo</a></li><li>Config manifest repo: <a href="https://github.com/kcl-lang/flask-demo-kcl-manifests" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/flask-demo-kcl-manifests</a></li></ul><p>The overall workflow is as follows:</p><p><img loading="lazy" alt="workflow" src="/assets/images/workflow-4707133c144cbe28bfea3f5a1563bd4c.jpg" width="1048" height="624" class="img_ev3q"></p><ol><li>Pull application code from Github.</li><li>Develop and submit application code to the GitHub repository.</li><li>Trigger GitHub Actions to compile the application code, generate container images, and push the container images to the Docker Hub container registry.</li><li>Trigger GitHub Actions to synchronously update the Kubernetes manifest files defined by KCL based on the version of the container image in the <code>docker.io</code> container registry.</li><li>ArgoCD obtains Kubernetes manifest changes and updates deployment to Kubernetes cluster.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="steps">Steps<a href="#steps" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="0-prerequisite">0. Prerequisite<a href="#0-prerequisite" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Familiar with the basic commands of Unix/Linux</li><li>Familiar with Git and Github Action</li><li>Understand the basics of Kubernetes</li><li>Understand tools such as ArgoCD</li><li>Understand the basic knowledge of KCL</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-setup-kubernetes-cluster">1. Setup Kubernetes Cluster<a href="#1-setup-kubernetes-cluster" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>Install <a href="https://github.com/k3d-io/k3d" target="_blank" rel="noopener noreferrer">K3d</a> to create a default cluster.</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">k3d cluster create mycluster</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: You can use other methods in this solution to create your own Kubernetes cluster, such as <code>kind</code>, <code>minikube</code>, etc.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-setup-argocd">2. Setup ArgoCD<a href="#2-setup-argocd" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="setup-argocd-controllers">Setup ArgoCD Controllers<a href="#setup-argocd-controllers" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>Install <a href="https://github.com/argoproj/argo-cd/releases/" target="_blank" rel="noopener noreferrer">ArgoCD</a>.</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create namespace argocd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Enable ArgoCD KCL Plugin</li></ul><p>Write the patch YAML configuration file and update the ArgoCD configuration:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/kcl-lang.io.git/ </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> ./kcl-lang.io/examples/gitops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f ./install/kcl-cmp.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After completing the first step, ArgoCD will recognize the KCL plugin, but the KCL plugin has not been loaded into the ArgoCD image. To implement configuration drift detection, we have to tune the Deployment of argocd-repo-server.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n argocd patch deploy/argocd-repo-server -p </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">cat</span><span class="token string variable" style="color:#36acaa"> ./install/patch-argocd-repo-server.yaml</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Wait for the init container to complete execution (Running).</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pod -n argocd -l app.kubernetes.io/name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">argocd-repo-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>To access the ArgoCD web UI</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl port-forward svc/argocd-server -n argocd </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">:443</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>Open a browser and go to: <code>https://localhost:8080</code></p></li><li><p>The username is "admin" and password get be obtained from the following command:</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n argocd get secret argocd-initial-admin-secret -o </span><span class="token assign-left variable" style="color:#36acaa">jsonpath</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"{.data.password}"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> base64 -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="setup-argocd-cli">Setup ArgoCD CLI<a href="#setup-argocd-cli" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>Install <a href="https://github.com/argoproj/argo-cd/releases" target="_blank" rel="noopener noreferrer">ArgoCD CLI</a></li></ul><p>Use "admin" and password to login to ArgoCD</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">argocd login localhost:8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create ArgoCD Application</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">argocd app create flaskdemo </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--repo https://github.com/kcl-lang/flask-demo-kcl-manifests </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--path </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--dest-namespace default </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--dest-server https://kubernetes.default.svc </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--config-management-plugin kcl-v1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After successfully creating, you can see the following output:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">application </span><span class="token string" style="color:#e3116c">'flaskdemo'</span><span class="token plain"> created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>If you are using a private repository, you need to configure the private repository access with private key credentials before executing the create command.Please refer <a href="https://argo-cd.readthedocs.io/en/stable/user-guide/private-repositories/#ssh-private-key-credential" target="_blank" rel="noopener noreferrer">Private Repositories</a> for more details.</p></blockquote><p>Through the ArgoCD UI, you can see that the created applications have not been synchronized yet. Here, you can manually synchronize or set automatic synchronization.</p><p><img loading="lazy" src="/assets/images/argocd-kcl-app-3eda0ee903240a2371c45cd384c14653.jpg" width="2128" height="1008" class="img_ev3q"></p><p>For more information on synchronization strategies, see <a href="https://argo-cd.readthedocs.io/en/stable/user-guide/sync-options/" target="_blank" rel="noopener noreferrer">Sync Options</a></p><p><img loading="lazy" src="/assets/images/argocd-kcl-app-dashboard-82ae80d5dbb9da2eeb3e8f3efe867c01.jpg" width="3328" height="1132" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-get-the-application-code">3. Get the Application Code<a href="#3-get-the-application-code" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/flask-demo.git/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> flask-demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is a web application written in Python. We can use the <code>Dockerfile</code> in the application directory to generate a container image of this application, and also use Github CI to automatically build a image named <code>flask_demo</code>, the CI configuration is as follows</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># This is a basic workflow to help you get started with Actions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Controls when the workflow will run</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Triggers the workflow on push or pull request events but only for the main branch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">main</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">main</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Allows you to run this workflow manually from the Actions tab</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">workflow_dispatch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># This workflow contains a single job called "build"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># The type of runner that the job will run on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Steps represent a sequence of tasks that will be executed as part of the job</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Docker Login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/login</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@v1.10.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DOCKER_USERNAME </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DOCKER_PASSWORD </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">logout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Runs a set of commands using the runners shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          make image</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          docker tag flask_demo:latest ${{ secrets.DOCKER_USERNAME }}/flask_demo:${{ github.sha }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          docker push ${{ secrets.DOCKER_USERNAME }}/flask_demo:${{ github.sha }}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Trigger KCL manifest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Trigger CI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InformaticsMatters/trigger</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ci</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@1.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-repository</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> refs/heads/main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-user-token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DEPLOY_ACCESS_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-inputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DOCKER_USERNAME </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sha</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tag=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.sha </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We need the workflow in the source code repository to automatically trigger the workflow in the deployment manifest repository. At this point, we need to create a <code>secrets.DEPLOY_ACCESS_TOKEN</code> with Github CI operation permissions and <strong>Docker Hub</strong> image push account information <code>secrets.DOCKER_USERNAME</code> and <code>secrets.DOCKER_PASSWORD</code> can be configured in the <code>Secrets and variables</code> settings of the Github, as shown in the following figure</p><p><img loading="lazy" src="/assets/images/github-secrets-997c2a5201a5ae259e3310d6015d1f9e.png" width="2204" height="632" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-commit-the-application-code">4. Commit the Application Code<a href="#4-commit-the-application-code" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>After submitting in the <code>flask-demo</code> repository, Github will automatically build a container image and push it to the Docker hub. It will also then trigger the Action of the <code>flask-demo-kcl-manifest</code> repository and modify the image value in the deployment manifest repository through <a href="/docs/user_docs/guides/automation">KCL Automation API</a>. Now let's create a submission in the <code>flask-demo</code> repository, and we can see that the code submission triggers the Github CI process for the application repository.</p><p><img loading="lazy" src="/assets/images/app-ci-8be610b01c177f72ff2f2f617b7305bd.png" width="2252" height="1038" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-configuration-automatic-update">5. Configuration Automatic Update<a href="#5-configuration-automatic-update" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>After the Github CI process in the application repository is completed, an automatic update configuration CI will be triggered in the repository where the KCL configuration is stored and submitted to the main branch of the <code>flask-demo-kcl-manifests</code> repository. The commit information is as follows</p><p><img loading="lazy" src="/assets/images/image-auto-update-514f27b74172b114a5dc877e98fd88f4.png" width="2240" height="1090" class="img_ev3q"></p><ul><li>We can obtain the deployment manifest source code for compilation and validation</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/flask-demo-kcl-manifests.git/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> flask-demo-kcl-manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout main </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kcl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output YAML is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcllang/flask_demo:6428cff4309afc8c1c40ad180bb9cfd82546be3e"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From the above configuration, it can be seen that the image of the resource is indeed automatically updated to the newly constructed image value. In addition, we can also use the <strong>Argo CD KCL plugin</strong> to automatically synchronize data from the Git repository and deploy the application to the Kubernetes cluster.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Through the blog, we can use Github, ArgoCD, and KCL to create GitOps automated pipelines, which can efficiently and stably build containerized applications, while automatically updating the latest Dbroker image labels and keeping Git configuration consistent with cluster configuration. In addition, the combination of KCL and ArgoCD can help us better realize Infrastructure as Code (IaC), improve deployment efficiency, achieve the separation of concerns of different roles, and simplify the configuration management of applications.</p>]]></content:encoded>
            <category>KCL</category>
            <category>Github</category>
            <category>ArgoCD</category>
            <category>GitOps</category>
        </item>
        <item>
            <title><![CDATA[KCL Introduction Slides]]></title>
            <link>https://kcl-lang.github.io/blog/2023-07-18-kcl-intro-slides</link>
            <guid>https://kcl-lang.github.io/blog/2023-07-18-kcl-intro-slides</guid>
            <pubDate>Tue, 18 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Download PDF]]></description>
            <content:encoded><![CDATA[<p><a href="https://kcl-lang.github.io/talks/kcl-intro.pdf" target="_blank" rel="noopener noreferrer">Download PDF</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.5.0 Release Blog]]></title>
            <link>https://kcl-lang.github.io/blog/2022-kcl-0.5.0-release-blog</link>
            <guid>https://kcl-lang.github.io/blog/2022-kcl-0.5.0-release-blog</guid>
            <pubDate>Fri, 14 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL team is pleased to announce that KCL v0.5.0 is now available! This release has brought three key updates to everyone: <strong>Language</strong>, <strong>Tools</strong>, and <strong>Integrations</strong>.</p><ul><li><em>Use KCL language and IDE with more complete features and fewer errors to improve code writing experience and efficiency.</em></li><li><em>Use KPM, KCL OpenAPI, OCI Registry and other tools to directly use and share your cloud native domain models, reducing learning and hands-on costs.</em></li><li><em>Using community tools such as Github Action, ArgoCD, and Kubectl KCL plugins to integrate and extend support to improve automation efficiency.</em></li></ul><p>You can visit the <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.5.0" target="_blank" rel="noopener noreferrer">KCL release page</a> or the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a> to get KCL binary download link and more detailed release information.</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language. KCL improves the writing of numerous complex configurations, such as cloud-native scenarios, through its mature programming language technology and practice. It is dedicated to building better modularity, scalability, and stability around configurations, simpler logic writing, faster automation, and great built-in or API-driven integrations.</p><p>This blog will introduce the content of KCL v0.5.0 and recent developments in the KCL community to readers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="language">Language<a href="#language" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="top-level-variable-output">Top-level Variable Output<a href="#top-level-variable-output" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous versions of KCL, running the following KCL code will not output YAML. In KCL v0.5.0, we improved this and supported exporting top-level variables to YAML configuration to reduce additional KCL code and command-line parameters, such as for the following KCL code (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nginx </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Nginx will be output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listen </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        location </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            root </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/var/www/html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"index.html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the new version, running KCL code can directly obtain the following output</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">listen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">root</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /var/www/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> index.html</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="https://github.com/kcl-lang/kcl/pull/556" target="_blank" rel="noopener noreferrer">here</a> for more.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="index-signature">Index Signature<a href="#index-signature" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous versions of KCL, running the KCL command-line tool once only displayed one error message and warning. In KCL v0.5.0, it supported the ability to display multiple errors and warnings in one compilation and improved error information to improve the efficiency of KCL code error troubleshooting, such as for the following KCL code (main.k).</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema TeamSpec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fullName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shortName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema TeamMap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TeamSpec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TeamSpec </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n  </span><span class="token comment" style="color:#999988;font-style:italic"># n is the schema index signature key alias, we can use it directly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">teamMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TeamMap </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fullName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"alpha"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fullName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bravo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the new version, running KCL code can directly obtain the following output.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">teamMap:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  b:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fullName: bravo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shortName: b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fullName: alpha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shortName: a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="https://github.com/kcl-lang/kcl/pull/582" target="_blank" rel="noopener noreferrer">here</a> for more.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-backtrace-output">Runtime Backtrace Output<a href="#runtime-backtrace-output" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous versions of KCL, when writing the following KCL code, the two schema configurations with the same name were merged and output. In KCL v0.5.0, it was required to explicitly use the attribute merge operator instead of the attribute overlay operator.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Fib</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    n1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    n2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n1 </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    n</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># There is a index overflow runtime error.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Fib </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> Fib </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fib8 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Fib </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After execution, we will receive the following error message</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k -d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">E3M38</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: EvaluationError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EvaluationError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> main.k:8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># There is a index overflow runtime error.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  list index out of range: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note: backtrace:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">: __main__.Fib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                at main.k:8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">: __main__.Fib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                at main.k:12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: __main__.Fib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                at main.k:12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">: main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                at main.k:14</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="https://github.com/kcl-lang/kcl/pull/528" target="_blank" rel="noopener noreferrer">here</a> for more.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bugfix">Bugfix<a href="#bugfix" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-error-in-filter-expressions">Type Error in Filter Expressions<a href="#type-error-in-filter-expressions" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Before KCL v0.5.0, filter expressions returned incorrect types (should return the type of the iterator instead of the type of the iterated object). In KCL v0.5.0, we fixed similar issues.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Student</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grade</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">students</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Alice"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grade </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">85</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Bob"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grade </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">70</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">studentsGrade70</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">filter</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> students </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">grade </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">70</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Previously, we received a type mismatch error here. In KCL v0.5.0, we fixed similar issues.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="https://github.com/kcl-lang/kcl/pull/546" target="_blank" rel="noopener noreferrer">here</a> for more.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lambda-closure-error">Lambda Closure Error<a href="#lambda-closure-error" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In previous versions of KCL, for the following KCL code, there was an error where the <code>versions</code> attribute was not assigned as expected. In KCL v0.5.0, we fixed similar issues.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">z </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> y </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> y </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># `x` is the closure of the inner lambda.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="https://github.com/kcl-lang/kcl/pull/548" target="_blank" rel="noopener noreferrer">here</a> for more.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="string-literal-union-type-error-containing-utf-8-characters">String Literal Union Type Error Containing UTF-8 Characters<a href="#string-literal-union-type-error-containing-utf-8-characters" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In previous versions of KCL, using string literal union type that contains UTF-8 characters resulted in an unexpected type error. In KCL v0.5.0 version, we fixed similar issues like this.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"无需容灾"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"标准型"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"流水型"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"流水型"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="https://github.com/kcl-lang/kcl/pull/600" target="_blank" rel="noopener noreferrer">here</a> for more.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tools--ide">Tools &amp; IDE<a href="#tools--ide" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-openapi-tool">KCL OpenAPI Tool<a href="#kcl-openapi-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The kcl-openapi command-line tool supports conversion from OpenAPI Spec to KCL code. Installation can be obtained through <code>go install</code> or <code>curl</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># go install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kcl-lang.io/kcl-openapi@latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># curl install (MacOS &amp; Linux)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://kcl-lang.io/script/install-kcl-openapi.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-kcl-package-conversion-optimization">Kubernetes KCL Package Conversion Optimization<a href="#kubernetes-kcl-package-conversion-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>The v0.5.0 version optimizes the experience of using Kubernetes KCL packages:</p><ul><li>Built-in Kubernetes package: KCL provides out of the box KCL packages for Kubernetes 1.14-1.27 versions, which can be obtained through the package management tool <code>kpm pull k8s:&lt;version&gt;</code>.</li><li>If you need to convert other Kubernetes versions of the KCL model on your own, you can use the following preprocessing script to convert the <code>swagger.json</code> file downloaded from the Kubernetes repository into the KCL package. Change 1.27 of the following command to the desired Kubernetes version.</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">version</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1.27</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">spec_path</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">swagger.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">script_path</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">main.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://raw.githubusercontent.com/kubernetes/kubernetes/release-</span><span class="token variable" style="color:#36acaa">${version}</span><span class="token plain">/api/openapi-spec/swagger.json -O swagger.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://raw.githubusercontent.com/kcl-lang/kcl-openapi/main/scripts/preprocess/main.py -O main.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 </span><span class="token variable" style="color:#36acaa">${script_path}</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${spec_path}</span><span class="token plain"> --omit-status --rename</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">io.k8s</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kcl-openapi generate model -f processed-</span><span class="token variable" style="color:#36acaa">${spec_path}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The expected execution output of the script is the corresponding version of the KCL Kubernetes model, and the generated path is <code>&lt;workspace path&gt;/models/k8s</code>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ tree models/k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── admissionregistration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── match_condition.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── mutating_webhook.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── mutating_webhook_configuration.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── mutating_webhook_configuration_list.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── rule_with_operations.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── service_reference.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   │   ├── validating_webhook.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bugfix-1">Bugfix<a href="#bugfix-1" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>Escape attribute names with the <code>-</code> character as <code>_</code> to comply with KCL v0.5.0 syntax, <a href="https://github.com/kcl-lang/kcl-openapi/pull/43" target="_blank" rel="noopener noreferrer">see details</a></li><li>Automatically recognize and set import as reference aliases to avoid reference conflicts, <a href="https://github.com/kcl-lang/kcl-openapi/pull/45" target="_blank" rel="noopener noreferrer">see details</a></li><li>Fix the issue of attribute description indentation in docstring, and automatically indent the internal line breaks of attribute descriptions. <a href="https://github.com/kcl-lang/kcl-openapi/pull/46" target="_blank" rel="noopener noreferrer">See details</a></li><li>Fix the generated reference path to be the full reference path based on the root directory of the package, <a href="https://github.com/kcl-lang/kcl-openapi/pull/51" target="_blank" rel="noopener noreferrer">see details</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="package-management-tool">Package Management Tool<a href="#package-management-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the new version of KCL v0.5.0, we have provided a new KCL package management tool, which allows users to access the KCL modules in the community with a few commands.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="managing-kcl-programs-through-the-kpm-tool">Managing KCL Programs through the kpm Tool<a href="#managing-kcl-programs-through-the-kpm-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Before using kpm, it is necessary to ensure that you are currently working in a KCL package. You can use the command kpm init to create a standard KCL package.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm init kubernetes_demo </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> kubernetes_demo </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kpm </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> k8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Write a KCL code to import the Kubernetes models (main.k).</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx-deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By combining the <code>kpm run</code> and <code>kubectl</code> command lines, we can directly distribute resource configurations to the cluster.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kpm run </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> kubectl apply -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/nginx-deployment configured</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="oci-registry">OCI Registry<a href="#oci-registry" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>The kpm tool supports pushing KCL packages through OCI Registry. The default OCI Registry currently provided by kpm is <a href="https://github.com/orgs/kcl-lang/packages" target="_blank" rel="noopener noreferrer">https://github.com/orgs/kcl-lang/packages</a>.</p><p>You can browse the KCL package you need here. We currently provide the KCL package for k8s, which supports all versions of k8s from 1.14 to 1.27. Welcome to open <a href="https://github.com/kcl-lang/kpm/issues" target="_blank" rel="noopener noreferrer">Issues</a> to co build KCL models.</p><p>See <a href="https://kcl-lang.io/docs/user_docs/guides/package-management/overview" target="_blank" rel="noopener noreferrer">here</a> for more information about the <strong>kpm</strong> tool.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="integrations">Integrations<a href="#integrations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-integrations">CI Integrations<a href="#ci-integrations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the new version of KCL, we have provided an example scheme of <strong>Github Actions as the CI integration</strong>. We hope to implement the end-to-end application development process by using containers, Continuous Integration (CI) for configuration generation, and GitOps for Continuous Deployment (CD). The overall workflow is as follows:</p><ul><li>Develop application code and submit it to the GitHub repository to trigger CI (using Python Flask web application as an example).</li></ul><p><img loading="lazy" alt="app" src="/assets/images/app-9b58ce8fdae4fc93fb73e51f1507a42c.png" width="1080" height="492" class="img_ev3q"></p><ul><li>GitHub Actions generate container images from application code and push them to the <code>docker.io</code> container registry.</li></ul><p><img loading="lazy" alt="app-ci" src="/assets/images/app-ci-94594b17db9b52918933ac683a5baa24.png" width="1080" height="498" class="img_ev3q"></p><ul><li>GitHub Actions automatically synchronizes and updates the KCL manifest deployment file based on the version of the container image in the docker.io container registry.</li></ul><p><img loading="lazy" alt="auto-update" src="/assets/images/auto-update-bf4b3f79c897171c238e83441fa8fa86.png" width="1080" height="526" class="img_ev3q"></p><p>We can obtain the deployment manifest source code for compilation and verification, and the following YAML output will be obtained</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcllang/flask_demo:6428cff4309afc8c1c40ad180bb9cfd82546be3e"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From the above configuration, it can be seen that the image of the resource is indeed automatically updated to the newly constructed image content. In addition, we can also use the Argo CD KCL plugin to automatically synchronize data from the Git repository and deploy the application to the Kubernetes cluster.</p><p>For more details, please refer to <a href="https://kcl-lang.io/docs/user_docs/guides/ci-integration/github-actions" target="_blank" rel="noopener noreferrer">here</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cd-integrations">CD Integrations<a href="#cd-integrations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In addition, we also provide <strong>ArgoCD as an example solution for CD integration</strong>. Through Github Action CI integration and ArgoCD KCL plugin, we can complete end-to-end GitOps workflow, improve application configuration automatic change and deployment efficiency. The following is an overview and synchronization of Kubernetes configuration using ArgoCD application. By using ArgoCD's ability, when application code changes, it is automatically updated and deployed synchronously.</p><ul><li><strong>Application Overview</strong></li></ul><p><img loading="lazy" alt="argocd-app" src="/assets/images/argocd-app-e33be631832e8adb5aac927f4e407324.png" width="1080" height="512" class="img_ev3q"></p><ul><li><strong>Configuration Synchronization</strong></li></ul><p><img loading="lazy" alt="argocd-sync" src="/assets/images/argocd-sync-7e3a1c0e61a74d6ded86e27558a594c5.png" width="1080" height="367" class="img_ev3q"></p><p>For more details, please refer to <a href="https://kcl-lang.io/docs/user_docs/guides/gitops/gitops-quick-start" target="_blank" rel="noopener noreferrer">here</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-configuration-management-tool-plugin">Kubernetes Configuration Management Tool Plugin<a href="#kubernetes-configuration-management-tool-plugin" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In KCL v0.5.0, we provide KCL plugin support for configuration management tools such as Kubectl, Helm, Kustomize, and KPT in the Kubernetes community through a unified programming interface. By writing a few lines of configuration code, we can non-invasive edit and validate existing Kustomize YAML and Helm Charts, such as modifying resource labels/annotations, injecting sidecar containers, and validate resources using KCL schema, defining your own abstract models and share them, etc.</p><p>Below is a detailed explanation of the integration of Kubectl tool with KCL as an example. You can click <a href="https://github.com/kcl-lang/kubectl-kcl" target="_blank" rel="noopener noreferrer">here</a> to obtain the installation of Kubectl KCL plugin.</p><p>First, execute the following command to obtain a configuration example</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/kubectl-kcl.git </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> ./kubectl-kcl/examples/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then execute the following command to show the configuration</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> krm-kcl-abstration.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: web-service-abtraction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      nginx:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - containerPort: </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - port: </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source: oci://ghcr.io/kcl-lang/web-service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above configuration, we used a Kubernetes web service application abstract model that has been predetermined on OCI <code>oci://ghcr.io/kcl-lang/web-service</code> and configured the required configuration fields for the model through the <code>params</code> field. The original Kubernetes YAML output can be obtained and applied by executing the following command:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl kcl apply -f krm-kcl-abstration.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/app created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/app created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>More detailed introductions and use cases of Kubernetes configuration management tools can be found <a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">here</a></p><p>At present, the integration of Kubernetes configuration management tools supported by KCL is still in its early stages. If you have more ideas and requirements, welcome to open issues to discuss.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-updates-and-bug-fixes">Other Updates and Bug Fixes<a href="#other-updates-and-bug-fixes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>See <a href="https://github.com/kcl-lang/kcl/compare/v0.4.6...v0.5.0" target="_blank" rel="noopener noreferrer">here</a> for more updates and bug fixes.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="documents">Documents<a href="#documents" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The versioning semantic option is added to the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a>. Currently, v0.4.3, v0.4.4, v0.4.5, v0.4.6 and v0.5.0 versions are supported.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>Thank @harri2012 for his first contribution to the KCL IDE plugin 🙌</li><li>Thank @niconical for his contribution to the KCL command line basic code and CI/CD scripts 🙌</li><li>Thank @Ekko for his contribution to the integration of KCL cloud native tools 🙌</li><li>Congratulations to Junxing Zhu his successful selection into the GitLink Programming Summer Camp (GLCC) "Terraform/JsonSchema to KCL Schema" project 🎉</li><li>Congratulations to Yiming Ren on her successful selection of the topic "IDE plug-in enhancement and language server integration" in the summer of open source 🎉</li><li>We have relocated KCL 30+ repos as a whole to the new Github <strong>kcl-lang</strong> organization, keeping the project address in mind <a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang</a> ❤️</li><li>KCL's joining CNCF Landscape is a small encouragement and recognition from the cloud native community. The next step is to strive to join CNCF Sandbox and make more contributions to the cloud native community 💪</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next">Next<a href="#next" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>It is expected that in September 2023, we will release <strong>KCL v0.6.0</strong>. The expected key evolution includes:</p><ul><li>KCL language is further improved for convenience, the user interface is continuously optimized and experience is improved, user support and pain points are solved.</li><li>More IDE extensions, package management tools, Kubernetes scenario integration, feature support, and user experience improvement.</li><li>Provide more out-of-box KCL model support for cloud-native scenarios, mainly including containers, services, computing, storage, and networks.</li><li>More CI/CD integrations such as Jenkins, Gitlab CI, FluxCD, etc.</li><li>Support <code>helmfile</code> KCL plugins, directly generating, mutating, and validating Kubernetes resources through the KCL code.</li><li>Support for mutating and validating YAML by running KCL code through the admission controller at the Kubernetes runtime.</li></ul><p>For more details, please refer to <a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 Roadmap</a> and <a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a>.</p><p>If you have more ideas and needs, welcome to open <a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">Issues</a> and join our community for communication as well 🙌 🙌 🙌</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information, see <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL FAQ</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
        </item>
        <item>
            <title><![CDATA[Rewrite KCL LSP in Rust]]></title>
            <link>https://kcl-lang.github.io/blog/2023/07/10/kcl-LSP</link>
            <guid>https://kcl-lang.github.io/blog/2023/07/10/kcl-LSP</guid>
            <pubDate>Mon, 10 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[The KCL v0.4.6 version has significant updates in language, toolchain, community integration and IDE extension support. In this blog, we'll be discussing the features of the KCL IDE extension and introducing the LSP, as well as talking about the design and implementation of the KCL LSP server and our plans and expectations for the future.]]></description>
            <content:encoded><![CDATA[<p>The KCL v0.4.6 version has significant updates in language, toolchain, community integration and IDE extension support. In this blog, we'll be discussing the features of the KCL IDE extension and introducing the LSP, as well as talking about the design and implementation of the KCL LSP server and our plans and expectations for the future.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New Features<a href="#new-features" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In this update, we have released a new KCL VSCode extension and rewritten the LSP server in Rust. We have provided common code assistance features in the IDE, such as highlight, goto definition, completion, outline, hover, diagnostics, and more.</p><ul><li><strong>Syntax Highlight:</strong><img loading="lazy" alt="Highlight" src="/assets/images/Highlight-ddacdde9f18d504f7a103583c2f76b86.png" width="1312" height="782" class="img_ev3q"></li><li><strong>Goto Definition:</strong> Goto definition of schema, variable, schema attribute, and import pkg.
<img loading="lazy" alt="Goto Definition" src="/assets/images/GotoDef-0875243eacd6b76e49b7a5b95cb9ce55.gif" width="1312" height="780" class="img_ev3q"></li><li><strong>Completion:</strong> Keywords completions and dot(<code>.</code>) completion.
<img loading="lazy" alt="Completion" src="/assets/images/Completion-584771cd4bed237e74d3da3decaa9757.gif" width="1312" height="780" class="img_ev3q"></li><li><strong>Outline:</strong> Main definition(schema def) and variables in KCL file.
<img loading="lazy" alt="Outline" src="/assets/images/Outline-c443b2ee1e35746795e7b09c11f3f4da.gif" width="1312" height="780" class="img_ev3q"></li><li><strong>Hover:</strong> Identifier information (type and schema documentation).
<img loading="lazy" alt="Hover" src="/assets/images/Hover-339697d17ca0d4f167b1b1a904c9f1aa.gif" width="1312" height="780" class="img_ev3q"></li><li><strong>Diagnostics:</strong> Warnings and errors in KCL file.
<img loading="lazy" alt="Diagnostics" src="/assets/images/Diagnostics-716fc3b938a94e4db2cbafaad4f4174d.gif" width="1312" height="780" class="img_ev3q"></li></ul><p>Welcome to <a href="https://kcl-lang.io/docs/tools/Ide/vs-code/" target="_blank" rel="noopener noreferrer">KCL VSCode extension</a> to learn more. 👏👏👏</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-lsp">What is LSP?<a href="#what-is-lsp" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In this update, we have implemented the above features based on LSP. LSP stands for Language Server Protocol, which is a protocol for programming language tools that was introduced by Microsoft in 2016. It is easy to understand LSP with a picture on the VSCode website.</p><p><img loading="lazy" alt="LSP" src="/assets/images/lsp-c853f0881ecd058c34768312009038da.png" width="1162" height="538" class="img_ev3q"></p><p>By LSP, IDE can communicate with the language server which runs on the backend through the JSON-RPC protocol. The language server can provide capabilities such as code analysis, completion, syntax highlighting, and goto definition. Based on LSP, developers can migrate between different editors and IDEs, reducing the development of language tools from M (number of languages) <!-- -->*<!-- --> N (number of editors/IDEs) to M + N.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-rewrite-it-in-rust">Why rewrite it in Rust？<a href="#why-rewrite-it-in-rust" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL compiler and other tools were originally implemented in Python, and we rewrote its compiler in Rust for performance reasons. After that, we gradually rewrote other tools of KCL, such as testing and formatting tools. In this update, we also rewrote the LSP in consideration of performance issues.</p><p>In the past, when the Python version LSP server was processing some complex scenarios (over 200 files), for a request of goto definition, the server-side took more than about 6 seconds from receiving the request to calculating the result and responding. It is almost unavailable. Since the implementation of the server side is mainly based on the lexical analysis and semantic analysis of the front-end and middle-end of the compiler. After we rewrite it in Rust, the performance of this part has been improved by 20 and 40 times, and the remarkable result is that the response time of the server has been greatly improved. Boost, for the same scenario, the response time is reduced to around 100 milliseconds. For some simple scenarios, the response time is only a few milliseconds, which makes the user feel indifferent.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-of-kcl-lsp">Design of KCL LSP<a href="#design-of-kcl-lsp" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL LSP is designed as follows：
<img loading="lazy" alt="KCL-LSP" src="/assets/images/kcl-LSP-789ffa07d0239265e5851188a8ca5327.png" width="627" height="421" class="img_ev3q"></p><p>The main process can be divided into several stages:</p><ol><li>Initiate a connection and set the LSP capability. In IDE, when opening a specific file (e.g., <!-- -->*<!-- -->.k for KCL), the IDE will run the local kcl_language_server binary. This binary is distributed with KCL and installed in KCL's bin directory. After the Server starts, it will start a standard IO Connection and wait for the initialization request sent by the IDE Client. After receiving the initialization request, the server will define the information and capabilities of the server and return it to the client to complete the initial connection of the LSP.</li><li>After the connection is established, the server will start a polling function to continuously receive LSP messages from the client, such as <code>Notification</code> (open/close/change/delete files, etc.) and <code>Request</code> (goto definition, hover, etc.), as well as messages from the server itself the Task. And uniformly encapsulated into an event (Event) and handed over to the next step for processing.</li><li>For different events, follow the steps below:</li></ol><div class="language-Rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// Handles an event from one of the many sources that the language server subscribes to.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn handle_event(&amp;mut self, event: Event) -&gt; anyhow::Result&lt;()&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1. Process the incoming event</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match event {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Event::Task(task) =&gt; self.handle_task(task)?,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Event::Lsp(msg) =&gt; match msg {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lsp_server::Message::Request(req) =&gt; self.on_request(req, start_time)?,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lsp_server::Message::Notification(not) =&gt; self.on_notification(not)?,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _ =&gt; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2. Process changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let state_changed: bool = self.process_vfs_changes();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 3. Handle Diagnostics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if state_changed{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let mut snapshot = self.snapshot();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let task_sender = self.task_sender.clone();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Spawn the diagnostics in the threadpool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.thread_pool.execute(move || {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            handle_diagnostics(snapshot, task_sender)？;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ok(())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3.1 Task distribution: According to the task type, the Task is distributed to different sub-functions. In the sub-function, it will be further distributed to the final processing function based on the type of request or notification, such as processing file changes, processing goto definition requests, etc. These functions will analyze the semantic model (AST, symbol table, error information, etc.) compiled based on the front-end of the compiler, calculate and generate the Response (such as the target position of the goto definition request).</p><p>3.2 Change processing: When the user modifies the code or changes the file, the corresponding Notification will be sent. In the previous step of processing, the changes are saved in the virtual file system (VFS). The server side will recompile according to the new source code and save the new semantic model for processing the next request.</p><p>3.3 Diagnostics: the diagnostics here do not refer to LSP server, but to the grammatical and semantic errors and warnings when compiling KCL code. The IDE/editor does not have a request to get these errors, but the LSP server actively sends Diagnostics. Therefore, after the change, the error information is updated on the client side synchronously</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="problems">Problems<a href="#problems" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-why-do-we-need-a-virtual-file-system">1. Why do we need a virtual file system?<a href="#1-why-do-we-need-a-virtual-file-system" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the original design, the use of a virtual file system was not considered. Each time we fetch the source code from the file system, compile and analyze it. For some "static" tasks, such as goto definition, you can save the code to the file system after changing, and then find some variables definitions. Cooperating with the automatic save of VS Code, there is no obvious gap in user experience. However, for tasks such as completion, the input of <code>.</code> on the IDE/editor will trigger a file change notification and a request for completion, but the code has not been saved in the file system. Therefore, the semantic model cannot be analyzed correctly. Therefore, we realized the virtual file system with the creation of Rust Analyzer's vfs and changed the compilation entry from the file path to the source code. After the client enters the code, the file change notification will first update the virtual file system, recompile the file, and then process the completion request.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-how-to-deal-with-incomplete-code">2. How to deal with incomplete code?<a href="#2-how-to-deal-with-incomplete-code" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Another big problem we encountered was how to deal with incomplete code. Likewise, for "static" tasks, e.g., goto definition, the code can be assumed to be complete and correct. But for the request of completion, such as the following code, I hope to complete the function of the string after entering <code>.</code>.For the compilation process, the second line is an incomplete code that cannot be compiled into a normal AST tree.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s: str = "hello kcl"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">len = s.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To this end, we have implemented a variety of syntactic and semantic error recovery in KCL compilation, ensuring that the compilation process can always produce a complete AST and symbol table. In this example, we added an empty AST node as a placeholder, so that the second line can generate a complete AST. When processing the completion request, it will complete the function name, schema attr or the schema name defined in pkg according to the type of <code>s</code> and other semantic information.</p><blockquote><p>Rust Analyzer architecture:</p><p>Architecture Invariant: parsing never fails, the parser produces (T, Vec<!-- -->&lt;<!-- -->Error<!-- -->&gt;<!-- -->) rather than Result<!-- -->&lt;<!-- -->T, Error<!-- -->&gt;<!-- -->.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>KCL's IDE extension has already implemented capabilities such as highlighting, goto definition, completion, outline, hovering, and diagnostics. These features improve the development efficiency of KCL users. However, as an IDE extension, its functionality is not complete enough. In the future, we will continue to improve its capabilities. Future work has the following aspects:</p><ul><li>More capabilities: Provide more capabilities, such as code refactoring, error quick fix, code fmt, etc., to further improve capabilities and improve development efficiency</li><li>More IDE Integration: At present, although KCL provides LSP, it only integrates with VS Code. In the future, KCL users will be provided with more choices based on the capabilities of LSP.</li><li>Integration of AI: At present, ChatGPT is popular all over the Internet. We are also exploring the combination of AI×KCL to provide a more intelligent R&amp;D experience.</li></ul><p>In summary, we will continue to improve and optimize KCL's IDE extension to make it more powerful and practical. Bring more convenient and efficient development experience to KCL users.
If you have more ideas or needs, welcome to issue or discuss them in the KCL Github repo, and welcome to join our community for communication 🙌 🙌 🙌</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[KCL Introduction on WAIC 2023 Meeting]]></title>
            <link>https://kcl-lang.github.io/blog/2023-07-08-kcl-waic-meeting</link>
            <guid>https://kcl-lang.github.io/blog/2023-07-08-kcl-waic-meeting</guid>
            <pubDate>Sat, 08 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL Talk Cover]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="KCL Talk Cover" src="/assets/images/talk-cover-f408fff3ff8dda7aebc27dd702a44cc7.jpg" width="2766" height="1108" class="img_ev3q"></p><p><a href="https://kcl-lang.github.io/talks/kcl-waic2023.pdf" target="_blank" rel="noopener noreferrer">Download PDF</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
        </item>
        <item>
            <title><![CDATA[Talking about the SideCar design pattern in K8S - Part 2]]></title>
            <link>https://kcl-lang.github.io/blog/2023-06-29-k8s-sidecar-2</link>
            <guid>https://kcl-lang.github.io/blog/2023-06-29-k8s-sidecar-2</guid>
            <pubDate>Thu, 29 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In the previous blog <a href="/blog/2023-06-05-k8s-sidecar-1/">Exploring the Sidecar Design Pattern in K8s - Part 1</a>, we introduced the Sidecar design pattern using layman's terms. In this blog, we'll use KCL, a modern, type-safe configuration language, to showcase the description of Pod resources. In the subsequent blogs, we'll use KCL to explore the practical applications of the Sidecar pattern.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-openapi-definition-for-pods">1. OpenAPI Definition for Pods<a href="#1-openapi-definition-for-pods" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Let's go back to the simplest example of Nginx, where the YAML file follows a similar pattern:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here, the Pod data follows the definition of the io.k8s.api.core.v1.Pod model in the Kubernetes specification. The complete OpenAPI definition can be found here. By analyzing it carefully, we can see that the apiVersion and kind information are commonly used default configurations. We need a more modern configuration language to simplify it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-defining-pod-resources-with-kcl">2. Defining Pod Resources with KCL<a href="#2-defining-pod-resources-with-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL is a configuration policy language for the cloud-native domain. For more information, please refer to the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">official website</a>. Basic KCL configuration programs still follow the <code>K=V</code> format, which is similar to YAML. For example, we can rewrite the configuration of the Nginx container using the following KCL code:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> k8core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"main-container"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here, the <code>import</code> statement imports the <code>k8s/api/core/v1</code> package from the k8s package, and the <code>Pod</code> structure definition corresponds to the <code>Pod</code> model. The default values for apiVersion and kind have already been included, so we only need to add the <code>metadata.name</code> and <code>spec.containers</code> properties (KCL also provides syntax sugar for some multi-level nested properties). We can use the <a href="https://kcl-lang.io/docs/user_docs/guides/package-management/installation/" target="_blank" rel="noopener noreferrer">kpm package management tool</a> to create a KCL program to define a Pod resource and execute the program to get the corresponding YAML:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 1. Initialize a kcl program package called hello.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kpm init hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 2. Edit the main.k file inside the hello package and add the KCL configuration code mentioned earlier.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> hello/main.k</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">import k8s.api.core.v1 as k8core</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">k8core.Pod {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    metadata.name = "web-app"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec.containers = [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        name = "main-container"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        image = "nginx"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        ports = [{containerPort: 80}]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 3. Navigate to the hello package, add the k8s dependency, and run the hello package.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> hello </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kpm </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> k8s </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kpm run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following YAML output can be obtained:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-conclusion">3. Conclusion<a href="#3-conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In this blog, we briefly introduced how to use KCL to build Pod configurations for more flexible and robust configurations. In the subsequent blogs, we'll use KCL to extract and abstract the best Sidecar pattern practices, including using KCL to abstract the Sidecar model and using KCL to inject Sidecars into existing upstream YAML configurations.</p>]]></content:encoded>
            <category>KCL</category>
            <category>k8s</category>
            <category>SideCar</category>
        </item>
        <item>
            <title><![CDATA[Talking about the Sidecar design pattern in K8S - Part 1]]></title>
            <link>https://kcl-lang.github.io/blog/2023-06-05-k8s-sidecar-1</link>
            <guid>https://kcl-lang.github.io/blog/2023-06-05-k8s-sidecar-1</guid>
            <pubDate>Mon, 05 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In <code>K8S</code>, there is a design pattern called <code>Sidecar</code>, The <code>Sidecar</code> pattern deploys application components into a separate process or container to provide isolation and encapsulation. And it also allows applications to be composed of heterogeneous components and technologies.</p><p>This pattern is named <code>Sidecar</code> because it resembles a Sidecar attached to a motorcycle. The Sidecar connects to a parent application and provides support functions for the application. The Sidecar also shares the same lifecycle as the parent application, being created and retired alongside the parent. The Sidecar pattern is sometimes referred to as the sidepick pattern and is a decomposition pattern.</p><p>This series of articles will show the usage of the <code>Sidecar</code> pattern and how to use the <code>Sidecar</code> pattern by KCL.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-cloud-native-minimalist-web-services">A Cloud-Native Minimalist Web Services<a href="#a-cloud-native-minimalist-web-services" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>At first, we could start a web service in our kubernetes environment. Define a pod with only one <code>Nginx</code> service and start a web service on port 80 in the <code>pod.yaml</code> file below.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Pod</code> is a foundational primitive in cloud native. <code>Pod</code> wraps multiple containers into a single logical unit, and the kubernetes runtime ensures that the containers in a <code>Pod</code> run on a single machine. So all containers in a <code>Pod</code> share lifecycles, disk volumes, network, etc. The <code>Sidecar</code> pattern is about adding other containers to a <code>Pod</code> to extend and augment the capabilities of the main container.</p><p>The <code>Pod</code> is then created via the kubectl, and then the <code>Pod</code> execution status is viewed via <code>kubectl get po</code>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get po</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME READY STATUS RESTARTS AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">web-app </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1 Running </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> 45m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can see that a <code>Pod</code> named <code>web-app</code> is up and running properly, containing the <code>Nginx</code> service. To configure port forwarding for external access, the port 3999 of the host corresponds to port 80 of the master container:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward web-app </span><span class="token number" style="color:#36acaa">3999</span><span class="token plain">:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding from </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:3999 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding from </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">::1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:3999 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Port forwarding is a blocking procedure, keep the command line open. Then open the test page in your browser at</p><p><img loading="lazy" src="/assets/images/port-forward-38011472fab79a2041228e14f60660db.png" width="1136" height="614" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="expand-the-page-content-by-sidecar">Expand the page content by Sidecar<a href="#expand-the-page-content-by-sidecar" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In this section, we try to add the ability to customize web pages to the <code>Nginx</code> service via Sidecar without modifying the original <code>Nginx</code> container image. Before we start, remove the previously started <code>Pod</code>:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete po web-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token plain"> deleted</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then add a second <code>Busybox</code> Sidecar container to the <code>Pod</code>, with the <code>pod.yaml</code> file as follows:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># --- Here are the new additions ---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># andSidecar share file directories to be published via disk volumes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /usr/share/nginx/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Sidecar Container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"/bin/sh"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"-c"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"while true; do echo $(date -u) 'Hi I am from Sidecar container' &gt; /var/log/index.html; sleep 5;done"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Sidecar</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /var/log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># All containers in Pod share disk volumes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">emptyDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The commands executed by the <code>Busybox</code> Sidecar container correspond to the following shell scripts:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">date</span><span class="token variable" style="color:#36acaa"> -u</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Hi I am from Sidecar container'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /var/log/index.html</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>Busybox</code> has only one function: it overwrites the <code>/var/log/index.html</code> file every 5 seconds, which happens to correspond to the home page file of the Nginx service.</p><p>Then restart the Pod and remap the local host port to the container port.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/web-app created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward web-app </span><span class="token number" style="color:#36acaa">3999</span><span class="token plain">:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding from </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:3999 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding from </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">::1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:3999 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Upon reopening your browser you will see the following page:</p><p><img loading="lazy" src="/assets/images/port-forward-1-ecbef30818b04505deeb1f461f91a91f.png" width="1038" height="192" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-sidecar-mode-works">How Sidecar mode works<a href="#how-sidecar-mode-works" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><code>Busybox</code> is a <code>Sidecar</code> container that produces the home page data, while <code>Nginx</code> is the main container that consumes the home page data produced by <code>Busybox</code>; the two containers share space through the var-logs disk volume.</p><p><img loading="lazy" src="/assets/images/how-sidecar-work-a13877d06b375a8443f596f4614b7a26.png" width="1066" height="658" class="img_ev3q"></p><p>In the example, <code>Nginx</code> is still the main container, and the <code>Sidecar</code> container is BusyBox. we can also add more <code>Sidecar</code> containers for network, monitoring, logging, etc.</p><p><img loading="lazy" src="/assets/images/how-sidecar-work-1-d4780f9624a3907986d6e59483329bf5.png" width="1512" height="616" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-of-sidecar">Advantages of Sidecar<a href="#advantages-of-sidecar" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Containers have now become a popular packaging technology, where various teams can build, publish and run programs in a unified way, and even manage various resources through containers. So a container is more like a product with its own runtime, release cycle, documentation, API, etc. A good container/product is responsible for solving only one problem, and maintaining the KISS principle allows the container itself to be extremely reusable and replaceable.</p><p>It is reusability that makes the modern build process more agile and efficient. But reusable containers are generally single-function, and we often need to extend the functionality of containers, as well as the need for more collaboration between containers.</p><p>The Sidecar can be added lots of trailers without modifying the main motorcycle, and accordingly the <code>Sidecar</code> pattern can extend and enhance the existing main container functions without modifying the main container.</p><p>There is a rule in object-oriented programming that "combination is better than inheritance, use more combination and less inheritance", so <code>Sidecar</code> is also a recommended pattern to use. Because of the advantages of the Sidecar pattern, it has recently been used in a lot of cloud-native scenarios. For example, it can be used to encrypt communication between Pods through a service mesh or to act as a database proxy. Sidecar containers can be used for log forwarding (e.g., <code>fluentd</code>), Service Mesh (e.g., <code>Istio</code>, <code>Linkerd</code>), proxying (e.g., <code>Docker Ambassador</code>), health checking (to check if certain components are working properly), and other auxiliary tasks (such as copying files or downloading files).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In this article, we briefly introduce and demonstrate the <code>Sidecar</code> pattern, while comparing the relationship between <code>Sidecar</code> pattern and the combinatorial programming pattern in the context of traditional object-oriented programming ideas. the advantages of the <code>Sidecar</code> pattern are not only in the harmless enhancement of the main container, but also in the more flexible ability to dynamically adjust the main container capability.</p><p>In later articles, we will try to simplify writing <code>Sidecar</code> configurations by modern cloud-native configuration languages such as <code>KCL</code>. Extending existing configuration based on <code>Sidecar</code> by dynamically injecting and modifying it through <code>KCL</code>.</p>]]></content:encoded>
            <category>KCL</category>
            <category>k8s</category>
            <category>Sidecar</category>
        </item>
        <item>
            <title><![CDATA[Differences between KCL and Helm]]></title>
            <link>https://kcl-lang.github.io/blog/2023-05-30-vs-helm</link>
            <guid>https://kcl-lang.github.io/blog/2023-05-30-vs-helm</guid>
            <pubDate>Tue, 30 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm</a> is a tool for generating deployable manifests for Kubernetes objects, which philosophically takes the task of generating the final manifests in two distinct forms. Helm is an imperative templating tool for managing Kubernetes packages called charts. Charts are a templated version of your yaml manifests with a subset of Go Templating mixed throughout, as well it is a package manager for kubernetes that can package, configure, and deploy/apply the helm charts onto kubernetes clusters.</p><p>In KCL, the user can directly write the configuration instead of template files with more tools and IDE plugin support that needs to be modified in the corresponding code in the corresponding place, eliminating the cost of reading basic YAML. At the same time, the user can reuse the configuration fragments by code, avoiding massive copying and pasting of YAML configuration. The information density is higher, and it is not easy to make mistakes through KCL.</p><p>A classic example of helm chart configuration management is used to explain the differences between Helm and KCL in Kubernetes resource configuration management.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="helm">Helm<a href="#helm" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Helm has the concepts of <code>values.yaml</code> and <code>template</code>. In general, the Helm chart project is generally a directory including a <code>Chart.yaml</code>.:</p><p>We can execute the following command line to obtain a typical Helm Chart project.</p><ul><li>Create a directory named <code>workload-helm</code> to hold the chart project</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold the chart project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> workload-helm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-helm/Chart.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/Chart.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">appVersion: 0.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">description: A helm chart to provision standard workloads.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">name: workload</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">type: application</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">version: 0.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-helm/values.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/values.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  type: ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - name: www</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      port: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      targetPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  my-container:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    image:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      name: busybox:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    command: ["/bin/echo"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - "-c"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - "Hello World!"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      limits:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        cpu: 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        memory: 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      requests:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        cpu: 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        memory: 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Create a directory to hold templates</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold templates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> workload-helm/templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-helm/templates/helpers.tpl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/templates/helpers.tpl</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Expand the name of the chart.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.name" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- default .Release.Name .Values.nameOverride | trunc 63 | trimSuffix "-" }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Create a default fully qualified app name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">If release name contains chart name it will be used as a full name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.fullname" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c"> := default .Chart.Name .Values.nameOverride }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- if contains \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c"> .Release.Name }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- .Release.Name | trunc 63 | trimSuffix "-" }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- else }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- printf "%s-%s" .Release.Name \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c"> | trunc 63 | trimSuffix "-" }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Create chart name and version as used by the chart label.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.chart" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- printf "%s-%s" .Chart.Name .Chart.Version | replace "+" "_" | trunc 63 | trimSuffix "-" }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Common labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.labels" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">helm.sh/chart: {{ include "workload.chart" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{ include "workload.selectorLabels" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- if .Chart.AppVersion }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">app.kubernetes.io/version: {{ .Chart.AppVersion | quote }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">app.kubernetes.io/managed-by: {{ .Release.Service }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Selector labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.selectorLabels" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">app.kubernetes.io/name: {{ include "workload.name" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">app.kubernetes.io/instance: {{ .Release.Name }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/templates/deployment.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: {{ include "workload.name" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {{- include "workload.labels" . | nindent 4 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      {{- include "workload.selectorLabels" . | nindent 6 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {{- include "workload.selectorLabels" . | nindent 8 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {{- range \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c">, \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c"> := .Values.containers }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: {{ \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c"> }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          image: "{{ </span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.image.name }}"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.command }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.command | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.args }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.args | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.env }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          env:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.env | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.volumeMounts }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.volumeMounts | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.livenessProbe }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          livenessProbe:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.livenessProbe | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.readinessProbe }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          readinessProbe:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.readinessProbe | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.resources }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.resources | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/templates/service.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{ if .Values.service }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: {{ include "workload.name" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {{- include "workload.labels" . | nindent 4 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  type: {{ .Values.service.type }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {{- include "workload.selectorLabels" . | nindent 4 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  {{- with .Values.service.ports }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {{- toYaml . | nindent 4 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Thus, we can get a basic Helm chart directory</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── Chart.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── _helpers.tpl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── service.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── values.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can display the real deployment configuration of through the following command.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm template workload-helm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output YAML is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Source: workload-helm/templates/service.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">helm.sh/chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">0.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.3.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Helm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> www</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Source: workload-helm/templates/deployment.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">helm.sh/chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">0.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.3.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Helm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"busybox:latest"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /bin/echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Hello World</span><span class="token tag" style="color:#00009f">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 128Mi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl">KCL<a href="#kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In KCL, we provide the ability similar to Helm <code>values.yaml</code> to configure dynamic parameters through configuration files <code>kcl.yaml</code>.</p><p>We can execute the following command line to obtain a typical KCL project with the <code>kcl.yaml</code>.</p><ul><li>Create a directory named <code>workload-kcl</code> to hold the KCL project</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold the KCL project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> workload-kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-kcl/kcl.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-kcl/kcl.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kcl_options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - key: containers</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    value:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      my-container:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        image:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          name: busybox:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        command: ["/bin/echo"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          - "-c"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          - "Hello World!"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          limits:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            cpu: 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            memory: 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          requests:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            cpu: 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            memory: 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - key: service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    value:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      type: ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: www</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          port: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          targetPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Create KCL files to hold kubernetes resources.</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-kcl/deployment.k</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-kcl/deployment.k</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion = "apps/v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind = "Deployment"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    name = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    labels = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        "app.kubernetes.io/name" = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        "app.kubernetes.io/instance" = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    selector.matchLabels = metadata.labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    template.metadata.labels = metadata.labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    template.spec.containers = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            name = n</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            image = container.image.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            command = container.command</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            command = container.args</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            env = container.env</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            resources = container.resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        } for n, container in option("containers") or {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-kcl/service.k</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion = "v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind = "Service"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    name = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    labels = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        "app.kubernetes.io/name" = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        "app.kubernetes.io/instance" = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    selector.matchLabels = metadata.labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    type = option("service", default={})?.type</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ports = option("service", default={})?.ports</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above KCL code, we declare the <code>apiVersion</code>, <code>kind</code>, <code>metadata</code>, <code>spec</code> and other attributes of Kubernetes <code>Deployment</code> and <code>Service</code> resources, and assign the corresponding contents respectively. In particular, we assign <code>metadata.labels</code> to <code>spec.selector.matchLabels</code> and <code>spec.template.metadata.labels</code>. It can be seen that the data structure defined by KCL is more compact than Helm template or YAML, and configuration reuse can be realized by defining local variables.</p><p>In KCL, we can dynamically receive external parameters through conditional statements and the <code>option</code> builtin function, and set different configuration values to generate resources.</p><p>We can get the <code>Deployment</code> and <code>Service</code> resources throw the following command:</p><ul><li><code>Deployment</code></li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl workload-kcl/deployment.k -Y workload-kcl/kcl.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Hello World</span><span class="token tag" style="color:#00009f">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 128Mi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>Service</code></li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl workload-kcl/service.k -Y workload-kcl/kcl.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> www</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition, we can overwrite the value in the <code>kcl.yaml</code> file with the <code>-D</code> parameter, such as executing the following command.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl workload-kcl/service.k -Y workload-kcl/kcl.yaml -D </span><span class="token assign-left variable" style="color:#36acaa">service</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">None</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>It can be seen that, compared with Helm, KCL reduces the number of configuration files and code lines by means of code generation on the basis of configuration reuse and coverage, And like Helm, it is a pure client solution, which can move the configuration and policy verification to the left as far as possible without additional dependency or burden on the cluster, or even without a real Kubernetes cluster.</p><p>Helm can define reusable templates in the <code>.tpl</code> file and support other templates to reference it. However, only defined templates can be reused. In a complex Helm chart project, we need to define a lot of additional basic templates. Compared with the cumbersome writing method of Helm, all contents in KCL are variables. No additional syntax is required to specify templates. Any variables can be referenced to each other.</p><p>In addition, there are a large number of <code>{{- include }}</code>, <code>nindent</code> and <code>toYaml</code> tag characters that have nothing to do with actual logic in Helm. You need to calculate spaces and indents at each reference. In KCL, there are fewer useless codes, and there is no need for too many <code>{{*}}</code> to mark code blocks. The information density is higher, and the indentation and space have been completely liberated.</p><p>In fact, KCL and Helm are not antagonistic. We can even use KCL to write HelmRelease templates and provide programmable extension capabilities for existing Helm chart to write YAML validators.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-plan">Future Plan<a href="#future-plan" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We also expect that KCL models and constraints can be managed as a package (this package has only KCL files). For example, the Kubernetes models and constraints can be used out of the box. Users can generate configurations or verify existing configurations, and can simply extend the models and constraints users want through KCL inheritance.</p><p>At this stage, you can use tools such as Git or <a href="https://github.com/oras-project/oras" target="_blank" rel="noopener noreferrer">OCI Registry As Storage (ORAS)</a> to manage KCL configuration versions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-documents">More Documents<a href="#more-documents" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>KCL Github Repo: <a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl</a></li><li>KCL Website: <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Helm</category>
        </item>
        <item>
            <title><![CDATA[Differences between KCL and Kustomize]]></title>
            <link>https://kcl-lang.github.io/blog/2023-05-20-vs-kustomize</link>
            <guid>https://kcl-lang.github.io/blog/2023-05-20-vs-kustomize</guid>
            <pubDate>Sat, 20 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a> provides a solution to customize the basic configuration and differential configuration of Kubernetes resources without templates. The configuration can be merged or overwritten through file-level YAML configuration with multiple strategies. In Kustomize, users need to know more about the content and location to be changed, For basic YAML with complex recursion too deep, it may not be easy to match Kustomize files through selectors.</p><p>In KCL, the user can directly write the configuration that needs to be modified in the corresponding code in the corresponding place, eliminating the cost of reading basic YAML. At the same time, the user can reuse the configuration fragments by code, avoiding massive copying and pasting of YAML configuration. The information density is higher, and it is not easy to make mistakes through KCL.</p><p>A classic example of Kustomize multi-environment configuration management is used to explain the differences between Kustomize and KCL in Kubernetes resource configuration management.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kustomize">Kustomize<a href="#kustomize" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Kustomize has the concepts of <code>base</code> and <code>overlay</code>. In general, base and overlay are general a directory including a <code>kustomization.yaml</code> file. One base directory can be used by multiple overlay directories.</p><p>We can execute the following command line to obtain a typical Kustomize project</p><ul><li>Create a base directory and create a deployment resource</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold the base</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a base/deployment.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> base/deployment.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    app: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      app: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        app: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          image: osixia/openldap:1.1.11</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          args: ["--copy-service"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            - name: ldap-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              mountPath: /var/lib/ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            - containerPort: 389</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              name: openldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: ldap-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          emptyDir: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a base/kustomization.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> base/kustomization.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">- deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Create a directory to hold the prod overlay configuration.</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold the prod overlay</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a prod/deployment.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> prod/deployment.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  replicas: 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: ldap-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          emptyDir: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          gcePersistentDisk:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            readOnly: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            pdName: ldap-persistent-storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> prod/kustomization.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - ../base</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">patchesStrategicMerge:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Thus, we can get a basic Kustomize directory</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── kustomization.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── kustomization.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The base directory stores the basic deployment configuration, and the prod environment stores the deployment configuration that needs to be overwritten. The <code>metadata.name</code> and other attributes such as <code>spec.template.spec.volumes[0].name</code> are used to indicate which resource to overwrite</p><p>We can display the real deployment configuration of the prod environment through the following command.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl kustomize ./prod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">copy</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> osixia/openldap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.1.11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">389</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> openldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /var/lib/ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">gcePersistentDisk</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">pdName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">persistent</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">readOnly</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ldap</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can also directly apply the configuration to the cluster through the following command.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -k ./prod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/ldap created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl">KCL<a href="#kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We can write the following KCL code and name it <code>main.k</code>.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># When env is prod, override the `replicas` attribute with `6`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"env"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Assign `metadata.labels` to `selector.matchLabels`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"osixia/openldap:1.1.11"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            args </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"--copy-service"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            volumeMounts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap-data"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mountPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/var/lib/ldap"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"openldap"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">volumes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap-data"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            emptyDir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># When env is prod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># override the `emptyDir` attribute with `None`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># patch a `gcePersistentDisk` attribute with the value `{readOnly = True, pdName = "ldap-persistent-storage"}`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"env"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                emptyDir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                gcePersistentDisk </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    readOnly </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pdName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap-persistent-storage"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above KCL code, we declare the <code>apiVersion</code>, <code>kind</code>, <code>metadata</code>, <code>spec</code> and other attributes of a Kubernetes <code>Deployment</code> resource, and assign the corresponding contents respectively. In particular, we assign <code>metadata.labels</code> to <code>spec.selector.matchLabels</code> and <code>spec.template.metadata.labels</code>. It can be seen that the data structure defined by KCL is more compact than Kustomize or YAML, and configuration reuse can be realized by defining local variables.</p><p>In KCL, we can dynamically receive external parameters through conditional statements and the <code>option</code> builtin function, and set different configuration values for different environments to generate resources. For example, for the above code, we wrote a conditional statement and entered a dynamic parameter named <code>env</code>. When <code>env</code> is <code>prod</code>, we will overwrite the <code>replicas</code> attribute from <code>1</code> to <code>6</code>, and make some adjustments to the volume configuration named <code>ldap-data</code>, such as changing the <code>emptyDir</code> attribute to <code>None</code>, and adding the configuration value of <code>gcePersistentDisk</code>.</p><p>We can use the following command to view diff between different environment configurations</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kcl main.k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kcl main.k -D </span><span class="token assign-left variable" style="color:#36acaa">env</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">prod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">more</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token coord">8c8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted-arrow deleted prefix deleted" style="color:#d73a49">&lt;</span><span class="token deleted-arrow deleted line" style="color:#d73a49">   replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-arrow deleted line" style="color:#d73a49"></span><span class="token coord">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">   replicas: 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-arrow inserted line" style="color:#36acaa"></span><span class="token coord">30c30,33</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted-arrow deleted prefix deleted" style="color:#d73a49">&lt;</span><span class="token deleted-arrow deleted line" style="color:#d73a49">         emptyDir: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-arrow deleted line" style="color:#d73a49"></span><span class="token coord">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">         emptyDir: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-arrow inserted line" style="color:#36acaa"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">         gcePersistentDisk:</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-arrow inserted line" style="color:#36acaa"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">           readOnly: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-arrow inserted line" style="color:#36acaa"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">           pdName: ldap-persistent-storage</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It can be seen that the diff between the production environment configuration and the base configuration mainly lies in the attributes of <code>replicas</code>, <code>emptyDir</code> and <code>gcePersistentDisk</code>, which is consistent with the expectation.</p><p>In addition, we can use the <code>-o</code> parameter of the KCL command line tool to output the compiled YAML to a file and view the diff between files</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Generate base deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k -o deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Generate prod deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k -o prod-deployment.yaml -D </span><span class="token assign-left variable" style="color:#36acaa">env</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Diff prod deployment and base deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> prod-deployment.yaml deployment.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Of course, we can also use KCL tools together with kubectl and other tools to apply the configuration of the production environment to the cluster</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k -D </span><span class="token assign-left variable" style="color:#36acaa">env</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">prod </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> kubectl apply -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/ldap created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, check the deployment status through kubectl</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME   READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ldap   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/6     </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">           15s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It can be seen from the results of the command that it is completely consistent with the deployment experience of using Kustomize configuration and kubectl apply directly, and there are no more side effects.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>This article briefly introduces the quick start of writing complex multi-environment Kubernetes configuration with KCL and the comparison of Kustomize tool for Kubernetes multi-environment configuration management.</p><p>It can be seen that, compared with Kustomize, KCL reduces the number of configuration files and code lines by means of code generation on the basis of configuration reuse and coverage, And like Kustomize, it is a pure client solution, which can move the configuration and policy verification to the left as far as possible without additional dependency or burden on the cluster, or even without a real Kubernetes cluster.</p>]]></content:encoded>
            <category>KCL</category>
            <category>Kustomize</category>
        </item>
        <item>
            <title><![CDATA[See Goodbye to Old KCL Go SDK, the New One is Out!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-new-version-feature-interpretation-kclvm-go-feature-overview</link>
            <guid>https://kcl-lang.github.io/blog/2023-new-version-feature-interpretation-kclvm-go-feature-overview</guid>
            <pubDate>Thu, 27 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[What is KCL]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-kcl">What is KCL<a href="#what-is-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language. KCL improves the writing of numerous complex configurations, such as cloud-native scenarios, through its mature programming language technology and practice. It is dedicated to building better modularity, scalability, and stability around configurations, simpler logic writing, faster automation, and great built-in or API-driven integrations.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-kcl-go-sdk">What is KCL Go SDK?<a href="#what-is-kcl-go-sdk" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>kclvm is a runtime library for the KCL language that provides a programming interface for interacting with the KCL compiler. It is a client library that can be used to perform various operations on KCL source code such as execution and formatting. KCL Go SDK is a Go language wrapper for kclvm that provides an SDK for KCL language integration in cloud-native environments.</p><p>The current version of <code>KCL Go SDK</code> is built on top of the kclvm json2 RPC API, which means that it uses the same API as other language KCL clients to interact with KCL source code. The way it works is similar to other language KCL SDKs, but it provides a more user-friendly Go language style wrapper.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-problems-does-the-new-version-of-kcl-go-sdk-solve">What problems does the new version of KCL Go SDK solve?<a href="#what-problems-does-the-new-version-of-kcl-go-sdk-solve" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>KCL is closely related to the cloud-native domain as a configuration language, while on the other hand, Go has become the de facto standard programming language for cloud-native domains. In this context, the development of a Go SDK for the KCL compiler to directly interact with Go was necessary, which is the reason for the creation of <code>KCL Go SDK</code>.</p><p>The initial version of the KCL compiler and runtime were written in Python, and the runtime for the first version of the KCL language had a lot of room for improvement in terms of performance and security due to the performance issues and characteristics of the dynamic nature of the Python language. In light of security and efficiency considerations, later versions of the KCL compiler were written in the Rust programming language. As a result, the new version of <code>KCL Go SDK</code> is based on rust-implemented kclvm packaging, eliminating Python dependencies, simplifying installation, and optimizing the user experience.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-integrate-kcl-with-go-code">How to integrate KCL with Go code?<a href="#how-to-integrate-kcl-with-go-code" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Here is an example of how to integrate KCL into your Go program. Using the hello.k file from the previous example, construct the following main.go code:</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kcl </span><span class="token string" style="color:#e3116c">"kcl-lang.io/kcl-go"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yaml </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MustRun</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"kubernetes.k"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithCode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetRawYamlResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">yaml</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">`</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion = "apps/v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind = "Deployment"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    name = "nginx"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    labels.app = "nginx"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    replicas = 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    selector.matchLabels = metadata.labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    template.metadata.labels = metadata.labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    template.spec.containers = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            name = metadata.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            image = "${metadata.name}:1.14.2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            ports = [{ containerPort = 80 }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>kcl.MustRun("kubernetes.k", kcl.WithCode(code)).GetRawYamlResult()</code> runs the corresponding KCL source file</li><li><code>fmt.Println(yaml)</code> prints the result of the run</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Through the version change, we have removed Python dependencies and switched to a more efficient Rust runtime. The article briefly demonstrates how to use the kcl-go command line tool to execute KCL source code and how to integrate KCL into your Go program.</p><p>In addition to compiling and running KCL source code, the KCL Go SDK provides a variety of features to facilitate KCL integration in Go, including:</p><ul><li>KCL static error analysis (lint and format)</li><li>KCL dependency analysis</li><li>Go struct and KCL Schema mutual conversion</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/kcl-lang/kcl-go" target="_blank" rel="noopener noreferrer">kcl-go Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>KCL</category>
            <category>kclvm-go</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.4.6 Release Blog]]></title>
            <link>https://kcl-lang.github.io/blog/2022-kcl-0.4.6-release-blog</link>
            <guid>https://kcl-lang.github.io/blog/2022-kcl-0.4.6-release-blog</guid>
            <pubDate>Fri, 14 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL team is pleased to announce that KCL v0.4.6 is now available! This release has brought three key updates to everyone: <strong>Language</strong>, <strong>Tools</strong>, and <strong>Integrations</strong>.</p><ul><li><em>Use KCL IDE extensions to improve KCL code writing experience and efficiency</em></li><li><em>Helm/Kustomize/KPT cloud-native community tool integrations</em></li><li><em>Improve the KCL multilingual SDK for easy application integration</em></li></ul><p>You can visit the <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.4.6" target="_blank" rel="noopener noreferrer">KCL release page</a> or the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a> to get KCL binary download link and more detailed release information.</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language. KCL improves the writing of numerous complex configurations, such as cloud-native scenarios, through its mature programming language technology and practice. It is dedicated to building better modularity, scalability, and stability around configurations, simpler logic writing, faster automation, and great built-in or API-driven integrations.</p><p>This blog will introduce the content of KCL v0.4.6 and recent developments in the KCL community to readers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="language">Language<a href="#language" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="builtin-functions">Builtin Functions<a href="#builtin-functions" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Added KCL string <code>removeprefix</code> and <code>removesuffix</code> member functions to remove prefix and suffix substrings from strings</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prefix-string"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">removeprefix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"prefix-"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># "string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string-suffix"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">removesuffix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"-suffix"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># "string"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See <a href="https://kcl-lang.io/docs/reference/model/builtin#string-builtin-member-functions" target="_blank" rel="noopener noreferrer">here</a> for more.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compiler-information">Compiler Information<a href="#compiler-information" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous versions of KCL, running the KCL command-line tool once only displayed one error message and warning. In KCL v0.4.6, it supported the ability to display multiple errors and warnings in one compilation and improved error information to improve the efficiency of KCL code error troubleshooting, such as for the following KCL code (main.k).</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> "kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Execute the following KCL command, then you can see the syntax errors including the unterminated string and the brace mismatch errors.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">E1001</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: InvalidSyntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> main.k:2:21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  |                     ^ unterminated string</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">error[E1001]: InvalidSyntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> --&gt; main.k:2:24</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">2 |     labels = {key = "</span><span class="token plain">kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                        ^ expected </span><span class="token string" style="color:#e3116c">"}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="top-level-schema-assign-statement-union-operator">Top-level schema assign statement union operator<a href="#top-level-schema-assign-statement-union-operator" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous versions of KCL, when writing the following KCL code, the two schema configurations with the same name were merged and output. In KCL v0.4.6, it was required to explicitly use the attribute merge operator instead of the attribute overlay operator.</p><ul><li>Before</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>After</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use the union operator `:` instead of the override operator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use the union operator `:` instead of the override operator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="path-selector-simplification">Path selector simplification<a href="#path-selector-simplification" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>We use the path selector CLI parameter (-S) without filling in the package path, and can directly filter internal variables.</p><p>For the KCL code (main.k):</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Alice"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We run the following command:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k -S person</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Alice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bugfix">Bugfix<a href="#bugfix" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="inline-conditional-configuration-block-syntax-error">Inline conditional configuration block syntax error<a href="#inline-conditional-configuration-block-syntax-error" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Before KCL v0.4.6, an unexpected syntax error will appear when writing the following KCL code. In the new version, we fixed similar issues.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">env </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> env </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"kubernetes.io/env"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="schema-required-attribute-check">Schema required attribute check<a href="#schema-required-attribute-check" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In previous versions of KCL, for the following KCL code, there was an error where the <code>versions</code> attribute was not assigned as expected. In KCL v0.4.6, we fixed similar issues.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema App</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    versions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Version </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tools">Tools<a href="#tools" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-vs-code-extension">KCL VS Code Extension<a href="#kcl-vs-code-extension" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In this version, we have released a new KCL VS Code extension and a language service server rewritten using the Rust language, which has improved performance by about 20 times compared to previous KCL IDE versions. We also support real-time display of KCL errors and warnings in the IDE, as well as new features such as KCL code completion.</p><ul><li><strong>Real-time display of KCL errors and warnings</strong></li></ul><p><img loading="lazy" alt="Diagnostics" src="/assets/images/Diagnostics-716fc3b938a94e4db2cbafaad4f4174d.gif" width="1312" height="780" class="img_ev3q"></p><ul><li><strong>Go to Definition</strong></li></ul><p><img loading="lazy" alt="Goto Definition" src="/assets/images/GotoDef-0875243eacd6b76e49b7a5b95cb9ce55.gif" width="1312" height="780" class="img_ev3q"></p><ul><li><strong>Completion</strong></li></ul><p><img loading="lazy" alt="Completion" src="/assets/images/Completion-584771cd4bed237e74d3da3decaa9757.gif" width="1312" height="780" class="img_ev3q"></p><ul><li><strong>Hover</strong></li></ul><p><img loading="lazy" alt="Hover" src="/assets/images/Hover-339697d17ca0d4f167b1b1a904c9f1aa.gif" width="1312" height="780" class="img_ev3q"></p><p>See <a href="https://kcl-lang.io/docs/tools/Ide/vs-code" target="_blank" rel="noopener noreferrer">here</a> for more.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="package-management-tools">Package Management Tools<a href="#package-management-tools" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the new version of KCL v0.4.6, we have provided a new KCL package management tool with the alpha version, which allows users to access the KCL modules in the community with a few commands. For example, the KCL Kubernetes model can be imported through the following command.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm init kubernetes_demo </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kpm </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -git https://github.com/awesome-kusion/konfig.git -tag v0.0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Write a KCL code to import the Kubernetes models (main.k).</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> konfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">base</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pkg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kusion_kubernetes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx-deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Execute the following command to run the KCL code to obtain an nginx deployment YAML output.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>See <a href="https://kcl-lang.io/docs/user_docs/guides/package-management/overview" target="_blank" rel="noopener noreferrer">here</a> for more information about the <strong>kpm</strong> tool.</li><li>See <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-konfig/overview" target="_blank" rel="noopener noreferrer">here</a> for more information about the <strong>konfig</strong> model.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="integrations">Integrations<a href="#integrations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-tool-integrations">Kubernetes Tool Integrations<a href="#kubernetes-tool-integrations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In KCL v0.4.6, we provide KCL plugin support for configuration management tools such as Helm, Kustomize, and KPT in the Kubernetes community using a unified programming interface. Writing a few lines of KCL code can non-intrusively complete the mutation and validation of existing Kustomize YAML and Helm Charts.</p><p>For example, writing a small amount of KCL code to modify resource labels/annotations, injecting sidecar container configuration, and using KCL schema to verify resources.</p><p>Below is a detailed explanation of the integration of KCL using the Kustomize tool. There is no need to install any KCL-related binaries to use the Kustomize KCL plugin, just install the Kustomize tool locally.</p><p>Firstly, execute the following command to obtain a Kustomize YAML configuration example:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/kustomize-kcl.git </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token builtin class-name">cd</span><span class="token plain"> ./kustomize-kcl/examples/set-annotation/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then execute the following command using KCL code to add only one <code>managed-by=kustomize-kcl</code> annotation for all <code>Deployment</code> resources</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> kustomize fn run ./local-resource/ --as-current-user --dry-run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output YAML is:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internal.config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MyApp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9376</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internal.config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># This annotation is added through the kcl code.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kustomize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.14.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the YAML configuration mentioned above, we only wrote one line of KCL code to add a <code>managed-by=kustomize-kcl</code> annotation to all deployment resources.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">resource </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> resource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"managed-by"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> resource </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"resource_list"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition, we have provided commonly used container and service configuration mutation and validation KCL models for Kustomize/Helm/KPT tools and will continue to improve them.</p><ul><li>See <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/kustomize_kcl_plugin" target="_blank" rel="noopener noreferrer">here</a> for more information about the Kustomize KCL plugin.</li><li>See <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/helm_kcl_plugin" target="_blank" rel="noopener noreferrer">here</a> for more information about the Helm KCL Plugin.</li><li>See <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/kpt_kcl_sdk" target="_blank" rel="noopener noreferrer">here</a> for more information about the KPT KCL Plugin.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multilingual-sdk">Multilingual SDK<a href="#multilingual-sdk" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In this new version, we have released a new kclvm-go SDK that integrates KCL into your Go application and provides rich APIs for interacting with KCL. You can click <a href="https://kcl-lang.io/docs/next/reference/xlang-api/go-api" target="_blank" rel="noopener noreferrer">here</a> for detailed API documents. In addition, we have also updated the following features and bug fixes:</p><ul><li>Thank @jakezhu9 for fixing unexpected KCL formatting API unit testing errors in CI Pipeline for kclvm-go.</li><li>Thank @Ekko for contributing to the bidirectional conversion support of Go struct and KCL schema. Please refer to:<ul><li><a href="https://github.com/kcl-lang/kcl-go/blob/main/pkg/tools/gen/genkcl.go#L23" target="_blank" rel="noopener noreferrer">Go struct -&gt; KCL schema</a></li><li><a href="https://github.com/kcl-lang/kcl-go/blob/main/pkg/tools/gen/gengo.go#L23" target="_blank" rel="noopener noreferrer">KCL schema -&gt; Go struct</a></li></ul></li><li>Support for conversion from KCL schema to protobuf message, see <a href="https://github.com/kcl-lang/kcl-go/blob/main/pkg/tools/gen/genpb.go#L25" target="_blank" rel="noopener noreferrer">here</a> for more.</li><li>Support APIs for obtaining schema types and instances from the KCL code, see <a href="https://kcl-lang.io/docs/reference/xlang-api/go-api#func-getschematype" target="_blank" rel="noopener noreferrer">here</a> for more.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-updates-and-bug-fixes">Other updates and bug fixes<a href="#other-updates-and-bug-fixes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>The KCL Python plugin function is not enabled by default. If you need to enable it, please refer to the <a href="https://kcl-lang.io/docs/reference/plugin/overview" target="_blank" rel="noopener noreferrer">plugin document</a>.</li><li>KCL playground supports code-sharing capabilities, which can be accessed by visiting the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a> and clicking on the playground button to experience.</li><li>See <a href="https://github.com/kcl-lang/kcl/milestone/3?closed=1" target="_blank" rel="noopener noreferrer">here</a> for more updates and bug fixes.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="documents">Documents<a href="#documents" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The versioning semantic option is added to the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a>. Currently, v0.4.3, v0.4.4, v0.4.5, and v0.4.6 versions are supported.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next">Next<a href="#next" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>It is expected that in the middle of 2023, we will release <strong>KCL v0.5.0</strong>. The expected key evolution includes:</p><ul><li>More IDE extensions, package management tools, Helm/Kustomize/KPT scenario integration, feature support, and user experience improvement.</li><li>Provide more out-of-box KCL model support for cloud-native scenarios, mainly including containers, services, computing, storage, and networks.</li><li>Support KCL Schema to directly generate Kubernetes CRD.</li><li>Support <code>kubectl</code> and <code>helmfile</code> KCL plugins, directly generating, mutating, and validating Kubernetes resources through the KCL code.</li><li>Support for mutating and validating YAML by running KCL code through the admission controller at the Kubernetes runtime.</li><li>More support for non-Kubernetes scenarios, such as data cleaning of AI models through the KCL schema and database schema integration support.</li></ul><p>For more details, please refer to <a href="https://github.com/kcl-lang/kcl/milestone/5" target="_blank" rel="noopener noreferrer">KCL v0.5.0 Milestone</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information, see <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL FAQ</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
        </item>
        <item>
            <title><![CDATA[KCL Introduction on OS2ATC 2022 Meeting]]></title>
            <link>https://kcl-lang.github.io/blog/2023-03-26-kcl-os2atc-meeting</link>
            <guid>https://kcl-lang.github.io/blog/2023-03-26-kcl-os2atc-meeting</guid>
            <pubDate>Sun, 26 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL Talk Cover]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="KCL Talk Cover" src="/assets/images/talk-cover-0faf160fe29f520a93d63588b334b9ee.jpg" width="2554" height="1436" class="img_ev3q"></p><p><a href="https://kcl-lang.github.io/talks/kcl-os2atc2022.pdf" target="_blank" rel="noopener noreferrer">Download PDF</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
            <category>Policy</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.4.6-alpha.1 Release Blog]]></title>
            <link>https://kcl-lang.github.io/blog/2022-kcl-0.4.6-alpha.1-release-blog</link>
            <guid>https://kcl-lang.github.io/blog/2022-kcl-0.4.6-alpha.1-release-blog</guid>
            <pubDate>Mon, 20 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL team is pleased to announce that KCL v0.4.6-alpha.1 is now available!</p><p>You can visit the <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.4.6-alpha.1" target="_blank" rel="noopener noreferrer">KCL release page</a> or the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a> to get KCL binary download link and more detailed release information.</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language. KCL improves the writing of numerous complex configurations, such as cloud-native scenarios, through its mature programming language technology and practice. It is dedicated to building better modularity, scalability, and stability around configurations, simpler logic writing, faster automation, and great built-in or API-driven integrations.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-content">Release Content<a href="#release-content" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>Lexical error recovery including numbers, literal values, parentheses, etc</li><li>KCL IDE plug-in supports error and warning display, go-to-definition, and other capabilities.</li><li>Some compiler error reporting improvements</li><li>KCL Playground supports code sharing capabilities</li><li><a href="https://github.com/kcl-lang/kcl/issues/434" target="_blank" rel="noopener noreferrer">KPT Tool KCL SDK</a></li><li><a href="https://github.com/kcl-lang/kcl/issues/426" target="_blank" rel="noopener noreferrer">Helm KCL Plugin</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next">Next​<a href="#next" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>KPM package management tool release</li><li>More KCL compiler syntax error recovery supports the release of new IDE plug-ins, with an expected performance improvement of 20 times</li><li>KCL integration of Kubernetes tools such as Helm and KPT release</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information, see <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL FAQ</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
        </item>
        <item>
            <title><![CDATA[The new playground of the KCL programming language is coming!]]></title>
            <link>https://kcl-lang.github.io/blog/2023-kcl-playground-0.4.5-release</link>
            <guid>https://kcl-lang.github.io/blog/2023-kcl-playground-0.4.5-release</guid>
            <pubDate>Fri, 17 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL team is pleased to announce that the new playground of KCL v0.4.5 is now available!</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language. KCL improves the complexity of writing numerous complex configurations, such as cloud-native scenarios, through its mature programming language technology and practice. It is dedicated to building better modularity, scalability, and stability around configurations, simpler logic writing, faster automation, and great built-in or API-driven integrations.</p><p>You can visit the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a> and click the playground link and play. In this new version, we support the ability to automatically compile and run KCL code, format it, and share code. Welcome to writing and sharing KCL codes.</p><p><img loading="lazy" src="/assets/images/kcl-website-playground-1521b165cb8c0b87f707ce615579d650.png" width="3352" height="966" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/kcl-playground-5d5f8f1e7b7cff22b250847debbef1c7.png" width="1400" height="509" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next">Next​<a href="#next" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>It is expected that in the middle of April 2023, we will release a new KCL Playground including KCL version selection, reference to Github code, and other capabilities.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information, see <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL FAQ</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
            <category>Playground</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.4.5 Release Blog]]></title>
            <link>https://kcl-lang.github.io/blog/2022-kcl-0.4.5-release-blog</link>
            <guid>https://kcl-lang.github.io/blog/2022-kcl-0.4.5-release-blog</guid>
            <pubDate>Mon, 27 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The KCL team is pleased to announce that KCL v0.4.5 is now available! This release is mainly aimed at improving the convenience and stability of KCL language writing, improving error information, and supporting more platforms including Windows version and more download methods. In KCL v0.4.5, users can eliminate more configuration templates by writing fewer KCL codes. In the new version, preliminary KCL Playground support is provided, which can be used to write and run KCL code online without installation. In addition, this release also includes many compiler error information optimization and bug fixes.</p><p>You can visit the <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.4.5" target="_blank" rel="noopener noreferrer">KCL release page</a> or the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a> to get KCL binary download link and more detailed release information.</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> is an open-source, constraint-based record and functional language. KCL improves the writing of numerous complex configurations, such as cloud-native scenarios, through its mature programming language technology and practice. It is dedicated to building better modularity, scalability, and stability around configurations, simpler logic writing, faster automation, and great built-in or API-driven integrations.</p><p>This blog will introduce the content of KCL v0.4.5 and recent developments in the KCL community to readers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="language-writing-convenience-improvement">Language Writing Convenience Improvement<a href="#language-writing-convenience-improvement" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lazy-validation-of-non-null-attributes-in-the-kcl-schema">Lazy Validation of Non-null Attributes in the KCL Schema<a href="#lazy-validation-of-non-null-attributes-in-the-kcl-schema" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In previous KCL versions, we have supported the lazy evaluation and validation capabilities of schema attribute cross-reference (including inheritance) and check expressions. In this version, we have supported more schema lazy evaluation capabilities such as the schema attribute non-null lazy validation. For example, for the following KCL codes:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Spec </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Before KCL v0.4.5, this statement will report an attribute non-null error. After v0.4.5, the schema non-null attribute lazy validation is supported</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Before KCL v0.4.5, directly executing the above code will throw an error that the <code>value</code> attribute of <code>spec</code> cannot be <code>None</code> at the <code>spec: Spec=Spec {</code> statement block of the <code>schema Config</code>, because only the <code>id</code> attribute of <code>spec</code> is assigned a value of <code>1</code>, and no value is assigned to the <code>value</code> attribute of <code>spec</code>.</p><p>After KCL v0.4.5, we will avoid throwing this error after supporting the lazy non-null validation capability of the schema attribute. That is, when the <code>spec.value="value"</code> and <code>spec.id=1</code> of the <code>config</code> attributes are merged, all the attributes of <code>config</code> will be checked recursively for non-null. At this time, all the values of the <code>spec</code> attribute are fully assigned (the value of the <code>id</code> attribute of <code>spec</code> is <code>1</code>, and the <code>value</code> attribute is <code>"value"</code>), the error that the required schema attribute is null will not be thrown.</p><p>Therefore, after KCL v0.4.5 and executing the above KCL code, we will get the complete YAML output as follows:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> value</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mutual-reference-of-configuration-block-attributes">Mutual Reference of Configuration Block Attributes<a href="#mutual-reference-of-configuration-block-attributes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In versions before v0.4.5, KCL has not yet supported the mutual reference of attributes within the configuration block, resulting in the need to define additional configuration variables or templates for reference in some scenarios, resulting in more configuration templates and duplicate codes, such as the KCL code shown below:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"app-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># `metadata.name` cannot directly reference the `name` attribute inside the `data` configuration.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>metadata.name</code> attribute of the <code>data</code> configuration block cannot directly reference the <code>name</code> attribute inside the <code>data</code>. We need to define an additional global variable <code>name</code> for reference.</p><p>After KCL v0.4.5, we support the feature of mutual reference of configuration block attributes, which can be used to eliminate more configuration templates, such as the KCL code shown below:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"app-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># Directly reference the name attribute of the `data` configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>metadata.name</code> attribute of the <code>data</code> configuration block can directly reference the <code>name</code> attribute inside the <code>data</code> without defining additional global variables.</p><p>The following YAML output can be obtained by executing the above KCL code:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here is a more complex example:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"global-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"metadata-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"app.kubernetes.io/name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># Directly reference `metadata.name`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"app.kubernetes.io/instance"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># Directly reference `metadata.name`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># Reference the global variable `name`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata  </span><span class="token comment" style="color:#999988;font-style:italic"># Reference global variables `metadata`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name  </span><span class="token comment" style="color:#999988;font-style:italic"># Reference `metadata` variables inside `data`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following YAML output can be obtained by executing the above code:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>⚠️ Note: The current KCL version does not support the backward reference of the internal attributes of the configuration block and the direct reference of global variables by skipping the internal scope. The referenced attributes need to be written in front of the configuration reference.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-language-features">New Language Features<a href="#new-language-features" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="index-formatting-of-string-format-member-function">Index Formatting of String Format Member function<a href="#index-formatting-of-string-format-member-function" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>After KCL v0.4.5, KCL supports the use of the index tag style format <code>&lt;format_ele_index&gt;[&lt;index_or_key&gt;]</code> in the <code>{}</code> format block for KCL variables of list and dictionary types similar to the Python language.</p><ul><li><code>&lt;format_ele_index&gt;</code> indicates the index that is needed to serialize list and dictionary-type elements.</li><li><code>&lt;index_or_key&gt;</code> indicates the list sub-element index or dictionary sub-element key value of the corresponding list and dictionary type element.</li></ul><p>For example, for the following KCL code</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 0[0] means taking the 0th element of ["Hello", "World"]: "Hello"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 0[1] means taking the 1th element of ["Hello", "World"]: ""World"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">listIndexFormat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"{0[0]}{0[1]}"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"Hello"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"World"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 0[0] means taking the 0th element of ["0", "1"]: "0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1[Hello] means taking {"Hello": "World"} dictionary element whose key value is Hello: "World"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dictIndexFormat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0{0[0]}, 1{0[1]}, Hello{1[Hello]}"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"Hello"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"World"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following YAML output can be obtained by executing the above code:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">listIndexFormat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HelloWorld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">dictIndexFormat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"00, 11, HelloWorld"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-playground">KCL Playground<a href="#kcl-playground" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In this update, we have updated the version of the KCL playground and support the automatic compilation and formatting of KCL code. You can visit the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a> and click the playground button to experience it.</p><p><img loading="lazy" src="/assets/images/kcl-website-playground-1521b165cb8c0b87f707ce615579d650.png" width="3352" height="966" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/kcl-playground-d3027fa33d624bf989178f11011fb2d5.png" width="3132" height="886" class="img_ev3q"></p><p>In the subsequent KCL versions, we will continue to update the KCL playground to support more capabilities, such as KCL version selection and code sharing.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="more-platforms-and-download-methods-for-kcl">More Platforms and Download Methods for KCL<a href="#more-platforms-and-download-methods-for-kcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="windows">Windows<a href="#windows" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>KCL Windows binary version can now be downloaded from <a href="https://github.com/kcl-lang/kcl/releases/" target="_blank" rel="noopener noreferrer">Github</a> manually. After the download, add <code>{install_location}\kclvm\bin</code> to the environment variable <code>PATH</code>.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$env:PATH += ";{install-location}\kclvm\bin;"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition, you can also install KCL through the Powershell script shown below:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">powershell -Command "iwr -useb https://kcl-lang.io/script/install.ps1 | iex"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We will support more Windows package management download methods in the future, such as <code>Scoop</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="more-download-methods">More Download Methods<a href="#more-download-methods" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In this version update, we support more KCL download methods, including scripts, Python, Go, Homebrew, and Docker one-click installation. For more details, please refer to <a href="https://kcl-lang.io/docs/user_docs/getting-started/install" target="_blank" rel="noopener noreferrer">KCL Download and Installation</a>, we will support more KCL installation methods in the future.</p><blockquote><p>⚠️ Note: For all the above operating systems and installation methods, if you want to use <a href="https://kcl-lang.io/docs/reference/plugin/overview" target="_blank" rel="noopener noreferrer">KCL Python plug-in</a>, you need to ensure that Python 3.7+ is installed and add the python3 command to your PATH environment variable.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bugfix">Bugfix<a href="#bugfix" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-configuration-merge-order-is-incorrect-when-the-right-value-of-a-non-configured-expression-exists">The configuration merge order is incorrect when the right value of a non-configured expression exists<a href="#the-configuration-merge-order-is-incorrect-when-the-right-value-of-a-non-configured-expression-exists" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Resource </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"8Gi"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Resource </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"4Gi"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Before KCL v0.4.5, executing the above code (main.k) will get unexpected configuration values because the KCL compiler incorrectly optimized the following form of equivalent merge configuration blocks:</p><div class="language-python3 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python3 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config: Config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource: r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource: Resource {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        memory = "4Gi"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After KCL v0.4.5, the incorrect configuration of the merge order is corrected. You can execute <code>main.k</code> and obtain the expected YAML output:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">r</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 8Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 8Gi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information, see <a href="https://github.com/kcl-lang/kcl/issues/422" target="_blank" rel="noopener noreferrer">KCL Issue #422</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-if-expression-type-mismatch-error-optimization">Configure if expression type mismatch error optimization<a href="#configure-if-expression-type-mismatch-error-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"A"</span><span class="token operator" style="color:#393A34">|</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Before KCL v0.4.5, for the configuration if expression, executing the above code will get the expected configuration value, resulting in the type unsoundness problem, because the KCL compiler incorrectly checks that the value <code>"2"</code> of the <code>A</code> attribute does not match the declared type <code>int</code>. After the KCL v0.4.5, this problem has been corrected. You can execute the above code to obtain the expected type mismatch error:</p><div class="language-stderr codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-stderr codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">KCL Compile Error[E2G22] : The type got is inconsistent with the type expected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---&gt; File main.k:1:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 |config: {"A"|"B": int} = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 1 ^  -&gt; got {str(A):str(2)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expect {str(A)|str(B):int}, got {str(A):str(2)}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information, see <a href="https://github.com/kcl-lang/kcl/issues/389" target="_blank" rel="noopener noreferrer">KCL Issue #389</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rule-statement-validation-does-not-work">Rule statement validation does not work<a href="#rule-statement-validation-does-not-work" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous KCL versions, when the following rule code is used (main.k), the constraint code of <code>ServiceCheckRule</code> will not take effect.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protocol KubeResourceProtocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule ServiceCheckRule </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> KubeResourceProtocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">svc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ServiceCheckRule </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After the improvement, we execute the above code and get an accurate validation failure error:</p><div class="language-stderr codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-stderr codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">KCL Runtime Error[E3B17] : Schema check is failed to check condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---&gt; File main.k:14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14 |ServiceCheckRule { -&gt; Instance check failed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ---&gt; File main.k:8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8 |    svc.name != "name" -&gt; Check failed on the condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Check failed on check conditions</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-block-attribute-type-inference-optimization">Configuration block attribute type inference optimization<a href="#configuration-block-attribute-type-inference-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"A"</span><span class="token operator" style="color:#393A34">|</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Before v0.4.5, we will get a type mismatch error here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        B </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Before KCL v0.4.5, executing the above code would result in an unexpected type mismatch, because the KCL compiler incorrectly deduced the type of the <code>c.data.A</code> attribute to the <code>str</code> type, resulting in a mismatch error with the string literal union type <code>"A"|"B"</code>. After KCL v0.4.5 was updated, this problem was corrected, and the expected YAML output could be obtained by executing the above code:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">A</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">B</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="assignment-statement-uses-schema-type-annotation-error-optimization">Assignment statement uses schema type annotation error optimization<a href="#assignment-statement-uses-schema-type-annotation-error-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Bar </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Before v0.4.5, we will get a runtime type mismatch error here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Before KCL v0.4.5, executing the above code will result in a runtime type mismatch error. After the version is updated, this type mismatch error will be optimized to compile time, and the error will be moved to the left to find this type of error earlier.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="error-on-kcl-module-type-with-the--operator">Error on KCL module type with the ?. operator<a href="#error-on-kcl-module-type-with-the--operator" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> math</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> math?</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Before v0.4.5, we will get an unexpected 'math is not defined' error here</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Before KCL v0.4.5, executing the above code will result in an unexpected undefined variable error because the KCL compiler does not correctly handle the <code>math</code> module type and the <code>?.</code> operators are used in combination. After KCL v0.4.5, such issues are fixed.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-updates-and-issues">Other Updates and Issues<a href="#other-updates-and-issues" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more updates and bug fixes, see <a href="https://github.com/kcl-lang/kcl/milestone/3" target="_blank" rel="noopener noreferrer">here</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="documents">Documents<a href="#documents" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The versioning semantic option is added to the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a>. Currently, v0.4.3, v0.4.4, and v0.4.5 versions are supported.</p><p><img loading="lazy" src="/assets/images/kcl-website-doc-version-ab26a60377e71734b94b0bc15c7e5c3d.png" width="3358" height="918" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>Two external contributors @thinkrapido and @Rishav1707 have participated in the KCL community, thank them for their enthusiasm and active participation in contributing.</li><li>Thank @Rishav1707 for establishing the Rust version of <a href="https://github.com/i-think-rapido/kcl-loader-rs" target="_blank" rel="noopener noreferrer">kcl-loader-rs</a> sub-project based on KCL, which supports the automatic generation of Rust structure according to the schema and configuration definition in the KCL file and the deserialization function from KCL value to Rust structure value.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next">Next<a href="#next" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>It is expected that in the middle of April 2023, we will release <strong>KCL v0.4.6</strong>. The expected key evolution includes:</p><ul><li>KCL language is further improved for convenience, the user interface is continuously optimized and experience is improved, user support and pain points are solved.</li><li>A new version of the KCL language server and <a href="https://github.com/kcl-lang/vscode-kcl" target="_blank" rel="noopener noreferrer">VSCode language plug-in</a>, the performance is expected to increase by <strong>20 times</strong>, and it is expected to support core basic capabilities such as code warning and error wavy line prompt, jump, reference search, etc.</li><li>Continuously improve the language ability for the pain points of Kubernetes Manifests configuration management scenarios. For example, design and provide the <a href="https://github.com/helm/helm" target="_blank" rel="noopener noreferrer">Helm</a> KCL Schema plug-in and provide the KCL SDK for the <a href="https://github.com/GoogleContainerTools/kpt" target="_blank" rel="noopener noreferrer">kpt</a> tool.</li><li><a href="https://github.com/kcl-lang/kpm" target="_blank" rel="noopener noreferrer">KCL package management tool called KPM</a> release. It is expected to support Git repo code dependency configuration and update, code download, and other basic capabilities.</li><li><a href="https://github.com/kcl-lang/kcl-playground" target="_blank" rel="noopener noreferrer">KCL Playground</a>: Support code sharing and KCL version selection.</li><li><a href="https://github.com/kcl-lang/kcl-go" target="_blank" rel="noopener noreferrer">KCL Go SDK</a>: More capability support such as supporting the bidirectional conversion of the KCL schema and Go structure</li><li><a href="https://github.com/kcl-lang/kclvm-py" target="_blank" rel="noopener noreferrer">KCL Python SDK</a>: More capability support.</li></ul><p>For more details, please refer to <a href="https://github.com/kcl-lang/kcl/milestone/4" target="_blank" rel="noopener noreferrer">KCL v0.4.6 Milestone</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information, see <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL FAQ</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
        </item>
        <item>
            <title><![CDATA[KCL Introduction on OSDT 2022 Meeting]]></title>
            <link>https://kcl-lang.github.io/blog/2022-kcl-osdt-meeting</link>
            <guid>https://kcl-lang.github.io/blog/2022-kcl-osdt-meeting</guid>
            <pubDate>Sat, 10 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL Talk Cover]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="KCL Talk Cover" src="/assets/images/talk-cover-069278176a8c865d410452e9204732f0.jpg" width="2548" height="1428" class="img_ev3q"></p><p><a href="https://kcl-lang.github.io/talks/kcl-osdt2022.pdf" target="_blank" rel="noopener noreferrer">Download PDF</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
            <category>Policy</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.4.4 Release Blog]]></title>
            <link>https://kcl-lang.github.io/blog/2022-kcl-0.4.4-release-blog</link>
            <guid>https://kcl-lang.github.io/blog/2022-kcl-0.4.4-release-blog</guid>
            <pubDate>Tue, 06 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[The KCL team is pleased to announce that v0.4.4 is now available! This release mainly adds the ability to customize YAML manifests output for KCL. Users can customize the style of YAML output by writing code and calling system functions without understanding the complex schema settings semantics. In addition, this release provides the latest KCL Python SDK, which can be used for Python users to directly integrate KCL. At the same time, we have greatly reduced the size of the KCL installation package. The average installation package size has been reduced to one-fifth of that of the previous version. It also includes a number of compiler error message optimization and bug fix. You can visit the KCL release page to get more detailed release information and KCL binary download link.]]></description>
            <content:encoded><![CDATA[<p>The KCL team is pleased to announce that v0.4.4 is now available! This release mainly adds the ability to customize YAML manifests output for KCL. Users can customize the style of YAML output by writing code and calling system functions without understanding the complex schema settings semantics. In addition, this release provides the latest <a href="https://github.com/kcl-lang/kclvm-py" target="_blank" rel="noopener noreferrer">KCL Python SDK</a>, which can be used for Python users to directly integrate KCL. At the same time, we have greatly reduced the size of the KCL installation package. The average installation package size has been reduced to one-fifth of that of the previous version. It also includes a number of compiler error message optimization and bug fix. You can visit the <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.4.4-alpha.2" target="_blank" rel="noopener noreferrer">KCL release page</a> to get more detailed release information and KCL binary download link.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>KCL is an open-source constraint-based record and functional language. KCL improves the writing of a large number of complex configurations through mature programming language technology and practice, and is committed to building better modularity, scalability and stability around configuration, simpler logic writing, fast automation and good ecological extensionality.</p><p>This blog will introduce the recent developments of KCL community to readers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="customize-yaml-manifest-output">Customize YAML Manifest Output<a href="#customize-yaml-manifest-output" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous KCL versions, the style of YAML output is hard coded in the KCL compiler, and users can set the <code>__settings__</code> meta attribute with different values to determine the YAML output style, which brings high complexity. Therefore, in version 0.4.4, we provide a system module function for developers to easily customize the YAML output style. The signature of this function is as follows:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">manifests</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">yaml_stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sort_keys </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ignore_private </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ignore_none </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sep </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"---"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This function is used to serialize the KCL object list into YAML output with the <code>---</code> separator. It has two parameters:</p><ul><li><code>values</code> - A list of KCL objects</li><li><code>opts</code> - The YAML serialization options<ul><li><code>sort_keys</code>: Whether to sort the serialized results in the dictionary order of attribute names (the default is <code>False</code>).</li><li><code>ignore_private</code>: Whether to ignore the attribute output whose name starts with the character <code>_</code> (the default value is <code>True</code>).</li><li><code>ignore_none</code>: Whether to ignore the attribute with the value of' None '(the default value is <code>False</code>).</li><li><code>sep</code>: Set the separator between multiple YAML documents (the default value is <code>"---"</code>).</li></ul></li></ul><p>Here's an example:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Deployment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"deploy"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replica </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"svc"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployments </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">manifests</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">yaml_stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">deployments </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> services</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First, we use the <code>import</code> keyword to import the <code>manifests</code> module and define two deployment resources and two service resources. When we want to output these four resources in YAML stream format with <code>---</code> as the separator, we can put them into a KCL list and use the <code>manifests.yaml_stream</code> function pass it to the <code>values</code> parameter (if there is no special requirement, the <code>opts</code> parameter can generally use the default value). Finally, the YAML output is:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replica</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replica</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> svc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: The feature of schema <code>__settings__</code> meta attribute setting YAML output style can still be used in v0.4.4. We will remove this feature in KCL v0.4.6 after the next two minor versions are released.</p></blockquote><p>For more information, see <a href="https://github.com/kcl-lang/kcl/issues/94" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/94</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="python-sdk">Python SDK<a href="#python-sdk" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In addition to the existing <a href="https://github.com/kcl-lang/kcl-go" target="_blank" rel="noopener noreferrer">KCL Go SDK</a>, this release also adds the KCL Python SDK. Using the Python SDK requires that you have a local Python version higher than 3.7.3 and a local pip package management tool. You can use the following command to install and obtain helpful information.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kclvm --user </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> python3 -m kclvm --help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-tool">Command Line Tool<a href="#command-line-tool" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Prepare a KCL file named <code>main.k</code></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Execute the following command and get the output:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m kclvm hello.k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The expect output is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">x0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">x1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="api">API<a href="#api" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>In addition, we can also execute KCL files through Python code.</p><p>Prepare a KCL file named <code>main.py</code></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kclvm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">program</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">exec</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> kclvm_exec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kclvm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">planner </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> planner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">planner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">plan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kclvm_exec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"hello.k"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">filter_by_path_selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Execute the following command and get the output:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 main.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The expect output is</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">x0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">x1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can see that the same output can be obtained through command line tools and APIs.</p><p>At present, the KCL Python SDK is still in the early preview version. The KCL team will continue to update and provide more functions in the future. For more information, see <a href="https://github.com/kcl-lang/kclvm-py" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kclvm-py</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-size-optimization">Installation Size Optimization<a href="#installation-size-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In the new KCL version, we split the built-in Python 3 of KCL, reducing the average size of the KCL binary compression package from 200M to 35M. Users can download and use KCL faster, and the Python plugin becomes an option. If you want to enable the KCL Python plugin, an additional requirement is that you have Python and pip package management tools that are higher than 3.7.3. For more details, please see <a href="https://github.com/kcl-lang/kcl-plugin" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-plugin</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bugfix">Bugfix<a href="#bugfix" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-call-error-information-optimization">Function Call Error Information Optimization<a href="#function-call-error-information-optimization" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In version 0.4.4, KCL optimizes the output of error messages when the number of function arguments does not match, and supports the display of function names and the number of argument mismatches</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Foo</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Error: "Foo" takes 1 positional argument but 3 were given</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Error: "f" takes 1 positional argument but 2 were given</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information, see <a href="https://github.com/kcl-lang/kcl/issues/299" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/299</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="formatting-error-of-interpolated-three-quote-string">Formatting Error of Interpolated Three Quote String<a href="#formatting-error-of-interpolated-three-quote-string" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous KCL versions, formatting the following code would incorrectly convert the three quotation marks with string interpolation into single quotation marks and cause compilation errors. In version 0.4.4, we have fixed the issue.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Before KCL v0.4.4, variable "bar" will be formatted as:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># foo = 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># bar = "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ${foo}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">${foo}</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information, see <a href="https://github.com/kcl-lang/kcl/issues/294" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/294</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="formatting-error-of-config-if-block">Formatting Error of Config If Block<a href="#formatting-error-of-config-if-block" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous KCL versions, formatting the following code would lead to incorrect indent levels. In version 0.4.4, we have fixed the issue.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Before KCL v0.4.4, variable "foo" will be formatted as:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># foo = [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     if True:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#         {key = "value"}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     {key = "value"}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="string-literal-type-check-error">String Literal Type Check Error<a href="#string-literal-type-check-error" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In previous KCL versions, formatting the following code would lead to incorrect indent levels. In version 0.4.4, we have fixed the issue.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Before KCL v0.4.4, we will get a unexpected type mismatch error.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"A"</span><span class="token operator" style="color:#393A34">|</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-issues">Other Issues<a href="#other-issues" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>For more issues, see <a href="https://github.com/kcl-lang/kcl/milestone/2?closed=1" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/milestone/2?closed=1</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="documents">Documents<a href="#documents" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">KCL website</a> preliminary establishment and improvement of Kubernetes scenarios <a href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/" target="_blank" rel="noopener noreferrer">related documents</a>.</p><p>For more information, see <a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">https://kcl-lang.github.io/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Three external contributors @my-vegetable-has-exploded, @possible-fqz, @orangebees have participated in the KCL community, thank them for their enthusiasm and active participation in contributing.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next">Next<a href="#next" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>It is estimated that by the end of January 2023, we will release KCL v0.4.5, and the key evolution is expected to include</p><ul><li>Continuous optimization of the KCL user interface, improvement of experience and user pain points.</li><li>More scenarios and ecology integration, such as Kubernetes and CI/CD Pipeline scenarios.</li><li>KCL Windows version support.</li><li>KCL package management tool <code>kpm</code> release.</li><li>The new version of KCL playground.</li></ul><p>For more information, see <a href="https://github.com/kcl-lang/kcl/milestone/3" target="_blank" rel="noopener noreferrer">KCL v0.4.5 Milestone</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>For more information, see <a href="https://kcl-lang.github.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">https://kcl-lang.github.io/docs/user_docs/support/</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Repo</a></li></ul><p>See the <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. 👏👏👏</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
        </item>
        <item>
            <title><![CDATA[40x Faster! We rewrote our project with Rust]]></title>
            <link>https://kcl-lang.github.io/blog/2022-kcl-rewrite-with-rust</link>
            <guid>https://kcl-lang.github.io/blog/2022-kcl-rewrite-with-rust</guid>
            <pubDate>Tue, 29 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Introduction]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Rust has quietly become one of the most popular programming languages. As an popular emerging system language, Rust has many great characteristics, such as its memory security mechanism, performance close to that of C/C++, an excellent development community and helpful documentation, tool chains and IDEs. In this blog, we will introduce the process of using Rust for a rewrite and gradually implementing the production environment, as well as the reasons for choosing Rust, any issues we have encountered, and the results of the rewrite.</p><p>The project we are using Rust to develop is called <a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a>. KCL is an open-source, constraint-based record and functional programming language. It leverages mature programming language technology and practice to facilitate the writing of many complex configurations. KCL is designed to improve modularity, scalability, and stability around configuration, simplify logic writing, speed up automation and create a thriving extension ecosystem. To learn more about specific KCL usage scenarios, please refer to the <a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">KCL website</a>. This blog will not go into too much detail about that.</p><p>KCL was written in Python before. After carefully evaluating the user experience, performance and stability, we decided to rewrite KCL in Rust, and the following benefits were obtained:</p><ul><li>Rust's powerful compilation checks and error handling led to fewer bugs.</li><li>There was a 66% improvement in end-to-end compilation and execution performance.</li><li>The language front-end parser performance improved by up to 20 times.</li><li>The language semantic analyzer performance improved by up to 40 times.</li><li>The average memory usage of the language compiler during compilation was roughly half of the original Python version.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-problems-have-we-encountered">What problems have we encountered<a href="#what-problems-have-we-encountered" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The compiler, build system or runtime uses Rust to do similar things in technology like projects of the same type in the community <a href="https://github.com/denoland/deno" target="_blank" rel="noopener noreferrer">deno</a>, <a href="https://github.com/swc-project/swc" target="_blank" rel="noopener noreferrer">swc</a>, <a href="https://github.com/vercel/turbo" target="_blank" rel="noopener noreferrer">turbopack</a>, <a href="https://github.com/rust-lang/rust" target="_blank" rel="noopener noreferrer">rustc</a>. We used Rust to completely build the front, middle and runtime of the compiler, and achieved some results, but we did not do this about a year ago.</p><p>A year ago, we used Python to build the entire KCL compiler implementation, which initially ran well due to Python’s ease of use, rich ecosystem, and the team's high research and development efficiency. However, as the codebase and number of engineers grew, code maintenance became increasingly difficult. To counter this, we enforced the usage of Python type annotations and employed stricter linting tools, as well as achieving &gt;90% code test coverage. Yet, runtime errors such as empty Python objects and missing attributes remained, and refactoring had to be done with caution.</p><p>As KCL users are mostly developers, any mishaps in the language or compiler internals were unacceptable, leading to a range of issues with user experience. Furthermore, programs written in Python had slow startup times, and their performance did not meet the efficiency demands of automating the online compilation and execution. Therefore, a compiler written in Python was unable to adequately meet use requirements.</p><p>Consequently, we decided to rewrite KCL in Rust to not only improve user experience, but to also benefit from Rust’s powerful compilation checks and error handling. This led to a 66% improvement in end-to-end compilation and execution performance, as well as a 20- and 40-fold improvement in the language front-end and semantic analyser performance, respectively. The average memory usage of the compiler during compilation was also roughly halved.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-use-rust">Why use Rust<a href="#why-use-rust" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>We chose Rust for the following reasons:</p><ul><li>We implemented a simple programming language stack virtual machine in Python, Go, and Rust and conducted a performance comparison, Rust was adopted under comprehensive consideration as Go and Rust had similar performance whereas Python had a large performance gap. The details of the stack virtual machine code implemented by the three languages are here: <a href="https://github.com/Peefy/StackMachine" target="_blank" rel="noopener noreferrer">https://github.com/Peefy/StackMachine</a>.</li><li>Rust has been widely utilized for compilers or runtimes of programming languages, especially in front-end infrastructure projects, and is present in various fields such as infrastructure, database, search engine, network, cloud-native, UI, and embedded systems, ensuring its feasibility and stability.</li><li>Considering that the subsequent project development will involve the direction of blockchain and smart contract, and a large number of blockchain and smart contract projects in the community are written by Rust.</li><li>Rust provides better performance and stability, making the system easier to maintain and more robust, while allowing developers to expose C APIs through FFI for multilingual use and expansion.</li><li>Rust's friendly support for Web Assembly (WASM) is extremely beneficial for the development of blockchain and smart contract projects.</li></ul><p>Based on the above reasons, we chose Rust instead of Go. In the whole rewriting process, we found that Rust's comprehensive quality is impressive because it not only provides high performance but also a sufficient abstraction, although there is some cost in certain language features such as lifetime. Nevertheless, its ecology is not as rich as other languages.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-difficulties-in-using-rust">What are the difficulties in using Rust<a href="#what-are-the-difficulties-in-using-rust" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Although we decided to rewrite the entire KCL project with Rust, most team members have no experience in writing a certain project with Rust, and I has only learned <a href="https://doc.rust-lang.org/book/" target="_blank" rel="noopener noreferrer">The Rust Programming Language</a>. I vaguely remember that I gave up when I learned about intelligent pointers such as <code>Rc</code> and <code>RefCell</code>. At that time, I didn't expect that there would be anything similar to C++ in Rust.</p><p>The risk of utilizing Rust is mainly the expense of learning the language, which is evidently discussed in a multitude of Rust blogs. Seeing that the overall structure of the KCL project had not been altered considerably, and some modules' designs and their code had been greatly improved for Rust, the entire rewrite was accomplished through a process of mastering Rust whilst practicing. When we set out to use Rust to create the whole project, time was spent on knowledge querying, compilation and debugging. As the project advanced, however, the main challenges that arose from utilizing Rust were mainly the transformation of our mindsets, as well as the efficiency of development.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mental-transformation">Mental transformation<a href="#mental-transformation" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>First of all, the syntax and semantics of Rust well absorb and integrate the concepts related to the type system in functional programming, such as the Abstract Algebraic Type (ADT). In addition, there is no concept related to "inheritance" in Rust. If you can't understand it well, even ordinary structure definitions in other languages may take a lot of time in Rust. For example, the following Python code may be defined like this in Rust.</p><ul><li>Python</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> dataclasses </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> dataclass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">KCLObject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@dataclass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">KCLIntObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KCLObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@dataclass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">KCLFloatObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KCLObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">float</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Rust</li></ul><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">enum KCLObject {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Int(u64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Float(f64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Of course, more time is spent fighting against the error reports of the Rust compiler itself. The Rust compiler will often cause developers to "run into a wall", such as borrowing check errors. Especially for the KCL compiler, its core structure is the Abstract Syntax Tree (AST), which is a recursive and nested tree structure.</p><p>It is sometimes difficult to give consideration to the relationship between variable variability and borrowing check in Rust, Just like the scope structure <code>Scope</code> defined in KCL compiler, for scenarios with circular references, it is used to display the interdependence of data that needs to be aware of, while making extensive use of intelligent pointer structures commonly used in Rust such as <code>Rc</code>, <code>RefCell</code> and <code>Weak</code>.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// A Scope maintains a set of objects and links to its containing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// (parent) and contained (children) scopes. Objects may be inserted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// and looked up by name. The zero value for Scope is a ready-to-use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// empty scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Clone, Debug)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct Scope {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The parent scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub parent: Option&lt;Weak&lt;RefCell&lt;Scope&gt;&gt;&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The child scope list.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub children: Vec&lt;Rc&lt;RefCell&lt;Scope&gt;&gt;&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope object mapping with its name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub elems: IndexMap&lt;String, Rc&lt;RefCell&lt;ScopeObject&gt;&gt;&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope start position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub start: Position,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope end position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub end: Position,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope kind.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub kind: ScopeKind,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development-efficiency">Development efficiency<a href="#development-efficiency" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The efficiency of utilizing Rust may appear low at first, but it will become substantially high upon gaining familiarity with it. Initially, if the team members have not been exposed to concepts such as functional programming and related coding practices, the development speed will be much slower than that of languages such as Python, Go, and Java. Nevertheless, once they become familiarized with the conventional methods and best practices of the Rust standard library, as well as the common fixes for Rust compiler errors, the development efficiency will be dramatically boosted, and they will be able to compose high-quality, safe, and efficient code naturally.</p><p>For instance, I ran into a Rust lifetime error in the following code. After troubleshooting for a lengthy duration, it became apparent that the lifetime inconsistency was due to neglecting to label lifetime parameters. Additionally, Rust’s lifetime is combined with concepts such as type system, scope, ownership, and borrowing inspection, resulting in a higher cost and complexity of understanding, with error reporting information often not as clear-cut as type errors. The lifetime inconsistency error reporting information can sometimes be somewhat inflexible, which may lead to a costly troubleshooting procedure. Of course, efficiency will be improved with increasing familiarity with the pertinent concepts.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct Data&lt;'a&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b: &amp;'a u8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// func2 omit lifecycle parameters, and func2 does not.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// The lifecycle of func2 will be deduced as '_ by the Rust compiler by default,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// which may lead to lifetime mismatch error.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl&lt;'a&gt; Data&lt;'a&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn func1(&amp;self) -&gt; Data&lt;'a&gt; {Data { b: &amp;0 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn func2(&amp;self) -&gt; Data {Data { b: &amp;0 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rewrite-revenue-ratio-using-rust">Rewrite revenue ratio using Rust<a href="#rewrite-revenue-ratio-using-rust" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>After spending several months using Rust to completely rewrite and steadily deploy the KCL project into a production environment, we have looked back on the whole process and found it highly rewarding.</p><p>From a technical point of view, the rewrite process not only trained us to quickly learn a new programming language and its associated knowledge, but it also enabled us to put them into practice. The whole rewrite process also made us reflect on the unrational design of the KCL compiler and modify it accordingly. For a programming language, this is a long-cycle project. We have learned that such a compiler system should be more stable, and secure, with legible code, fewer bugs, and better performance.</p><p>Although not all modules achieved a 40-fold improvement in performance (due to memory deep copy operations being the main bottleneck of some modules, such as the KCL runtime), I still think it is particularly beneficial. With enough experience in Rust, mental and development efficiency are no longer limiting factors.</p><p>Overall, although our team encountered obstacles while using Rust to rewrite the KCL project, we eventually succeeded. We have acquired invaluable knowledge and experience in the process, which will be immensely beneficial in the future.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>I personally think that the most important thing after using Rust to rewrite the project is whether I have learned a new programming language or whether Rust is very popular and we have written many fancy codes using Rust. The stability, startup-time, and automation-efficiency of the KCL compiler and language is significantly improved. Furthermore, with Rust's non-GC, high-performance, improved error handling, memory management, and lack of abstraction, the performance of KCL improves substantially as compared to other languages in similar fields. In short, the users of KCL are the biggest beneficiaries of the improvements made possible by Rust.</p><p>If you are interested in the KCL project, wish to use KCL for your personal use cases, or want to use Rust to participate in an open-source project, welcome to visit <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a> to join our community to participate in discussion and co construction 👏👏👏。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl</a></li><li><a href="https://github.com/Peefy/StackMachine" target="_blank" rel="noopener noreferrer">https://github.com/Peefy/StackMachine</a></li><li><a href="https://doc.rust-lang.org/book/" target="_blank" rel="noopener noreferrer">https://doc.rust-lang.org/book/</a></li><li><a href="https://github.com/sunface/rust-course" target="_blank" rel="noopener noreferrer">https://github.com/sunface/rust-course</a></li><li><a href="https://www.influxdata.com/blog/rust-can-be-difficult-to-learn-and-frustrating-but-its-also-the-most-exciting-thing-in-software-development-in-a-long-time/" target="_blank" rel="noopener noreferrer">https://www.influxdata.com/blog/rust-can-be-difficult-to-learn-and-frustrating-but-its-also-the-most-exciting-thing-in-software-development-in-a-long-time/</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Rust</category>
            <category>Performance</category>
            <category>Programming Language</category>
            <category>Compiler</category>
        </item>
        <item>
            <title><![CDATA[KCL Introduction on SETTA 2022 Meeting]]></title>
            <link>https://kcl-lang.github.io/blog/2022-kcl-setta-meeting</link>
            <guid>https://kcl-lang.github.io/blog/2022-kcl-setta-meeting</guid>
            <pubDate>Thu, 27 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL Talk Cover]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="KCL Talk Cover" src="/assets/images/talk-cover-05e9f3c2c0e70c2c01ff77b3baa1f795.jpg" width="2548" height="1424" class="img_ev3q"></p><p><a href="https://kcl-lang.github.io/talks/kcl-setta2022.pdf" target="_blank" rel="noopener noreferrer">Download PDF</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
        </item>
        <item>
            <title><![CDATA[KCL papers were accepted by SETTA 2022]]></title>
            <link>https://kcl-lang.github.io/blog/2022-kcl-setta-paper</link>
            <guid>https://kcl-lang.github.io/blog/2022-kcl-setta-paper</guid>
            <pubDate>Thu, 13 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Recently, the KCL paper written by the team members was accepted by SETTA 2022 International Conference.]]></description>
            <content:encoded><![CDATA[<p>Recently, the KCL paper written by the team members was accepted by SETTA 2022 International Conference.</p><p><img loading="lazy" src="/assets/images/kcl_paper_setta-fd6fd3c3ec523f850510540c49302bc4.png" width="756" height="852" class="img_ev3q"></p><p>The purpose of the Symposium on Dependable Software Engineering (SETTA) symposium is to bring international researchers together to exchange research results and ideas on bridging the gap between formal methods and software engineering. This is for instance reflected by the challenges in applying formal techniques and tools to engineering large-scale systems such as Cyber-Physical Systems (CPS), Internet-of-Things (IoT), Enterprise Systems, Cloud-Based Systems, and so forth.</p><p>The title of the paper "KCL: A Declarative Language for Large scale Configuration and Policy Management". The core contribution of this paper is to propose the KCL declarative language, development mechanism, and consistent workflow. Through the language model and constraint capabilities, we can improve the large-scale efficiency and liberate multi-team collaborative productivity of operational development and operation systematically while ensuring stability for large-scale configuration and policy management.</p><p>In addition, SETTA 2022 will hold an online conference from October 27 to October 28 (Beijing time), at which time the details of KCL papers will be shared and welcome to join <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a>. For details of SETTA 2022 meeting agenda, please refer to <a href="https://lcs.ios.ac.cn/setta2022/program.php" target="_blank" rel="noopener noreferrer">https://lcs.ios.ac.cn/setta2022/program.php</a></p><p>Note: KCL has been open-source in Github. Visit <a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl</a> for more information.</p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
        </item>
        <item>
            <title><![CDATA[The Landscape of Declarative Configuration]]></title>
            <link>https://kcl-lang.github.io/blog/2022-declarative-config-overview</link>
            <guid>https://kcl-lang.github.io/blog/2022-declarative-config-overview</guid>
            <pubDate>Thu, 15 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[The blog is only used to clarify the landscape of declarative configuration, KCL core concept and features, as well as the comparison with other configuration languages.]]></description>
            <content:encoded><![CDATA[<p>The blog is only used to clarify the landscape of declarative configuration, <a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> core concept and features, as well as the comparison with other configuration languages.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-the-landscape-of-declarative-configuration">1. The Landscape of Declarative Configuration<a href="#1-the-landscape-of-declarative-configuration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-importance-of-configuration">1.1 Importance of Configuration<a href="#11-importance-of-configuration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li>There are thousands of configuration updates every day because the software development and the configuration itself are gradually evolving, which has a high demand for large-scale efficiency.<ul><li><strong>The configuration is updated more frequently</strong>: The evolving business requirements, infrastructure requirements and other factors mean that the system needs to change constantly, and the configuration provides a low-cost way to change the system functions.</li><li><strong>The configuration scale is getting larger</strong>: A configuration is often distributed to different cloud sites, different tenants, different environments, etc.</li><li><strong>Wide configuration scenarios</strong>: Application, database, network, monitoring, etc.</li><li><strong>Various configuration formats</strong>: JSON, YAML, XML, TOML, various configuration templates such as Java Velocity, Go Template, etc.</li></ul></li><li>The stability of the configuration is crucial. One of the main reasons for system errors is that a large number of engineers frequently update the configuration. Table 1 shows several system error events caused by configuration.</li></ul><table><thead><tr><th>Time</th><th>Event</th></tr></thead><tbody><tr><td>2021.07</td><td>The Bilibili website in China went down because SLB Lua configuration code fell into an infinite loop with calculation errors</td></tr><tr><td>2021.10</td><td>KT Company in South Korea suffers major network interruption nationwide due to wrong routing configuration</td></tr></tbody></table><p>Table 1 System error events caused by configuration.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-classification-of-declarative-configuration">1.2 Classification of Declarative Configuration<a href="#12-classification-of-declarative-configuration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The cloud-native era has brought about rapid technological development, with a large number of declarative configurations. As shown in Fig. 1, declarative configuration can be generally divided into the following ways.</p><p><img loading="lazy" src="/assets/images/01-declarative-config-51ae2a21d367db31feb7268107ee18c8.png" width="1796" height="1076" class="img_ev3q"></p><p>Fig. 1: Classification of declarative configuration.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="121-structured-k-v">1.2.1 Structured K-V<a href="#121-structured-k-v" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Structured K-V meets the minimum data declaration requirements (int, string, list, dict, etc.). Declarative API meets the development demands of X as Data with the rapid development and application of cloud-native technology. Machine-readable and writable, human-readable.</p><ul><li>Pros.<ul><li>Simple syntax, easy to write and read.</li><li>Rich multilingual APIs.</li><li>Various path tools for data query, such as XPath, JsonPath, etc.</li></ul></li><li>Cons.<ul><li>Too much redundant information: when the configuration scale is large, it is difficult to maintain the configuration, because important configuration information is hidden in a large number of irrelevant repetitive data details.</li><li>Lack of functionality: constraint, complex logic, test, debug, abstraction, etc.</li><li><a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a>'s patches are basically by fixing several patch merge strategies</li></ul></li></ul><p>Representative technologies of structured KV include:</p><ul><li>JSON/YAML: It is very convenient for reading and automation, and has different languages API support.</li><li><a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a>: It provides a solution to customize the Kubernetes resource base configuration and differential configuration without <strong>template</strong> and <strong>DSL</strong>. It does not solve the constraint problem itself, but needs to cooperate with a large number of additional tools to check constraints, such as <a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">Kube-linter</a>、<a href="https://github.com/bridgecrewio/checkov" target="_blank" rel="noopener noreferrer">Checkov</a>. Fig. 2shows the typical working mode of Kustomize.</li></ul><p><img loading="lazy" src="/assets/images/02-kustomize-244059a1d48b94791b1df4c33377a5a2.png" width="1222" height="1220" class="img_ev3q"></p><p>Fig. 2: Typical working mode of Kustomize.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="123-templated-k-v">1.2.3 Templated K-V<a href="#123-templated-k-v" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>The Templated KV has the capability of static configuration data and dynamic parameters, and can output different static configuration data with one template+dynamic parameters. The advantages and disadvantages are as follows:</p><ul><li>Pros.<ul><li>Simple configuration logic and loop support.</li><li>External dynamic parameter support.</li></ul></li><li>Cons.<ul><li>It is easy to fall into the trap that all configurations are template parameters.</li><li>When the configuration scale becomes larger, it is difficult for developers and tools to maintain and analyze them.</li></ul></li></ul><p>Representative technologies of templated KV include:</p><ul><li><a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm</a>: The package management tool of Kubernetes resources, which manages the configuration of Kubernetes resources through the configuration template. Fig. 3 shows a Helm Jenkins Package ConfigMap configuration template. It can be seen that these templates are very short with simple logic. A series of resource configurations suitable forKubernetes basic components are installed through package management and additional configuration parameters. Compared with the simply templatedK-V, Helm provides template storage, reference and semantic version management capabilities. Compared with Kustomize, Helm is more suitable for managing external Charts but is not good at multi-environment and multi-tenant configuration management.</li><li>Other configuration templates: Java Velocity, Go Template and other text template engines are very suitable for HTML writing templates. However,when used in configuration scenarios, they are difficult for developers and tools to maintain and analyze.</li></ul><p><img loading="lazy" src="/assets/images/03-helm-c5b60deaf615e2e5d7a0f0d90cbda18c.png" width="2108" height="1248" class="img_ev3q"></p><p>Fig. 3: Helm Jenkins Package ConfigMap configuration template.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="123-programmable-k-v">1.2.3 Programmable K-V<a href="#123-programmable-k-v" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p><code>Configuration as Code (CaC)</code> uses code to generate configuration, just like engineers only need to write advanced GPL code, rather than manually writing error-prone and difficult-to-understand server binary code.</p><ul><li><p>Configuration changes are treated as seriously as code changes, and unit tests and integration tests can also be executed.</p></li><li><p>Code modularization is a key reason why maintaining configuration code is easier than manually editing configuration files such as JSON/YAML.</p></li><li><p>Capability</p><ul><li>Necessary programming language abilities (variable definitions, logical judgments, loops, assertions, etc.).</li><li>Necessary template capability, which supports the definition of data templates and the use of templates to obtain new configuration data.</li><li>Code modularity: structure definition and package management.</li><li>Machine-readable and writable, human-readable and writable.</li></ul></li><li><p>Pros.</p><ul><li>Necessary programming ability.</li><li>Code modularization and abstraction.</li><li>Configuration template and override ability.</li></ul></li><li><p>Cons.</p><ul><li>Insufficient type check.</li><li>Insufficient constraint capacity.</li><li>Many runtime errors.</li></ul></li></ul><p>Representative technologies of programmable KV include:</p><ul><li><a href="https://github.com/rix0rrr/gcl" target="_blank" rel="noopener noreferrer">GCL</a>: A declarative configuration programming language implemented in Python provides the necessary language capabilities to support template abstraction. However, the compiler itself is written in Python, and the language itself is interpreted and executed. For large template instances (such as Kubernetes models), the performance is poor.</li><li><a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">HCL</a>: A Go implementation structured configuration language. The native syntax of HCL is inspired by libucl and nginx configurations. It is used to create a structured configuration language that is friendly to humans and machines, mainly for DevOps tools, server configurations, and resource configurations as a <a href="https://www.terraform.io/language" target="_blank" rel="noopener noreferrer">Terraform language</a>.</li><li><a href="https://github.com/google/jsonnet" target="_blank" rel="noopener noreferrer">Jsonnet</a>: A data template language implemented in C++, suitable for application and tool developers, can generate configuration data and organize, simplify and manage large configurations without side effects.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="124-typed-k-v">1.2.4 Typed K-V<a href="#124-typed-k-v" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>Capability<ul><li>Based on programmable K-V, typed K-V has more capabilities of type constraints.</li></ul></li><li>Pros.<ul><li>The configuration merge is completely idempotent, which naturally prevents configuration conflicts.</li><li>Rich constraint syntax for writing configuration.</li><li>Abstract the type and value constraints into the same form, which is simple to write.</li><li>Configuration order independent.</li></ul></li><li>Cons.<ul><li>The concepts of graph merging and idempotent merging are complex, and the understanding cost is high.</li><li>The mixed definition of type and value improves the degree of abstraction and the cost of understanding. All constraints are checked at runtime, and there is a performance bottleneck for the large-scale configuration code.</li><li>It is difficult to implement multi-tenant and multi-environment scenarios that want to configure coverage and modification.</li><li>For constrained scenarios with conditions, the user interface for writing hybrid definitions of definition and verification is unfriendly.</li></ul></li></ul><p>Representative technologies of typed KV include:</p><ul><li><a href="https://github.com/cue-lang/cue" target="_blank" rel="noopener noreferrer">CUE</a>: The core problem CUE solves is "type checking", which is mainly used in configuration constraint verification scenarios and simple cloud native configuration scenarios.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="125-modeled-k-v">1.2.5 Modeled K-V<a href="#125-modeled-k-v" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li>Pros.<ul><li>High-level language modeling capability as the core description<ul><li>Modeling</li><li>Immutability</li><li>Constraints</li></ul></li><li>High scalability through automatic merge mechanism of isolated config blocks.</li><li>Writing and testing methods like a high-level programming language.</li><li>Machine-readable and writable, human-readable and writable.</li></ul></li><li>Cons.<ul><li>The expansion of new models and ecological construction requires certain R&amp;D costs</li></ul></li></ul><p>Representative technologies of modeled KV include:</p><ul><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a>: A declarative configuration and policy programming language implemented by Rust, which improves the writing of a large number of complex configurations through mature programming language technology and practice, and is committed to building better modularity, scalability and stability around configuration, simpler logic writing, fast automation and good ecological extensionally. Fig. 4 shows a typical scenario of KCL writing application delivery configuration code.</li></ul><p><img loading="lazy" src="/assets/images/04-kcl-app-code-a5796bf098450b2ef34f45157335f0f8.png" width="962" height="1030" class="img_ev3q"></p><p>Fig. 4: A typical scenario of KCL writing application delivery configuration code.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-guidelines-and-best-practices-for-different-declarative-configurations">1.3 Guidelines and Best Practices for Different Declarative Configurations<a href="#13-guidelines-and-best-practices-for-different-declarative-configurations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><ul><li><p>Configuration scale: For small-scale configuration scenarios, we can use YAML/JSON and other configurations, such as the simple configuration of the application itself and CI/CD configuration. In addition, for the requirements of multi-environment and multi-tenant in small-scale configuration scenarios, Kustomize's overlay capability can be used to implement operations such as merging and covering simple configurations.</p></li><li><p>The necessity of model abstraction and constraint: For large-scale configuration scenarios, especially for those with urgent needs for configuration model and O&amp;M feature R&amp;D and precipitation of multi-tenant and multi-environment, the K-V method of coding, typing and modeling can be used.</p></li></ul><p>In addition, consider the use scenarios of different declarative configurations:</p><ul><li>YAML is recommended if you need to write structured static K-V or use Kubernetes' native tools.</li><li>HCL is recommended if you want to use programming language convenience to remove boilerplate with good human readability, or if you are already a Terraform user.</li><li>CUE is recommended if you want to use a type system to improve stability and maintain scalable configurations.</li><li>KCL is recommended if you want types and modelings like a modern language, scalable configurations, in-house pure functions and rules, and production-ready performance and automation.</li></ul><p>Different from other languages of the same type in the community, KCL is a static strongly typed compilation language for application developers and adopts modern language design and technology.</p><blockquote><p>Note that this blog will not discuss the general language used for writing configuration. The general language is usually overkill, that is, it goes far beyond the problems that need to be solved. There are various security problems in the general language, such as the ability boundary problem (starting local threads, accessing IO, network, code infinitive looping and other security risks). For example, in the music field, there are special notes to express music, which is convenient for learning and communication, It can not be expressed clearly in general language.</p><p>In addition, because of its various styles of the general language, which has the cost of unified maintenance, management and automation. The general language is usually used to write the client runtime, which is a continuation of the server runtime. It is not suitable for writing configurations that are independent of the runtime, and it is compiled into binary and started from the process finally. Besides, the stability and scalability are not easy to control. However, the configuration language often be used to write data, which is combined with simple logic, and it describes the expected final result, which is then consumed by the compiler or engine.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-kcl-core-features-and-use-cases">2. KCL Core Features and Use Cases<a href="#2-kcl-core-features-and-use-cases" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The core features of KCL are its <strong>modeling</strong> and <strong>constraint</strong> capabilities, and the basic functions of KCL revolve around the two core features. In addition, KCL follows the user-centric configuration concept to design its basic functions, which can be understood from two aspects:</p><ul><li><strong>Domain model-centric configuration view</strong>: With the rich features of KCL language and <a href="https://kcl-lang.io/docs/tools/cli/openapi/" target="_blank" rel="noopener noreferrer">KCL OpenAPI</a> tools, we can directly integrate a wide range of well-designed models in the community into KCL (such as the K8s resource model). We can also design and implement our own KCL models or libraries according to different scenarios, forming a complete set of domain models for other configuration end users to use.</li><li><strong>End user-centric configuration view</strong>: With KCL's code encapsulation, abstraction and reuse capabilities, the model architecture can be further abstracted and simplified (for example, the K8s resource model is abstracted into an application-centered server model) to <strong>minimize the end user configuration input</strong>, simplify the user's configuration interface, and facilitate manual or automatic API modification.</li></ul><p>No matter what configuration view is centered on, for configuration code, there are requirements for configuration data constraints, such as type constraints, required/optional constraints on configuration attributes, range constraints, and immutability constraints. This is also one of the core issues KCL is committed to solving. KCL mainly contains the core features shown in Fig. 5.</p><p><img loading="lazy" src="/assets/images/05-kcl-core-feature-3e7c15549a3873eb274b09ef5494a734.png" width="892" height="878" class="img_ev3q"></p><p>Fig. 5: KCL core features.</p><ul><li><strong>Easy-to-use</strong>: Originated from high-level languages ​​such as Python and Golang, incorporating functional language features with low side effects.</li><li><strong>Well-designed</strong>: Independent Spec-driven syntax, semantics, runtime and system modules design.</li><li><strong>Quick modeling</strong>: <a href="https://kcl-lang.io/docs/reference/lang/tour#schema" target="_blank" rel="noopener noreferrer">Schema</a>-centric configuration types and modular abstraction.</li><li><strong>Rich capabilities</strong>: Configuration with type, logic and policy based on <a href="https://kcl-lang.io/docs/reference/lang/tour#config-operations" target="_blank" rel="noopener noreferrer">Config</a>, <a href="https://kcl-lang.io/docs/reference/lang/tour#schema" target="_blank" rel="noopener noreferrer">Schema</a>, <a href="https://kcl-lang.io/docs/reference/lang/tour#function" target="_blank" rel="noopener noreferrer">Lambda</a>, <a href="https://kcl-lang.io/docs/reference/lang/tour#rule" target="_blank" rel="noopener noreferrer">Rule</a>.</li><li><strong>Stability</strong>: Configuration stability built on <a href="https://kcl-lang.io/docs/reference/lang/tour/#type-system" target="_blank" rel="noopener noreferrer">static type system</a>, <a href="https://kcl-lang.io/docs/reference/lang/tour/#validation" target="_blank" rel="noopener noreferrer">constraints</a>, and <a href="https://kcl-lang.io/docs/reference/lang/tour#rule" target="_blank" rel="noopener noreferrer">rules</a>.</li><li><strong>Scalability</strong>: High scalability through <a href="https://kcl-lang.io/docs/reference/lang/tour/#-operators-1" target="_blank" rel="noopener noreferrer">automatic merge mechanism</a> of isolated config blocks.</li><li><strong>Fast automation</strong>: Gradient automation scheme of <a href="https://kcl-lang.io/docs/reference/lang/tour/#kcl-cli-variable-override" target="_blank" rel="noopener noreferrer">CRUD APIs</a>, <a href="https://kcl-lang.io/docs/reference/xlang-api/overview" target="_blank" rel="noopener noreferrer">multilingual SDKs</a>, <a href="https://github.com/kcl-lang/kcl-plugin" target="_blank" rel="noopener noreferrer">language plugin</a></li><li><strong>High performance</strong>: High compile time and runtime performance using Rust &amp; C and <a href="https://llvm.org/" target="_blank" rel="noopener noreferrer">LLVM</a>, and support compilation to native code and <a href="https://webassembly.org/" target="_blank" rel="noopener noreferrer">WASM</a>.</li><li><strong>API affinity</strong>: Native support API ecological specifications such as <a href="https://github.com/kcl-lang/kcl-openapi" target="_blank" rel="noopener noreferrer">OpenAPI</a>, Kubernetes CRD, Kubernetes YAML spec.</li><li><strong>Development friendly</strong>: Friendly development experiences with rich <a href="https://kcl-lang.io/docs/tools/cli/kcl/" target="_blank" rel="noopener noreferrer">language tools</a> (Format, Lint, Test, Vet, Doc, etc.) and <a href="https://github.com/kcl-lang/vscode-kcl" target="_blank" rel="noopener noreferrer">IDE plugins</a>.</li><li><strong>Safety &amp; maintainable</strong>: Domain-oriented, no system-level functions such as native threads and IO, low noise and security risk, easy maintenance and governance.</li><li><strong>Rich multi-language SDK</strong>: <a href="https://kcl-lang.io/docs/reference/xlang-api/go-api" target="_blank" rel="noopener noreferrer">Go</a>, <a href="https://kcl-lang.io/docs/reference/xlang-api/python-api" target="_blank" rel="noopener noreferrer">Python</a> and <a href="https://kcl-lang.io/docs/reference/xlang-api/rest-api" target="_blank" rel="noopener noreferrer">REST APIs</a> meet different scenarios and application use prelude.</li><li><strong>Production-ready</strong>: Widely used in production practice of platform engineering and automation at Ant Group.</li></ul><p><img loading="lazy" src="/assets/images/06-kcl-code-design-7bff376999fc4837c5a5041be6655915.png" width="520" height="394" class="img_ev3q"></p><p>Fig. 6: KCL core design.</p><p>For more language design and capabilities, see <a href="https://kcl-lang.io/docs/reference/lang/tour" target="_blank" rel="noopener noreferrer">KCL Documents</a>. Although KCL is not a general language, it has corresponding application scenarios. As shown in Fig. 6, developers can write <strong>config</strong>, <strong>schema</strong>, <strong>function</strong> and <strong>rule</strong> through KCL, where config is used to define data, schema is used to describe the model definition of data, rule is used to validate data, and schema and rule can also be combined to use models and constraints that fully describe data, In addition, we can also use the lambda pure function in KCL to organize data code, encapsulate common code, and call it directly when needed.</p><p>For use cases, KCL can perform structured K-V data validation complex configuration model definition and abstraction, strong constraint verification to avoid configuration errors, automation integration and engineering expansion. These features and use cases are described below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-validation-of-structured-data">2.1 Validation of Structured Data<a href="#21-validation-of-structured-data" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>As shown in Fig 7, KCL supports format validation of JSON/YAML data. As a configuration language, KCL covers almost all features of OpenAPI in terms of validation. In KCL, the configuration data can be constrained by a structure definition. At the same time, it supports user-defined constraint rules through check blocks, and writing validation expressions in the schema to verify and constrain the attributes defined in the schema. The check expression can be used to clearly and simply verify whether the input JSON/YAML meets the corresponding schema structure definition and check constraints.</p><p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeEAAACtCAMAAACweTefAAACT1BMVEUAAAAAAAD3x6suUo33yq0HBwcAAAD2yawAAAAODg6xn6IAAAAMDAwyVI8vUI0QEBASEhItUY4AAAARITwREREoTYYSJlSDhJs1VY9HYJMAAAAGBgYAAAAbGxtrdZfow6pMY5M7WZFLS0tGRkYNDQ0tUI4AAAAAAAA4ODgtLS0kJCRkcpYyU5Beb5UAAAAsToyunqIRERExU4/4yqwuUY4AAAApTYxrdphcbZX2yq34y6zIrqYyU4/0x6ssUI3ww6RcXFxWVlaqm6FMY5MAAAAsT41nZ2dRUVH3yqwBAQH3yKrivJ4xVJAwUo7rw6rivqnTtagTExP2yKizoqJFX5KFhZv4yqy9qKIXFxcWFhZ7fpj4y63///8AAAAvUo+Tjp6Vp8aqqqqXqMcyMjKysrKAgIBMTEzMzMwpKSnU1NRUVFR+fn7t7e319fUJCAgSEhLZ2dkkJCTx8fHj4+O3t7dXV1fX19eMjIwcHByhoaHAwMAsLCz9/f3xxqoPDQz7+/vIyMhgYGBbW1sYFhPp6enb29tycnI1KyT4+PiQkJBlZWXFoYleTUEiIiLuw6Z2dnY5OTmmpqZsWUw+Pj7nvaGIiIixkHt6enpISEhEREQnIBvUtqe3pKN1YFJJPDOhl6BoaGjS0tK7u7vqwqvf39+UlJSWe2lnVEc1NTXhvanOqI9ANCzOzs7ExMSvr6+ck5+EhIRtbW2OdGPHrqWdnZ2amprVr5W3loCsjHijhXGBalpQQjjPsqbft5xQUFBXRzzas5gwJyG8pqR3fZnBqqSXrgzuAAAAW3RSTlMAgECAwPgy/lflVhzw7ljcw2knCrgUBf3lubGQEfKFKvf78fGjd0478PDw6tuIRSr+z72gmWsc/vzq2cyIUkQT9fPUsWE29/J+dh4I+spt3NSVOOjU0bKSbltNjHfLIQAADgRJREFUeNrs28trE1EUx/Hri4DQQJFoBbFmUVxYH1hRWx8FQRCrVdDdr+d25UqIWzeTzSyySJhFKVlMO+mikNBkIaSQNokhDfUPc+4EGdKqTDOT9DY5H2h6mUO7+TLTuclUnDWJ+FWxOH1XKtfPu6akctld3Rzcwem3QsTvCzZoj2feS/lsHthYVTbh2vKW2xjwwdhCUk48einYID2X8unqbgynY+fBtaScuirYoCwtf1rdwamKbW7NTQs2CFcSLxagh7nF14JF7f7sHWhjSz7na3XE4u+Su9CGcU2+TwgWoRn5ZBs62Xw3+1iwyMTlYQx62U0+FCwyyw+gnY0Pi4JF5AW0dHFJsEhM63aF/mNOsCg8+ghNbX/m9zAjEJca/hHuMm7N8rY4tMTEU2jrl5wRLKQLcgP6ejJxRbBQrkw8gcZ+8kkc1uvkT+js8K5goSzNoz8x44SDcr6MPrwRbEhvdjTMAoC8aTYAVDMpqjRagGWae/D5g2NylEMfFgQLZQ5BrVEGqKUpYwFtIkoR2etYJ8rD5w+iKgx+HiCceQSlClsdSh8A+0RrllEnco4U9gfRFV7mjxHDmPqBoFThHNEegAxlvCOVek/hngGMYqnp1KHUnKaT7RZeb7RzVQPB7chJwfqWkFsnKVwkqsLlfevyCx8Z1GxSKhawlyaXrQpnvWXGQnDJR4L17aX8heCFU0QduFpEe8cKHx1UyKyWnRQ5QIfseqtElFPLSi37nRoI7il/ThxCXO4geGFFFSwTZY8X7h0cdE/nJpmoEdUBSxWueb/AIRvBHc4K1rdJuX2Swo5JtuVV3f9L4Z7BHlEZQJHIyhMdAMhQDu4ynU4TpRDctQnB+jYjDSBw4Q72u3fJae8VB7Wewj2Dblb1A5b7ZQCodAvnSkoMgf3gcziECxJB+PvhJlFWvZpWt9mRwv6gRlQE0CATZe90NlKUU8t9AAc4ifOCDa9wK022oUJlstmSG1EVrmZd8PiDWIcy6+rWeQ3WNyoYqBLlELOp0oLjHgS48F+cfmEUiRz16mnHVGGPBcUfqLhkEtmWdzCVJpva3lWb0t37NS4cTvSFiwUHrlKhaQHZUsYu1GOAVeiy4PEHaK25q4YBV75pN/PFQkPN23annYWLCw9DXKP/ZPmXzeuC9e8itLcqBePCjAuPKy484iZvQXtcOORuSXsbNwUb6cK8H+bCjAuPr7NQePuyYH1LPIP2+F6a98OMC48xLjzi7r+C9rjw4O6l5dDgP7amBBtU4ZUhkfg33g9zYcaFxxgXHnXxO/oX5ifxQrmof2HeLXFhxoXHGBcecZO3uPBoOwu7pYifxLtNkRMaOwuFI94Pn/u6ErEjhe+di9g9LqxV4Rv0JWLEhfUqfGklYiNf+Dd79/KbRBDAcbw9bANKxNTGGGs92Kb1kWh68K7GaDx60+Q30ZVH0QItu8DyirwWAiQECCGUeBAQkh7apo3ttX+bM6D1rRV27Rbmm/RxaEO2n7LMLJOdD2e48DAr8QYWziroV9lT8UO1Ao5qiEYZSz+fYRHyRqscp0B4iPkwIRmw4mkSxA/VAzjKFjaKsGVf1Dbyg8A0a4q81ir1hIXTWbDEUyNsXYG2/SC8ROZYxKVVJHeywvU1D2iNEhOW8oXmQQ5AbL+QbTPhuLjX3OkLx/17Bf/oC5uuQdu8nuGF7zwYXDgR2gewTjJUWC1u5pVolBIfFhXF5aLCyXQp6V3tCR+E8srbBBfWVFj/sTRZcdgAZA9zVLhZjAOekAI/6QAqCaBNZCDsVZlwwwFEWvh9eq/Em+pljqxolXs8hGWSQG7Nz4Rde2DaTtR9oNkCqLmCwWCCRJhwtihKJzkfNpGbLFK0aVQ6NB7CeJNCuBhjwl4RtN1NJAOgFQJIvrWx/Ew4lw15U9LgwoabAq/7vhd+ep4lEKdGbewaRDjidZdrYMLFEmhOJ7JR0DYDKEW/G0uvRJsjLEzs2iZ6DSIMV5OoPeEk88x5a6gQN+AmAYhEBtx1iQp78hKwWh1lYWibe00z4XO3hhLuUsqesJw+3KmUXR7Eo+VKZdN2iNhmtBLePIxTYWw47eHQweAr8bjwicyHCzIgJSlzPKkCaqnh3PUAkOqN1E47D3gcG4dKDnBsQy5Vk2J88NkSF+areLgwF+bCXHg0hcdjJd44C5+GFQDvrnLh0Rbm82EuzIW5MBc2svCHM1x4mJV4xhfmY2k+H+bCXJgLc+FRFb7zYASFz16eGltheuz/NJZ++Z/SdiXeWUIuTw0pvB4/pcLs2I8v/PHFf+rjP82HJ//SLCHsOI8lnC7bUm38XFlGzIjCxzz203WPeF2F14CVkOeXwlU9hGOtz19j6BXnwkxYv7M0E0bDj1YztQ3J4dyNyQogK1R49W2q8s/C+SyASooKRtljFhpgvUkBPvTyp5AKtVG32VIUd8cWtb0JAoU3oFUljc7Sp22fByqs20iLCSfSkuqyt6rtbkkqJV5vAPSjLKvpjvufhXO+15CK1Ky9UaSCAe8WgI7XCfTNsJEAUv5gOYZkGDvRDDWPygiEwgCikiYjrXHcnfYPwqQaqq5APJTlblYJdIAjYYQGOUvbG1gtgdraU3b6uVkAUG8eCQfLYML2ABCjpAnQHA4ExKL8B2F+j/ghhNcgVmPIRwuFghJXytUOE94aXBgbXZ9EiULxtpMKt0NuxH2RI+FmpScsRZMUN/4WrMQGAonwBhfWSxjOPFoNwCNJgFJXi0B+COEMYYj5EmJFGYHtkgKxufVF2O2L94SRCzdsGSkEVnCTCsO5z4X1EpbTHbhK7UY46Ug47bDV9qsNJhwVgwMIw+UGEHVtbqZrVLjjilW3joRru+gL0/JJuHqk9iYTlosyF9ZDOA/AH4Faq7chHZT8MaiK0qkgLGGr7h9UOGEDEPRRYTi7ZXwRjvuYPspBUQR2kmjWAcQaO0wY4cZvhfnutIa6Ls2EC13QqhEq7CfhvrAoivkkgIriglzcr0QjyFULdrFRR08Yh+R3wqO+K56BV+KVHt17fG3+e+GDHNDtWW1H7DJiigeqCORrtVo+A2BXcQOZfC0IINdeVbYA0J8D1FpuTIUNvIpn8u5Dk8k0rdtVS8ktZ163uPDJCU/000uYEMFiNlvPT/xjp/6dh/ERvqD7nUtf/adO60o8nYWFz8J8Jd4JCMfVTGvlNAjzVTyDCRNiMVutM1x4ZIUtE710Eyb1R4/n5wkXPjFhs97CT+6aFhenJ/rxlXijJyyM1S4A7y9x4dEWNsJ8WGrZu45H167fnLMIAiFkmQuPjLDqV+7dEATz+YXJu6bbU9Nnr1y4OEHTXjjmXk/4K/v5msNRIlz4fwjHt2vzFmF59uHSlYnv0lhYjRyUrt2wEIFeoJxZmJ2lSyanuLDewrGV3euCddZ0NJzVRzhTyV4XLMsLT0xLZ789NfDdafUVlsT7gvnpYu+Zq59wKz8vWGae3D478XN830MdheXudeH83d6fXT9hd+W+xbxg+tWjcGFdhbdWb1oWFtmlJB2F12s3/vA/xIV1E5bEexbz7BL7Bf2EY9ulOcvC7T+85nLhAVok95WIij/ktmfZ84qNq3QUluz3BOtxxsmG2p02u7eX7cr4WmfNYzThiamHs8uCcOOeI5zo5PBd0mtxdX5OOD95e4jL/GRb+vvgXKGv70+OdW421t6lpKDs+bwijsoQj9HuidfvytLDyZllCxHmbl6fv3b/8eP56zfmBME8M2maHvKs+cwqzF1brbR+49zx06mX+Ziv78YTjgBIrcW+FTbafPgH6emp24sm2uLtpekrE9p0cdo0OWOl54n5R7X9nUiilVlfDyYi4kH9/g3Bcn722FMvgwr7iQolw77Z6QvL3VQ9iP5WWkYT1rOzS6a7swszy1armWZdnlmYZFfE/iVjCq+6gBCjzCaZMNtga7f6NvF5K60xEjZeGgh/au9+XtoGwziAvwyhIKQQxOVYe+hplZVU0lra9TAKZT/YELbB3viUoYPBcG5DpyumQxnCAmUbXgYb7AcbmMuq4NGT9Q8zr6kHDx6aN7GPeZ/PIS25fkneXw95vv5tb3c+nU/Y/SI6t3wbtNIa+TfxVCZfiTe/vD7/4r99PuGFbb+d1svl01ZaGObSKhuTf0v7Ob49S3g/SLizviBsBK20KOEhoEx4qbsvEn7vX3aChLvPbWHQSosSHgLKhO0Vcdl1RQVZkPCqGIfbB4NWWpRwWCgq8YL18Jsle6/zea27u3Wa8O9X7uJa56yVFiU8FGxzafe12NbdbNsbK6tbz/78sz9ufrDtd7923EV70Epr5JV4KlOjxkNllHDSUcJJRwknnRqVeEpTosZDaZRw0lHCSUcJJ5wa3WlVdhVWS34lHkl0wrQelpEDB3/Cc4yEpoPHL4Kl3xLPMBJaGr6j/+qhRwlLmHyS4tiVTUbCq3H0sjOMhJfh2HmgMyJhliNXgAYj4VmPPI5bX2NEggU9jptBw7Cc+9i7tTQZkaLDIccsdYcRKRNaiWNWZET68AHzXOuINrSkTT5FvK11TIvhKDQ5Vs5U/joj0u5WOFIG3GIkApmCwzEqQJWRKDSghHIsvmHSOzoiOhgcn0p9gpGIVKGP7imu0F5HlHLYnuIfD+uMRCk9jukc0TGADhwiV3/MsTiegipNsmJQK/dQLJsMyNM6OBaWCdnWyHepU8XpHD3AcWmYMMopl1foP2jSFDpeVi5dK47Nlgyj1epx31FLEIfIjv8b482f5SyARq/ny2HltXsA2jXfbRCm/X/j4Ivr5lymas7oN9lVdAKqTt3nn0OzrwAAAABJRU5ErkJggg==" width="481" height="173" class="img_ev3q"></p><p>Fig. 7: Validation of structured data in KCL.</p><p>Based on this, KCL provides the corresponding <a href="https://kcl-lang.io/docs/tools/cli/kcl/vet" target="_blank" rel="noopener noreferrer">Validation Tool</a> to validate JSON/YAML data directly. In addition, based on this capability, we can build a K-V validation visualization product as shown in Fig. 8.</p><p><img loading="lazy" src="/assets/images/08-kcl-validation-ui-4a33642df3b7e92c4a152a12f9f8bc5f.png" width="460" height="388" class="img_ev3q"></p><p>Fig. 8: A K-V validation visualization product based on KCL.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-definition-and-abstraction-of-complex-configuration-model">2.2 Definition and Abstraction of Complex Configuration Model<a href="#22-definition-and-abstraction-of-complex-configuration-model" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>As shown in Fig 9, with the help of the <a href="https://kcl-lang.io/docs/tools/cli/openapi/" target="_blank" rel="noopener noreferrer">KCL OpenAPI</a> tool, we can directly integrate a wide range of well-designed models.</p><p><img loading="lazy" src="/assets/images/09-kcl-modeling-86763db82d999256115fdcfcc861f829.png" width="753" height="389" class="img_ev3q"></p><p>Fig. 9: General way of KCL complex configuration modeling.</p><p>As shown in Figure 10, <a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig</a> is used to manage all KCL configuration codes, the business configuration code and basic configuration code are stored in a mono repo, which facilitates the version dependency management between codes, and the automatic system processing is relatively simple. It is sufficient to locate the directory and files of the unique code base. The codes are interconnected, managed uniformly, and easy to find, modify, and maintain. Besides, the unified CI/CD process can be used for configuration management.</p><p><img loading="lazy" src="/assets/images/10-kcl-konfig-d449927f5a1b7e08eaec85ac24ad4bc1.png" width="363" height="356" class="img_ev3q"></p><p>Fig. 10: Using KCL's language capabilities to integrate domain models and user models.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-strong-constraint-to-avoid-errors">2.3 Strong Constraint to Avoid Errors<a href="#23-strong-constraint-to-avoid-errors" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>As shown in Fig. 11, configuration errors can be avoided through strong constraint-checking methods in KCL.</p><p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjkAAAFGCAMAAAC/qX7WAAACeVBMVEUAAAAuUo3F37MAAAD3yq0uUY4lSoYsTYoPIUQtUYw0VpACAgItUY33x6sCAgIAAAAAAAA8XZIvUo4AAAAAAAAEBARNbpYBAQEAAAAtT40ICAgBAQFEYZOwzK4AAAAAAABhgZqSsKgAAAAtUI2buKkAAAAzVY/Yt6gAAABtd5gAAAAAAAAAAAAPDw+CoaQtUY4FBQUBAQEqTIpodJczVJAvUo8JCQnB3LOglqABAQE2VpA0VpDV0KwwUo92fZnFrKUcHBwSEhLB3LNcfZtBQUFUdZj4yq1GYJP4y60vUo6Rjp+xx6zf0a/3y63F4LOYkZ/0yKx6mKEuUY5RaZX4yq32yawqKirF4LR0dHTF37RgeZnnwKnF37SNhpq4pKPF4LT////4y60vUo8AAACWqMeTjp16maF/f39LS0va2trU1NSysrIqKioGBgVZWVmHh4f7+/v19fUxMjAjJCMLCwodHBrGxsYQDw5vb28YGBeDg4Ourq6oqKigoKBmZma2trZgYGAUFBLw8PCRkZE2NzXLy8u/2rB3d3fpv6T39/fi4uLm5uacnJywkHpOTk4nKCZJU0P0yKtra2u6urqNjY05QTTq6uq30Kd8fHxzc3PAwMBGRkbPz89CRUA8PDyQpIRpd18qMCa9vb2ioqIjIh3wxamWlpbFoYmKnX5dXV0zKiOKiopwf2ZTU1O4066al5tWYk9SQzlIOzKgvapea1Z7ZVZSXUtqVknYsZeClHebsY5hT0NdTEGpxq3fvKnUtaeqwpzft5x2hJvc3NyFo6SxyaGlu5Z5im+YfGq7mYLCwsK0oqLPqJCMcmGjhXGlmKCgtpJDNi6TsaffezK3AAAAX3RSTlMAgMCAwHEOIQcu+pdRQOhzG/lgW0/g77EuOMqJ9ccmDObRaEnOYNjHOOa5QhLf2Gf1nxn+57KrjdfTppkTw4D98sNu/vDsz8WsfWNCLOXV1ITdkPtkT/Dm+s+5qKYm4UXmlKsAAB25SURBVHja7Nu/agJBEAbwieCfW665UkgTDJYRgsdB1BQnFoliYQoxCANT+Cj3ONdcfY3cE/hEOROEJIR0ct/C96uGrZfZYWZW6CK4OQulNvoMH+uoe8VD8lwn3Axf02R/Z2eLVu3Wzu7r6IqH+yRdPm3CjpCX+hNnbl5qM+bO3KQv5KF3dyy0QcXRRUw7/km3WaYNy8ptKuST9vNaQayXbSFPdGKbK4zKYr5ZfugOrVIglQ27QviCsSsUSuHGvDoeWL6VCqaMJkLopjC18Tf5eioErqWQWkLQgkRBJULAuu6goEpWychilyuo3MVCqAZYjZyfKhsIgZpFCiyaCWHqI6cc1cq4dAGq99D4dPw/2YI3B9RKwa2EIMH2cr6wpwNrp+B2QohewEbkfwiE8PQMtn98cbCeEJzATgruZEw6gEKD28v5rTR+4gM0MtiZ1UVuI6EPdu6ftXEYjOP4tXB0vg7dDu7g5nsf9yoeyG/2kj+IjAaj1VqEJ2MbPHgwwYMJ2FMW22te0j1SUlooJOlRDrnoC8WqInf6UDdCjXN9XTi9D2iSC/9/EA72Z0HO983LcbC7GcjxJwNdzMvx/VuPT/S/GquRXkqqjG7Ky3G0e7qYDnMyxeFEF9uFYdiTrQ1DRW9TeD2bIfByZt0VOQUaMoWo6WIJcJYhBaA/Us4Pv5/jYh8pJ0iI6/DBchZ3X3zu9R45Y67bkbiqSduer3U7Vqp7lhOfdEWIrRw57dPm9OIh5/UnOUmuVC3Pcnadajrp5cyxx6fb5VTAGiIhUuCCiWiFBmif5dQojRKsc2i+ljAtjZK1WV8aOb0AV+xOcgoEQOvlzLG7xe1yIv5qdWUEdUkLsaMYUNnhWc4gkBG12Fs5Ebb12AYGRoyyG/aAMsPo0G+RWzkjQnlYKi9njr1HTgGVEKdQEO0CdDwjyGblJA0UyRC9kXOAfXal2DIQXkoygDKzFtfKysmwzvzfOTPtVjmCHdQAos7MQQgB5DxKX8sZESQVYjJyMmDk6QmQFXAgMvDM7FqIAGsrZ7cFwnagK/32pywc7JqcCAVxp18bXQRgYgKbvaniUf5aDi1Ra9RWzplLdZIj7Y9S5lu1N1k5NLRsp5R+P2eGXZOzBwa+5MDR+tDQlCLm4SDpjZwOGwQJnZ9Wk70xpCNwPD+tRqAy9768K68C9F7ODHv4RRfLgOg4dAIrmSgtWUJEE9DRIdwc38iRAlBk5VCMIqGjQEMyBN9Zm5fkBtFALRorZ9ITybWXM8/u6XJ72ERPpLFdBsiIwSAElvKNHGqA/iynFwhCoNyRobYWKA2qKkAggMzK6REUW2wkXe67/6xJF7smhzJVlLpNeDTsV2WT8UDmy80ylwxFV3ROas1GDloR89C5Wd4sN5pXcVW6SqvJzvZqFaes66hTJsUr6sG/t5pljn5al5fjeg8/yfm8HBebw8kuL8fFvBzf55XjT7C72Bzk+P0cF/NyfM6fYPdyPlcz2M/5y669pCAQA1EURUFBcJEijRt0g37m1iDQ4VU8ZxR6fGlSoZQTqUE5NtgjNSjHVB5JOSx7Q1ZOog5TuXISKYd1y7HBnqhDOd5zEimHPTbYH7M8ldPOsQrnvk1S/PlssIcqy9lukxTlmK1CKYfBDXblMDZbKQfl8NNflmODPVGHcrznJFIOo/s5ymHV9xzlRGpQjg32SA3KMZVHUg7L3pCVk6jDVN6/nNPh4/w+Xb6n694fK/PLebFrPy1tgwEcxzvodJTtsOPA24ZjJ0EdjLnpzQmbIOpOQ/glYaTRJnn6J2naJG2appTaotiWElPtQacgIr4DBb3tVa2aTSPrYTtIavRzDDyXhy88f/KQRu5Ab6GHogAPTnGxD+UMPn478XXu28wQfeF1OBx+R194E+66xY8zc4uTw/NPn4S8/CtH+cEeJtrAagkeKgBZg8e5bduFqG03/6ecAL5gHxj5SNND3yl/TI1F6MiEd+Z8K8dMrQCraQf7Bq61UuhlvfZwn/M5snB8QvlnY+osMhny8KucKsMBINA7MVsHHFvQKijlGNuOOxqAvJLTKjfKYTl0FeUdlcseZFsAiFqvqwDJ13P5gJfzZYY6ofy2tzG7GLolg6/+tRysR6vo2rUS2V2U+LK4bqFk8NlsRYwCxXRWlMo3ymnnAHDMMmsl2f2O1AKMzKaRslGTis2UHOByRifmNqg+MT0xEvLw4z5nOcavqQRQDAA7GiAz55BTALrlxAsq0Dgi3nLUdAWwOxCZFYBkWDSYVWCXb21nAWcZHsF6wf5yPHJK9YuNMfq9O4G+lQM49bRluuWAcHmNka/K2WLIX/scUtBAJB0iHwcgtCHGOI6TmR0lqcUDfLZ6TC/4v1B5HNPDo6EuH8sBqhnRLaeUTK4ZjHNVTr7QY4e82UYjHYdooUtMwEgnLjQqm1JKMINaziN6rG+WKtdUZHww5PLjBXtLRpdguOUkBYDw1+XIfI9yOKYq1AExTQAIUZRj+KMUywW1nE9nfRYORZ2OLYVcfpytfvIcQDI1KAJQ4VVghXEg8+SyHJNvALJAbpSDDpvaAkRGBpBhoTKrgGlXiybAbge0nEWqH01/8K8cHMXEYqdQgZ7R8hCs3WaCd2DyWdXslgNF0muxMm6WozMWADGzrqtRyQSxEppurZF2dEWXasEs5xnVn8I+lmNqB9v1cyDORsuoNtsKp3CAtiZU800AxejRcRy/lR13CHN8uZjlD7Y3W7gcetSsoFruGCoJ4gv2gaVZqk/NvQi57sQfz0MpflnOvblDnn++R/Wps8jonSnHKfMN3KtyfrFrxioNQ1EYxs2Ki26Csy+gLmodxUHQxVU4+RGnbgmhi9BByGCGvkNKIFsqlwQaKunU0BLpG3lCSkmxQ1JKyfX2g5bD/SnN8HGSe3Ma2ojqyvDgkq9Qjvmcz/eP/KXomyrmNOvbcrJjnfn9Sp2ZQGnMOdF+qL50j5qqmSPNBPtlnVtO1nQaipkjza78dkLr0asYTO3pOv/yolrPkcaceyqJ1W4nRN1+24mJQt+AMbDnqwsKwR8iDGgdHiR5QlbNnJsulcQCWIgASIlcE9ABjPPVBYVgY+Y8SbIrV82cZypJ7kgKCK49dFwKZ9CtojlLwcbMuduZU0caj5V6zlTHjH9g57qERhAXzVkKiFzhRyIkJhS+cHNzYhFF4x5VYHKtljmSTLDvaVXMSR0YFpcCnaVOtICDQp2hp0SJDqDlZOa4HTCeReV51faVMkeS85yrU6pgjjnXZABvpTnFIAH8xPagx+TBSeMAbA6Xs9A1IKr0HK2xM6d+nJ1XMYfpE+Ojv9KcYhDB5O8pMOZPStRrsTkhkBAJOFSeb+1wgxPsO3M2xMWoijlGkO+agpU9Zznw4BPTgbCBMFtgc7jUTbMFncoz1I63c57zpW2L/zDB/sveGatEDAQB9MRD0FqwOLHVT7DyA/yLyWCZLiG1XZoU+YcsC9dl4cgVadJFuAj3R87sHkQFkQXB3ew+Ugw7IdWDmU0mydWLjTlVrasPTKe905v4Zs6cIFF6IxCbU1N0NOb0HWMxgSgSHliJf2N0jMTOHJCIStegif3AQn4250uix5wikelqdThVq4M5ewAbHi+jOe5haw7sdNPSkiH7Mce8LimSBBjmRMUn1h1mg3hFJWBC7KHO8TjQNTqwYP2nE+zOs1RzRI7FAMMWmUzSqqEEzZyAHrFIdV80cneDDTc+VYqp2aFZmhPO/62WZ45QSnIlUopkqKe22XZ7XjUIYOYE8U5RLzmq2qatRrWjUNJiy4vRnGDM+TfuL4Iyx5MJ9ucSnCc5C8ocT+7nuPq+TDTHdQIzh+ZznCea46I5PtzP8cScJ3e+fBLNYbyZYPdhb3Ubnz44iA/mrFeBm3O3uTl/WP3M9YaPX4jmLL5D/mDnDlYbhOEAjH/Mi+CIASMRhQiBDBc9tJeCpx33GtvaPe1eapMWRluUwkCczYeevET4XRL/eCWnFWljxQQdacgSpgty1r8rv5LTW0A5qAsJdHQGagN0cV3UEHdHObKIGS3IuTs5ci9hyG28KDt80ufe9r0HXwm/UWTJcMW6L3PJXL1+vS++58e7knM5wd7mJ0EbQ7xzaA/CQ27QZU1bnuSkGqKUqcJ5zqrlPHBeI2AoKwGl0Q60hV2GTgHRHeXsts5VJWMFOXcnR+4NQ3YHNDm6ha2CxKEzIDdHOXprrXWMFuT8cYJ98V3KoUwBW7UbINJncrYgc45ybAK1YawgZ/XnOVcT7I2IVJVLvM8q0ZzJEVVWRic5UlTKp8zV09TPc14+5yrI+e36dWWaOAmxTSIDmQE13AVa/TyBQg0XRZUopppvV/5xmKmpVYQJ9vF0y83NK+dtpg4TqwgT7EHOAuT8h73VGr54Bjk3FOQsV06YYF9i3+zd30taYRjA8Wc7MATZObKOS5QpBI0wB+sm8G67GvRXPOtl6PFXaqVpZZZJv6QLk8hpXeQ4MEL6I3a5i/1Le97V1mhDT3XI8+r5QqcHL7r6QL4vjzi3a305I34TaNGef7TlWCwjcgJjdz6A23KGfj/HiByfc8p713OVLWfY73OMyAn7wafAIKMNdluOxTKywe5UJu+xijNyZyt7g/12DokFQ+BXwGiS2U0LIWfkN9j/yetUZT9xMAyHRUyOjZocEd4h95czFQZQ3R7j/6+kCJrcyMkR4VTeX47qpYfCJLDl2HLuJCfgdqoT4VlZ8QxQzofv1pcz4hvs/ymkOBU/eKQp6IvMw/M1Y2Z1fC3nAfc5nZXrP6KtHOGtYoWbuZKy0KlcBDlPwcS873iMJcyKPVxOil1cDSVWxFu12c28ELXlDE7OmyqamxlyCotppDL5TXHkCLnBPnRy6vk4UnoiyuXEV74W95HKNct6ldFQjZQbmSs5sWJKz1hBjgj3Oa+eCSHn9Y97y9mpt5DKVg5JTmkzonfzOcROsqkfJhhRWkqdLCf2uJzj5E4t27TlGGv+iRBy5j/dX06MaYi5pS2Sc85ySHy2ca9wQcMZQ9ysIG4la1zOZQJxP95Ljr3BblCOz8k/BmEgV/g9jy1GTaqlmycHz5qI5TKSnJMCUlW212ZtGhYYauxc07TtEpeTSxb3rXGf02OD3TLfGNJTjqxOS/IE9E+qx81tbdlEOWv5zHGyyuWUu0hp7NtGkg9HDDdYltfkcnAty7ZzVpAjwvdb9ZbjApgMQyBAcwgcAfA4HunyT1s0UU66sN7IIpez8wWpDstUmUZDgyENf5+tDkqbthyz5ARB8QG43DA56w7KqoByMHKWuPwlZ4PF+EtZ3FrSaWgxOqxXOKE2lxPPIcaSGatvsFtETs8Ndnnao7jV33LGki4YGx+MnLndh8jZZ/kMl0M/i7XV+tJnwpSvrJa2WRoX8o3VUkHjcmrL6/FoygpnKxHk9LzPkce98hT8kROkX/JjyTHrPudylR4LOj0qccS03j2ta0h1uq3iQTmNuJY63aFXNhqIlWi0cmDLMUOOy+FWr+T4SY4TwCGcHEQBt0lfvBReDkzLIVCDABO2HKvcBAoiB2ZmIPBWUbwDlWNvsFtPTs8NdiUAEJIC4PdJLgU8KslRRDtbUUO2wW4ROT/Zu7fXpqE4DuBe8MZgU3QoExWGoqCT+SL6pML+BvHxi+ehTbqkSa9pc2nthdK0dNCWsnZdH1YZjDL8I/a2v8qTZM5ZvKxLXXPafGHdAmfs5dMu5/Btf6M+UZg7zwEY7AT6cnw503uH7MvxohwWduW+HF/OVMvxG+yek/PyBhNyZuw8hwU5ly74chiW0+YwcsyUDCfbGswvMvKiL2cozMq59viUcoQdnCqJCo7DkR9ydN6+SGjWAl/OiXhczrPrI5znuJOznRmSM3RBF4wm54wN9kf3zlkObbBPoZxX8wvX3ctpDVrNrF6uNA1L0U6mWFI6KJZKHGCmQdPkyptfxM0iDpp76YqFpZXPtosAdru2nI7mLAhwoMkn/uPe6ia5e89Lu/Jzy7uxNthfEULtuJXDC72akiwV9pVkHQgUUu2aoKdKNdJBIgaaVKacjonpohyt5YMCR7Fs7+0aQgiI6LaccNBZsGXAcsX/VzmE2jmjHB5OpKNvp5HD5Ey9y+Q0eftixAb7sByOtIEBCQB6CgiTIlAgPBBUjuU4X2ZaAuIDcGQPgLF+Qo6zQE2Wgc0eXMghp8ry7+TkFQCaCBSTRQDGNqzsi+gYsNMQIcZ3sBmJ7Ekol9YjvbYEGPug6eWmSY6L15yLn0eRcwh0SBcoWhXHFIB6FEBpf0gOUOmoBQUc0QCoRB6WI33RIMV1TOY1pxzlIUc5y0IdgCh0AZhC0BJjJ5gA9jJcD8jqEI0ypLYIiKk+gPUZk2O7cS9HBn0oAzyRbAVI1wAEhuXIweTW3oYlx3TeADIsB+0tNJIyJnSfE9rCZgmQ4624DErDsPgbx3L4Aiw5IRGQqA8JNBEeovq1wrqcp1fd7K3GL6eGIskBFXIkp/SFXomWnBAAleSG5dCLilh30WB3ubcK5qMyoBsw+oC4E89BinaO5RiaLSe3nk0AWhZW2jrEhB78mxzaYPd83J7njF+OSRpA1ZITV+1bBuRSlhwFgLKBn3KcBUAvEOtO7jyHEywcvSIS24B4WGpCM7o/5OSiki0H5f5W5KCqwEpgQOUgWP2znFmbqTcmOYhs5OtRC0VwK8Srybze21DoskhADQjqCTnOAkAnBUxODjZaAC8UCgWBo3IONrDdPZYzSMORQ5PPdrdgX+5YcipfTV/OqP0cg0MrKwGVHw+ZJoBMHoBKH3K7WwofLgK8UQtJmiiG+hpMw2xvZzsWrgRa9u84C4Ac+TZpOe2wRb9E5SC4W8APOVK0BZoer2mAmpXiRQBmPGfJAX0V8uVMthM4iMsTliOlKjYJicrJCLotp6fRZAFozXWY0aoW6aAbHzR2ownYclAjub802D0f5uV0SkLDRYPdvZxqGRXd+akVMiE1ZbRUHIRpVA5AepADuHzY+rmitfsWspBpXYTLLO+tmG+wV43i9DS7pJbJ8V025PgNdi/JEVbnF1dWPsyaHL/B7lrOBSezJoeFTuA0yPl8bnnny2FNjt9g95wcjzfYZ3SmHgtyvNomJSVDXFvz5fhyRpazsHz7zp2HMyrn2mNfzlnlLPoTYD0u58FVJuRMZYOdbTle3VstsjcB9s0NX86E5EgtPhHSqvlwOtAm7MnxP4P9/OWYjV1l7WNKmF9Z+vD61dx9Oi743kzLYWG+1YTlSHzV+BibX5pbuPPs5nW255X7cs5LjnQYWFtdeb387NF0TLp/enWm5Ny6Mhk55i5Vc//OiwunCm2we1+OP43xv8uRDj+9X319++9qZvo8x5fzm8hqdnXFuQH25fyln+P5nK8cs7q2urRsDVvz5bA+U29McowD/Ctyw/4f9ehMf8D1Z7D3FUUJd3Ai25ovx0XG1GB/tDS/+tHIN0wJv0uZ1+ofY0t/nJV/DnsrsTDY7JE9/ExEZ/Qz2D2SsT1RXjxfnluaF96viZ/y/UyiyHMc1000+nll7b2wcnfBfhP1BOXUAaikcVKOd89zZkqOk+sPnz9ZmHv9YWllZXFx0ToSnlu4fc9BM3k5UjKPJgcgozpyJLVeV3E0qNxDcli4Q6ZyWMh45HQJj3gGgJJ15GRT7Wxs82hQuYfksLArnxk54gHfXO/hFzkNYgJ9oeUMKvflTKMc1w12MRaPxQLlX+WE1zmOS5Ada1A5Ow12j4Q22FmI6/McsQ5KBL/KySYjVhrOoHIP7cpZkHPpAhMZhxzUozIQ1wH0HDmlddhxBpX7cnw5f5CTiytAwQByxJGjEpNebOaOBpV7Rw5tsHs+syQHIXKIdLLUjBZEW45UiGh6oSY5g8o99JrDwnkObbCzENcN9m990KQHkDKiqDZ2gUACkAPB/Wb5aFC5L2eEMLO3YqHZ9eaGL8d7+c7evaMgDEVBGD6FQkxnaS0Itj4aBe1UBEHUtMK5mAVlEdbuIIKthVvS9JJKwwx3vjX8RXIYuAzl/HbBDk/lIJbD8G+lclSOyvlKC/Y/6baNgRbscGK556gclRNDOQz7HJWDWA7DPYeknMVd5YD5LNgZMPxbacGOiKEcLdgRRVYOwxcySTkpQTkb3ZABTR515VwaElQOXTnzun3OMm+K1yiHnajKIVmw287RPUNc5ZDcc6zl6PKQqBxAe0c3HphpwY4nKxxbkR7iuueQLNhtdnRsy9CPqxySfytrh9KhFdtE5SAaob/HuDLTgh3StHt1ZCczXQIh9cLLge1M5aCanR3XbZ00VA7MiyEkC/ZK5rDKdGpmcb0dzHLPqWwc1TgdqRxgb/buXiViIArD8DeQZJNgYwpB2G5FsVowW8UVu2AgQfGncbGYA3svtnMRW+cOJrCtN+Vkf1Abq43OYeZpAlO/JJnhwMwbS48DWwpxUNmJL+egrnMr0+mowJ47d+qxKiejtbRQKSIHy2Eywb5T0dq+t04zB+BeOXx25RuCbPtgqbIPx5djvXD2Lm3Sjt+w5dofMrdyENeltIbOqYiw49iunF05xoPupA3UMk2n2PDl8FBQbkM7t1SMsOVgOVwm2H+Iqhk9tSv5f5SW5TMS7DlYDqvznC/R9IYWjZRar5T8W6r7WObpuMZ3vhxGroD65ZV690EQXFDvODAuh1y8W5jn+eMEQxqd+XIGlmRhJcQpgEj0QhgTYQy2GB8lMX7hynkOlwl2xzAo55Ndu9lNFAoDMLyc65g7e5OzQFQQlD85iAoS4080saZRaV3UpIkxphcxu7mqKVptzaxYirw78oXdE8g5+e7ybFX88sjxu5z66PDVuG8S65yrtrkt1ks5he3X7xxywgFZpjvlK1WYOAHnXgTfSficlHIKW66zlSNUgMCKfsoB/pfzbJV/q2KXSw5zBaCyhz/LvT85y9kEgLPuvScCRp3FwoEkFKuVeZpUFX34BsRjucheMbqLsFvKufvyyWm0gGftDbM1iyuaepLTqMBOW7/P6gK8+WHhHkh6mu+Psom0eh9DawX1iq2kwmFqx0vL4baibLA/UPnkjIUDsQ1j3wD7cJEzah+ArYC4Ct4AHAtOE3sNPGkqzbYBdY9XHzbVB7rPKWj55JCGMFgBTDZy4F3kvIgXoCEAM6mt2xc52eQvgL2jGQLhEa8VmA91E1jQcu7nBP2RKlQwK266n1/ldDWAJwEHd6CnP+TUhAHQPNCcAv6M0dq29KiUc/fluwkcuXK1BYb9CPSrnCTTxFKQCAny5puTAJG2o9k5ywGSeljKufvyySHUW1PgqEPUvsqJrHcgFQSWAb1MjmaQTcy+AkihXuSYcQTKa3E32B+mnHIcYUWAdOPO9vtvheLGMhwIw3RDGc7bEGm+jLJJx1JqcX/IRQ5ppdaxp+Wp/O7LKQdvCWAEul7bBTz3DLpLYHdM/cnnQ+KljaoHBDN9cppswu1eAooD1GImw21PGqWce6/cYP/H3h2jJhBFYRR+jUqmGzu7BMFWCIoQtIlFkAQhVUj14BFcyizHZuppgitwRckKQhAi507Ot4ZT+G7+qPq77LIcIstRf8sJuWDvvQjleM8hshy5YNev/KMdsgt2pADl+LZCshxduGC3HPX1bWU5RJajvyinfFyJC/ZwfiwnH66l9Z4TTYRfDLEcou99Dp7lIAX4TT3LQQpQjgt2pADl+CpHshz19hOy5RBFeJVbDpHlqL/luGAnilCO9xwiy9HFC3Y8y0EKcM9xwY4UoBzfVkgRytkl4dzfZbqmuAkEmpdjhjuWeRLOtLQZriuuLIBuyjnDtQtvyEDDcsh0z0lAs22mWycB7W4z3HsS0irDrZKQXjLb51MS0z6TNdVDEtNjl8FOZZLEtKmbjNXUmySoaTllrFOZJlFtKu7frl6XSVijinsN9H6MNijUD8necuAmzH1X4wIZb0086nT1OIlu/YZ7mnf1YpSEN65hE6+2MpwQRjPWWedcZoYTw3BZtqC7zmrpf1mFMagwX6az947ztSEF2CWdwuMHHLQdcXZiGAVDDjjJHhrQpvLmQ1xJtkYMo2DoASGuJC7nNPoPKreBG1muSVxWo8sqhijg4LFWS4oyj2GSTQIBLiYgUAAzA4Es2gkKmjt52yjzcDCMgiEMONhABCMIsIL4ymCmJA0FPVmH+E5OAN7FEXl/oCG2AAAAAElFTkSuQmCC" width="569" height="326" class="img_ev3q"></p><p>Fig. 11: Strong constraint checking methods in KCL.</p><ul><li>The KCL language's type system is designed to be static. Type and value definitions are separated. Type derivation and type checking at compile time are supported. Static types can not only analyze most type errors at compile time in advance, but also reduce the performance loss of dynamic type checking at runtime. In addition, the attributes of the KCL schema are forced to be not null, which can effectively avoid configuration omissions.</li><li>When KCL configurations to be exported are declared, their types and values cannot change. This static feature ensures that the configuration will not be tampered with at will.</li><li>KCL supports further ensuring stability through the built-in validation rules of the structure. For example, Fig. 12 shows that the KCL code defines the constraints for <code>containerPort</code>, <code>services</code>, and <code>volumes</code> in <code>App</code>.</li></ul><p><img loading="lazy" src="/assets/images/12-kcl-app-schema-c2cc4b180d61c3044373cd9a68c03ead.png" width="1364" height="588" class="img_ev3q"></p><p>Fig. 12: KCL code validation with constraint rules.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-isolated-configuration-block-merging">2.4 Isolated Configuration Block Merging<a href="#24-isolated-configuration-block-merging" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL provides the ability to write isolated configuration blocks and automatically merge them, and supports idempotent merge, patch merge, and other strategies. Multiple configurations in idempotent merging need to meet the exchange law, and developers need to manually handle configuration conflicts between base and different environments. The patch merging includes overlay, deletion and addition. KCL simplifies the collaborative development on the user side and reduces the coupling between configurations through multiple merging strategies.</p><p><img loading="lazy" src="/assets/images/13-kcl-isolated-config-bfe5397d9b2a419e47215086f7446725.png" width="1638" height="842" class="img_ev3q"></p><p>Fig. 13: Multi-environment scenario configuration block writing.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-automation">2.5 Automation<a href="#25-automation" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL provides many automation-related capabilities, mainly including tools and multilingual APIs. Via <code>package_identifier : key_identifier</code> mode, KCL supports the indexing of any configured key value, thus completing the addition, deletion, modification and query of any key value. For example, Fig 14. shows that we can directly execute the following command to modify the image. The code diff before and after modification is also shown in Fig. 14.</p><p><img loading="lazy" src="/assets/images/14-kcl-image-update-de385287fb7173d5825bdb00bd85c6c0.png" width="1828" height="502" class="img_ev3q"></p><p>Fig. 14: Automatic modification of application configuration image via KCL CLI/API.</p><p>In addition, the automation capability of KCL can be realized and integrated into CI/CD as shown in Fig. 15.</p><p><img loading="lazy" src="/assets/images/15-kcl-automation-e3e81ff935a111c098153bae5bf5b34e.png" width="890" height="247" class="img_ev3q"></p><p>Fig. 15: Typical KCL automation integration.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-comparison-between-kcl-and-other-declarative-configurations">3. Comparison between KCL and Other Declarative Configurations<a href="#3-comparison-between-kcl-and-other-declarative-configurations" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-vs-jsonyaml">3.1 vs. JSON/YAML<a href="#31-vs-jsonyaml" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>YAML/JSON configurations are suitable for small-scale configuration scenarios. For large-scale cloud native configuration scenarios that need frequent modifications, they are more suitable for KCL. The main difference involved is the difference between configuration data abstraction and deployment:</p><p>The advantages of using KCL for configuration are: for static data, the advantage of abstracting one layer means that the overall system has <strong>deployment flexibility</strong>. Different configuration environments, tenants, and runtime may have different requirements for static data, and even different organizations may have different specifications and product requirements. KCL can be used to expose the most needed and frequently modified configurations to users.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-vs-kustomize">3.2 vs. Kustomize<a href="#32-vs-kustomize" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The core capability of Kustomize is its file-level overlay capability. However, there is a problem with multiple overlay chains, because finding the statement of a specific attribute value does not guarantee that it is the final value, because another specific value that appears elsewhere can override it. For complex scenarios, retrieval of the inheritance chain of Kustomize files is often not as convenient as retrieval of the inheritance chain of KCL code, The specified configuration file overwrite order needs to be carefully considered. In addition, Kustomize cannot solve the problems of YAML configuration writing, constraint verification, model abstraction and development, and is more suitable for simple configuration scenarios.</p><p>In KCL, the configuration merge operation can be fine-grained to each configuration attribute in the code, and the merge strategy can be flexibly set, not limited to the overall resource, and the dependency between configurations can be statically analyzed through the import statement of KCL.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-vs-hcl">3.3 vs. HCL<a href="#33-vs-hcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="331-features">3.3.1 Features<a href="#331-features" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><table><thead><tr><th></th><th>HCL</th><th>KCL</th></tr></thead><tbody><tr><td>Modeling</td><td>The user interface is not directly perceived through the Terraform provider Schema definition. In addition, the user interface is cumbersome when writing complex object and required/optional field definitions.</td><td>Modeling through KCL schema, and achieve high model abstraction through language level engineering and some object-oriented features.</td></tr><tr><td>Constraint</td><td>The dynamic parameters are constrained by the condition field of the variable. The constraints of the resource itself need to be defined by provider schema or combined with Sentinel/Rego and other policy languages. The integrity of the language itself cannot be self closed, and its implementation methods are not unified</td><td>Define structures and constraints in a unified way.</td></tr><tr><td>Scalability</td><td>Terraform HCL overrides by file. The mode is fixed and the capability is limited.</td><td>KCL can customize the configuration block writing method and multiple strategies to meet the requirements of complex multi-tenant and multi-environment configuration scenarios.</td></tr><tr><td>Code writing</td><td>The user interface is complicated when writing complex object definitions and required/optional field definitions.</td><td>Complex structure definitions and constraint are easy to write without using other GPLs or tools.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="332-examples">3.3.2 Examples<a href="#332-examples" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p><strong>Terraform HCL variable vs. KCL schema</strong></p><ul><li>HCL</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">"subnet_delegations"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name               </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service_delegation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      actions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> d </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> n </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> d </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service_delegation </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> n </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service_delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema SubnetDelegation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service_delegation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ServiceDelegation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema ServiceDelegation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Required attributes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    actions?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Optional attributes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SubnetDelegation</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"subnet_delegations"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Terraform HCL Function vs. KCL Lambda</strong></p><ul><li><p>As shown in <a href="https://www.terraform.io/language/functions" target="_blank" rel="noopener noreferrer">https://www.terraform.io/language/functions</a> and <a href="https://github.com/hashicorp/terraform/issues/27696" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform/issues/27696</a>，Terraform HCL provides rich built-in functions, but it does not support users to define functions in Terraform (or need to write complex Go providers to simulate local user-defined functions); KCL not only supports users to use the lambda keyword to directly define functions in KCL code, but also supports the use of Python, Go and other languages to write <a href="https://kcl-lang.io/docs/reference/plugin/overview" target="_blank" rel="noopener noreferrer">plugins</a>.</p></li><li><p>Defining functions and calling them in KCL</p></li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">add_func </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">two </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> add_func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Remove null values in HCL vs. Remove null values in KCL</strong></p><ul><li>HCL</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">"conf"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      default     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">type</span><span class="token plain">        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      inputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      args    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      command </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      env </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        limits </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cpu    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        requests </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cpu    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      script     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      workingDir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">locals</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  conf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    defaults</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resources </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> steps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> step </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">steps </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> step </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL (using <code>-n</code> flag)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Param</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Step</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    env?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resources?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"limits"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"requests"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    script?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workingDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema K8sManifest</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Param</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    results?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Step</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> K8sManifest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"conf"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To sum up, in KCL, its types and constraints are defined in a declarative way through schema. It can be seen that compared with Terraform HCL, KCL constraints can be written more simply when the same functions are implemented (validation and condition fields do not need to be written repeatedly like Terraform), In addition, it provides the ability to set fields as optional (unlike the Terraform configuration field, which can be null by default).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-vs-cue">3.4 vs. CUE<a href="#34-vs-cue" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="341-features">3.4.1 Features<a href="#341-features" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><table><thead><tr><th></th><th>CUE</th><th>KCL</th></tr></thead><tbody><tr><td>Modeling</td><td>Modeling through struct, no inheritance and other features, can achieve high abstraction when there is no conflict between model definitions. Because CUE performs all constraint checks at runtime, there may be performance bottlenecks in large-scale modeling scenarios.</td><td>Modeling is conducted through KCL schema, and high model abstraction can be achieved through language level engineering and some object-oriented features (such as single inheritance). KCL is a statically compiled language with low overhead for large-scale modeling scenarios.</td></tr><tr><td>Constraint</td><td>CUE combines types and values into one concept. It simplifies the writing of constraints through various syntax. For example, generic types and enumerations are not required. Summing types and null value merging are the same thing.</td><td>KCL provides a richer check declarative constraint syntax, which makes it easier to write. For some configuration field combination constraints, it is simpler to write (compared with CUE, KCL provides more if guard combination constraints, all/any/map/filter and other collection constraint writing methods, which makes it easier to write)</td></tr><tr><td>Scalability</td><td>CUE supports configuration merging but it is completely idempotent. It may not meet the requirements of complex multi-tenant and multi- environment configuration scenarios</td><td>KCL can customize the configuration block writing method and multiple strategies to meet the requirements of complex multi-tenant and multi-environment configuration scenarios.</td></tr><tr><td>Code writing</td><td>For complex loop and constraint scenarios, it is complex to write, and it is cumbersome to write scenarios that require accurate configuration modifications.</td><td>Complex structure definition, loop, and conditional constraint scenarios are easy to write.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="342-examples">3.4.2 Examples<a href="#342-examples" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p><strong>CUE constraint vs. KCL constraint</strong></p><p>CUE (run <code>cue export base.cue prod.cue</code>)</p><ul><li>base.cue</li></ul><div class="language-cue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cue codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// base.cue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import "list"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#App: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType: "Standard" | "Customized" | "Global",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort: &gt;=1 &amp; &lt;=65535,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes: [...#Volume],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services: [...#Service],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Service: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clusterIP: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if type == "ClusterIP" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clusterIP: "None"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Volume: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container: string | *"*"  // The default value of `container` is "*"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mountPath: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _check: false &amp; list.Contains(["/", "/boot", "/home", "dev", "/etc", "/root"], mountPath),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app: #App &amp; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType: "Standard",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort: 80,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mountPath: "/tmp"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clusterIP: "None",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type: "ClusterIP"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>prod.cue</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">//</span><span class="token plain"> prod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#App &amp; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">//</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conflicting values </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>KCL (run <code>kcl base.k prod.k</code>)</p><ul><li>base.k</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># base.k</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema App</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Standard"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Customized"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Global"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Volume</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Service</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65535</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clusterIP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $</span><span class="token builtin">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clusterIP </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"None"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> $</span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ClusterIP"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Volume</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*"</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># The default value of `container` is "*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mountPath </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/boot"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/home"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dev"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/etc"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/root"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Standard"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mountPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clusterIP </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"None"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $</span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ClusterIP"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>prod.k</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># prod.k</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Using `=` attribute operator to modify the `containerPort` of the base `app`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Using `+=` attribute operator to add volumes of the base `app`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Here, it means to add one volume in the prod environment.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mountPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition, due to the idempotent merge feature of CUE, it is not easy to use an overlay configuration similar to Kustomize to override the additional capability in scenarios, such as the above CUE code will report a conflict error.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-performance">3.5 Performance<a href="#35-performance" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>KCL performs better than CUE/Jsonnet/HCL and other languages in scenarios with large code size or high computation load (CUE and other languages are limited by the runtime constraint checking overhead, while KCL is a statically compiled language).</p><ul><li>CUE (test.cue)</li></ul><div class="language-cue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cue codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import "list"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for i, _ in list.Range(0, 10000, 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "a\(i)": list.Max([1, 2])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL (test.k)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"a${i}"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Jsonnet (test.jsonnet)</li></ul><div class="language-jsonnet codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonnet codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">local a(x, y) = std.max(x, y);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    temp: {["a%d" % i]: a(1, 2) for i in std.range(0, 10000)},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Terraform HCL (test.tf. Since the terraform <code>range</code> function only supports up to 1024 iterators, the <code>range(10000)</code> is divided into 10 sub ranges)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r1"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r2"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r3"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r4"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r5"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r6"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r7"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">6000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r8"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">7000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r9"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r10"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">9000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Running time (considering the actual resource cost of the production environment, this test is subject to the single core).</li></ul><table><thead><tr><th>Environment</th><th>KCL v0.4.3 Running time (including compilation+runtime)</th><th>CUE v0.4.3 Running time (including compilation+runtime)</th><th>Jsonnet v0.18.0 Running time (including compilation+runtime)</th><th>HCL in Terraform v1.3.0 Running time (including compilation+runtime)</th></tr></thead><tbody><tr><td>OS: macOS 10.15.7; CPU: Intel(R) Core(TM) i7-8850H CPU @ 2.60GHz; Memory: 32 GB 2400 MHz DDR4; no NUMA</td><td>440 ms (kcl test.k)</td><td>6290 ms (cue export test.cue)</td><td>3340 ms (jsonnet test.jsonnet)</td><td>1774 ms (terraform plan -parallelism=1)</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="another-complex-case">Another Complex Case<a href="#another-complex-case" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Using KCL and CUE to write Kubernetes configuration.</p><ul><li>CUE (test.cue)</li></ul><div class="language-cue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cue codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> apps "k8s.io/api/apps/v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment: apps.#Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> apiVersion: "apps/v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> kind:       "Deployment"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> metadata: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name:   "me"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels: me: "me"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL (test.k)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kubernetes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"me"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"me"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Environment</th><th>KCL v0.4.3 Running time (including compilation+runtime)</th><th>CUE v0.4.3 Running time (including compilation+runtime)</th></tr></thead><tbody><tr><td>OS: macOS 10.15.7; CPU: Intel(R) Core(TM) i7-8850H CPU @ 2.60GHz; Memory: 32 GB 2400 MHz DDR4; no NUMA</td><td>140 ms (kcl test.k)</td><td>350 ms (cue export test.cue)</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-summary">4. Summary<a href="#4-summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The blog gives a landscape overview of declarative configuration technology, focusing on the KCL concept, core features, usage cases and comparison with other configuration languages, hoping to help you understand declarative configuration technology and KCL language. For more information about the concept, background and design of KCL, please visit the <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL website</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-reference">5. Reference<a href="#5-reference" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><ul><li>KusionStack Cloud Native Configuration Practice Blog: <a href="https://kusionstack.io/blog/2021-kusion-intro" target="_blank" rel="noopener noreferrer">https://kusionstack.io/blog/2021-kusion-intro</a></li><li>Terraform Language: <a href="https://www.terraform.io/language" target="_blank" rel="noopener noreferrer">https://www.terraform.io/language</a></li><li>Terraform Provider Kubernetes: <a href="https://github.com/hashicorp/terraform-provider-kubernetes" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-kubernetes</a></li><li>Terraform Provider AWS: <a href="https://github.com/hashicorp/terraform-provider-aws" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-aws</a></li><li>Pulumi: <a href="https://www.pulumi.com/docs/" target="_blank" rel="noopener noreferrer">https://www.pulumi.com/docs/</a></li><li>Pulumi vs. Terraform: <a href="https://www.pulumi.com/docs/intro/vs/terraform/" target="_blank" rel="noopener noreferrer">https://www.pulumi.com/docs/intro/vs/terraform/</a></li><li>Google SRE Work Book Configuration Design: <a href="https://sre.google/workbook/configuration-design/" target="_blank" rel="noopener noreferrer">https://sre.google/workbook/configuration-design/</a></li><li>Google Borg Paper: <a href="https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43438.pdf" target="_blank" rel="noopener noreferrer">https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43438.pdf</a></li><li>Holistic Configuration Management at Facebook: <a href="https://sigops.org/s/conferences/sosp/2015/current/2015-Monterey/printable/008-tang.pdf" target="_blank" rel="noopener noreferrer">https://sigops.org/s/conferences/sosp/2015/current/2015-Monterey/printable/008-tang.pdf</a></li><li>JSON Spec: <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">https://www.json.org/json-en.html</a></li><li>YAML Spec: <a href="https://yaml.org/spec/" target="_blank" rel="noopener noreferrer">https://yaml.org/spec/</a></li><li>GCL: <a href="https://github.com/rix0rrr/gcl" target="_blank" rel="noopener noreferrer">https://github.com/rix0rrr/gcl</a></li><li>HCL: <a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/hcl</a></li><li>CUE: <a href="https://github.com/cue-lang/cue" target="_blank" rel="noopener noreferrer">https://github.com/cue-lang/cue</a></li><li>Jsonnet: <a href="https://github.com/google/jsonnet" target="_blank" rel="noopener noreferrer">https://github.com/google/jsonnet</a></li><li>Dhall: <a href="https://github.com/dhall-lang/dhall-lang" target="_blank" rel="noopener noreferrer">https://github.com/dhall-lang/dhall-lang</a></li><li>Thrift: <a href="https://github.com/Thriftpy/thriftpy2" target="_blank" rel="noopener noreferrer">https://github.com/Thriftpy/thriftpy2</a></li><li>Kustomize: <a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">https://kustomize.io/</a></li><li>Kube-linter: <a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">https://github.com/stackrox/kube-linter</a></li><li>Checkov: <a href="https://github.com/bridgecrewio/checkov" target="_blank" rel="noopener noreferrer">https://github.com/bridgecrewio/checkov</a></li><li>KCL Documents: <a href="https://kcl-lang.io/docs/reference/lang/tour" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/reference/lang/tour</a></li><li>How Terraform Works: A Visual Intro: <a href="https://betterprogramming.pub/how-terraform-works-a-visual-intro-6328cddbe067" target="_blank" rel="noopener noreferrer">https://betterprogramming.pub/how-terraform-works-a-visual-intro-6328cddbe067</a></li><li>How Terraform Works: Modules Illustrated: <a href="https://awstip.com/terraform-modules-illustrate-26cbc48be83a" target="_blank" rel="noopener noreferrer">https://awstip.com/terraform-modules-illustrate-26cbc48be83a</a></li><li>Helm: <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">https://helm.sh/</a></li><li>Helm vs. Kustomize: <a href="https://harness.io/blog/helm-vs-kustomize" target="_blank" rel="noopener noreferrer">https://harness.io/blog/helm-vs-kustomize</a></li><li>KubeVela: <a href="https://kubevela.io/docs/" target="_blank" rel="noopener noreferrer">https://kubevela.io/docs/</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
        </item>
        <item>
            <title><![CDATA[KCL Introduction on GIAC 2021 Meeting]]></title>
            <link>https://kcl-lang.github.io/blog/2021-kcl-intro</link>
            <guid>https://kcl-lang.github.io/blog/2021-kcl-intro</guid>
            <pubDate>Tue, 03 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[This blog introduces the birth background, language characteristics, practical exploration and future development of KCL.]]></description>
            <content:encoded><![CDATA[<p>This blog introduces the birth background, language characteristics, practical exploration and future development of KCL.</p><ul><li>Introduction：<a href="https://giac.msup.com.cn/course?id=15307" target="_blank" rel="noopener noreferrer">https://giac.msup.com.cn/course?id=15307</a></li><li>Content：<a href="https://segmentfault.com/a/1190000040455559" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000040455559</a></li><li><a href="https://gw.alipayobjects.com/os/bmw-prod/2cb0c283-5f24-485e-b635-b6efac887eba.pdf" target="_blank" rel="noopener noreferrer">PDF (Chinese)</a></li></ul><p><a href="https://gw.alipayobjects.com/os/bmw-prod/2cb0c283-5f24-485e-b635-b6efac887eba.pdf" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="KCL Talk Cover" src="/assets/images/talk-cover-1b32f4646270a54de3c7fad51b06fc56.png" width="1820" height="1366" class="img_ev3q"></a></p>]]></content:encoded>
            <category>KCL</category>
        </item>
    </channel>
</rss>