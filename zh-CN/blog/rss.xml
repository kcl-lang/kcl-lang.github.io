<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>KCL programming language. Blog</title>
        <link>https://kcl-lang.github.io/zh-CN/blog</link>
        <description>KCL programming language. Blog</description>
        <lastBuildDate>Thu, 27 Apr 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-CN</language>
        <item>
            <title><![CDATA[See Goodbye to Old KCLVM-Go SDK, New One is Out]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2023-new-version-feature-interpretation-kclvm-go-feature-overview</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2023-new-version-feature-interpretation-kclvm-go-feature-overview</guid>
            <pubDate>Thu, 27 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[What is kclvm-go?]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-kclvm-go">What is <code>kclvm-go</code>?<a href="#what-is-kclvm-go" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>kclvm is a runtime library for the KCL language that provides a programming interface for interacting with the KCL compiler. It is a client library that can be used to perform various operations on KCL source code such as execution and formatting. kclvm-go is a Go language wrapper for kclvm that provides an SDK for KCL language integration in cloud-native environments.</p><p>The current version of <code>kclvm-go</code> is built on top of the kclvm json2 RPC API, which means that it uses the same API as other language KCL clients to interact with KCL source code. The way it works is similar to other language KCL SDKs, but it provides a more user-friendly Go language style wrapper.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-problems-does-the-new-version-of-kclvm-go-solve">What problems does the new version of <code>kclvm-go</code> solve?<a href="#what-problems-does-the-new-version-of-kclvm-go-solve" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>KCL is closely related to the cloud-native domain as a configuration language, while on the other hand, Go has become the de facto standard programming language for cloud-native domains. In this context, the development of a Go SDK for the KCL compiler to directly interact with Go was necessary, which is the reason for the creation of <code>kclvm-go</code>.</p><p>The initial version of the KCL compiler and runtime were written in Python, and the runtime for the first version of the KCL language had a lot of room for improvement in terms of performance and security due to the performance issues and characteristics of the dynamic nature of the Python language. In light of security and efficiency considerations, later versions of the KCL compiler were written in the Rust programming language. As a result, the new version of <code>kclvm-go</code> is based on rust-implemented kclvm packaging, eliminating Python dependencies, simplifying installation, and optimizing the user experience.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="quickly-experience-kclvm-go-via-the-command-line">Quickly experience kclvm-go via the command line<a href="#quickly-experience-kclvm-go-via-the-command-line" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p><code>kclvm-go</code> provides a built-in command line tools named <code>kcl-go</code> ,which supports one-click installation through <code>go install</code>. The local Go version must be 1.18+ and the complete CGO toolchain is required.</p><p>Simply run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kusionstack.io/kclvm-go/cmds/kcl-go@latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a new KCL source file hello.k</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"${metadata.name}:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And then execute the KCL directly from the command line with:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">% kcl-go run ./hello.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          image: </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - containerPort: </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-integrate-kcl-with-go-code">How to integrate KCL with Go code?<a href="#how-to-integrate-kcl-with-go-code" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>Here is an example of how to integrate KCL into your Go program. Using the hello.k file from the previous example, construct the following main.go code:</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"kusionstack.io/kclvm-go"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> kclvm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MustRun</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"./hello.k"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetRawYamlResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>kclvm.MustRun("./hello.k").GetRawYamlResult()</code> runs the corresponding KCL source file</li><li><code>fmt.Println(result)</code> prints the result of the run</li></ul><p>The local environment requires Go version 1.18+ and a complete CGO toolchain. Add the <code>kclvm-go</code> dependency to this command line tool by running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go get kusionstack.io/kclvm-go@main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following command runs the Go program:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">% go run main.go      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          image: </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - containerPort: </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>Through the kclvm-go version change, we have removed Python dependencies and switched to a more efficient Rust runtime. The article briefly demonstrates how to use the kcl-go command line tool to execute KCL source code and how to integrate KCL into your Go program.</p><p>In addition to compiling and running KCL source code, kclvm-go provides a variety of features to facilitate KCL integration in Go, including:</p><ul><li>KCL static error analysis (lint and format)</li><li>KCL dependency analysis</li><li>Go struct and KCL Schema mutual conversion</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-resources">Additional Resources<a href="#additional-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>Thank all KCL users for their valuable feedback and suggestions during this version release. For more resources, please refer to:</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL Website</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion Website</a></li><li><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL Repo</a></li><li><a href="https://github.com/KusionStack/kclvm-go" target="_blank" rel="noopener noreferrer">kclvm-go Repo</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Repo</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Repo</a></li></ul><p>See the <a href="https://github.com/KusionStack/community" target="_blank" rel="noopener noreferrer">community</a> for ways to join us. ğŸ‘ğŸ‘ğŸ‘</p>]]></content:encoded>
            <category>KCL</category>
            <category>kclvm-go</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.4.6 å‘å¸ƒæ—¥å¿—]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.6-release-blog</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.6-release-blog</guid>
            <pubDate>Fri, 14 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[ç®€ä»‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ KCL v0.4.6 æ–°ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼æœ¬æ¬¡å‘å¸ƒä¸ºå¤§å®¶å¸¦æ¥äº†ä¸‰æ–¹é¢çš„é‡ç‚¹æ›´æ–°ï¼š<strong>è¯­è¨€</strong>ã€<strong>å·¥å…·é“¾</strong>ã€<strong>ç¤¾åŒºé›†æˆ &amp; æ‰©å±•æ”¯æŒ</strong>ã€‚</p><ul><li><em>ä½¿ç”¨ IDE æ’ä»¶æå‡ KCL ä»£ç ç¼–å†™ä½“éªŒå’Œæ•ˆç‡</em></li><li><em>Helm/Kustomize/KPT äº‘åŸç”Ÿç¤¾åŒºå·¥å…·é›†æˆ</em></li><li><em>å®Œå–„ KCL å¤šè¯­è¨€ SDKï¼Œæ–¹ä¾¿åº”ç”¨ç¨‹åºé›†æˆ</em></li></ul><p>è¿›ä¸€æ­¥æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/KusionStack/KCLVM/releases/tag/v0.4.6" target="_blank" rel="noopener noreferrer">KCL v0.4.6 å‘å¸ƒé¡µé¢</a> æˆ–è€… <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">KCL å®˜æ–¹ç½‘ç«™</a> è·å¾—ä¸‹è½½å®‰è£…æŒ‡å—å’Œè¯¦ç»†å‘å¸ƒä¿¡æ¯ã€‚</p><p><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>æœ¬æ–‡é‡ç‚¹ä»‹ç» KCL v0.4.6 ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹ä»¥åŠ KCL ç¤¾åŒºçš„è¿‘æœŸåŠ¨æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¯­è¨€æ›´æ–°">è¯­è¨€æ›´æ–°<a href="#è¯­è¨€æ›´æ–°" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å†…ç½®å‡½æ•°æ›´æ–°">å†…ç½®å‡½æ•°æ›´æ–°<a href="#å†…ç½®å‡½æ•°æ›´æ–°" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>KCL å­—ç¬¦ä¸²æ–°å¢ <code>removeprefix</code> å’Œ <code>removesuffix</code> æˆå‘˜å‡½æ•°ç”¨äºå»é™¤å­—ç¬¦ä¸²çš„å‰ç¼€å’Œåç¼€å­å­—ç¬¦ä¸²</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prefix-string"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">removeprefix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"prefix-"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># "string" </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string-suffix"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">removesuffix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"-suffix"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># "string"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä½¿ç”¨æ–¹å¼ <a href="https://kcl-lang.io/docs/reference/model/builtin#string-builtin-member-functions" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¼–è¯‘å™¨æç¤ºä¿¡æ¯æ”¹è¿›">ç¼–è¯‘å™¨æç¤ºä¿¡æ¯æ”¹è¿›<a href="#ç¼–è¯‘å™¨æç¤ºä¿¡æ¯æ”¹è¿›" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œè¿è¡Œä¸€æ¬¡ KCL å‘½ä»¤è¡Œå·¥å…·åªä¼šæ˜¾ç¤ºä¸€ä¸ªé”™è¯¯ä¿¡æ¯ä¸è­¦å‘Šï¼Œåœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œæ”¯æŒäº†ä¸€æ¬¡ç¼–è¯‘æ˜¾ç¤ºå¤šä¸ªé”™è¯¯ä¸è­¦å‘Šçš„èƒ½åŠ›å¹¶æ”¹å–„äº†é”™è¯¯æç¤ºä¿¡æ¯ï¼Œç”¨äºæå‡ KCL ä»£ç é”™è¯¯æ’æŸ¥æ•ˆç‡ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹ KCL ä»£ç  (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> "kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹ KCL å‘½ä»¤è¡Œï¼Œå¯ä»¥çœ‹åˆ°ä¼šåŒæ—¶æç¤ºå­—ç¬¦ä¸²ç¼–å†™é”™è¯¯å’ŒèŠ±æ‹¬å·æœªæ­£ç¡®åŒ¹é…é”™è¯¯çš„è¯­æ³•é”™è¯¯ä¿¡æ¯</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">E1001</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: InvalidSyntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> main.k:2:21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  |                     ^ unterminated string</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">error[E1001]: InvalidSyntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> --&gt; main.k:2:24</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">2 |     labels = {key = "</span><span class="token plain">kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                        ^ expected </span><span class="token string" style="color:#e3116c">"}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é¡¶çº§-schema-è¯­å¥åˆå¹¶è¿ç®—ç¬¦">é¡¶çº§ schema è¯­å¥åˆå¹¶è¿ç®—ç¬¦<a href="#é¡¶çº§-schema-è¯­å¥åˆå¹¶è¿ç®—ç¬¦" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ç¼–å†™å¦‚ä¸‹ KCL ä»£ç æ—¶ï¼Œä¼šå°†ä¸¤ä¸ª schema é…ç½®è¿›è¡Œåˆå¹¶åè¾“å‡ºï¼Œåœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œè¦æ±‚æ˜¾å¼ä½¿ç”¨å±æ€§åˆå¹¶è¿ç®—ç¬¦è€Œä¸æ˜¯å±æ€§è¦†ç›–è¿ç®—ç¬¦</p><ul><li>æ›´æ–°å‰</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æ›´æ–°å</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use the union operator `:` instead of the override operator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use the union operator `:` instead of the override operator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è·¯å¾„é€‰æ‹©å™¨å‚æ•°ç®€åŒ–">è·¯å¾„é€‰æ‹©å™¨å‚æ•°ç®€åŒ–<a href="#è·¯å¾„é€‰æ‹©å™¨å‚æ•°ç®€åŒ–" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>æˆ‘ä»¬ä½¿ç”¨ path selector CLI å‚æ•° (-S) ä¸å¿…å†å¡«å…¥åŒ…è·¯å¾„ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ç­›é€‰å†…éƒ¨å˜é‡</p><p>å¯¹äºå¦‚ä¸‹çš„ KCL ä»£ç  (main.k):</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Alice"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k -S person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: Alice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age: </span><span class="token number" style="color:#36acaa">18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é”™è¯¯ä¿®å¤">é”™è¯¯ä¿®å¤<a href="#é”™è¯¯ä¿®å¤" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å•è¡Œæ¡ä»¶é…ç½®å—è¯­æ³•è§£æé”™è¯¯">å•è¡Œæ¡ä»¶é…ç½®å—è¯­æ³•è§£æé”™è¯¯<a href="#å•è¡Œæ¡ä»¶é…ç½®å—è¯­æ³•è§£æé”™è¯¯" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ç¼–å†™å¦‚ä¸‹ KCL ä»£ç æ—¶ä¼šå‡ºç°éé¢„æœŸçš„è¯­æ³•é”™è¯¯ï¼Œåœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¿®å¤äº†æ­¤ç±»ç±»ä¼¼çš„é—®é¢˜</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">env </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> env </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"kubernetes.io/env"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="schema-å¿…é€‰å±æ€§æ£€æŸ¥">Schema å¿…é€‰å±æ€§æ£€æŸ¥<a href="#schema-å¿…é€‰å±æ€§æ£€æŸ¥" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ç¼–å†™å¦‚ä¸‹ KCL ä»£ç æ—¶ï¼Œæ²¡æœ‰æŒ‰é¢„æœŸæç¤º <code>versions</code> å±æ€§æ²¡æœ‰èµ‹å€¼çš„é”™è¯¯ï¼Œåœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¿®å¤äº†æ­¤ç±»ç±»ä¼¼çš„é—®é¢˜</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema App</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    versions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Version </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å·¥å…·é“¾æ›´æ–°">å·¥å…·é“¾æ›´æ–°<a href="#å·¥å…·é“¾æ›´æ–°" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-vs-code-æ’ä»¶">KCL VS Code æ’ä»¶<a href="#kcl-vs-code-æ’ä»¶" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨æ­¤æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬å‘å¸ƒäº†å…¨æ–°çš„ KCL VS Code æ’ä»¶å’Œä½¿ç”¨ Rust è¯­è¨€é‡å†™çš„è¯­è¨€æœåŠ¡æœåŠ¡å™¨ï¼Œç›¸æ¯”äºä¹‹å‰ KCL ç‰ˆæœ¬æ€§èƒ½çº¦æå‡ 20 å€ï¼Œå¹¶æ”¯æŒäº† KCL é”™è¯¯è­¦å‘Šåœ¨ IDE ä¸­å®æ—¶æ˜¾ç¤ºï¼Œä»¥åŠ KCL ä»£ç è¡¥å…¨ç­‰æ–°åŠŸèƒ½ã€‚</p><ul><li><strong>é”™è¯¯ä¸å‘Šè­¦å®æ—¶æ˜¾ç¤º</strong></li></ul><p><img loading="lazy" alt="Diagnostics" src="/zh-CN/assets/images/Diagnostics-716fc3b938a94e4db2cbafaad4f4174d.gif" width="1312" height="780" class="img_ev3q"></p><ul><li><strong>è·³è½¬</strong></li></ul><p><img loading="lazy" alt="Goto Definition" src="/zh-CN/assets/images/GotoDef-0875243eacd6b76e49b7a5b95cb9ce55.gif" width="1312" height="780" class="img_ev3q"></p><ul><li><strong>è¡¥å…¨</strong></li></ul><p><img loading="lazy" alt="Completion" src="/zh-CN/assets/images/Completion-584771cd4bed237e74d3da3decaa9757.gif" width="1312" height="780" class="img_ev3q"></p><ul><li><strong>æ‚¬åœ</strong></li></ul><p><img loading="lazy" alt="Hover" src="/zh-CN/assets/images/Hover-339697d17ca0d4f167b1b1a904c9f1aa.gif" width="1312" height="780" class="img_ev3q"></p><p>æ›´å¤š KCL VS Code æ’ä»¶å®‰è£…æ–¹å¼åŠè¯¦ç»†æ›´æ–°å†…å®¹<a href="https://kcl-lang.io/docs/tools/Ide/vs-code" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kusion-vs-code-æ’ä»¶">Kusion VS Code æ’ä»¶<a href="#kusion-vs-code-æ’ä»¶" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ KCL VS Code æ’ä»¶çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¸äº‘åŸç”Ÿè¿ç»´å‘å¸ƒåœºæ™¯ç»“åˆæ›´ç´§å¯†çš„ Kusion VS Code æ’ä»¶ï¼Œæ”¯æŒä¸€é”®åº”ç”¨é…ç½®é¢„è§ˆä¸å‘å¸ƒï¼Œ<a href="https://github.com/KusionStack/vscode-kusion" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŒ…ç®¡ç†å·¥å…·">åŒ…ç®¡ç†å·¥å…·<a href="#åŒ…ç®¡ç†å·¥å…·" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ KCL v0.4.6 æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†å…¨æ–°çš„ KCL åŒ…ç®¡ç†å·¥å…· alpha ç‰ˆæœ¬ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å‡ ä¸ªå‘½ä»¤å³å¯è·å¾—ç¤¾åŒºä¸­å·²ç»ç¼–å†™å¥½çš„ KCL æ¨¡å‹ã€‚æ¯”å¦‚å¯ä»¥é€šè¿‡åŒ…ç®¡ç†å·¥å…·ä¸€é”®å¯¼å…¥ KCL Kubernetes æ¨¡å‹å¹¶ä½¿ç”¨</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm init kubernetes_demo </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kpm </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -git https://github.com/awesome-kusion/konfig.git -tag v0.0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¼–å†™ KCL ä»£ç  (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> konfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">base</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pkg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kusion_kubernetes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">demo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx-deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹ KCL å‘½ä»¤å³å¯è·å¾—ä¸€ä¸ª Nginx Deployment YAML è¾“å‡º</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k -S demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: nginx-deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - containerPort: </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æ›´å¤š KCL åŒ…ç®¡ç†å·¥å…·å®‰è£…æ–¹å¼ã€è¯¦ç»†å†…å®¹åŠç”¨ä¾‹<a href="https://kcl-lang.io/docs/user_docs/guides/package-management/overview" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>æ›´å¤š Konfig æ¨¡å‹åº“çš„å†…å®¹å’Œä½¿ç”¨æ–¹å¼<a href="https://kcl-lang.io/docs/user_docs/guides/working-with-konfig/overview" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºé›†æˆ--æ‰©å±•æ›´æ–°">ç¤¾åŒºé›†æˆ &amp; æ‰©å±•æ›´æ–°<a href="#ç¤¾åŒºé›†æˆ--æ‰©å±•æ›´æ–°" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-é…ç½®ç®¡ç†å·¥å…·æ‰©å±•æ”¯æŒ">Kubernetes é…ç½®ç®¡ç†å·¥å…·æ‰©å±•æ”¯æŒ<a href="#kubernetes-é…ç½®ç®¡ç†å·¥å…·æ‰©å±•æ”¯æŒ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ KCL v0.4.6 ä¸­ï¼Œæˆ‘ä»¬ä»¥ç»Ÿä¸€çš„ç¼–ç¨‹ç•Œé¢æ–¹å¼ä¸º Kubernetes ç¤¾åŒºçš„ Helm, Kustomize, KPT ç­‰é…ç½®ç®¡ç†å·¥å…·æä¾›äº†æ’ä»¶æ”¯æŒï¼Œç¼–å†™å‡ è¡Œ KCL ä»£ç å³å¯æ— ä¾µå…¥åœ°å®Œæˆå¯¹å­˜é‡ Kustomize YAMLï¼ŒHelm Charts çš„ç¼–è¾‘å’Œæ ¡éªŒï¼Œæ¯”å¦‚ç¼–å†™å°‘é‡ KCL ä»£ç ä¿®æ”¹èµ„æºæ ‡ç­¾/æ³¨è§£, æ³¨å…¥ sidecar å®¹å™¨é…ç½®ï¼Œä½¿ç”¨ KCL schema æ ¡éªŒèµ„æºç­‰ã€‚</p><p>ä¸‹é¢ä»¥ Kustomize å·¥å…·å¯¹ KCL çš„é›†æˆä¸ºä¾‹è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚ä½¿ç”¨ Kustomize KCL æ’ä»¶æ— éœ€å®‰è£…ä»»ä½•ä¸ KCL ç›¸å…³çš„äºŒè¿›åˆ¶ï¼Œä»…éœ€æ‚¨æœ¬åœ°å®‰è£…æœ‰ Kustomize å·¥å…·å³å¯ã€‚</p><p>é¦–å…ˆæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è·å–ä¸€ä¸ª Kustomize YAML é…ç½®ç¤ºä¾‹:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/KusionStack/kustomize-kcl.git </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token builtin class-name">cd</span><span class="token plain"> ./kustomize-kcl/examples/set-annotation/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿ç”¨ KCL ä»£ç ä»…ä¸ºæ‰€æœ‰çš„ <code>Deployment</code> èµ„æºæ·»åŠ ä¸€ä¸ª <code>managed-by=kustomize-kcl</code> æ³¨è§£</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> kustomize fn run ./local-resource/ --as-current-user --dry-run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥å¾—åˆ°å¦‚ä¸‹ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internal.config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MyApp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9376</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internal.config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># This annotation is added through the kcl code.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kustomize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.14.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ä¸Šè¿° YAML é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä»…ç¼–å†™äº†ä¸€è¡Œ KCL ä»£ç å°±å®Œæˆä¸º Deployment èµ„æºæ·»åŠ ä¸€ä¸ª <code>managed-by=kustomize-kcl</code> æ³¨è§£</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">resource </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> resource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"managed-by"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> resource </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"resource_list"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–æˆ‘ä»¬ä¸º Kustomize/Helm/KPT ä¸‰ä¸ªå·¥å…·å‡æä¾›äº†å¸¸ç”¨çš„å®¹å™¨ã€æœåŠ¡é…ç½®ä¿®æ”¹æ ¡éªŒ KCL æ¨¡å‹ï¼Œå¹¶ä¸”ä¼šæŒç»­å®Œå–„ï¼Œæ¬¢è¿ç¤¾åŒºå°ä¼™ä¼´ä¸€èµ·å‚ä¸å…±å»ºã€‚</p><ul><li>æ›´å¤š Kustomize KCL æ’ä»¶è¯¦ç»†å†…å®¹ä»¥åŠç”¨ä¾‹ <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/kustomize_kcl_plugin" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>æ›´å¤š Helm KCL æ’ä»¶è¯¦ç»†å†…å®¹ä»¥åŠç”¨ä¾‹ <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/helm_kcl_plugin" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>æ›´å¤š KPT KCL æ’ä»¶è¯¦ç»†å†…å®¹ä»¥åŠç”¨ä¾‹ <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/kpt_kcl_sdk" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤šè¯­è¨€-sdk">å¤šè¯­è¨€ SDK<a href="#å¤šè¯­è¨€-sdk" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨æ­¤æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬å‘å¸ƒäº†å…¨æ–°çš„ kclvm-go SDK å°† KCL é›†æˆåˆ°æ‚¨çš„ Go åº”ç”¨ç¨‹åºä¸­ï¼Œå¹¶æä¾›ä¸°å¯Œçš„ API ä¸ KCL è¿›è¡Œäº¤äº’ã€‚æ‚¨å¯ä»¥åœ¨ <a href="https://kcl-lang.io/docs/next/reference/xlang-api/go-api" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a> æŸ¥è¯¢è¯¦ç»†çš„ API æ–‡æ¡£ã€‚æ­¤å¤–æˆ‘ä»¬è¿˜æ›´æ–°äº†å¦‚ä¸‹ç‰¹æ€§å’Œé”™è¯¯ä¿®å¤ï¼š</p><ul><li>æ„Ÿè°¢ @jakezhu9 ä¿®å¤äº† kclvm-go æœªé¢„æœŸçš„ KCL æ ¼å¼åŒ– API åœ¨ CI Pipeline ä¸­å•å…ƒæµ‹è¯•é”™è¯¯</li><li>æ„Ÿè°¢ @Ekko è´¡çŒ® Go struct å’Œ KCL schema åŒå‘è½¬æ¢æ”¯æŒï¼Œè¯¦è§:<ul><li><a href="https://github.com/KusionStack/kclvm-go/blob/main/pkg/tools/gen/genkcl.go#L23" target="_blank" rel="noopener noreferrer">Go struct -&gt; KCL schema</a></li><li><a href="https://github.com/KusionStack/kclvm-go/blob/main/pkg/tools/gen/gengo.go#L23" target="_blank" rel="noopener noreferrer">KCL schema -&gt; Go struct</a></li></ul></li><li>KCL schema åˆ° protobuf message çš„è½¬æ¢æ”¯æŒï¼Œ<a href="https://github.com/KusionStack/kclvm-go/blob/main/pkg/tools/gen/genpb.go#L25" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>KCL æ–°å¢è·å– schema ç±»å‹å’Œå®ä¾‹ APIï¼Œ<a href="https://kcl-lang.io/docs/reference/xlang-api/go-api#func-getschematype" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤">å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤<a href="#å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><ul><li>KCL python plugin åŠŸèƒ½é»˜è®¤ä¸å¼€å¯ï¼Œå¦‚éœ€å¼€å¯å¯å‚è€ƒ <a href="https://kcl-lang.io/docs/reference/plugin/overview" target="_blank" rel="noopener noreferrer">KCL Plugin æ–‡æ¡£</a></li><li>KCL playground æ”¯æŒä»£ç åˆ†äº«èƒ½åŠ›ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¿é—® <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL å®˜ç½‘</a> å¹¶ç‚¹å‡» Playground æŒ‰é’®è¿›è¡Œä½“éªŒ</li><li>æ›´å¤šæ›´æ–°ä¸é”™è¯¯ä¿®å¤ï¼Œ<a href="https://github.com/KusionStack/KCLVM/milestone/3?closed=1" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–‡æ¡£æ›´æ–°">æ–‡æ¡£æ›´æ–°<a href="#æ–‡æ¡£æ›´æ–°" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> æ–°å¢ KCL v0.4.6 æ–‡æ¡£å†…å®¹å¹¶æ”¯æŒç‰ˆæœ¬åŒ–è¯­ä¹‰é€‰é¡¹ï¼Œç›®å‰æ”¯æŒ v0.4.3, v0.4.4, v0.4.5 å’Œ v0.4.6 ç‰ˆæœ¬é€‰æ‹©ã€‚åŒæ—¶æ¬¢è¿ç¤¾åŒºåŒå­¦è¿›è¡Œæ–‡æ¡£å…±å»ºã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>é¢„è®¡ 2023 å¹´å¹´ä¸­ï¼Œæˆ‘ä»¬å°†å‘å¸ƒ <strong>KCL v0.5.0 ç‰ˆæœ¬</strong>ï¼Œé¢„æœŸé‡ç‚¹æ¼”è¿›åŒ…æ‹¬ï¼š</p><ul><li>æ›´å¤šé’ˆå¯¹åœºæ™¯é—®é¢˜çš„ KCL è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›ï¼Œç”¨æˆ·ç•Œé¢æŒç»­ä¼˜åŒ–ä¸ä½“éªŒæå‡ï¼Œç”¨æˆ·æ”¯æŒå’Œç—›ç‚¹è§£å†³</li><li>æ›´å¤š IDE æ’ä»¶ã€åŒ…ç®¡ç†å·¥å…·ã€Helm/Kustomize/KPT åœºæ™¯é›†æˆã€åŠŸèƒ½æ”¯æŒå’Œç”¨æˆ·ä½“éªŒæå‡</li><li>é’ˆå¯¹äº‘åŸç”Ÿåœºæ™¯æä¾›æ›´å¤šå¼€ç®±å³ç”¨çš„ KCL æ¨¡å‹æ”¯æŒï¼Œä¸»è¦åŒ…å«å®¹å™¨ã€æœåŠ¡ã€è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œç­‰</li><li>æ”¯æŒ KCL Schema ç›´æ¥ç”Ÿæˆ Kubernetes CRD</li><li>æ”¯æŒ kubectl å’Œ helmfile KCL pluginï¼Œé€šè¿‡ KCL ä»£ç ç›´æ¥ç”Ÿæˆã€ç¼–è¾‘å’Œæ ¡éªŒ Kubernetes åŸç”Ÿèµ„æº</li><li>æ”¯æŒåœ¨ Kubernetes è¿è¡Œæ—¶é€šè¿‡ Admission Controller è¿è¡Œ KCL ä»£ç å¯¹ YAML è¿›è¡Œç¼–è¾‘å’Œæ ¡éªŒ</li><li>æ›´å¤šé Kubernetes åœºæ™¯æ”¯æŒï¼Œå¦‚é€šè¿‡ KCL Schema å¯¹ AI æ¨¡å‹è¿›è¡Œæ•°æ®æ¸…ç†å’Œæ•°æ®åº“ Schema é›†æˆæ”¯æŒ</li></ul><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/KusionStack/KCLVM/milestone/5" target="_blank" rel="noopener noreferrer">KCL v0.5.0 Milestone</a></p><p>å¦‚æœæ‚¨æœ‰æ›´å¤šçš„æƒ³æ³•å’Œéœ€æ±‚ï¼Œæ¬¢è¿åœ¨ KCL Github ä»“åº“å‘èµ· <a href="https://github.com/KusionStack/KCLVM/issues" target="_blank" rel="noopener noreferrer">Issues</a>ï¼Œä¹Ÿæ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ™Œ ğŸ™Œ ğŸ™Œ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/faq-kcl" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·å’Œç¤¾åŒºå°ä¼™ä¼´åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µåé¦ˆä¸å»ºè®®ã€‚å—é™äºæ–‡ç« ç¯‡å¹…ï¼Œåç»­æˆ‘ä»¬ä¼šæ’°å†™æ›´å¤š KCL v0.4.6 æ–°ç‰ˆæœ¬åŠŸèƒ½è§£è¯»ç³»åˆ—æ–‡ç« ï¼Œæ•¬è¯·æœŸå¾…!</p><p>æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/KusionStack/community" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/community</a></p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
            <category>KusionStack</category>
            <category>Kusion</category>
        </item>
        <item>
            <title><![CDATA[OS2ATC 2022 ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2023-03-26-kcl-os2atc-meeting</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2023-03-26-kcl-os2atc-meeting</guid>
            <pubDate>Sun, 26 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[PDF ä¸‹è½½]]></description>
            <content:encoded><![CDATA[<p><a href="https://kcl-lang.github.io/talks/kcl-os2atc2022.pdf" target="_blank" rel="noopener noreferrer">PDF ä¸‹è½½</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
            <category>Policy</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.4.6-alpha.1 å‘å¸ƒæ—¥å¿—]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.6-alpha.1-release-blog</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.6-alpha.1-release-blog</guid>
            <pubDate>Mon, 20 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[ç®€ä»‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ KCL v0.4.6-alpha.1 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼</p><p>æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/KusionStack/KCLVM/releases/tag/v0.4.6-alpha.1" target="_blank" rel="noopener noreferrer">KCL v0.4.6-alpha.1 å‘å¸ƒé¡µé¢</a> æˆ–è€… <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL å®˜æ–¹ç½‘ç«™</a> è·å¾— KCL äºŒè¿›åˆ¶ä¸‹è½½é“¾æ¥å’Œæ›´å¤šè¯¦ç»†å‘å¸ƒä¿¡æ¯ã€‚</p><p><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‘å¸ƒå†…å®¹">å‘å¸ƒå†…å®¹<a href="#å‘å¸ƒå†…å®¹" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><ul><li>åŒ…å«æ•°å­—ã€å­—é¢å€¼ã€æ‹¬å·ç­‰è¯æ³•é”™è¯¯æ¢å¤</li><li>KCL IDE æ’ä»¶æ”¯æŒé”™è¯¯å’Œå‘Šè­¦æ˜¾ç¤ºï¼Œè·³è½¬ç­‰èƒ½åŠ›</li><li>éƒ¨åˆ†ç¼–è¯‘å™¨æŠ¥é”™æ”¹å–„</li><li>KCL Playground æ”¯æŒä»£ç åˆ†äº«èƒ½åŠ›</li><li><a href="https://github.com/KusionStack/KCLVM/issues/434" target="_blank" rel="noopener noreferrer">Kubernetes KPT å·¥å…·é›†æˆæ–¹æ¡ˆè®¾è®¡</a></li><li><a href="https://github.com/KusionStack/KCLVM/issues/426" target="_blank" rel="noopener noreferrer">Kubernetes Helm KCL å·¥å…·æ’ä»¶æ–¹æ¡ˆ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><ul><li>KPM åŒ…ç®¡ç†å·¥å…·æ­£å¼å‘å¸ƒ</li><li>æ›´å¤š KCL ç¼–è¯‘å™¨è¯­æ³•é”™è¯¯æ¢å¤æ”¯æŒæ–°ç‰ˆ IDE æ’ä»¶å‘å¸ƒï¼Œæ€§èƒ½é¢„è®¡æå‡ 20 å€</li><li>Helmï¼ŒKPT ç­‰ Kubernetes å·¥å…· KCL é›†æˆæ­£å¼å‘å¸ƒ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µçš„åé¦ˆä¸å»ºè®®ã€‚æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„<a href="https://github.com/KusionStack/community" target="_blank" rel="noopener noreferrer">ç¤¾åŒº</a>è¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘</p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
            <category>KusionStack</category>
            <category>Kusion</category>
        </item>
        <item>
            <title><![CDATA[å…¨æ–°çš„ KCL Playground æ¥äº†!]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2023-kcl-playground-0.4.5-release</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2023-kcl-playground-0.4.5-release</guid>
            <pubDate>Fri, 17 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[ç®€ä»‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ KCL Playground v0.4.5 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼</p><p><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>æ‚¨å¯ä»¥è®¿é—® <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> ç‚¹å‡» playground è¿›è¡Œä½“éªŒã€‚åœ¨è¿™ä¸ªæ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒäº†æ ¹æ®è¾“å…¥ KCL ä»£ç å˜åŒ–è‡ªåŠ¨ç¼–è¯‘å’Œè¿è¡Œ KCL ä»£ç ã€æ ¼å¼åŒ–ä»£ç å’Œä»¥åŠå…±äº«ä»£ç çš„èƒ½åŠ›ã€‚æ¬¢è¿å‚ä¸æ’°å†™å¹¶å°† KCL ä»£ç åˆ†äº«ç»™æ‚¨çš„å°ä¼™ä¼´ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-website-playground-fde421b468bd7cfd83090652234458c2.png" width="3352" height="966" class="img_ev3q"></p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-playground-d8a56974f6c76a4caaa14ce63212d1a6.png" width="1400" height="509" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>é¢„è®¡ 2023 å¹´ 4 æœˆä¸­æ—¬ï¼Œæˆ‘ä»¬å°†å‘å¸ƒ <strong>KCL Playground v0.4.6 ç‰ˆæœ¬</strong>ï¼Œé¢„æœŸé‡ç‚¹æ¼”è¿›åŒ…æ‹¬ï¼šKCL ç‰ˆæœ¬é€‰æ‹©ï¼Œå¯¼å…¥å·²æœ‰ä»£ç ç‰‡æ®µç­‰èƒ½åŠ›ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µçš„åé¦ˆä¸å»ºè®®ã€‚æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/KusionStack/community" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/community</a></p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
            <category>KusionStack</category>
            <category>Kusion</category>
            <category>Playground</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.4.5 å‘å¸ƒæ—¥å¿—]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.5-release-blog</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.5-release-blog</guid>
            <pubDate>Mon, 27 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[ç®€ä»‹]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ KCL v0.4.5 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼æœ¬æ¬¡å‘å¸ƒä¸»è¦ä¸º KCL è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§å’Œç¨³å®šæ€§æå‡ï¼Œé”™è¯¯ä¿¡æ¯æ”¹è¿›ä»¥åŠæ›´å¤šå¹³å°åŒ…æ‹¬ windows ç‰ˆæœ¬æ”¯æŒä»¥åŠæ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒã€‚åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç¼–å†™æ›´å°‘çš„ KCL ä»£ç æ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆï¼›åœ¨æ–°ç‰ˆæœ¬ä¸­æä¾›äº†åˆæ­¥çš„ KCL Playground æ”¯æŒå¯ç”¨äºåœ¨çº¿å…å®‰è£…ç¼–å†™å¹¶è¿è¡Œ KCL ä»£ç ï¼›æ­¤å¤–æ­¤æ¬¡æ›´æ–°è¿˜åŒ…å«å¤šé¡¹ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯ä¼˜åŒ–å’Œé”™è¯¯ä¿®å¤ã€‚</p><p>æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/KusionStack/KCLVM/releases/tag/v0.4.5" target="_blank" rel="noopener noreferrer">KCL v0.4.5 å‘å¸ƒé¡µé¢</a> æˆ–è€… <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL å®˜æ–¹ç½‘ç«™</a> è·å¾— KCL äºŒè¿›åˆ¶ä¸‹è½½é“¾æ¥å’Œæ›´å¤šè¯¦ç»†å‘å¸ƒä¿¡æ¯ã€‚</p><p><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>æœ¬æ–‡å°†ä¼šä»‹ç» KCL v0.4.5 ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹ä»¥åŠ KCL ç¤¾åŒºçš„è¿‘æœŸåŠ¨æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¯­è¨€æ›´æ–°">è¯­è¨€æ›´æ–°<a href="#è¯­è¨€æ›´æ–°" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›">KCL è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›<a href="#kcl-è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ”¯æŒ-schema-éç©ºå±æ€§æƒ°æ€§æ ¡éªŒ">æ”¯æŒ Schema éç©ºå±æ€§æƒ°æ€§æ ¡éªŒ<a href="#æ”¯æŒ-schema-éç©ºå±æ€§æƒ°æ€§æ ¡éªŒ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ”¯æŒäº† schema å±æ€§äº’ç›¸å¼•ç”¨ï¼ˆåŒ…å«ç»§æ‰¿ï¼‰ä»¥åŠ check æ ¡éªŒè¡¨è¾¾å¼çš„æƒ°æ€§æ±‚å€¼ä¸æ ¡éªŒèƒ½åŠ›ï¼Œåœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒäº†æ›´å¤šçš„ schema æƒ°æ€§æ±‚å€¼èƒ½åŠ›: Schema å±æ€§éç©ºæƒ°æ€§æ ¡éªŒã€‚æ¯”å¦‚å¯¹äºä¸‹è¿°çš„ KCL çš„ä»£ç ï¼š</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Spec </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œè¿™ä¸ªè¯­å¥ä¼šæŠ¥å±æ€§éç©ºé”™è¯¯ï¼Œv0.4.5 ç‰ˆæœ¬ä¹‹åï¼Œæ”¯æŒ Schema éç©ºå±æ€§æƒ°æ€§æ ¡éªŒèƒ½åŠ›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ v0.4.5 ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œç›´æ¥æ‰§è¡Œä¸Šè¿°ä»£ç ä¼šåœ¨ <code>schema Config</code> è¯­å¥å—çš„ <code>spec: Spec = Spec {</code> å¤„æŠ›å‡ºä¸€ä¸ª <code>spec</code> çš„ <code>value</code> å±æ€§ä¸èƒ½ä¸ºç©ºçš„é”™è¯¯ï¼Œå› ä¸ºåœ¨è¯¥å¤„åªå¯¹ <code>spec</code> çš„ <code>id</code> å±æ€§èµ‹å€¼ä¸º <code>1</code>ï¼Œè€Œæ²¡æœ‰å¯¹ <code>spec</code> çš„ <code>value</code> å±æ€§èµ‹å€¼ã€‚</p><p>åœ¨ KCL çš„ v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œæˆ‘ä»¬æ”¯æŒäº† schema å±æ€§çš„æƒ°æ€§éç©ºæ ¡éªŒèƒ½åŠ›ä¹‹åä¼šé¿å…è¿™ä¸ªé”™è¯¯çš„æŠ›å‡ºï¼Œå³å½“åœ¨ <code>config</code> å±æ€§çš„ <code>spec.value = "value"</code> ä¸ <code>spec.id = 1</code> åˆå¹¶ä¹‹åæ‰ä¼šé€’å½’åœ°å¯¹ <code>config</code> çš„æ‰€æœ‰å±æ€§è¿›è¡Œéç©ºæ£€æŸ¥ï¼Œæ­¤æ—¶ <code>spec</code> å±æ€§çš„æ‰€æœ‰å€¼æ˜¯è¢«å®Œæ•´èµ‹å€¼çš„ (<code>spec</code> çš„ <code>id</code> å­—æ®µçš„å€¼ä¸º <code>1</code>, <code>value</code> å­—æ®µä¸º <code>"value"</code>ï¼Œ)ï¼Œä¸ä¼šæŠ›å‡ºå¿…é€‰å±æ€§å­—æ®µä¸ºç©ºé”™è¯¯ã€‚</p><p>å› æ­¤åœ¨ v0.4.5 ç‰ˆæœ¬ä¹‹åï¼Œæ‰§è¡Œä¸Šè¿° KCL ä»£ç ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å®Œæ•´ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> value</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ”¯æŒé…ç½®å—å±æ€§äº’ç›¸å¼•ç”¨ä»¥æ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆ">æ”¯æŒé…ç½®å—å±æ€§äº’ç›¸å¼•ç”¨ä»¥æ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆ<a href="#æ”¯æŒé…ç½®å—å±æ€§äº’ç›¸å¼•ç”¨ä»¥æ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>åœ¨ v0.4.5 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒKCL å°šæœªæ”¯æŒé…ç½®å—å†…éƒ¨çš„å±æ€§äº’ç›¸å¼•ç”¨ï¼Œå¯¼è‡´åœ¨æŸäº›åœºæ™¯ä¸­ä¼šéœ€è¦å®šä¹‰é¢å¤–çš„é…ç½®å˜é‡æˆ–è€…æ¨¡ç‰ˆæ¥è¿›è¡Œå¼•ç”¨ï¼Œä¼šäº§ç”Ÿè¾ƒå¤šçš„é…ç½®æ¨¡ç‰ˆå’Œé‡å¤ä»£ç ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹æ‰€ç¤ºçš„ KCL ä»£ç ï¼š</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"app-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># `metadata.name` ä¸èƒ½ç›´æ¥å¼•ç”¨ `data` å†…éƒ¨çš„ `name` å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>data</code> é…ç½®å—çš„ <code>metadata.name</code> å±æ€§ä¸èƒ½ç›´æ¥å¼•ç”¨ <code>data</code> å†…éƒ¨çš„ <code>name</code> å±æ€§ï¼Œéœ€è¦é¢å¤–å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ <code>name</code> è¿›è¡Œå¼•ç”¨ã€‚</p><p>è€Œåœ¨ KCL çš„ v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œæˆ‘ä»¬æ”¯æŒäº†é…ç½®å—å±æ€§äº’ç›¸å¼•ç”¨çš„ç‰¹æ€§ï¼Œå¯ä»¥ç”¨äºæ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆï¼Œæ¯”å¦‚å¦‚ä¸‹æ‰€ç¤ºçš„ KCL ä»£ç ï¼š</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"app-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># ç›´æ¥å¼•ç”¨ `data` é…ç½®çš„ name å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>data</code> é…ç½®å—çš„ <code>metadata.name</code> å±æ€§å¯ä»¥ç›´æ¥å¼•ç”¨ <code>data</code> å†…éƒ¨çš„ <code>name</code> å±æ€§è€Œæ— éœ€å®šä¹‰é¢å¤–çš„å…¨å±€å˜é‡ã€‚</p><p>æ‰§è¡Œä¸Šè¿° KCL ä»£ç å¯ä»¥è·å¾—å¦‚ä¸‹ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"global-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"metadata-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"app.kubernetes.io/name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># ç›´æ¥å¼•ç”¨ `metadata.name`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"app.kubernetes.io/instance"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># ç›´æ¥å¼•ç”¨ `metadata.name`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># å¼•ç”¨å…¨å±€çš„ `name` å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata  </span><span class="token comment" style="color:#999988;font-style:italic"># å¼•ç”¨å…¨å±€çš„ `metadata` å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name  </span><span class="token comment" style="color:#999988;font-style:italic"># å¼•ç”¨ `data` å†…éƒ¨çš„ `metadata` å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œä¸Šè¿°ä»£ç å¯ä»¥è·å¾—å¦‚ä¸‹ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>âš ï¸ æ³¨æ„ï¼šå½“å‰ KCL ç‰ˆæœ¬å°šæœªæ”¯æŒé…ç½®å—å†…éƒ¨å±æ€§åå‘å¼•ç”¨ä»¥åŠè·³è¿‡å†…éƒ¨ä½œç”¨åŸŸç›´æ¥å¼•ç”¨å…¨å±€å˜é‡ï¼Œéœ€è¦å°†è¢«å¼•ç”¨çš„å±æ€§ä¹¦å†™åœ¨é…ç½®å¼•ç”¨å¤„çš„å‰æ–¹</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-è¯­è¨€æ–°å¢åŠŸèƒ½">KCL è¯­è¨€æ–°å¢åŠŸèƒ½<a href="#kcl-è¯­è¨€æ–°å¢åŠŸèƒ½" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å­—ç¬¦ä¸²-format-æˆå‘˜å‡½æ•°æ”¯æŒç´¢å¼•æ ¼å¼åŒ–">å­—ç¬¦ä¸² format æˆå‘˜å‡½æ•°æ”¯æŒç´¢å¼•æ ¼å¼åŒ–<a href="#å­—ç¬¦ä¸²-format-æˆå‘˜å‡½æ•°æ”¯æŒç´¢å¼•æ ¼å¼åŒ–" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼ŒKCL æ”¯æŒäº†ç±»ä¼¼ Python å­—ç¬¦ä¸² format æˆå‘˜å‡½æ•°åœ¨ <code>{}</code> æ ¼å¼åŒ–å—ä¸­ä½¿ç”¨ <code>&lt;format_ele_index&gt;[&lt;index_or_key&gt;]</code> ç´¢å¼•æ ‡è®°æ ·å¼å¯¹åˆ—è¡¨å’Œå­—å…¸ç±»å‹çš„ KCL å˜é‡è¿›è¡Œæ ¼å¼åŒ–ã€‚å…¶ä¸­</p><ul><li><code>&lt;format_ele_index&gt;</code> è¡¨ç¤ºéœ€è¦éœ€è¦åºåˆ—åŒ–åˆ—è¡¨å’Œå­—å…¸ç±»å‹å…ƒç´ çš„ç´¢å¼•</li><li><code>&lt;index_or_key&gt;</code> è¡¨ç¤ºå¯¹åº”åˆ—è¡¨å’Œå­—å…¸ç±»å‹å…ƒç´ çš„åˆ—è¡¨å­å…ƒç´ ç´¢å¼•æˆ–è€…å­—å…¸å­å…ƒç´ é”®å€¼</li></ul><p>æ¯”å¦‚å¯¹äºå¦‚ä¸‹çš„ KCL ä»£ç </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 0[0] è¡¨ç¤ºå– ["Hello", "World"] çš„ç¬¬ 0 ä¸ªå…ƒç´ ï¼š"Hello"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 0[1] è¡¨ç¤ºå– ["Hello", "World"] çš„ç¬¬ 1 ä¸ªå…ƒç´ ï¼š"World"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">listIndexFormat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"{0[0]}{0[1]}"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"Hello"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"World"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 0[0] è¡¨ç¤ºå– ["0", "1"] çš„ç¬¬ 0 ä¸ªå…ƒç´ ï¼š"1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1[Hello] è¡¨ç¤ºå– {"Hello": "World"} é”®å€¼ä¸º Hello çš„å­—å…¸å…ƒç´ ï¼š"World"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dictIndexFormat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0{0[0]}, 1{0[1]}, Hello{1[Hello]}"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"Hello"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"World"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œä¸Šè¿°ä»£ç å¯ä»¥è·å¾—å¦‚ä¸‹ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">listIndexFormat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HelloWorld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">dictIndexFormat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"00, 11, HelloWorld"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-è¯­è¨€-playground-æ›´æ–°">KCL è¯­è¨€ Playground æ›´æ–°<a href="#kcl-è¯­è¨€-playground-æ›´æ–°" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨æ­¤æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬æ›´æ–°äº† KCL Playground çš„ç‰ˆæœ¬å¹¶æ”¯æŒ KCL ä»£ç è‡ªåŠ¨ç¼–è¯‘å’Œæ ¼å¼åŒ–ä¸¤é¡¹èƒ½åŠ›ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¿é—® <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL å®˜ç½‘</a> å¹¶ç‚¹å‡» Playground æŒ‰é’®è¿›è¡Œä½“éªŒã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-website-playground-fde421b468bd7cfd83090652234458c2.png" width="3352" height="966" class="img_ev3q"></p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-playground-0034999d983e3137fb3a8fdd0d50057f.png" width="3132" height="886" class="img_ev3q"></p><p>åœ¨åç»­ KCL ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¼šæŒç»­æ›´æ–° KCL Playground æ›´å¤šèƒ½åŠ›æ”¯æŒå¦‚ KCL ç‰ˆæœ¬é€‰æ‹©ä¸ä»£ç åˆ†äº«ç­‰åŠŸèƒ½ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-æ›´å¤šå¹³å°å’Œæ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ">KCL æ›´å¤šå¹³å°å’Œæ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ<a href="#kcl-æ›´å¤šå¹³å°å’Œæ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="windows-ç‰ˆæœ¬æ”¯æŒ">Windows ç‰ˆæœ¬æ”¯æŒ<a href="#windows-ç‰ˆæœ¬æ”¯æŒ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>KCL Windows äºŒè¿›åˆ¶ç‰ˆæœ¬å¯ä»¥ä» <a href="https://github.com/KusionStack/KCLVM/releases/" target="_blank" rel="noopener noreferrer">Github</a> æ‰‹åŠ¨ä¸‹è½½å¹¶å®‰è£…ï¼Œä¸‹è½½å®Œæˆåå°† <code>{install-location}\kclvm\bin</code> æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ <code>PATH</code> ä¸­ã€‚</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$env:PATH += ";{install-location}\kclvm\bin;"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å¦‚ä¸‹æ‰€ç¤ºçš„ Powershell è„šæœ¬è¿›è¡Œå®‰è£…:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">powershell -Command "iwr -useb https://kcl-lang.io/script/install.ps1 | iex"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬åç»­ä¼šæ”¯æŒæ›´å¤šçš„ Windows åŒ…ç®¡ç†ä¸‹è½½æ–¹å¼ï¼Œå¦‚ <code>Scoop</code> ç­‰ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ">æ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ<a href="#æ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒäº†æ›´å¤šçš„ KCL ä¸‹è½½æ–¹å¼ï¼ŒåŒ…æ‹¬è„šæœ¬, Python, Go, Homebrew å’Œ Docker ä¸€é”®å®‰è£…ï¼Œæ›´å¤šè¯¦ç»†å†…å®¹è¯·å‚è€ƒ <a href="https://kcl-lang.io/docs/user_docs/getting-started/install" target="_blank" rel="noopener noreferrer">KCL ä¸‹è½½ä¸å®‰è£…</a>ï¼Œåç»­æˆ‘ä»¬ä¼šæ”¯æŒæ›´å¤š KCL å®‰è£…æ–¹å¼ã€‚</p><blockquote><p>âš ï¸ æ³¨æ„ï¼šå¯¹äºä¸Šè¿°æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œå®‰è£…æ–¹å¼ï¼Œå¦‚æœè¦ä½¿ç”¨ <a href="https://kcl-lang.io/docs/reference/plugin/overview" target="_blank" rel="noopener noreferrer">KCL Python æ’ä»¶</a> èƒ½åŠ›ï¼Œéœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº† Python 3.7+ ç‰ˆæœ¬å¹¶å°† python3 å‘½ä»¤æ·»åŠ åˆ°æ‚¨çš„ PATH ç¯å¢ƒå˜é‡ä¸­ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é”™è¯¯ä¿®å¤">é”™è¯¯ä¿®å¤<a href="#é”™è¯¯ä¿®å¤" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å½“å­˜åœ¨éé…ç½®è¡¨è¾¾å¼çš„å³å€¼æ—¶é…ç½®åˆå¹¶é¡ºåºé”™è¯¯">å½“å­˜åœ¨éé…ç½®è¡¨è¾¾å¼çš„å³å€¼æ—¶é…ç½®åˆå¹¶é¡ºåºé”™è¯¯<a href="#å½“å­˜åœ¨éé…ç½®è¡¨è¾¾å¼çš„å³å€¼æ—¶é…ç½®åˆå¹¶é¡ºåºé”™è¯¯" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Resource </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"8Gi"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Resource </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"4Gi"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç  (main.k) ä¼šå¾—åˆ°éé¢„æœŸçš„é…ç½®å€¼ï¼Œæ˜¯å› ä¸º KCL ç¼–è¯‘å™¨é”™è¯¯åœ°ä¼˜åŒ–äº†å¦‚ä¸‹å½¢å¼ç­‰æ•ˆåˆå¹¶é…ç½®å—</p><div class="language-python3 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python3 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config: Config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource: r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource: Resource {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        memory = "4Gi"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>KCL v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œä¿®æ­£äº†ä¸æ­£ç¡®é…ç½®åˆå¹¶é¡ºåºï¼Œå¯ä»¥æ‰§è¡Œ main.k å¹¶è·å¾—é¢„æœŸçš„ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">r</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 8Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 8Gi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/KusionStack/KCLVM/issues/422" target="_blank" rel="noopener noreferrer">KCL Issue #422</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®-if-è¡¨è¾¾å¼ç±»å‹ä¸åŒ¹é…é”™è¯¯ä¼˜åŒ–">é…ç½® if è¡¨è¾¾å¼ç±»å‹ä¸åŒ¹é…é”™è¯¯ä¼˜åŒ–<a href="#é…ç½®-if-è¡¨è¾¾å¼ç±»å‹ä¸åŒ¹é…é”™è¯¯ä¼˜åŒ–" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"A"</span><span class="token operator" style="color:#393A34">|</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œå¯¹äºé…ç½® if è¡¨è¾¾å¼ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç ä¼šå¾—åˆ°é¢„æœŸçš„é…ç½®å€¼å¯¼è‡´ Type Unsoundness é—®é¢˜ï¼Œæ˜¯å› ä¸º KCL ç¼–è¯‘å™¨é”™è¯¯åœ°æ²¡æœ‰æ£€æŸ¥å‡º <code>A</code> å±æ€§çš„å€¼ <code>"2"</code> ä¸å£°æ˜çš„ç±»å‹ <code>int</code> ä¸åŒ¹é…ï¼ŒKCL v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œä¿®æ­£äº†æ­¤ç±»é—®é¢˜ï¼Œå¯ä»¥æ‰§è¡Œä¸Šè¿°ä»£ç å¯ä»¥è·å¾—é¢„æœŸçš„ç±»å‹ä¸åŒ¹é…é”™è¯¯:</p><div class="language-stderr codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-stderr codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">KCL Compile Error[E2G22] : The type got is inconsistent with the type expected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---&gt; File main.k:1:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 |config: {"A"|"B": int} = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 1 ^  -&gt; got {str(A):str(2)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expect {str(A)|str(B):int}, got {str(A):str(2)}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/KusionStack/KCLVM/issues/389" target="_blank" rel="noopener noreferrer">KCL Issue #389</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rule-è¯­å¥æ ¡éªŒä¸ç”Ÿæ•ˆé—®é¢˜">Rule è¯­å¥æ ¡éªŒä¸ç”Ÿæ•ˆé—®é¢˜<a href="#rule-è¯­å¥æ ¡éªŒä¸ç”Ÿæ•ˆé—®é¢˜" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ä½¿ç”¨å¦‚ä¸‹ rule è§„åˆ™ä»£ç æ—¶ (main.k)ï¼Œ<code>ServiceCheckRule</code> çš„çº¦æŸä»£ç ä¼šä¸ç”Ÿæ•ˆã€‚</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protocol KubeResourceProtocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule ServiceCheckRule </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> KubeResourceProtocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">svc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ServiceCheckRule </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿›è¡Œæ”¹è¿›åï¼Œæˆ‘ä»¬æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªå‡†ç¡®çš„æ ¡éªŒä¸é€šè¿‡é”™è¯¯:</p><div class="language-stderr codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-stderr codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">KCL Runtime Error[E3B17] : Schema check is failed to check condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---&gt; File main.k:14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14 |ServiceCheckRule { -&gt; Instance check failed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ---&gt; File main.k:8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8 |    svc.name != "name" -&gt; Check failed on the condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Check failed on check conditions</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®å—å±æ€§ç±»å‹æ¨å¯¼ä¼˜åŒ–">é…ç½®å—å±æ€§ç±»å‹æ¨å¯¼ä¼˜åŒ–<a href="#é…ç½®å—å±æ€§ç±»å‹æ¨å¯¼ä¼˜åŒ–" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"A"</span><span class="token operator" style="color:#393A34">|</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ­¤å¤„ä¼šå¾—åˆ°ä¸€ä¸ªç±»å‹ä¸åŒ¹é…é”™è¯¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        B </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç ä¼šå¾—åˆ°ä¸€ä¸ªéé¢„æœŸçš„ç±»å‹ä¸åŒ¹é…ï¼Œæ˜¯å› ä¸º KCL ç¼–è¯‘å™¨é”™è¯¯åœ°å°† <code>c.data.A</code> å±æ€§çš„ç±»å‹æ¨å¯¼ä¸º <code>str</code> ç±»å‹ï¼Œå¯¼è‡´ä¸ <code>"A"|"B"</code> å­—é¢å€¼è”åˆç±»å‹ä¸åŒ¹é…é”™è¯¯ï¼ŒKCL v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œä¿®æ­£äº†æ­¤ç±»é—®é¢˜ï¼Œå¯ä»¥æ‰§è¡Œä¸Šè¿°ä»£ç å¯ä»¥è·å¾—é¢„æœŸçš„ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">A</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">B</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="èµ‹å€¼è¯­å¥ä½¿ç”¨-schema-ç±»å‹æ³¨è§£é”™è¯¯ä¼˜åŒ–">èµ‹å€¼è¯­å¥ä½¿ç”¨ schema ç±»å‹æ³¨è§£é”™è¯¯ä¼˜åŒ–<a href="#èµ‹å€¼è¯­å¥ä½¿ç”¨-schema-ç±»å‹æ³¨è§£é”™è¯¯ä¼˜åŒ–" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Bar </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ­¤å¤„ä¼šå¾—åˆ°ä¸€ä¸ªè¿è¡Œæ—¶ç±»å‹ä¸åŒ¹é…é”™è¯¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç ä¼šå¾—åˆ°ä¸€ä¸ªè¿è¡Œæ—¶ç±»å‹ä¸åŒ¹é…é”™è¯¯ï¼Œç‰ˆæœ¬æ›´æ–°åï¼Œä¼šå°†æ­¤ç±»ç±»å‹ä¸åŒ¹é…é”™è¯¯ä¼˜åŒ–åˆ°ç¼–è¯‘æ—¶ï¼Œå°†é”™è¯¯å·¦ç§»ï¼Œæ›´æ—©åœ°å‘ç°æ­¤ç±»é”™è¯¯ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-æ¨¡å—ç±»å‹ä½¿ç”¨--è¿ç®—ç¬¦ç±»å‹é”™è¯¯ä¿®å¤">KCL æ¨¡å—ç±»å‹ä½¿ç”¨ ?. è¿ç®—ç¬¦ç±»å‹é”™è¯¯ä¿®å¤<a href="#kcl-æ¨¡å—ç±»å‹ä½¿ç”¨--è¿ç®—ç¬¦ç±»å‹é”™è¯¯ä¿®å¤" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> math</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> math?</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ­¤å¤„ä¼šå¾—åˆ°ä¸€ä¸ªéé¢„æœŸçš„ `math is not defined` é”™è¯¯</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç ä¼šå¾—åˆ°ä¸€ä¸ªéé¢„æœŸçš„å˜é‡æœªå®šä¹‰é”™è¯¯ï¼Œæ˜¯å› ä¸º KCL ç¼–è¯‘å™¨æ²¡æœ‰æ­£ç¡®åœ°å¤„ç† <code>math</code> module ç±»å‹å’Œ <code>?.</code> è¿ç®—ç¬¦ç»“åˆä½¿ç”¨çš„æƒ…å†µï¼Œç‰ˆæœ¬æ›´æ–°åï¼Œæ­¤ç±»é—®é¢˜å¾—åˆ°ä¿®å¤ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤">å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤<a href="#å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>æ›´å¤šæ›´æ–°ä¸é”™è¯¯ä¿®å¤ <a href="https://github.com/KusionStack/KCLVM/milestone/3" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–‡æ¡£æ›´æ–°">æ–‡æ¡£æ›´æ–°<a href="#æ–‡æ¡£æ›´æ–°" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> æ–°å¢ KCL v0.4.5 æ–‡æ¡£å†…å®¹å¹¶æ”¯æŒç‰ˆæœ¬åŒ–è¯­ä¹‰é€‰é¡¹ï¼Œç›®å‰æ”¯æŒ v0.4.3, v0.4.4 å’Œ v0.4.5 ç‰ˆæœ¬é€‰æ‹©ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-website-doc-version-e71ea1037adcb62404809a8074c5de07.png" width="3358" height="918" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºåŠ¨æ€">ç¤¾åŒºåŠ¨æ€<a href="#ç¤¾åŒºåŠ¨æ€" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><ul><li>KCL ç¤¾åŒºæ–°å¢ä¸¤åå¤–éƒ¨è´¡çŒ®è€… @thinkrapido, @Rishav1707, æ„Ÿè°¢ä»–ä»¬çƒ­æƒ…å¹¶ç§¯æåœ°å‚ä¸è´¡çŒ®ã€‚</li><li>æ„Ÿè°¢ @Rishav1707 åŸºäº KCL å»ºç«‹äº† Rust è¯­è¨€ç‰ˆæœ¬çš„ <a href="https://github.com/i-think-rapido/kcl-loader-rs" target="_blank" rel="noopener noreferrer">kcl-loader-rs</a> å­é¡¹ç›®ï¼Œå½“å‰ç‰ˆæœ¬æ”¯æŒæ ¹æ® KCL æ–‡ä»¶ä¸­çš„ Schema å’Œé…ç½®å®šä¹‰è‡ªåŠ¨ç”Ÿæˆ Rust ç»“æ„ä½“å¹¶æ”¯æŒ KCL å€¼åˆ° Rust ç»“æ„ä½“å€¼çš„ååºåˆ—åŒ–å‡½æ•°ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>é¢„è®¡ 2023 å¹´ 4 æœˆä¸­æ—¬ï¼Œæˆ‘ä»¬å°†å‘å¸ƒ <strong>KCL v0.4.6 ç‰ˆæœ¬</strong>ï¼Œé¢„æœŸé‡ç‚¹æ¼”è¿›åŒ…æ‹¬ï¼š</p><ul><li>KCL è¯­è¨€è¿›ä¸€æ­¥ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›ï¼Œç”¨æˆ·ç•Œé¢æŒç»­ä¼˜åŒ–ä¸ä½“éªŒæå‡ï¼Œç”¨æˆ·æ”¯æŒå’Œç—›ç‚¹è§£å†³</li><li>å…¨æ–°ç‰ˆæœ¬çš„ KCL Language Server å’Œ <a href="https://github.com/KusionStack/vscode-kcl" target="_blank" rel="noopener noreferrer">VSCode è¯­è¨€æ’ä»¶</a>ï¼Œæ€§èƒ½é¢„è®¡<strong>æå‡ 20 å€</strong>ï¼Œå¹¶é¢„æœŸæ”¯æŒä»£ç è­¦å‘Šå’Œé”™è¯¯æ³¢æµªçº¿æç¤ºï¼Œè·³è½¬ï¼Œå¼•ç”¨æŸ¥æ‰¾ç­‰æ ¸å¿ƒåŸºç¡€èƒ½åŠ›</li><li>é’ˆå¯¹ Kubernetes Manifests é…ç½®ç®¡ç†åœºæ™¯ç—›ç‚¹æŒç»­è¿›è¡Œè¯­è¨€èƒ½åŠ›æå‡ï¼šå¦‚è®¾è®¡æä¾› <a href="https://github.com/helm/helm" target="_blank" rel="noopener noreferrer">Helm</a> KCL Schema æ’ä»¶ä»¥åŠä¸º <a href="https://github.com/GoogleContainerTools/kpt" target="_blank" rel="noopener noreferrer">kpt</a> å·¥å…·æä¾› KCL SDK ç­‰</li><li><a href="https://github.com/KusionStack/kpm" target="_blank" rel="noopener noreferrer">KCL åŒ…ç®¡ç†å·¥å…· KPM</a> å‘å¸ƒï¼Œé¢„æœŸæ”¯æŒ Git ä»“åº“ä»£ç ä¾èµ–é…ç½®ä¸æ›´æ–°ï¼Œä»£ç ä¸‹è½½ç­‰åŸºç¡€èƒ½åŠ›</li><li><a href="https://github.com/KusionStack/kcl-playground" target="_blank" rel="noopener noreferrer">KCL Playground</a> æ”¯æŒä»£ç åˆ†äº«èƒ½åŠ›å’Œ KCL ç‰ˆæœ¬é€‰æ‹©èƒ½åŠ›</li><li><a href="https://github.com/KusionStack/kclvm-go" target="_blank" rel="noopener noreferrer">KCL Go SDK</a> æ›´å¤šèƒ½åŠ›æ”¯æŒï¼šå¦‚æ”¯æŒ KCL Schema å’Œ Go ç»“æ„ä½“çš„åŒå‘è½¬æ¢ç­‰</li><li><a href="https://github.com/KusionStack/kclvm-py" target="_blank" rel="noopener noreferrer">KCL Python SDK</a> æ›´å¤šèƒ½åŠ›æ”¯æŒ</li></ul><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/KusionStack/KCLVM/milestone/4" target="_blank" rel="noopener noreferrer">KCL v0.4.6 Milestone</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µçš„åé¦ˆä¸å»ºè®®ã€‚æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/KusionStack/community" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/community</a></p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
            <category>KusionStack</category>
            <category>Kusion</category>
        </item>
        <item>
            <title><![CDATA[OSDT 2022 ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-osdt-meeting</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-osdt-meeting</guid>
            <pubDate>Sat, 10 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[PDF ä¸‹è½½]]></description>
            <content:encoded><![CDATA[<p><a href="https://kcl-lang.github.io/talks/kcl-osdt2022.pdf" target="_blank" rel="noopener noreferrer">PDF ä¸‹è½½</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
            <category>Policy</category>
        </item>
        <item>
            <title><![CDATA[KCL v0.4.4 å‘å¸ƒæ—¥å¿—]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.4-release-blog</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.4-release-blog</guid>
            <pubDate>Tue, 06 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ 0.4.4 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼æœ¬æ¬¡å‘å¸ƒä¸»è¦ä¸º KCL è¯­è¨€å¢åŠ äº†è‡ªå®šä¹‰ YAML Manifests è¾“å‡ºçš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç¼–å†™ä»£ç å¹¶è°ƒç”¨ç³»ç»Ÿå‡½æ•°æ¥è‡ªå®šä¹‰ YAML è¾“å‡ºçš„æ ·å¼è€Œæ— éœ€ç†è§£å¤æ‚çš„ schema settings è¯­ä¹‰ï¼›æ­¤å¤–æœ¬æ¬¡å‘å¸ƒæä¾›äº†æœ€æ–°çš„ KCL Python SDK å¯ç”¨äº Python ç”¨æˆ·å¯¹ KCL ç›´æ¥é›†æˆï¼›åŒæ—¶æˆ‘ä»¬å¤§å¤§é™ä½äº† KCL å®‰è£…åŒ…çš„ä½“ç§¯ï¼Œå¹³å‡å®‰è£…åŒ…ä½“ç§¯é™ä½ä¸ºä¹‹å‰ç‰ˆæœ¬çš„äº”åˆ†ä¹‹ä¸€ï¼Œå¹¶åŒ…å«å¤šé¡¹ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯ä¼˜åŒ–å’Œ bug ä¿®å¤ã€‚æ‚¨å¯ä»¥åœ¨ KCL å‘å¸ƒé¡µé¢ è·å¾—æ›´å¤šè¯¦ç»†å‘å¸ƒä¿¡æ¯å’Œ KCL äºŒè¿›åˆ¶ä¸‹è½½é“¾æ¥ã€‚]]></description>
            <content:encoded><![CDATA[<p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ 0.4.4 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼æœ¬æ¬¡å‘å¸ƒä¸»è¦ä¸º KCL è¯­è¨€å¢åŠ äº†è‡ªå®šä¹‰ YAML Manifests è¾“å‡ºçš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç¼–å†™ä»£ç å¹¶è°ƒç”¨ç³»ç»Ÿå‡½æ•°æ¥è‡ªå®šä¹‰ YAML è¾“å‡ºçš„æ ·å¼è€Œæ— éœ€ç†è§£å¤æ‚çš„ schema settings è¯­ä¹‰ï¼›æ­¤å¤–æœ¬æ¬¡å‘å¸ƒæä¾›äº†æœ€æ–°çš„ <a href="https://github.com/KusionStack/kclvm-py" target="_blank" rel="noopener noreferrer">KCL Python SDK</a> å¯ç”¨äº Python ç”¨æˆ·å¯¹ KCL ç›´æ¥é›†æˆï¼›åŒæ—¶æˆ‘ä»¬å¤§å¤§é™ä½äº† KCL å®‰è£…åŒ…çš„ä½“ç§¯ï¼Œå¹³å‡å®‰è£…åŒ…ä½“ç§¯é™ä½ä¸ºä¹‹å‰ç‰ˆæœ¬çš„äº”åˆ†ä¹‹ä¸€ï¼Œå¹¶åŒ…å«å¤šé¡¹ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯ä¼˜åŒ–å’Œ bug ä¿®å¤ã€‚æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/KusionStack/KCLVM/releases/tag/v0.4.4-alpha.2" target="_blank" rel="noopener noreferrer">KCL å‘å¸ƒé¡µé¢</a> è·å¾—æ›´å¤šè¯¦ç»†å‘å¸ƒä¿¡æ¯å’Œ KCL äºŒè¿›åˆ¶ä¸‹è½½é“¾æ¥ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯">èƒŒæ™¯<a href="#èƒŒæ™¯" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>KCL æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>æœ¬æ–‡å°†å‘è¯»è€…ä»‹ç» KCL ç¤¾åŒºçš„è¿‘æœŸåŠ¨æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°å¢ç‰¹æ€§">æ–°å¢ç‰¹æ€§<a href="#æ–°å¢ç‰¹æ€§" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªå®šä¹‰-yaml-æ ¼å¼è¾“å‡º">è‡ªå®šä¹‰ YAML æ ¼å¼è¾“å‡º<a href="#è‡ªå®šä¹‰-yaml-æ ¼å¼è¾“å‡º" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨è¿‡å»çš„ KCL ç‰ˆæœ¬ä¸­ï¼ŒYAML è¾“å‡ºçš„æ ·å¼æ˜¯åœ¨ KCL ç¼–è¯‘å™¨ä¸­æ˜¯ç¡¬ç¼–ç çš„ï¼Œç”¨æˆ·å¯ä»¥ä¸º schema çš„ <code>__settings__</code> å…ƒå±æ€§è®¾ç½®ä¸ºä¸åŒçš„å€¼æ¥å†³å®š YAML è¾“å‡ºæ ·å¼ï¼Œè¿™å¸¦æ¥äº†è¾ƒé«˜çš„å¤æ‚åº¦å’Œè®°å¿†æˆæœ¬ï¼Œå› æ­¤åœ¨ 0.4.4 ç‰ˆæœ¬ä¸­æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç³»ç»Ÿåº“å‡½æ•°ç”¨äºå¼€å‘äººå‘˜æ›´ç®€å•åœ°è‡ªå®šä¹‰ YAML è¾“å‡ºæ ·å¼ï¼Œè¿™ä¸ªå‡½æ•°çš„ç­¾åå¦‚ä¸‹ï¼š</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">manifests</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">yaml_stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sort_keys </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ignore_private </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ignore_none </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sep </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"---"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½æ˜¯å°† KCL å¯¹è±¡åˆ—è¡¨åºåˆ—åŒ–ä¸ºå¸¦ <code>---</code> åˆ†éš”ç¬¦çš„æ ·å¼ YAML è¾“å‡ºï¼Œå®ƒå…·æœ‰ä¸¤ä¸ªå‚æ•°:</p><ul><li><code>values</code> - ä¸€ä¸ª KCL å¯¹è±¡åˆ—è¡¨</li><li><code>opts</code> - YAML åºåˆ—åŒ–é€‰é¡¹<ul><li><code>sort_keys</code>ï¼šæ˜¯å¦æŒ‰å±æ€§åç§°çš„å­—å…¸åºå¯¹åºåˆ—åŒ–ç»“æœè¿›è¡Œæ’åºï¼ˆé»˜è®¤ä¸º <code>False</code>ï¼‰ã€‚</li><li><code>ignore_private</code>ï¼šæ˜¯å¦å¿½ç•¥åç§°ä»¥ <code>_</code> å¼€å¤´çš„å±æ€§åºåˆ—åŒ–è¾“å‡ºï¼ˆé»˜è®¤ä¸º <code>True</code>ï¼‰ã€‚</li><li><code>ignore_none</code>ï¼šæ˜¯å¦å¿½ç•¥å€¼ä¸º <code>None</code> çš„å±æ€§ï¼ˆé»˜è®¤ä¸º <code>False</code>ï¼‰ã€‚</li><li><code>sep</code>ï¼šåœ¨å¤šä¸ª YAML æ–‡æ¡£ä¹‹é—´é€‰æ‹©æ€æ ·çš„åˆ†éš”ç¬¦ï¼ˆé»˜è®¤ä¸º <code>"---"</code>ï¼‰ã€‚</li></ul></li></ul><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Deployment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"deploy"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replica </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"svc"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployments </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">manifests</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">yaml_stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">deployments </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> services</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é¦–å…ˆæˆ‘ä»¬é€šè¿‡ <code>import</code> å…³é”®å­—å¯¼å…¥ <code>manifests</code> æ¨¡å—å¹¶å®šä¹‰ 2 ä¸ª Deployment ä»¥åŠ 2 ä¸ª Service èµ„æºï¼Œå½“æˆ‘ä»¬æƒ³ä»¥ YAML stream å¹¶ä»¥ <code>---</code> ä½œä¸ºåˆ†éš”ç¬¦çš„æ ¼å¼ä¾æ¬¡è¾“å‡ºè¿™ 4 ä¸ªèµ„æºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ª KCL åˆ—è¡¨å¹¶ä½œä¸º <code>manifests.yaml_stream</code> å‡½æ•°çš„ <code>values</code> å½¢å‚è¿›è¡Œä¼ å…¥ (å¦‚æ— ç‰¹æ®Šéœ€æ±‚ï¼Œopts å‚æ•°ä¸€èˆ¬ä½¿ç”¨é»˜è®¤å€¼å³å¯)ï¼Œæœ€ç»ˆå¾—åˆ° YAML è¾“å‡ºä¸º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replica</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replica</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> svc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ³¨ï¼šschema çš„ <code>__settings__</code> å…ƒå±æ€§è®¾ç½® YAML è¾“å‡ºæ ·å¼çš„ç‰¹æ€§ä»ç„¶å¯ä»¥åœ¨ v0.4.4 ç‰ˆæœ¬ä¸­ä½¿ç”¨ï¼Œå¤§çº¦åç»­ä¸¤ä¸ªå°ç‰ˆæœ¬å‘å¸ƒååœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¼šç§»é™¤è¿™ä¸ªç‰¹æ€§</p></blockquote><p>æ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š<a href="https://github.com/KusionStack/KCLVM/issues/94" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/KCLVM/issues/94</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="python-sdk">Python SDK<a href="#python-sdk" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>é™¤äº†å·²æœ‰çš„ <a href="https://github.com/KusionStack/kclvm-go" target="_blank" rel="noopener noreferrer">KCL Go SDK</a>, æœ¬æ¬¡å‘å¸ƒè¿˜æ–°å¢äº† KCL Python SDKï¼Œä½¿ç”¨ Python SDK è¦æ±‚æ‚¨æœ¬åœ°å…·å¤‡é«˜äº 3.7.3 çš„ Python ç‰ˆæœ¬å’Œ pip åŒ…ç®¡ç†å·¥å…·ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…å¹¶è·å¾—å¸®åŠ©ä¿¡æ¯</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ python3 -m pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kclvm --user </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> python3 -m kclvm --help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å‘½ä»¤è¡Œå·¥å…·">å‘½ä»¤è¡Œå·¥å…·<a href="#å‘½ä»¤è¡Œå·¥å…·" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>ç¼–å†™åä¸º <code>main.k</code> çš„ KCL æ–‡ä»¶:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¹¶è·å¾—è¾“å‡º:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ python3 -m kclvm hello.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">101</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="api">API<a href="#api" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ Python ä»£ç å®ç°å¯¹ KCL æ–‡ä»¶çš„æ‰§è¡Œ</p><p>ç¼–å†™åä¸º <code>main.py</code> çš„ python æ–‡ä»¶:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kclvm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">program</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">exec</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> kclvm_exec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kclvm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">planner </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> planner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">planner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">plan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kclvm_exec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"hello.k"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">filter_by_path_selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¹¶è·å¾—è¾“å‡º:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ python3 main.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">101</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥çœ‹å‡ºé€šè¿‡å‘½ä»¤è¡Œå·¥å…·å’Œ API å¯ä»¥è·å¾—åŒæ ·çš„è¾“å‡ºã€‚</p><p>ç›®å‰ KCL Python SDK è¿˜å¤„äºæ—©æœŸé¢„è§ˆç‰ˆæœ¬ï¼Œåç»­ KCL å›¢é˜Ÿä¼šæŒç»­æ›´æ–°å¹¶æä¾›æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œæ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š<a href="https://github.com/KusionStack/kclvm-py" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/kclvm-py</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…ä½“ç§¯ä¼˜åŒ–">å®‰è£…ä½“ç§¯ä¼˜åŒ–<a href="#å®‰è£…ä½“ç§¯ä¼˜åŒ–" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>åœ¨æ–°çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å°† KCL å†…ç½®çš„ Python3 å‰¥ç¦»ï¼Œä½¿å¾— KCL äºŒè¿›åˆ¶å‹ç¼©åŒ…çš„ä½“ç§¯ä»å¹³å‡ 200M é™ä½ä¸º 35Mï¼Œç”¨æˆ·å¯ä»¥æ›´å¿«åœ°ä¸‹è½½å¹¶ä½¿ç”¨ KCLï¼Œå¹¶ä¸” Python Plugin æˆä¸ºä¸€ä¸ªå¯é€‰é¡¹ï¼Œå¦‚æœæ‚¨æƒ³å¯ç”¨ KCL Python æ’ä»¶ï¼Œä¸€ä¸ªé¢å¤–è¦æ±‚æ˜¯éœ€è¦æ‚¨æœ¬åœ°å…·å¤‡é«˜äº 3.7.3 ç‰ˆæœ¬çš„ Python ä»¥åŠ pip åŒ…ç®¡ç†å·¥å…·ï¼Œæ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/KusionStack/kcl-plugin" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/kcl-plugin</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é”™è¯¯ä¿®å¤">é”™è¯¯ä¿®å¤<a href="#é”™è¯¯ä¿®å¤" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‡½æ•°è°ƒç”¨é”™è¯¯ä¿¡æ¯ä¼˜åŒ–">å‡½æ•°è°ƒç”¨é”™è¯¯ä¿¡æ¯ä¼˜åŒ–<a href="#å‡½æ•°è°ƒç”¨é”™è¯¯ä¿¡æ¯ä¼˜åŒ–" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ 0.4.4 ç‰ˆæœ¬ä¸­ï¼ŒKCL ä¼˜åŒ–äº†å½“å‡½æ•°å‚æ•°ä¸ªæ•°ä¸åŒ¹é…æ—¶çš„é”™è¯¯ä¿¡æ¯è¾“å‡ºï¼Œæ”¯æŒæ˜¾ç¤ºå‡½æ•°åç§°ä»¥åŠå‚æ•°ä¸åŒ¹é…ä¸ªæ•°</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Foo</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Error: "Foo" takes 1 positional argument but 3 were given</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Error: "f" takes 1 positional argument but 2 were given</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š<a href="https://github.com/KusionStack/KCLVM/issues/299" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/KCLVM/issues/299</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ’å€¼ä¸‰å¼•å·å­—ç¬¦ä¸²æ ¼å¼åŒ–é”™è¯¯ä¿®å¤">æ’å€¼ä¸‰å¼•å·å­—ç¬¦ä¸²æ ¼å¼åŒ–é”™è¯¯ä¿®å¤<a href="#æ’å€¼ä¸‰å¼•å·å­—ç¬¦ä¸²æ ¼å¼åŒ–é”™è¯¯ä¿®å¤" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œå¯¹å¦‚ä¸‹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ä¼šé”™è¯¯å°†æºå¸¦å­—ç¬¦ä¸²æ’å€¼çš„ä¸‰å¼•å·æ ¼å¼åŒ–ä¸ºå•å¼•å·å­—ç¬¦ä¸²å¹¶å¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œåœ¨ 0.4.4 ç‰ˆæœ¬ä¸­æˆ‘ä»¬è¿›è¡Œäº†ä¿®å¤</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Before KCL v0.4.4, variable "bar" will be formatted as:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># foo = 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># bar = "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ${foo}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">${foo}</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š<a href="https://github.com/KusionStack/KCLVM/issues/294" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/KCLVM/issues/294</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–é”™è¯¯ä¿®å¤">å…¶ä»–é”™è¯¯ä¿®å¤<a href="#å…¶ä»–é”™è¯¯ä¿®å¤" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>æ›´å¤šé”™è¯¯ä¿®å¤è¯¦è§ï¼š<a href="https://github.com/KusionStack/KCLVM/milestone/2?closed=1" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/KCLVM/milestone/2?closed=1</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–‡æ¡£">æ–‡æ¡£<a href="#æ–‡æ¡£" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p><a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> åˆæ­¥å»ºç«‹ï¼Œå¹¶å®Œå–„ Kubernetes åœºæ™¯<a href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/" target="_blank" rel="noopener noreferrer">ç›¸å…³æ–‡æ¡£</a>.</p><p>æ›´å¤šç½‘ç«™ä¿¡æ¯è¯¦è§ <a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">https://kcl-lang.github.io/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºåŠ¨æ€">ç¤¾åŒºåŠ¨æ€<a href="#ç¤¾åŒºåŠ¨æ€" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>KCL ç¤¾åŒºæ–°å¢ä¸‰åå¤–éƒ¨è´¡çŒ®è€… @my-vegetable-has-exploded, @possible-fqz, @orangebees, æ„Ÿè°¢ä»–ä»¬çƒ­æƒ…å¹¶ç§¯æåœ°å‚ä¸è´¡çŒ®</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>é¢„è®¡ 2023 å¹´ 1 æœˆåº•ï¼Œæˆ‘ä»¬å°†å‘å¸ƒ KCL v0.4.5 ç‰ˆæœ¬ï¼Œé¢„æœŸé‡ç‚¹æ¼”è¿›åŒ…æ‹¬</p><ul><li>è¯­è¨€ç”¨æˆ·ç•Œé¢æŒç»­ä¼˜åŒ–ï¼Œä½“éªŒæŒç»­æå‡å’Œç”¨æˆ·ç—›ç‚¹è§£å†³</li><li>æ›´å¤šåœºæ™¯å’Œç”Ÿæ€å¦‚ Kubernetes å’Œ CI/CD Pipeline åœºæ™¯ KCL æ”¯æŒå’Œæ–‡æ¡£æ›´æ–°</li><li>KCL Windows ç‰ˆæœ¬æ”¯æŒ</li><li>KCL åŒ…ç®¡ç†å·¥å…· kpm å‘å¸ƒ</li><li>KCL æ–°ç‰ˆ playground æ”¯æŒ</li></ul><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/KusionStack/KCLVM/milestone/3" target="_blank" rel="noopener noreferrer">KCL v0.4.5 Milestone</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>å¸¸è§é—®é¢˜åŠè§£ç­”è¯¦è§ï¼š<a href="https://kcl-lang.github.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">https://kcl-lang.github.io/docs/user_docs/support/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/KusionStack/community" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/community</a></p>]]></content:encoded>
            <category>Release Blog</category>
            <category>KCL</category>
            <category>KusionStack</category>
            <category>Kusion</category>
        </item>
        <item>
            <title><![CDATA[æ€§èƒ½æå‡ 40 å€ï¼æˆ‘ä»¬ç”¨ Rust é‡å†™äº†è‡ªå·±çš„é¡¹ç›®]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-rewrite-with-rust</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-rewrite-with-rust</guid>
            <pubDate>Tue, 29 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>Rust å·²ç»æ‚„ç„¶æˆä¸ºäº†æœ€å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚ä½œä¸ºä¸€é—¨æ–°å…´åº•å±‚ç³»ç»Ÿè¯­è¨€ï¼ŒRust æ‹¥æœ‰ç€å†…å­˜å®‰å…¨æ€§æœºåˆ¶ã€æ¥è¿‘äº C/C++ è¯­è¨€çš„æ€§èƒ½ä¼˜åŠ¿ã€å‡ºè‰²çš„å¼€å‘è€…ç¤¾åŒºå’Œä½“éªŒå‡ºè‰²çš„æ–‡æ¡£ã€å·¥å…·é“¾å’ŒIDE ç­‰è¯¸å¤šç‰¹ç‚¹ã€‚æœ¬æ–‡å°†ä»‹ç»ç¬”è€…ä½¿ç”¨ Rust é‡å†™é¡¹ç›®å¹¶é€æ­¥è½åœ°ç”Ÿäº§ç¯å¢ƒçš„è¿‡ç¨‹ï¼Œä»¥åŠåœ¨é‡å†™è¿‡ç¨‹é€‰æ‹© Rust çš„åŸå› ã€é‡åˆ°çš„é—®é¢˜ä»¥åŠä½¿ç”¨ Rust é‡å†™å¸¦æ¥çš„æˆæœã€‚</p><p>æˆ‘ä»¬ç›®å‰æ­£åœ¨ä½¿ç”¨ Rust å¼€å‘çš„é¡¹ç›®å«åš <a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL</a>ï¼Œç›®å‰å…¨éƒ¨å®ç°ä»£ç å·²ç»åœ¨ Github ä¸Šå¼€æºã€‚KCL æ˜¯ä¸€ä¸ªåŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°é¢†åŸŸç¼–ç¨‹è¯­è¨€ï¼Œè‡´åŠ›äºé€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›ç‰¹é¢†åŸŸå¦‚äº‘åŸç”Ÿ kubernetes é¢†åŸŸçš„å¤§é‡ç¹æ‚é…ç½®ç¼–å†™å’Œå®‰å…¨ç­–ç•¥æ ¡éªŒç­‰ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚æ›´å…·ä½“çš„ KCL ä½¿ç”¨åœºæ™¯è¯·è®¿é—® <a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a>ï¼Œæœ¬æ–‡ä¸­ä¸å†è¿‡å¤šèµ˜è¿°ã€‚</p><p>KCL ä¹‹å‰æ˜¯ä½¿ç”¨ Python ç¼–å†™çš„ï¼Œå‡ºäºç”¨æˆ·ä½¿ç”¨ä½“éªŒã€æ€§èƒ½å’Œç¨³å®šæ€§çš„è€ƒè™‘ï¼Œå†³å®šç”¨ Rust è¯­è¨€è¿›è¡Œé‡å†™ï¼Œå¹¶è·å¾—äº†ä»¥ä¸‹å¥½å¤„ï¼š</p><ul><li>æ›´å°‘çš„ Bugï¼Œæºäº Rust å¼ºå¤§çš„ç¼–è¯‘æ£€æŸ¥å’Œé”™è¯¯å¤„ç†æ–¹å¼</li><li>è¯­è¨€ç«¯åˆ°ç«¯ç¼–è¯‘æ‰§è¡Œæ€§èƒ½æå‡äº† 66%</li><li>è¯­è¨€å‰ç«¯è§£æå™¨æ€§èƒ½æå‡äº† 20 å€</li><li>è¯­è¨€ä¸­ç«¯è¯­ä¹‰åˆ†æå™¨æ€§èƒ½æå‡äº† 40 å€</li><li>è¯­è¨€ç¼–è¯‘å™¨ç¼–è¯‘è¿‡ç¨‹å¹³å‡å†…å­˜ä½¿ç”¨é‡å˜ä¸ºåŸæ¥ Python ç‰ˆæœ¬çš„ä¸€åŠ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æˆ‘ä»¬é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜">æˆ‘ä»¬é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜<a href="#æˆ‘ä»¬é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>å°±åƒç¤¾åŒºä¸­åŒç±»å‹é¡¹ç›® <a href="https://github.com/denoland/deno" target="_blank" rel="noopener noreferrer">deno</a>, <a href="https://github.com/swc-project/swc" target="_blank" rel="noopener noreferrer">swc</a>, <a href="https://github.com/vercel/turbo" target="_blank" rel="noopener noreferrer">turbopack</a>, <a href="https://github.com/rust-lang/rust" target="_blank" rel="noopener noreferrer">rustc</a> ç­‰ç¼–è¯‘å™¨ã€æ„å»ºç³»ç»Ÿæˆ–è€…è¿è¡Œæ—¶åœ¨æŠ€æœ¯ä¸Šä½¿ç”¨ Rust åšçš„äº‹æƒ…ç±»ä¼¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ Rust å®Œæ•´æ„å»ºäº†ç¼–è¯‘å™¨çš„å‰ä¸­ç«¯å’Œè¿è¡Œæ—¶ï¼Œå–å¾—äº†ä¸€å®šçš„é˜¶æ®µæ€§æˆæœï¼Œä½†æ˜¯æˆ‘ä»¬å¤§çº¦åœ¨ä¸€å¹´å‰å¹¶ä¸æ˜¯è¿™ä¸ªæ ·å­çš„ã€‚</p><p>ä¸€å¹´å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ Python è¯­è¨€æ„å»ºäº†æ•´ä¸ª KCL è¯­è¨€ç¼–è¯‘å™¨çš„å®ç°ï¼Œè™½ç„¶åœ¨ä¸€å¼€å§‹çš„æ—¶å€™è¿è¡Œè‰¯å¥½ï¼ŒPython ç®€å•æ˜“ä¸Šæ‰‹ï¼Œç”Ÿæ€ä¸°å¯Œï¼Œå›¢é˜Ÿçš„ç ”å‘æ•ˆç‡ä¹Ÿå¾ˆé«˜ï¼Œä½†æ˜¯éšç€ä»£ç åº“çš„æ‰©å¼ å’Œå·¥ç¨‹å¸ˆäººæ•°çš„å¢åŠ ï¼Œä»£ç ç»´æŠ¤èµ·æ¥æ„ˆåŠ å›°éš¾ï¼Œå°½ç®¡æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¼ºåˆ¶ç¼–å†™ Python ç±»å‹æ³¨è§£ï¼Œé‡‡ç”¨æ›´ä¸¥æ ¼çš„ lint å·¥å…·ï¼Œä»£ç æµ‹è¯•è¡Œè¦†ç›–ç‡ä¹Ÿè¾¾åˆ°äº† 90% ä»¥ä¸Šï¼Œä½†æ˜¯ä»ç„¶ä¼šå‡ºç°å¾ˆå¤šè¯¸å¦‚ Python None ç©ºå¯¹è±¡ï¼Œå±æ€§æœªæ‰¾åˆ°ç­‰è¿è¡Œæ—¶æ‰ä¼šå‡ºç°é”™è¯¯ï¼Œå¹¶ä¸”é‡æ„ Python ä»£ç æ—¶ä¹Ÿéœ€è¦å°å¿ƒç¿¼ç¿¼ï¼Œååº”åˆ° KCL è¯­è¨€ä¸Šå°±æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªçš„ bug, ä¸¥é‡å½±å“ç”¨æˆ·ä½¿ç”¨ä½“éªŒã€‚</p><p>æ­¤å¤–ï¼Œå½“ KCL ä½¿ç”¨å¯¹è±¡æ˜¯å¹¿å¤§å¼€å‘è€…ç”¨æˆ·æ—¶ï¼Œç¼–ç¨‹è¯­è¨€æˆ–è€…è¯´ç¼–è¯‘å™¨å†…éƒ¨å®ç°å‡ºç°ä»»ä½•é”™è¯¯éƒ½æ˜¯ä¸å¯å®¹å¿çš„ï¼Œè¿™äº›ä¹Ÿç»™æˆ‘ä»¬çš„ç”¨æˆ·ä½¿ç”¨ä½“éªŒå¸¦æ¥äº†ä¸€ç³»åˆ—é—®é¢˜ï¼Œä½¿ç”¨ Python ç¼–å†™çš„ç¨‹åºå¯åŠ¨é€Ÿåº¦è¾ƒæ…¢ï¼Œæ€§èƒ½æ— æ³•æ»¡è¶³è‡ªåŠ¨åŒ–ç³»ç»Ÿåœ¨çº¿ç¼–è¯‘å’Œæ‰§è¡Œçš„æ•ˆç‡è¯‰æ±‚ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼Œç”¨æˆ·ä¿®æ”¹ KCL ä»£ç åéœ€è¦èƒ½å¾ˆå¿«çš„å±•ç¤ºç¼–è¯‘ç»“æœï¼Œæ˜¾ç„¶ä½¿ç”¨ Python ç¼–å†™çš„ç¼–è¯‘å™¨å¹¶ä¸èƒ½å¾ˆå¥½åœ°æ»¡è¶³ä½¿ç”¨éœ€æ±‚ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºä»€ä¹ˆé€‰æ‹©-rust">ä¸ºä»€ä¹ˆé€‰æ‹© Rust<a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-rust" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>ç¬”è€…æ‰€åœ¨å›¢é˜ŸåŸºäºå¦‚ä¸‹åŸå› é€‰æ‹©äº† Rust</p><ul><li>ä½¿ç”¨ Go, Python, Rust ä¸‰ç§è¯­è¨€å®ç°äº†ç®€å•çš„ç¼–ç¨‹è¯­è¨€æ ˆå¼è™šæ‹Ÿæœºå¹¶ä½œäº†æ€§èƒ½å¯¹æ¯”ï¼ŒGo å’Œ Rust åœ¨è¿™ä¸ªåœºæ™¯ä¸‹æ€§èƒ½æ¥è¿‘ï¼ŒPython æœ‰è¾ƒå¤§æ€§èƒ½å·®è·ï¼Œç»¼åˆè€ƒè™‘ä¸‹é‡‡ç”¨äº† Rustï¼Œå…·ä½“ä¸‰ç§è¯­è¨€å®ç°çš„æ ˆå¼è™šæ‹Ÿæœºä»£ç ç»†èŠ‚åœ¨ <a href="https://github.com/Peefy/StackMachine" target="_blank" rel="noopener noreferrer">https://github.com/Peefy/StackMachine</a>ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å‰å¾€æµè§ˆ</li><li>è¶Šæ¥è¶Šå¤šçš„ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨æˆ–è¿è¡Œæ—¶ç‰¹åˆ«æ˜¯å‰ç«¯åŸºç¡€è®¾æ–½é¡¹ç›®é‡‡ç”¨ Rust ç¼–å†™æˆ–é‡æ„ï¼Œæ­¤å¤–åŸºç¡€è®¾æ–½å±‚ï¼Œæ•°æ®åº“ã€æœç´¢å¼•æ“ã€ç½‘ç»œè®¾æ–½ã€äº‘åŸç”Ÿã€UI å±‚å’ŒåµŒå…¥å¼ç­‰é¢†åŸŸéƒ½æœ‰ Rust çš„å‡ºç°ï¼Œè‡³å°‘åœ¨ç¼–ç¨‹è¯­è¨€é¢†åŸŸå®ç°æ–¹é¢ç»è¿‡äº†å¯è¡Œæ€§å’Œç¨³å®šæ€§éªŒè¯</li><li>è€ƒè™‘åˆ°åç»­çš„é¡¹ç›®å‘å±•ä¼šæ¶‰åŠåŒºå—é“¾å’Œæ™ºèƒ½åˆçº¦æ–¹å‘ï¼Œè€Œç¤¾åŒºä¸­å¤§é‡çš„åŒºå—é“¾å’Œæ™ºèƒ½åˆçº¦é¡¹ç›®é‡‡ç”¨ Rust ç¼–å†™</li><li>é€šè¿‡ Rust è·å¾—æ›´å¥½çš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œè®©ç³»ç»Ÿæ›´å®¹æ˜“ç»´æŠ¤ã€æ›´åŠ å¥å£®çš„åŒæ—¶ï¼Œå¯ä»¥é€šè¿‡ FFI æš´éœ² C API ä¾›å¤šè¯­è¨€ä½¿ç”¨å’Œæ‰©å±•ï¼Œæ–¹ä¾¿ç”Ÿæ€æ‰©å±•ä¸é›†æˆ</li><li>Rust å¯¹ WASM çš„æ”¯æŒæ¯”è¾ƒå‹å¥½ï¼Œç¤¾åŒºä¸­å¤§é‡ WASM ç”Ÿæ€æ˜¯ç”± Rust æ„å»ºï¼ŒKCL è¯­è¨€å’Œç¼–è¯‘å™¨å¯ä»¥å€ŸåŠ© Rust ç¼–è¯‘åˆ° WASM å¹¶åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ</li></ul><p>åŸºäºä»¥ä¸ŠåŸå› ç»¼åˆè€ƒè™‘é€‰æ‹©äº† Rust è€Œä¸æ˜¯ Goï¼Œæ•´ä¸ªé‡å†™è¿‡ç¨‹ä¸‹æ¥å‘ç° Rust ç»¼åˆç´ è´¨ç¡®å®è¿‡ç¡¬ï¼ˆç¬¬ä¸€æ¢¯é˜Ÿçš„æ€§èƒ½ï¼Œè¶³å¤Ÿçš„æŠ½è±¡ç¨‹åº¦ï¼‰ï¼Œè™½ç„¶åœ¨ä¸€äº›è¯­è¨€ç‰¹æ€§ç‰¹åˆ«æ˜¯ç”Ÿå‘½å‘¨æœŸç­‰ä¸Šæ‰‹æˆæœ¬æœ‰ä¸€äº›ï¼Œç”Ÿæ€ä¸Šè¿˜ä¸å¤Ÿä¸°å¯Œï¼Œæ€»ä¹‹ç¼–ç¨‹è¯­è¨€å¯ä»¥åšçš„äº‹æƒ…ï¼ŒRust å‡å¯ä»¥åšï¼Œå…·ä½“å¯èƒ½è¿˜æ˜¯è¦æ ¹æ®å…·ä½“çš„åœºæ™¯å’Œé—®é¢˜æ¥åšé€‰æ‹©ã€‚åŒæ—¶å¦‚æœæƒ³è¦ä½¿ç”¨å¥½ Rust, è¿˜éœ€è¦æ·±å…¥ç†è§£å†…å­˜ã€å †æ ˆã€å¼•ç”¨ã€å˜é‡ä½œç”¨åŸŸç­‰è¿™äº›å…¶å®ƒé«˜çº§è¯­è¨€å¾€å¾€ä¸ä¼šæ·±å…¥æ¥è§¦çš„å†…å®¹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨-rust-è¿‡ç¨‹ä¸­é‡åˆ°äº†å“ªäº›å›°éš¾">ä½¿ç”¨ Rust è¿‡ç¨‹ä¸­é‡åˆ°äº†å“ªäº›å›°éš¾<a href="#ä½¿ç”¨-rust-è¿‡ç¨‹ä¸­é‡åˆ°äº†å“ªäº›å›°éš¾" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>è™½ç„¶å†³å®šäº†ä½¿ç”¨ Rust é‡å†™æ•´ä¸ª KCL é¡¹ç›®ï¼Œå…¶å®å›¢é˜Ÿæˆå‘˜å¤§éƒ¨åˆ†æˆå‘˜æ˜¯æ²¡æœ‰ä½¿ç”¨ Rust ç¼–å†™ä¸€å®šä»£ç ä½“é‡é¡¹ç›®çš„ç»éªŒï¼ŒåŒ…æ‹¬ç¬”è€…ä¸ªäººè‡ªå·±ä¹Ÿä»…ä»…å­¦ä¹ è¿‡ <a href="https://doc.rust-lang.org/book/" target="_blank" rel="noopener noreferrer">ã€ŠThe Rust Programming Languageã€‹</a> ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼Œä¾ç¨€è®°å¾—å­¦ä¹ åˆ° <code>Rc</code> å’Œ <code>RefCell</code> ç­‰æ™ºèƒ½æŒ‡é’ˆå†…å®¹å°±æ”¾å¼ƒäº†ï¼Œé‚£æ—¶æ²¡æƒ³åˆ° Rust ä¸­è¿˜èƒ½æœ‰ä¸ C++ ä¸­ç±»ä¼¼çš„ä¸œè¥¿ã€‚</p><p>ä½¿ç”¨ Rust å‰é¢„ä¼°çš„é£é™©ä¸»è¦æ˜¯ Rust è¯­è¨€æ¥è§¦å’Œå­¦ä¹ çš„æˆæœ¬ï¼Œè¿™ä¸ªç¡®å®åœ¨å„ç§ Rust çš„æ–‡ç« åšå®¢ä¸­å‡æœ‰æåˆ°ï¼Œå› ä¸º KCL é¡¹ç›®æ•´ä½“æ¶æ„å¹¶æœªå‘ç”Ÿå¤ªå¤§å˜åŒ–ï¼Œåªæ˜¯éƒ¨åˆ†æ¨¡å—è®¾è®¡å’Œä»£ç ç¼–å†™é’ˆå¯¹ Rust ä½œäº†ä¼˜åŒ–ï¼Œå› æ­¤æ•´ä¸ªé‡å†™æ˜¯åœ¨è¾¹å­¦è¾¹å®è·µä¸­è¿›è¡Œã€‚ç¡®å®åœ¨åˆšå¼€å§‹ä½¿ç”¨ Rust ç¼–å†™æ•´ä¸ªé¡¹ç›®çš„æ—¶å€™èŠ±è´¹åœ¨çŸ¥è¯†æŸ¥è¯¢ã€ç¼–è¯‘æ’é”™çš„æ—¶é—´è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œä¸è¿‡éšç€é¡¹ç›®çš„è¿›è¡Œæ¸å…¥ä½³å¢ƒï¼Œç¬”è€…ä¸ªäººç»éªŒä½¿ç”¨ Rust é‡åˆ°çš„å›°éš¾ä¸»è¦æ˜¯å¿ƒæ™ºè½¬æ¢å’Œå¼€å‘æ•ˆç‡ä¸¤æ–¹é¢:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¿ƒæ™ºè½¬æ¢">å¿ƒæ™ºè½¬æ¢<a href="#å¿ƒæ™ºè½¬æ¢" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>é¦–å…ˆ Rust çš„è¯­æ³•è¯­ä¹‰å¾ˆå¥½åœ°å¸æ”¶å’Œèåˆäº†å‡½æ•°å¼ç¼–ç¨‹ä¸­ç±»å‹ç³»ç»Ÿç›¸å…³çš„æ¦‚å¿µï¼Œæ¯”å¦‚æŠ½è±¡ä»£æ•°ç±»å‹ ADT ç­‰ï¼Œå¹¶ä¸” Rust ä¸­å¹¶æ— â€œç»§æ‰¿â€ç­‰ç›¸å…³æ¦‚å¿µï¼Œå¦‚æœä¸èƒ½å¾ˆå¥½åœ°ç†è§£ç”šè‡³è¿å…¶ä»–è¯­è¨€ä¸­ç¨€æ¾å¹³å¸¸çš„ç»“æ„å®šä¹‰åœ¨ Rust ä¸­å¯èƒ½éƒ½éœ€è¦èŠ±è´¹ä¸å°‘æ—¶é—´ï¼Œæ¯”å¦‚å¦‚ä¸‹çš„ Python ä»£ç å¯èƒ½åœ¨ Rust ä¸­çš„å®šä¹‰æ˜¯è¿™ä¸ªæ ·å­çš„ã€‚</p><ul><li>Python</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> dataclasses </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> dataclass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">KCLObject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@dataclass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">KCLIntObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KCLObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@dataclass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">KCLFloatObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KCLObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">float</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Rust</li></ul><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">enum KCLObject {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Int(u64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Float(f64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ç„¶æ›´å¤šçš„æ—¶é—´æ˜¯åœ¨ä¸ Rust ç¼–è¯‘å™¨æœ¬èº«çš„æŠ¥é”™ä½œæ–—äº‰ï¼ŒRust ç¼–è¯‘å™¨ä¼šç»å¸¸ä½¿å¼€å‘äººå‘˜"ç¢°å£"ï¼Œæ¯”å¦‚å€Ÿç”¨æ£€æŸ¥æŠ¥é”™ç­‰ï¼Œç‰¹åˆ«æ˜¯å¯¹äºç¼–è¯‘å™¨æ¥è®²ï¼Œå®ƒå¤„ç†çš„æ ¸å¿ƒç»“æ„æ˜¯æŠ½è±¡è¯­æ³•æ ‘ ASTï¼Œè¿™æ˜¯ä¸€ä¸ªé€’å½’å’ŒåµŒå¥—çš„æ ‘ç»“æ„ï¼Œåœ¨ Rust ä¸­æœ‰æ—¶å¾ˆéš¾å…¼é¡¾å˜é‡å¯å˜æ€§ä¸å€Ÿç”¨æ£€æŸ¥çš„å…³ç³»ï¼Œå°±å¦‚ KCL ç¼–è¯‘å™¨ä½œç”¨åŸŸ <code>Scope</code> çš„ç»“æ„å®šä¹‰ç»“æ„é‚£æ ·ï¼Œå¯¹äºå­˜åœ¨å¾ªç¯å¼•ç”¨çš„åœºæ™¯ï¼Œç”¨äºéœ€è¦æ˜¾ç¤ºæ„è¯†åˆ°æ•°æ®çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œè€Œå¤§é‡ä½¿ç”¨ <code>Rc</code>, <code>RefCell</code> å’Œ <code>Weak</code> ç­‰ Rust ä¸­å¸¸ç”¨çš„æ™ºèƒ½æŒ‡é’ˆç»“æ„ã€‚</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// A Scope maintains a set of objects and links to its containing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// (parent) and contained (children) scopes. Objects may be inserted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// and looked up by name. The zero value for Scope is a ready-to-use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// empty scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Clone, Debug)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct Scope {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The parent scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub parent: Option&lt;Weak&lt;RefCell&lt;Scope&gt;&gt;&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The child scope list.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub children: Vec&lt;Rc&lt;RefCell&lt;Scope&gt;&gt;&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope object mapping with its name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub elems: IndexMap&lt;String, Rc&lt;RefCell&lt;ScopeObject&gt;&gt;&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope start position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub start: Position,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope end position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub end: Position,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope kind.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub kind: ScopeKind,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€å‘æ•ˆç‡">å¼€å‘æ•ˆç‡<a href="#å¼€å‘æ•ˆç‡" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>Rust çš„å¼€å‘æ•ˆç‡å¯ä»¥ç”¨å…ˆæŠ‘åæ‰¬æ¥å½¢å®¹ã€‚åœ¨åˆšå¼€å§‹ä¸Šæ‰‹å†™é¡¹ç›®æ—¶ï¼Œå¦‚æœå›¢é˜Ÿæˆå‘˜æ²¡æœ‰æ¥è§¦è¿‡å‡½æ•°å¼ç¼–ç¨‹ç›¸å…³æ¦‚å¿µä»¥åŠç›¸å…³çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œå¼€å‘é€Ÿåº¦å°†æ˜¾è‘—æ…¢äº Pythonã€Go å’Œ Java ç­‰è¯­è¨€ï¼Œä¸è¿‡ä¸€æ—¦å¼€å§‹ç†Ÿæ‚‰ Rust æ ‡å‡†åº“å¸¸ç”¨çš„æ–¹æ³•ã€æœ€ä½³å®è·µä»¥åŠå¸¸è§ Rust ç¼–è¯‘å™¨æŠ¥é”™ä¿®æ”¹ï¼Œå¼€å‘æ•ˆç‡å°†å¤§å¹…æå‡ï¼Œå¹¶ä¸”åŸç”Ÿå°±èƒ½å†™å‡ºé«˜è´¨é‡ã€å®‰å…¨ã€é«˜æ•ˆçš„ä»£ç ã€‚</p><p>æ¯”å¦‚ç¬”è€…ä¸ªäººå½“åˆé‡åˆ°ä¸€ä¸ªå¦‚ä¸‹ä»£ç æ‰€ç¤ºçš„ä¸ç”Ÿå‘½å‘¨æœŸé”™è¯¯å‰å‰ååæ’æŸ¥äº†å¾ˆä¹…çš„æ—¶é—´æ‰å‘ç°åŸæ¥æ˜¯å¿˜è®°æ ‡æ³¨ç”Ÿå‘½å‚æ•°å¯¼è‡´ç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…ã€‚æ­¤å¤– Rust çš„ç”Ÿå‘½å‘¨æœŸä¸ç±»å‹ç³»ç»Ÿã€ä½œç”¨åŸŸã€æ‰€æœ‰æƒã€å€Ÿç”¨æ£€æŸ¥ç­‰æ¦‚å¿µè€¦åˆåœ¨ä¸€èµ·ï¼Œå¯¼è‡´äº†è¾ƒé«˜çš„ç†è§£æˆæœ¬å’Œå¤æ‚åº¦ï¼Œä¸”æŠ¥é”™ä¿¡æ¯å¾€å¾€ä¸åƒç±»å‹é”™è¯¯é‚£ä¹ˆæ˜æ˜¾ï¼Œç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…é”™è¯¯æŠ¥é”™ä¿¡æ¯æœ‰æ—¶ä¹Ÿç•¥æ˜¾å‘†æ¿ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¾ƒé«˜çš„æ’é”™æˆæœ¬ï¼Œå½“ç„¶ç†Ÿæ‚‰ç›¸å…³æ¦‚å¿µå†™å¤šäº†ä¹‹åæ•ˆç‡ä¼šæé«˜ä¸å°‘ã€‚</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct Data&lt;'a&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b: &amp;'a u8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// func1 å’Œ func2 ä¸€ä¸ªçœç•¥äº†ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œä¸€ä¸ªæ²¡æœ‰çœç•¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯¹äº func2 çš„ç”Ÿå‘½å‘¨æœŸä¼šç”±ç¼–è¯‘å™¨ç¼ºçœæ¨å¯¼ä¸º '_ï¼Œå¯èƒ½å¯¼è‡´ç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…é”™è¯¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl&lt;'a&gt; Data&lt;'a&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn func1(&amp;self) -&gt; Data&lt;'a&gt; {Data { b: &amp;0 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn func2(&amp;self) -&gt; Data {Data { b: &amp;0 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨-rust-é‡å†™æ”¶ç›Šæ¯”">ä½¿ç”¨ Rust é‡å†™æ”¶ç›Šæ¯”<a href="#ä½¿ç”¨-rust-é‡å†™æ”¶ç›Šæ¯”" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>ç»è¿‡å›¢é˜Ÿå‡ ä¸ªäººèŠ±è´¹å‡ ä¸ªæœˆæ—¶é—´ä½¿ç”¨ Rust å®Œå…¨é‡å†™å¹¶ç¨³å®šè½åœ°ç”Ÿäº§ç¯å¢ƒå‡ ä¸ªæœˆåï¼Œå›é¡¾æ•´ä¸ªè¿‡ç¨‹æ„Ÿè§‰è¿™ä»¶äº‹æƒ…çš„æ”¶è·éå¸¸å¤§ï¼Œä»æŠ€æœ¯è§’åº¦å±‚é¢æ¥çœ‹ï¼Œé‡å†™çš„è¿‡ç¨‹ä¸ä»…ä»…é”»ç‚¼äº†å¿«é€Ÿå­¦ä¹ ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ã€ç¼–ç¨‹çŸ¥è¯†å¹¶å°†å…¶ä»˜è¯¸å®è·µï¼Œå¹¶ä¸”æ•´ä¸ªé‡å†™è¿‡ç¨‹è®©æˆ‘ä»¬åˆåæ€äº† KCL ç¼–è¯‘å™¨ä¸­è®¾è®¡ä¸åˆç†çš„éƒ¨åˆ†å¹¶è¿›è¡Œä¿®æ”¹ï¼Œå¯¹ä¸€ä¸ªç¼–ç¨‹è¯­è¨€è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªé•¿å‘¨æœŸçš„é¡¹ç›®ï¼Œæˆ‘ä»¬æ”¶è·çš„æ˜¯ç¼–è¯‘å™¨ç³»ç»Ÿæ›´åŠ ç¨³å®šã€å®‰å…¨ï¼Œä¸”ä»£ç æ¸…æ™°ï¼Œbug æ›´å°‘ã€æ€§èƒ½æ›´å¥½çš„æŠ€æœ¯äº§å“æœåŠ¡äºç”¨æˆ·ï¼Œè™½ç„¶æ²¡æœ‰å…¨éƒ¨æ¨¡å—å¾—åˆ°é«˜è¾¾ 40 å€çš„æ€§èƒ½ï¼Œå› ä¸ºéƒ¨åˆ†æ¨¡å—å¦‚ KCL è¿è¡Œæ—¶çš„æ€§èƒ½ç“¶é¢ˆåœ¨äºå†…å­˜æ·±æ‹·è´æ“ä½œï¼Œä½†ç¬”è€…ä¸ªäººè®¤ä¸ºä»ç„¶æ˜¯å€¼å¾—çš„ã€‚ä¸”å½“ Rust ä½¿ç”¨æ—¶é—´åˆ°è¾¾ä¸€å®šæ—¶é•¿åï¼Œå¿ƒæ™ºå’Œå¼€å‘æ•ˆç‡ä¸å†æ˜¯é™åˆ¶å› ç´ ï¼Œå°±åƒå­¦è½¦é‚£æ ·ï¼Œæ‹¿åˆ°é©¾ç…§åæ›´å¤šæ˜¯ä¸Šè·¯å®è·µå’Œæ€»ç»“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»“è¯­">ç»“è¯­<a href="#ç»“è¯­" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>ç¬”è€…ä¸ªäººè§‰å¾—ä½¿ç”¨ Rust é‡å†™é¡¹ç›®åæœ€é‡è¦çš„æ˜¯ä¸æ˜¯æˆ‘å­¦ä¼šäº†ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¹Ÿä¸æ˜¯ Rust å¾ˆæµè¡Œå¾ˆç«å› æ­¤æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­é‡‡ç”¨ä¸€ä¸‹ï¼Œæˆ–è€…ä½¿ç”¨ Rust ç¼–å†™äº†å¤šå°‘ç‚«æŠ€çš„ä»£ç ï¼Œæ˜¯çœŸçœŸæ­£æ­£åœ°ä½¿å¾—è¯­è¨€å’Œç¼–è¯‘å™¨æœ¬èº«æ›´åŠ ç¨³å®šï¼Œèƒ½å¤Ÿåœ¨ç”Ÿäº§ç¯å¢ƒå¹³ç¨³è½åœ°å¹¶é•¿æœŸä½¿ç”¨ï¼Œå¯åŠ¨é€Ÿåº¦å’Œè‡ªåŠ¨åŒ–æ•ˆç‡ä¸å†å—å›°æ‰°ï¼Œæ€§èƒ½ä¼˜äºç¤¾åŒºå…¶ä»–åŒç±»å‹é¢†åŸŸç¼–ç¨‹è¯­è¨€ï¼Œä½¿æˆ‘ä»¬è¯­è¨€å’Œå·¥å…·çš„ç”¨æˆ·æ„Ÿå—åˆ°ä½“éªŒæå‡ï¼Œè¿™äº›éƒ½å¾—ç›Šäº Rust çš„æ—  GCã€é«˜æ€§èƒ½ã€æ›´å¥½çš„é”™è¯¯å¤„ç†å†…å­˜ç®¡ç†ã€é›¶æŠ½è±¡ç­‰ç‰¹æ€§ã€‚æ€»ä¹‹ä½œä¸ºç”¨æˆ·ï¼Œä»–ä»¬æ‰æ˜¯æœ€å¤§çš„å—ç›Šè€…ã€‚</p><p>æœ€åï¼Œå¦‚æœå¤§å®¶å–œæ¬¢ KCL è¯­è¨€è¿™ä¸ªé¡¹ç›®ï¼Œæˆ–æƒ³ä½¿ç”¨ä½“éªŒ KCL ç”¨äºè‡ªå·±çš„åœºæ™¯ï¼Œæˆ–æƒ³ä½¿ç”¨ Rust è¯­è¨€å‚ä¸ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ¬¢è¿å¤§å®¶è®¿é—® <a href="https://github.com/KusionStack/community" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/community</a> åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºä¸€èµ·å‚ä¸è®¨è®ºå’Œå…±å»º ğŸ‘ğŸ‘ğŸ‘ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚è€ƒ">å‚è€ƒ<a href="#å‚è€ƒ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><ul><li><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/KCLVM</a></li><li><a href="https://github.com/Peefy/StackMachine" target="_blank" rel="noopener noreferrer">https://github.com/Peefy/StackMachine</a></li><li><a href="https://doc.rust-lang.org/book/" target="_blank" rel="noopener noreferrer">https://doc.rust-lang.org/book/</a></li><li><a href="https://github.com/sunface/rust-course" target="_blank" rel="noopener noreferrer">https://github.com/sunface/rust-course</a></li><li><a href="https://www.influxdata.com/blog/rust-can-be-difficult-to-learn-and-frustrating-but-its-also-the-most-exciting-thing-in-software-development-in-a-long-time/" target="_blank" rel="noopener noreferrer">https://www.influxdata.com/blog/rust-can-be-difficult-to-learn-and-frustrating-but-its-also-the-most-exciting-thing-in-software-development-in-a-long-time/</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Rust</category>
            <category>Performance</category>
            <category>Programming Language</category>
            <category>Compiler</category>
        </item>
        <item>
            <title><![CDATA[SETTA 2022 ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-setta-meeting</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-setta-meeting</guid>
            <pubDate>Thu, 27 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[PDF ä¸‹è½½]]></description>
            <content:encoded><![CDATA[<p><a href="https://kcl-lang.github.io/talks/kcl-setta2022.pdf" target="_blank" rel="noopener noreferrer">PDF ä¸‹è½½</a></p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
        </item>
        <item>
            <title><![CDATA[KCL è®ºæ–‡è¢« SETTA 2022 ä¼šè®®å½•ç”¨]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-setta-paper</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-setta-paper</guid>
            <pubDate>Thu, 13 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[è¿‘æ—¥ï¼Œç”± KCL å›¢é˜Ÿæˆå‘˜æ’°å†™çš„å…³äº KCL åˆ›æ–°è®ºæ–‡è¢« SETTA 2022 å›½é™…ä¼šè®®é•¿æ–‡å½•ç”¨ã€‚]]></description>
            <content:encoded><![CDATA[<p>è¿‘æ—¥ï¼Œç”± KCL å›¢é˜Ÿæˆå‘˜æ’°å†™çš„å…³äº KCL åˆ›æ–°è®ºæ–‡è¢« SETTA 2022 å›½é™…ä¼šè®®é•¿æ–‡å½•ç”¨ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/kcl_paper_setta-a8cba7cb8e75758bed7e0dd53752835e.png" width="756" height="852" class="img_ev3q"></p><p>Symposium on Dependable Software Engineeringï¼ˆä»¥ä¸‹ç®€ç§° SETTAï¼‰å¯é è½¯ä»¶å·¥ç¨‹ç ”è®¨ä¼šæ—¨åœ¨å°†å›½é™…ç ”ç©¶äººå‘˜èšé›†åœ¨ä¸€èµ·ï¼Œå°±ç¼©å°å½¢å¼åŒ–æ–¹æ³•ä¸è½¯ä»¶å·¥ç¨‹ä¹‹é—´çš„å·®è·äº¤æµç ”ç©¶æˆæœå’Œæƒ³æ³•ã€‚ä¾‹å¦‚ï¼Œå°†å½¢å¼åŒ–æŠ€æœ¯å’Œå·¥å…·åº”ç”¨äºå·¥ç¨‹å¤§å‹ç³»ç»Ÿï¼ˆå¦‚ç½‘ç»œç‰©ç†ç³»ç»Ÿ (CPS)ã€ç‰©è”ç½‘ (IoT)ã€ä¼ä¸šç³»ç»Ÿã€åŸºäºäº‘çš„ç³»ç»Ÿç­‰ï¼‰ã€‚</p><p>æ­¤æ¬¡è¢«å½•ç”¨çš„è®ºæ–‡ä¸ºã€ŠKCL: A Declarative Language for Large-scale Configuration and Policy Managementã€‹ï¼Œè¯¥è®ºæ–‡çš„æ ¸å¿ƒåˆ›æ–°ç‚¹æ˜¯æå‡ºäº† KCL å£°æ˜å¼è¯­è¨€ã€å¼€å‘æœºåˆ¶ä»¥åŠä¸€è‡´çš„å·¥ä½œæµç¨‹ã€‚é€šè¿‡è¯­è¨€çš„å»ºæ¨¡åŠçº¦æŸèƒ½åŠ›ï¼Œå¯ä»¥æå‡è¿ç»´å¼€å‘è¿‡ç¨‹ä¸­çš„å¤šå›¢é˜Ÿåä½œç”Ÿäº§åŠ›ä»¥åŠæ•ˆç‡ï¼ŒåŒæ—¶ç¡®ä¿å¤§è§„æ¨¡é…ç½®å’Œç­–ç•¥ç®¡ç†çš„ç¨³å®šæ€§ã€‚</p><p>æ­¤å¤–ï¼ŒSETTA 2022 å°†åœ¨åŒ—äº¬æ—¶é—´ 10 æœˆ 27 æ—¥è‡³ 10 æœˆ 28 æ—¥ä¸¾åŠçº¿ä¸Šä¼šè®®ï¼Œå±Šæ—¶ä¼šåˆ†äº« KCL è®ºæ–‡è¯¦ç»†å†…å®¹ï¼Œæ¬¢è¿åŠ å…¥ <a href="https://github.com/KusionStack/community" target="_blank" rel="noopener noreferrer">KCL ç¤¾åŒº</a> è¿›è¡Œå›´è§‚ã€‚SETTA 2022 ä¼šè®®è®®ç¨‹è¯¦æƒ…è¯·å‚è€ƒï¼š<a href="https://lcs.ios.ac.cn/setta2022/program.php" target="_blank" rel="noopener noreferrer">https://lcs.ios.ac.cn/setta2022/program.php</a></p><p>æ³¨ï¼šç›®å‰ KCL å·²åœ¨ Github å¼€æºï¼Œæ¬¢è¿è®¿é—® <a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/KCLVM</a> è·å¾—æ›´å¤šä¿¡æ¯ã€‚</p>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
        </item>
        <item>
            <title><![CDATA[å£°æ˜å¼é…ç½®æŠ€æœ¯æ¦‚è¿°]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2022-declarative-config-overview</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2022-declarative-config-overview</guid>
            <pubDate>Thu, 15 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[é›¶ã€å‰è¨€]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é›¶å‰è¨€">é›¶ã€å‰è¨€<a href="#é›¶å‰è¨€" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>æ–‡æœ¬ä»…ç”¨äºæ¾„æ¸…å£°æ˜å¼é…ç½®æŠ€æœ¯æ¦‚è¿°ï¼Œ<a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL</a> æ¦‚å¿µä»¥åŠæ ¸å¿ƒè®¾è®¡ï¼Œä»¥åŠä¸å…¶ä»–é…ç½®è¯­è¨€çš„å¯¹æ¯”ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸€å£°æ˜å¼é…ç½®æ¦‚è¿°">ä¸€ã€å£°æ˜å¼é…ç½®æ¦‚è¿°<a href="#ä¸€å£°æ˜å¼é…ç½®æ¦‚è¿°" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-é…ç½®çš„é‡è¦æ€§">1.1 é…ç½®çš„é‡è¦æ€§<a href="#11-é…ç½®çš„é‡è¦æ€§" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><ul><li>è½¯ä»¶ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œæ¯å¤©æœ‰æˆåƒä¸Šä¸‡çš„é…ç½®æ›´æ–°ï¼Œå¹¶ä¸”é…ç½®æœ¬èº«ä¹Ÿåœ¨é€æ¸æ¼”è¿›ï¼Œå¯¹è§„æ¨¡åŒ–æ•ˆç‡æœ‰è¾ƒé«˜çš„è¯‰æ±‚<ul><li><strong>é…ç½®æ›´æ–°è¶Šæ¥è¶Šé¢‘ç¹</strong>ï¼šé…ç½®æä¾›äº†ä¸€ç§æ”¹å˜ç³»ç»ŸåŠŸèƒ½çš„ä½å¼€é”€æ–¹å¼ï¼Œä¸æ–­å‘å±•çš„ä¸šåŠ¡éœ€æ±‚ã€åŸºç¡€è®¾æ–½è¦æ±‚å’Œå…¶ä»–å› ç´ æ„å‘³ç€ç³»ç»Ÿéœ€è¦ä¸æ–­å˜åŒ–ã€‚</li><li><strong>é…ç½®è§„æ¨¡è¶Šæ¥è¶Šå¤§</strong>ï¼šä¸€ä»½é…ç½®å¾€å¾€è¦åˆ†å‘åˆ°ä¸åŒçš„äº‘ç«™ç‚¹ã€ä¸åŒçš„ç§Ÿæˆ·ã€ä¸åŒçš„ç¯å¢ƒç­‰ã€‚</li><li><strong>é…ç½®åœºæ™¯å¹¿æ³›</strong>ï¼šåº”ç”¨é…ç½®ã€æ•°æ®åº“é…ç½®ã€ç½‘ç»œé…ç½®ã€ç›‘æ§é…ç½®ç­‰ã€‚</li><li><strong>é…ç½®æ ¼å¼ç¹å¤š</strong>ï¼šJSON, YAML, XML, TOML, å„ç§é…ç½®æ¨¡ç‰ˆå¦‚ Java Velocity, Go Template ç­‰ã€‚</li></ul></li><li>é…ç½®çš„ç¨³å®šæ€§è‡³å…³é‡è¦ï¼Œç³»ç»Ÿå®•æœºæˆ–å‡ºé”™çš„ä¸€ä¸ªæœ€ä¸»è¦åŸå› æ˜¯æœ‰å¤§é‡å·¥ç¨‹å¸ˆè¿›è¡Œé¢‘ç¹çš„å®æ—¶é…ç½®æ›´æ–°ï¼Œè¡¨ 1 ç¤ºå‡ºäº†å‡ ä¸ªç”±äºé…ç½®å¯¼è‡´çš„ç³»ç»Ÿå‡ºé”™äº‹ä»¶ã€‚</li></ul><table><thead><tr><th>æ—¶é—´</th><th>äº‹ä»¶</th></tr></thead><tbody><tr><td>2021 å¹´ 7 æœˆ</td><td>ä¸­å›½ Bilibili å…¬å¸ç”±äº SLB Lua é…ç½®è®¡ç®—å‡ºé”™é™·å…¥æ­»å¾ªç¯å¯¼è‡´ç½‘ç«™å®•æœº</td></tr><tr><td>2021 å¹´ 10 æœˆ</td><td>éŸ©å›½ KT å…¬å¸ç”±äºè·¯ç”±é…ç½®é”™è¯¯å¯¼è‡´åœ¨å…¨å›½èŒƒå›´å†…é­å—é‡å¤§ç½‘ç»œä¸­æ–­</td></tr></tbody></table><p>è¡¨ 1 é…ç½®å¯¼è‡´çš„ç³»ç»Ÿå‡ºé”™äº‹ä»¶</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-å£°æ˜å¼é…ç½®åˆ†ç±»">1.2 å£°æ˜å¼é…ç½®åˆ†ç±»<a href="#12-å£°æ˜å¼é…ç½®åˆ†ç±»" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>äº‘åŸç”Ÿæ—¶ä»£å¸¦æ¥äº†å¦‚é›¨åæ˜¥ç¬‹èˆ¬çš„æŠ€æœ¯å‘å±•ï¼Œå‡ºç°äº†å¤§é‡é¢å‘ç»ˆæ€çš„å£°æ˜å¼é…ç½®å®è·µï¼Œå¦‚å›¾ 1 æ‰€ç¤ºï¼Œå£°æ˜å¼é…ç½®ä¸€èˆ¬å¯åˆ†ä¸ºå¦‚ä¸‹å‡ ç§æ–¹å¼ã€‚
<img loading="lazy" src="/zh-CN/assets/images/01-declarative-config-e5396685e3f3498f4b59854f8cf5eecb.png" width="1796" height="1076" class="img_ev3q">
å›¾ 1 å£°æ˜å¼é…ç½®æ–¹å¼åˆ†ç±»</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="121-ç»“æ„åŒ–-structured-çš„-kv">1.2.1 ç»“æ„åŒ– (Structured) çš„ KV<a href="#121-ç»“æ„åŒ–-structured-çš„-kv" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>ç»“æ„åŒ–çš„ KV å¯ä»¥æ»¡è¶³æœ€å°åŒ–æ•°æ®å£°æ˜éœ€æ±‚ï¼Œæ¯”å¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€åˆ—è¡¨å’Œå­—å…¸ç­‰æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”éšç€äº‘åŸç”ŸæŠ€æœ¯å¿«é€Ÿå‘å±•åº”ç”¨ï¼Œå£°æ˜å¼ API å¯ä»¥æ»¡è¶³ X as Data å‘å±•çš„è¯‰æ±‚ï¼Œå¹¶ä¸”é¢å‘æœºå™¨å¯è¯»å¯å†™ï¼Œé¢å‘äººç±»å¯è¯»ã€‚å…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>è¯­æ³•ç®€å•ï¼Œæ˜“äºç¼–å†™å’Œé˜…è¯»</li><li>å¤šè¯­è¨€ API ä¸°å¯Œ</li><li>æœ‰å„ç§ Path å·¥å…·æ–¹ä¾¿æ•°æ®æŸ¥è¯¢ï¼Œå¦‚ XPath, JsonPath ç­‰</li></ul></li><li>ç—›ç‚¹<ul><li>å†—ä½™ä¿¡æ¯å¤šï¼šå½“é…ç½®è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œç»´æŠ¤å’Œé˜…è¯»é…ç½®å¾ˆå›°éš¾ï¼Œå› ä¸ºé‡è¦çš„é…ç½®ä¿¡æ¯è¢«æ·¹æ²¡åœ¨äº†å¤§é‡ä¸ç›¸å…³çš„é‡å¤ç»†èŠ‚ä¸­</li><li>åŠŸèƒ½æ€§ä¸è¶³<ul><li>çº¦æŸæ ¡éªŒèƒ½åŠ›</li><li>å¤æ‚é€»è¾‘ç¼–å†™èƒ½åŠ›</li><li>æµ‹è¯•ã€è°ƒè¯•èƒ½åŠ›</li><li>ä¸æ˜“æŠ½è±¡å’Œå¤ç”¨</li><li>Kustomize çš„ Patch æ¯”è¾ƒå®šåˆ¶ï¼ŒåŸºæœ¬æ˜¯é€šè¿‡å›ºå®šå‡ ç§ Patch Merge ç­–ç•¥</li></ul></li></ul></li></ul><p>ç»“æ„åŒ– KV çš„ä»£è¡¨æŠ€æœ¯æœ‰</p><ul><li>JSON/YAMLï¼šéå¸¸æ–¹ä¾¿é˜…è¯»ï¼Œä»¥åŠè‡ªåŠ¨åŒ–å¤„ç†ï¼Œä¸åŒçš„è¯­è¨€å‡å…·æœ‰ä¸°å¯Œçš„ API æ”¯æŒã€‚</li><li><a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a>ï¼šæä¾›äº†ä¸€ç§æ— éœ€<strong>æ¨¡æ¿</strong>å’Œ <strong>DSL</strong> å³å¯è‡ªå®šä¹‰ Kubernetes èµ„æºåŸºç¡€é…ç½®å’Œå·®å¼‚åŒ–é…ç½®çš„è§£å†³æ–¹æ¡ˆï¼Œæœ¬èº«ä¸è§£å†³çº¦æŸçš„é—®é¢˜ï¼Œéœ€è¦é…åˆå¤§é‡çš„é¢å¤–å·¥å…·è¿›è¡Œçº¦æŸæ£€æŸ¥å¦‚ <a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">Kube-linter</a>ã€<a href="https://github.com/bridgecrewio/checkov" target="_blank" rel="noopener noreferrer">Checkov</a> ç­‰æ£€æŸ¥å·¥å…·ï¼Œå›¾ 2 ç¤ºå‡ºäº† Kustomize çš„å…¸å‹å·¥ä½œæ–¹å¼ã€‚</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/02-kustomize-8aa6da28d0aa5551360333a978452f23.png" width="1222" height="1220" class="img_ev3q">
å›¾ 2 Kustomize å…¸å‹å·¥ä½œæ–¹å¼</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="123-æ¨¡ç‰ˆåŒ–-templated-çš„-kv">1.2.3 æ¨¡ç‰ˆåŒ– (Templated) çš„ KV<a href="#123-æ¨¡ç‰ˆåŒ–-templated-çš„-kv" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>æ¨¡ç‰ˆåŒ– (Templated) çš„ KV èµ‹äºˆé™æ€é…ç½®æ•°æ®åŠ¨æ€å‚æ•°çš„èƒ½åŠ›ï¼Œå¯ä»¥åšåˆ°ä¸€ä»½æ¨¡ç‰ˆ+åŠ¨æ€å‚æ•°è¾“å‡ºä¸åŒçš„é™æ€é…ç½®æ•°æ®ã€‚å…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>ç®€å•çš„é…ç½®é€»è¾‘ï¼Œå¾ªç¯æ”¯æŒ</li><li>æ”¯æŒå¤–éƒ¨åŠ¨æ€å‚æ•°è¾“å…¥æ¨¡ç‰ˆ</li></ul></li><li>ç—›ç‚¹<ul><li>å®¹æ˜“è½å…¥æ‰€æœ‰é…ç½®å‚æ•°éƒ½æ˜¯æ¨¡ç‰ˆå‚æ•°çš„é™·é˜±</li><li>å½“é…ç½®è§„æ¨¡å˜å¤§æ—¶ï¼Œå¼€å‘è€…å’Œå·¥å…·éƒ½éš¾ä»¥ç»´æŠ¤å’Œåˆ†æå®ƒä»¬</li></ul></li></ul><p>æ¨¡ç‰ˆåŒ–ä»£è¡¨æŠ€æœ¯æœ‰:</p><ul><li><a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm</a>ï¼šKubernetes èµ„æºçš„åŒ…ç®¡ç†å·¥å…·ï¼Œé€šè¿‡é…ç½®æ¨¡ç‰ˆç®¡ç† Kubernetes èµ„æºé…ç½®ã€‚å›¾ 3 ç¤ºå‡ºäº†ä¸€ä¸ª Helm Jekins Package ConfigMap é…ç½®æ¨¡ç‰ˆï¼Œå¯ä»¥çœ‹å‡ºè¿™äº›æ¨¡ç‰ˆæœ¬èº«éƒ½ååˆ†çŸ­å°ï¼Œå¯ä»¥ä¹¦å†™ç®€å•çš„é€»è¾‘ï¼Œé€‚åˆ Kubernetes åŸºç¡€ç»„ä»¶å›ºå®šçš„ä¸€ç³»åˆ—èµ„æºé…ç½®é€šè¿‡åŒ…ç®¡ç†+é¢å¤–çš„é…ç½®å‚æ•°è¿›è¡Œå®‰è£…ã€‚ç›¸æ¯”äºå•çº¯çš„æ¨¡ç‰ˆåŒ–çš„ KVï¼ŒHelm ä¸€å®šç¨‹åº¦ä¸Šæä¾›äº†æ¨¡ç‰ˆå­˜å‚¨/å¼•ç”¨å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†çš„èƒ½åŠ›ç›¸æ¯”äº Kustomize æ›´é€‚åˆç®¡ç†å¤–éƒ¨ Charts, ä½†æ˜¯åœ¨å¤šç¯å¢ƒã€å¤šç§Ÿæˆ·çš„é…ç½®ç®¡ç†ä¸Šä¸å¤ªæ“…é•¿ã€‚</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/03-helm-88b0bd224c35a3f803c1fda38413ff13.png" width="2108" height="1248" class="img_ev3q"></p><p>å›¾ 3 Helm Jekins Package ConfigMap é…ç½®æ¨¡ç‰ˆ</p><ul><li>å…¶ä»–å„ç§é…ç½®æ¨¡ç‰ˆï¼šJava Velocity, Go Template ç­‰æ–‡æœ¬æ¨¡æ¿å¼•æ“éå¸¸é€‚åˆ HTML ç¼–å†™æ¨¡æ¿ã€‚ä½†æ˜¯åœ¨é…ç½®åœºæ™¯ä¸­ä½¿ç”¨æ—¶ï¼Œå­˜åœ¨æ‰€æœ‰é…ç½®å­—æ®µå³æ¨¡ç‰ˆå‚æ•°çš„é£é™©ï¼Œå¼€å‘è€…å’Œå·¥å…·éƒ½éš¾ä»¥ç»´æŠ¤å’Œåˆ†æå®ƒä»¬ã€‚</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="123-ä»£ç åŒ–-programmable-çš„-kv">1.2.3 ä»£ç åŒ– (Programmable) çš„ KV<a href="#123-ä»£ç åŒ–-programmable-çš„-kv" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>Configuration as Code (CaC), ä½¿ç”¨ä»£ç äº§ç”Ÿé…ç½®ï¼Œå°±åƒå·¥ç¨‹å¸ˆä»¬åªéœ€è¦å†™é«˜çº§ GPL ä»£ç ï¼Œè€Œä¸æ˜¯æ‰‹å·¥ç¼–å†™å®¹æ˜“å‡ºé”™è€Œä¸”éš¾ä»¥ç†è§£çš„æœåŠ¡å™¨äºŒè¿›åˆ¶ä»£ç ä¸€æ ·ã€‚é…ç½®å˜æ›´åŒä»£ç å˜æ›´åŒæ ·ä¸¥è‚ƒåœ°å¯¹å¾…ï¼ŒåŒæ ·å¯ä»¥æ‰§è¡Œå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰ã€‚ä»£ç æ¨¡å—åŒ–å’Œé‡ç”¨æ˜¯ç»´æŠ¤é…ç½®ä»£ç æ¯”æ‰‹åŠ¨ç¼–è¾‘ JSON/YAML ç­‰é…ç½®æ–‡ä»¶æ›´å®¹æ˜“çš„ä¸€ä¸ªå…³é”®åŸå› ã€‚å…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>å¿…è¦çš„ç¼–ç¨‹èƒ½åŠ›ï¼ˆå˜é‡å®šä¹‰ã€é€»è¾‘åˆ¤æ–­ã€å¾ªç¯ã€æ–­è¨€ç­‰ï¼‰</li><li>ä»£ç æ¨¡å—åŒ–ä¸æŠ½è±¡ï¼ˆæ”¯æŒå®šä¹‰æ•°æ®æ¨¡ç‰ˆï¼Œå¹¶ç”¨æ¨¡ç‰ˆå¾—åˆ°æ–°çš„é…ç½®æ•°æ®ï¼‰</li><li>å¯ä»¥æŠ½è±¡é…ç½®æ¨¡ç‰ˆ+å¹¶ä½¿ç”¨é…ç½®è¦†ç›–</li></ul></li><li>ç—›ç‚¹<ul><li>ç±»å‹æ£€æŸ¥ä¸è¶³</li><li>è¿è¡Œæ—¶é”™è¯¯</li><li>çº¦æŸèƒ½åŠ›ä¸è¶³</li></ul></li></ul><p>ä»£ç åŒ– KV çš„ä»£è¡¨æŠ€æœ¯æœ‰:</p><ul><li><a href="https://github.com/rix0rrr/gcl" target="_blank" rel="noopener noreferrer">GCL</a>ï¼šä¸€ç§ Python å®ç°çš„å£°æ˜å¼é…ç½®ç¼–ç¨‹è¯­è¨€ï¼Œæä¾›äº†å¿…è¦çš„è¨€èƒ½åŠ›æ”¯æŒæ¨¡ç‰ˆæŠ½è±¡ï¼Œä½†ç¼–è¯‘å™¨æœ¬èº«æ˜¯ Python ç¼–å†™ï¼Œä¸”è¯­è¨€æœ¬èº«æ˜¯è§£é‡Šæ‰§è¡Œï¼Œå¯¹äºå¤§çš„æ¨¡ç‰ˆå®ä¾‹ (æ¯”å¦‚ K8s å‹) æ€§èƒ½è¾ƒå·®ã€‚</li><li><a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">HCL</a>ï¼šä¸€ç§ Go å®ç°ç»“æ„åŒ–é…ç½®è¯­è¨€ï¼ŒåŸç”Ÿè¯­æ³•å—åˆ° libuclnginx é…ç½®ç­‰çš„å¯å‘ï¼Œç”¨äºåˆ›å»ºå¯¹äººç±»å’Œæœºå™¨éƒ½å‹å¥½çš„ç»“æ„åŒ–é…ç½®è¯­è¨€ï¼Œä¸»è¦é’ˆå¯¹ devops å·¥å…·ã€æœåŠ¡å™¨é…ç½®åŠ Terraform ä¸­å®šä¹‰èµ„æºé…ç½®ç­‰ã€‚</li><li><a href="https://github.com/google/jsonnet" target="_blank" rel="noopener noreferrer">Jsonnet</a>ï¼šä¸€ç§ C++ å®ç°çš„æ•°æ®æ¨¡æ¿è¯­è¨€ï¼Œé€‚ç”¨äºåº”ç”¨ç¨‹åºå·¥å…·å¼€å‘äººå‘˜ï¼Œå¯ä»¥ç”Ÿæˆé…ç½®æ•°æ®å¹¶ä¸”æ— å‰¯ä½œç”¨ç»„ç»‡ã€ç®€åŒ–ã€ç»Ÿä¸€ç®¡ç†åºå¤§çš„é…ç½®ã€‚</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="124-ç±»å‹åŒ–-typed-çš„-kv">1.2.4 ç±»å‹åŒ– (Typed) çš„ KV<a href="#124-ç±»å‹åŒ–-typed-çš„-kv" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>ç±»å‹åŒ–çš„ KVï¼ŒåŸºäºä»£ç åŒ– KVï¼Œå¤šäº†ç±»å‹æ£€æŸ¥å’Œçº¦æŸçš„èƒ½åŠ›ï¼Œå…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>é…ç½®åˆå¹¶å®Œå…¨å¹‚ç­‰ï¼Œå¤©ç„¶é˜²æ­¢é…ç½®å†²çª</li><li>ä¸°å¯Œçš„é…ç½®çº¦æŸè¯­æ³•ç”¨äºç¼–å†™çº¦æŸ</li><li>å°†ç±»å‹å’Œå€¼çº¦æŸç¼–å†™æŠ½è±¡ä¸ºåŒä¸€ç§å½¢å¼ï¼Œç¼–å†™ç®€å•</li><li>é…ç½®é¡ºåºæ— å…³</li></ul></li><li>ç—›ç‚¹<ul><li>å›¾åˆå¹¶å’Œå¹‚ç­‰åˆå¹¶ç­‰æ¦‚å¿µå¤æ‚ï¼Œç”¨æˆ·ç†è§£æˆæœ¬è¾ƒé«˜</li><li>ç±»å‹å’Œå€¼æ··åˆå®šä¹‰æé«˜æŠ½è±¡ç¨‹åº¦çš„åŒæ—¶æå‡äº†ç”¨æˆ·çš„ç†è§£æˆæœ¬ï¼Œå¹¶ä¸”æ‰€æœ‰çº¦æŸåœ¨è¿è¡Œæ—¶è¿›è¡Œæ£€æŸ¥ï¼Œå¤§è§„æ¨¡é…ç½®ä»£ç ä¸‹æœ‰æ€§èƒ½ç“¶é¢ˆ</li><li>å¯¹äºæƒ³è¦é…ç½®è¦†ç›–ã€ä¿®æ”¹çš„å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒåœºæ™¯éš¾ä»¥å®ç°</li><li>å¯¹äºå¸¦æ¡ä»¶çš„çº¦æŸåœºæ™¯ï¼Œå®šä¹‰å’Œæ ¡éªŒæ··åˆå®šä¹‰ç¼–å†™ç”¨æˆ·ç•Œé¢ä¸å‹å¥½</li></ul></li></ul><p>ç±»å‹åŒ– KV çš„ä»£è¡¨æŠ€æœ¯æœ‰:</p><ul><li><a href="https://github.com/cue-lang/cue" target="_blank" rel="noopener noreferrer">CUE</a>ï¼šCUE è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯â€œç±»å‹æ£€æŸ¥â€ï¼Œä¸»è¦åº”ç”¨äºé…ç½®çº¦æŸæ ¡éªŒåœºæ™¯åŠç®€å•çš„äº‘åŸç”Ÿé…ç½®åœºæ™¯</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="125-æ¨¡å‹åŒ–-structural-çš„-kv">1.2.5 æ¨¡å‹åŒ– (Structural) çš„ KV<a href="#125-æ¨¡å‹åŒ–-structural-çš„-kv" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>æ¨¡å‹åŒ–çš„ KV åœ¨ä»£ç åŒ–å’Œç±»å‹åŒ– KV çš„åŸºç¡€ä¸Šä»¥é«˜çº§è¯­è¨€å»ºæ¨¡èƒ½åŠ›ä¸ºæ ¸å¿ƒæè¿°ï¼ŒæœŸæœ›åšåˆ°æ¨¡å‹çš„å¿«é€Ÿç¼–å†™ä¸åˆ†å‘ï¼Œå…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>å¼•å…¥å¯åˆ†å—ã€å¯æ‰©å±•çš„ KV é…ç½®å—ç¼–å†™æ–¹å¼</li><li>ç±»é«˜çº§ç¼–ç¨‹è¯­è¨€çš„ç¼–å†™ã€æµ‹è¯•æ–¹å¼</li><li>è¯­è¨€å†…ç½®çš„å¼ºæ ¡éªŒã€å¼ºçº¦æŸæ”¯æŒ</li><li>é¢å‘äººç±»å¯è¯»å¯å†™ï¼Œé¢å‘æœºå™¨éƒ¨åˆ†å¯è¯»å¯å†™</li></ul></li><li>ä¸è¶³<ul><li>æ‰©å±•æ–°æ¨¡å‹åŠç”Ÿæ€æ„å»ºéœ€è¦ä¸€å®šçš„ç ”å‘æˆæœ¬ï¼Œæˆ–è€…ä½¿ç”¨å·¥å…·å¯¹ç¤¾åŒºä¸­å·²æœ‰çš„ JsonSchema å’Œ OpenAPI æ¨¡å‹è¿›è¡Œæ¨¡å‹è½¬æ¢ã€è¿ç§»å’Œé›†æˆã€‚</li></ul></li></ul><p>æ¨¡å‹åŒ– KV çš„ä»£è¡¨æŠ€æœ¯æœ‰:</p><ul><li><a href="https://github.com/KusionStack/KCLVM" target="_blank" rel="noopener noreferrer">KCL</a>ï¼šä¸€ç§ Rust å®ç°çš„å£°æ˜å¼é…ç½®ç­–ç•¥ç¼–ç¨‹è¯­è¨€ï¼ŒæŠŠè¿ç»´ç±»ç ”å‘ç»Ÿä¸€ä¸ºä¸€ç§å£°æ˜å¼çš„ä»£ç ç¼–å†™ï¼Œå¯ä»¥é’ˆå¯¹å·®å¼‚åŒ–åº”ç”¨äº¤ä»˜åœºæ™¯æŠ½è±¡å‡ºç”¨æˆ·æ¨¡å‹å¹¶æ·»åŠ ç›¸åº”çš„çº¦æŸèƒ½åŠ›ï¼ŒæœŸæœ›å€ŸåŠ©å¯ç¼–ç¨‹ DevOps ç†å¿µè§£å†³è§„æ¨¡åŒ–è¿ç»´åœºæ™¯ä¸­çš„é…ç½®ç­–ç•¥ç¼–å†™çš„æ•ˆç‡å’Œå¯æ‰©å±•æ€§ç­‰é—®é¢˜ã€‚å›¾ 4 ç¤ºå‡ºäº†ä¸€ä¸ª KCL ç¼–å†™åº”ç”¨äº¤ä»˜é…ç½®ä»£ç çš„å…¸å‹åœºæ™¯</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/04-kcl-app-code-d82ba09686d177a29b92ebf03c3c41dd.png" width="962" height="1030" class="img_ev3q"></p><p>å›¾ 4 ä½¿ç”¨ KCL ç¼–å†™åº”ç”¨äº¤ä»˜é…ç½®ä»£ç </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-ä¸åŒå£°æ˜å¼é…ç½®æ–¹å¼çš„é€‰æ‹©æ ‡å‡†ä¸æœ€ä½³å®è·µ">1.3 ä¸åŒå£°æ˜å¼é…ç½®æ–¹å¼çš„é€‰æ‹©æ ‡å‡†ä¸æœ€ä½³å®è·µ<a href="#13-ä¸åŒå£°æ˜å¼é…ç½®æ–¹å¼çš„é€‰æ‹©æ ‡å‡†ä¸æœ€ä½³å®è·µ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><ul><li>é…ç½®çš„è§„æ¨¡ï¼šå¯¹äºå°è§„æ¨¡çš„é…ç½®åœºæ™¯ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ YAML/JSON ç­‰é…ç½®ï¼Œæ¯”å¦‚åº”ç”¨è‡ªèº«çš„ç®€å•é…ç½®ï¼ŒCI/CD çš„é…ç½®ã€‚æ­¤å¤–å¯¹äºå°è§„æ¨¡é…ç½®åœºæ™¯å­˜åœ¨çš„å¤šç¯å¢ƒã€å¤šç§Ÿæˆ·ç­‰éœ€æ±‚å¯ä»¥å€ŸåŠ© Kustomize çš„ overlay èƒ½åŠ›å®ç°ç®€å•é…ç½®çš„åˆå¹¶è¦†ç›–ç­‰æ“ä½œã€‚</li><li>æ¨¡å‹æŠ½è±¡ä¸çº¦æŸçš„å¿…è¦æ€§ï¼šå¯¹äºè¾ƒå¤§è§„æ¨¡çš„é…ç½®åœºæ™¯ç‰¹åˆ«æ˜¯å¯¹å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒç­‰æœ‰é…ç½®æ¨¡å‹å’Œè¿ç»´ç‰¹æ€§ç ”å‘å’Œæ²‰æ·€è¿«åˆ‡éœ€æ±‚çš„ï¼Œå¯ä»¥ä½¿ç”¨ä»£ç åŒ–ã€ç±»å‹åŒ–å’Œæ¨¡å‹åŒ–çš„ KV æ–¹å¼ã€‚</li></ul><p>æ­¤å¤–ï¼Œä»ä¸åŒå£°æ˜å¼é…ç½®æ–¹å¼çš„ä½¿ç”¨åœºæ™¯å‡ºå‘</p><ul><li>å¦‚æœéœ€è¦ç¼–å†™ç»“æ„åŒ–çš„é™æ€çš„ K-Vï¼Œæˆ–ä½¿ç”¨ Kubernetes åŸç”Ÿçš„æŠ€æœ¯å·¥å…·ï¼Œå»ºè®®é€‰æ‹© YAML</li><li>å¦‚æœå¸Œæœ›å¼•å…¥ç¼–ç¨‹è¯­è¨€ä¾¿åˆ©æ€§ä»¥æ¶ˆé™¤æ–‡æœ¬(å¦‚ YAMLã€JSON) æ¨¡æ¿ï¼Œæœ‰è‰¯å¥½çš„å¯è¯»æ€§ï¼Œæˆ–è€…å·²æ˜¯ <a href="https://www.terraform.io" target="_blank" rel="noopener noreferrer">Terraform</a> çš„ç”¨æˆ·ï¼Œå»ºè®®é€‰æ‹© HCL</li><li>å¦‚æœå¸Œæœ›å¼•å…¥ç±»å‹åŠŸèƒ½æå‡ç¨³å®šæ€§ï¼Œç»´æŠ¤å¯æ‰©å±•çš„é…ç½®æ–‡ä»¶ï¼Œå»ºè®®é€‰æ‹© CUE ä¹‹ç±»çš„æ•°æ®çº¦æŸè¯­è¨€</li><li>å¦‚æœå¸Œæœ›ä»¥ç°ä»£è¯­è¨€æ–¹å¼ç¼–å†™å¤æ‚ç±»å‹å’Œå»ºæ¨¡ï¼Œç»´æŠ¤å¯æ‰©å±•çš„é…ç½®æ–‡ä»¶ï¼ŒåŸç”Ÿçš„çº¯å‡½æ•°å’Œç­–ç•¥ï¼Œå’Œç”Ÿäº§çº§çš„æ€§èƒ½å’Œè‡ªåŠ¨åŒ–ï¼Œå»ºè®®é€‰æ‹© KCL</li></ul><p>ä¸åŒäºç¤¾åŒºä¸­çš„å…¶ä»–åŒç±»å‹é¢†åŸŸè¯­è¨€ï¼ŒKCL æ˜¯ä¸€ç§é¢å‘åº”ç”¨ç ”å‘äººå‘˜å¹¶é‡‡çº³äº†ç°ä»£è¯­è¨€è®¾è®¡å’ŒæŠ€æœ¯çš„é™æ€å¼ºç±»å‹ç¼–è¯‘è¯­è¨€</p><blockquote><p>æ³¨æ„ï¼Œæœ¬æ–‡å°†ä¸ä¼šè®¨è®ºé€šç”¨è¯­è¨€ç¼–å†™é…ç½®çš„æƒ…å†µï¼Œé€šç”¨è¯­è¨€ä¸€èˆ¬æ˜¯ Overkill çš„ï¼Œå³è¿œè¿œè¶…è¿‡äº†éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œé€šç”¨è¯­è¨€å­˜åœ¨å„å¼å„æ ·çš„å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚èƒ½åŠ›è¾¹ç•Œé—®é¢˜ (å¯åŠ¨æœ¬åœ°çº¿ç¨‹ã€è®¿é—® IO, ç½‘ç»œï¼Œä»£ç æ­»å¾ªç¯ç­‰ä¸å®‰å…¨éšæ‚£)ï¼Œæ¯”å¦‚åƒéŸ³ä¹é¢†åŸŸå°±æœ‰ä¸“é—¨çš„éŸ³ç¬¦å»è¡¨ç¤ºéŸ³ä¹ï¼Œæ–¹ä¾¿å­¦ä¹ ä¸äº¤æµï¼Œä¸æ˜¯ä¸€èˆ¬æ–‡å­—è¯­è¨€å¯ä»¥è¡¨è¿°æ¸…æ¥šçš„ã€‚</p><p>æ­¤å¤–ï¼Œé€šç”¨è¯­è¨€å› ä¸ºæœ¬èº«å°±æ ·å¼ç¹å¤šï¼Œå­˜åœ¨ç»Ÿä¸€ç»´æŠ¤ã€ç®¡ç†å’Œè‡ªåŠ¨åŒ–çš„æˆæœ¬ï¼Œé€šç”¨è¯­è¨€ä¸€èˆ¬ç”¨æ¥ç¼–å†™å®¢æˆ·ç«¯è¿è¡Œæ—¶ï¼Œæ˜¯æœåŠ¡ç«¯è¿è¡Œæ—¶çš„ä¸€ä¸ªå»¶ç»­ï¼Œä¸é€‚åˆç¼–å†™ä¸è¿è¡Œæ—¶æ— å…³çš„é…ç½®ï¼Œæœ€ç»ˆè¢«ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶ä»è¿›ç¨‹å¯åŠ¨ï¼Œç¨³å®šæ€§å’Œæ‰©å±•æ€§ä¸å¥½æ§åˆ¶ï¼Œè€Œé…ç½®è¯­è¨€å¾€å¾€ç¼–å†™çš„æ˜¯æ•°æ®ï¼Œå†æ­é…ä»¥ç®€å•çš„é€»è¾‘ï¼Œæè¿°çš„æ˜¯æœŸæœ›çš„æœ€ç»ˆç»“æœï¼Œç„¶åç”±ç¼–è¯‘å™¨æˆ–è€…å¼•æ“æ¥æ¶ˆè´¹è¿™ä¸ªæœŸæœ›ç»“æœã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äºŒkcl-çš„æ ¸å¿ƒè®¾è®¡ä¸åº”ç”¨åœºæ™¯">äºŒã€KCL çš„æ ¸å¿ƒè®¾è®¡ä¸åº”ç”¨åœºæ™¯<a href="#äºŒkcl-çš„æ ¸å¿ƒè®¾è®¡ä¸åº”ç”¨åœºæ™¯" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>Kusion é…ç½®è¯­è¨€ï¼ˆKCLï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ã€‚KCL é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>KCL çš„æ ¸å¿ƒç‰¹æ€§æ˜¯å…¶<strong>å»ºæ¨¡</strong>å’Œ<strong>çº¦æŸ</strong>èƒ½åŠ›ï¼ŒKCL æ ¸å¿ƒåŠŸèƒ½åŸºæœ¬å›´ç»• KCL è¿™ä¸ªä¸¤ä¸ªæ ¸å¿ƒç‰¹æ€§å±•å¼€ï¼Œæ­¤å¤– KCL éµå¾ªä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„é…ç½®ç†å¿µè€Œè®¾è®¡å…¶æ ¸å¿ƒç‰¹æ€§ï¼Œå¯ä»¥ä»ä¸¤ä¸ªæ–¹é¢ç†è§£ï¼š</p><ul><li><strong>ä»¥é¢†åŸŸæ¨¡å‹ä¸ºä¸­å¿ƒçš„é…ç½®è§†å›¾</strong>ï¼šå€ŸåŠ© KCL è¯­è¨€ä¸°å¯Œçš„ç‰¹æ€§åŠ <a href="https://kcl-lang.io/docs/tools/cli/openapi/" target="_blank" rel="noopener noreferrer">KCL OpenAPI</a> ç­‰å·¥å…·ï¼Œå¯ä»¥å°†ç¤¾åŒºä¸­å¹¿æ³›çš„ã€è®¾è®¡è‰¯å¥½çš„æ¨¡å‹ç›´æ¥é›†æˆåˆ° KCL ä¸­ï¼ˆæ¯”å¦‚ K8s èµ„æºæ¨¡å‹ï¼‰ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯è®¾è®¡ã€å®ç°è‡ªå·±çš„ KCL æ¨¡å‹ (åº“) ï¼Œå½¢æˆä¸€æ•´å¥—é¢†åŸŸæ¨¡å‹æ¶æ„äº¤ç”±å…¶ä»–é…ç½®ç»ˆç«¯ç”¨æˆ·ä½¿ç”¨ã€‚</li><li><strong>ä»¥ç»ˆç«¯ç”¨æˆ·ä¸ºä¸­å¿ƒçš„é…ç½®è§†å›¾</strong>ï¼šå€ŸåŠ© KCL çš„ä»£ç å°è£…ã€æŠ½è±¡å’Œå¤ç”¨èƒ½åŠ›ï¼Œå¯ä»¥å¯¹æ¨¡å‹æ¶æ„è¿›è¡Œè¿›ä¸€æ­¥æŠ½è±¡å’Œç®€åŒ–ï¼ˆæ¯”å¦‚å°† K8s èµ„æºæ¨¡å‹æŠ½è±¡ä¸ºä»¥åº”ç”¨ä¸ºæ ¸å¿ƒçš„ Server æ¨¡å‹ï¼‰ï¼Œåšåˆ°<strong>æœ€å°åŒ–ç»ˆç«¯ç”¨æˆ·é…ç½®è¾“å…¥</strong>ï¼Œç®€åŒ–ç”¨æˆ·çš„é…ç½®ç•Œé¢ï¼Œæ–¹ä¾¿æ‰‹åŠ¨æˆ–è€…ä½¿ç”¨è‡ªåŠ¨åŒ– API å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</li></ul><p>ä¸è®ºæ˜¯ä»¥ä½•ä¸ºä¸­å¿ƒçš„é…ç½®è§†å›¾ï¼Œå¯¹äºä»£ç è€Œè¨€ï¼ˆåŒ…æ‹¬é…ç½®ä»£ç ï¼‰éƒ½å­˜åœ¨å¯¹é…ç½®æ•°æ®çº¦æŸçš„éœ€æ±‚ï¼Œæ¯”å¦‚ç±»å‹çº¦æŸã€é…ç½®å­—æ®µå¿…é€‰/å¯é€‰çº¦æŸã€èŒƒå›´çº¦æŸã€ä¸å¯å˜æ€§çº¦æŸç­‰ï¼Œè¿™ä¹Ÿæ˜¯ KCL è‡´åŠ›äºè§£å†³çš„æ ¸å¿ƒé—®é¢˜ä¹‹ä¸€ã€‚ç»¼ä¸Šï¼ŒKCL æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸå’Œå£°æ˜çš„å‡½æ•°å¼è¯­è¨€ï¼ŒKCL ä¸»è¦åŒ…å«å¦‚å›¾ 5 æ‰€ç¤ºçš„æ ¸å¿ƒç‰¹æ€§ï¼š</p><p><img loading="lazy" src="/zh-CN/assets/images/05-kcl-core-feature-07f8b663f646233ca933999c6d5eb01d.png" width="892" height="878" class="img_ev3q"></p><p>å›¾ 5 KCL æ ¸å¿ƒç‰¹æ€§</p><ul><li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šæºäº Pythonã€Golang ç­‰é«˜çº§è¯­è¨€ï¼Œé‡‡çº³å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ç‰¹æ€§ï¼Œä½å‰¯ä½œç”¨</li><li><strong>è®¾è®¡è‰¯å¥½</strong>ï¼šç‹¬ç«‹çš„ Spec é©±åŠ¨çš„è¯­æ³•ã€è¯­ä¹‰ã€è¿è¡Œæ—¶å’Œç³»ç»Ÿåº“è®¾è®¡</li><li><strong>å¿«é€Ÿå»ºæ¨¡</strong>ï¼šä»¥ <a href="https://kcl-lang.io/docs/reference/lang/tour#schema" target="_blank" rel="noopener noreferrer">Schema</a> ä¸ºä¸­å¿ƒçš„é…ç½®ç±»å‹åŠæ¨¡å—åŒ–æŠ½è±¡</li><li><strong>åŠŸèƒ½å®Œå¤‡</strong>ï¼šåŸºäº <a href="https://kcl-lang.io/docs/reference/lang/tour#config-operations" target="_blank" rel="noopener noreferrer">Config</a>ã€<a href="https://kcl-lang.io/docs/reference/lang/tour#schema" target="_blank" rel="noopener noreferrer">Schema</a>ã€<a href="https://kcl-lang.io/docs/reference/lang/tour#function" target="_blank" rel="noopener noreferrer">Lambda</a>ã€<a href="https://kcl-lang.io/docs/reference/lang/tour#rule" target="_blank" rel="noopener noreferrer">Rule</a> çš„é…ç½®åŠå…¶æ¨¡å‹ã€é€»è¾‘å’Œç­–ç•¥ç¼–å†™</li><li><strong>å¯é ç¨³å®š</strong>ï¼šä¾èµ–<a href="https://kcl-lang.io/docs/reference/lang/tour/#type-system" target="_blank" rel="noopener noreferrer">é™æ€ç±»å‹ç³»ç»Ÿ</a>ã€<a href="https://kcl-lang.io/docs/reference/lang/tour/#validation" target="_blank" rel="noopener noreferrer">çº¦æŸ</a>å’Œ<a href="https://kcl-lang.io/docs/reference/lang/tour#rule" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰è§„åˆ™</a>çš„é…ç½®ç¨³å®šæ€§</li><li><strong>å¼ºå¯æ‰©å±•</strong>ï¼šé€šè¿‡ç‹¬ç«‹é…ç½®å—<a href="https://kcl-lang.io/docs/reference/lang/tour/#-operators-1" target="_blank" rel="noopener noreferrer">è‡ªåŠ¨åˆå¹¶æœºåˆ¶</a>ä¿è¯é…ç½®ç¼–å†™çš„é«˜å¯æ‰©å±•æ€§</li><li><strong>æ˜“è‡ªåŠ¨åŒ–</strong>ï¼š<a href="https://kcl-lang.io/docs/reference/lang/tour/#kcl-cli-variable-override" target="_blank" rel="noopener noreferrer">CRUD APIs</a>ï¼Œ<a href="https://kcl-lang.io/docs/reference/xlang-api/overview" target="_blank" rel="noopener noreferrer">å¤šè¯­è¨€ SDK</a>ï¼Œ<a href="https://github.com/KusionStack/kcl-plugin" target="_blank" rel="noopener noreferrer">è¯­è¨€æ’ä»¶</a> æ„æˆçš„æ¢¯åº¦è‡ªåŠ¨åŒ–æ–¹æ¡ˆ</li><li><strong>æè‡´æ€§èƒ½</strong>ï¼šä½¿ç”¨ Rust &amp; Cï¼Œ<a href="https://llvm.org/" target="_blank" rel="noopener noreferrer">LLVM</a> å®ç°ï¼Œæ”¯æŒç¼–è¯‘åˆ°æœ¬åœ°ä»£ç å’Œ <a href="https://webassembly.org/" target="_blank" rel="noopener noreferrer">WASM</a> çš„é«˜æ€§èƒ½ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶</li><li><strong>API äº²å’Œ</strong>ï¼šåŸç”Ÿæ”¯æŒ <a href="https://github.com/KusionStack/kcl-openapi" target="_blank" rel="noopener noreferrer">OpenAPI</a>ã€ Kubernetes CRDï¼Œ Kubernetes YAML ç­‰ API ç”Ÿæ€è§„èŒƒ</li><li><strong>å¼€å‘å‹å¥½</strong>ï¼š<a href="https://kcl-lang.io/docs/tools/cli/kcl/" target="_blank" rel="noopener noreferrer">è¯­è¨€å·¥å…·</a> (Formatï¼ŒLintï¼ŒTestï¼ŒVetï¼ŒDoc ç­‰)ã€ <a href="https://github.com/KusionStack/vscode-kcl" target="_blank" rel="noopener noreferrer">IDE æ’ä»¶</a> æ„å»ºè‰¯å¥½çš„ç ”å‘ä½“éªŒ</li><li><strong>å®‰å…¨å¯æ§</strong>ï¼šé¢å‘é¢†åŸŸï¼Œä¸åŸç”Ÿæä¾›çº¿ç¨‹ã€IO ç­‰ç³»ç»Ÿçº§åŠŸèƒ½ï¼Œä½å™ªéŸ³ï¼Œä½å®‰å…¨é£é™©ï¼Œæ˜“ç»´æŠ¤ï¼Œæ˜“æ²»ç†</li><li><strong>å¤šè¯­è¨€API</strong>ï¼š<a href="https://kcl-lang.io/docs/reference/xlang-api/go-api" target="_blank" rel="noopener noreferrer">Go</a>, <a href="https://kcl-lang.io/docs/reference/xlang-api/python-api" target="_blank" rel="noopener noreferrer">Python</a> å’Œ <a href="https://kcl-lang.io/docs/reference/xlang-api/rest-api" target="_blank" rel="noopener noreferrer">REST API</a> æ»¡è¶³ä¸åŒåœºæ™¯å’Œåº”ç”¨ä½¿ç”¨éœ€æ±‚</li><li><strong>ç”Ÿäº§å¯ç”¨</strong>ï¼šå¹¿æ³›åº”ç”¨åœ¨èš‚èšé›†å›¢å¹³å°å·¥ç¨‹åŠè‡ªåŠ¨åŒ–çš„ç”Ÿäº§ç¯å¢ƒå®è·µä¸­</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/06-kcl-code-design-a7eb793b08f0d9e089d7f17d7971749e.png" width="520" height="394" class="img_ev3q"></p><p>å›¾ 6 KCL è¯­è¨€æ ¸å¿ƒè®¾è®¡</p><p>æ›´å¤šè¯­è¨€è®¾è®¡å’Œèƒ½åŠ›è¯¦è§ <a href="https://kcl-lang.io/docs/reference/lang/tour" target="_blank" rel="noopener noreferrer">KCL æ–‡æ¡£</a>ï¼Œå°½ç®¡ KCL ä¸æ˜¯é€šç”¨è¯­è¨€ï¼Œä½†å®ƒæœ‰ç›¸åº”çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚å›¾ 6 æ‰€ç¤ºï¼Œç ”å‘è€…å¯ä»¥é€šè¿‡ KCL ç¼–å†™<strong>é…ç½®(config)</strong>ã€<strong>æ¨¡å‹(schema)</strong>ã€<strong>å‡½æ•°(lambda)</strong>åŠ<strong>è§„åˆ™(rule)</strong>ï¼Œå…¶ä¸­ Config ç”¨äºå®šä¹‰æ•°æ®ï¼ŒSchema ç”¨äºå¯¹æ•°æ®çš„æ¨¡å‹å®šä¹‰è¿›è¡Œæè¿°ï¼ŒRule ç”¨äºå¯¹æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œå¹¶ä¸” Schema å’Œ Rule è¿˜å¯ä»¥ç»„åˆä½¿ç”¨ç”¨äºå®Œæ•´æè¿°æ•°æ®çš„æ¨¡å‹åŠå…¶çº¦æŸï¼Œæ­¤å¤–è¿˜å¯ä»¥ä½¿ç”¨ KCL ä¸­çš„ lambda çº¯å‡½æ•°è¿›è¡Œæ•°æ®ä»£ç ç»„ç»‡ï¼Œå°†å¸¸ç”¨ä»£ç å°è£…èµ·æ¥,åœ¨éœ€è¦ä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚</p><p>å¯¹äºä½¿ç”¨åœºæ™¯è€Œè¨€ï¼ŒKCL å¯ä»¥è¿›è¡Œç»“æ„åŒ– KV æ•°æ®éªŒè¯ã€å¤æ‚é…ç½®æ¨¡å‹å®šä¹‰ä¸æŠ½è±¡ã€å¼ºçº¦æŸæ ¡éªŒé¿å…é…ç½®é”™è¯¯ã€åˆ†å—ç¼–å†™åŠé…ç½®åˆå¹¶èƒ½åŠ›ã€è‡ªåŠ¨åŒ–é›†æˆå’Œå·¥ç¨‹æ‰©å±•ç­‰èƒ½åŠ›ï¼Œä¸‹é¢é’ˆå¯¹è¿™äº›åŠŸèƒ½å’Œä½¿ç”¨åœºæ™¯è¿›è¡Œé˜è¿°ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-ç»“æ„åŒ–-kv-æ•°æ®éªŒè¯">2.1 ç»“æ„åŒ– KV æ•°æ®éªŒè¯<a href="#21-ç»“æ„åŒ–-kv-æ•°æ®éªŒè¯" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>å¦‚å›¾ 7 æ‰€ç¤ºï¼ŒKCL æ”¯æŒå¯¹ JSON/YAML æ•°æ®è¿›è¡Œæ ¼å¼æ ¡éªŒã€‚ä½œä¸ºä¸€ç§é…ç½®è¯­è¨€ï¼ŒKCL åœ¨éªŒè¯æ–¹é¢å‡ ä¹æ¶µç›–äº† OpenAPI æ ¡éªŒçš„æ‰€æœ‰åŠŸèƒ½ã€‚åœ¨ KCL ä¸­å¯ä»¥é€šè¿‡ä¸€ä¸ªç»“æ„å®šä¹‰æ¥çº¦æŸé…ç½®æ•°æ®ï¼ŒåŒæ—¶æ”¯æŒé€šè¿‡ check å—è‡ªå®šä¹‰çº¦æŸè§„åˆ™ï¼Œåœ¨ schema ä¸­ä¹¦å†™æ ¡éªŒè¡¨è¾¾å¼å¯¹ schema å®šä¹‰çš„å±æ€§è¿›è¡Œæ ¡éªŒå’Œçº¦æŸã€‚é€šè¿‡ check è¡¨è¾¾å¼å¯ä»¥éå¸¸æ¸…æ™°ç®€å•åœ°æ ¡éªŒè¾“å…¥çš„ JSON/YAML æ˜¯å¦æ»¡è¶³ç›¸åº”çš„ schema ç»“æ„å®šä¹‰ä¸ check çº¦æŸã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/07-kcl-validation-49d29ddd21947f4c239531c5db1efc8e.png" width="481" height="173" class="img_ev3q"></p><p>å›¾ 7 KCL ä¸­ç»“æ„åŒ– KV æ ¡éªŒæ–¹å¼</p><p>åŸºäºæ­¤ï¼ŒKCL æä¾›äº†ç›¸åº”çš„<a href="https://kcl-lang.io/docs/tools/cli/kcl/vet" target="_blank" rel="noopener noreferrer">æ ¡éªŒå·¥å…·</a>ç›´æ¥å¯¹ JSON/YAML æ•°æ®è¿›è¡Œæ ¡éªŒã€‚æ­¤å¤–ï¼Œé€šè¿‡ KCL schema çš„ check è¡¨è¾¾å¼å¯ä»¥éå¸¸æ¸…æ™°ç®€å•åœ°æ ¡éªŒè¾“å…¥çš„ JSON æ˜¯å¦æ»¡è¶³ç›¸åº”çš„ schema ç»“æ„å®šä¹‰ä¸ check çº¦æŸã€‚æ­¤å¤–ï¼ŒåŸºäºæ­¤èƒ½åŠ›å¯ä»¥æ„å»ºå¦‚å›¾ 8 æ‰€ç¤ºçš„ KV æ ¡éªŒå¯è§†åŒ–äº§å“ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/08-kcl-validation-ui-969312043d6654caf53c8a23854d0ec1.png" width="460" height="388" class="img_ev3q"></p><p>å›¾ 8 åŸºäº KCL ç»“æ„åŒ– KV æ ¡éªŒèƒ½åŠ›æ„å»ºçš„å¯è§†åŒ–äº§å“ç•Œé¢</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-å¤æ‚é…ç½®æ¨¡å‹å®šä¹‰ä¸æŠ½è±¡">2.2 å¤æ‚é…ç½®æ¨¡å‹å®šä¹‰ä¸æŠ½è±¡<a href="#22-å¤æ‚é…ç½®æ¨¡å‹å®šä¹‰ä¸æŠ½è±¡" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>å¦‚å›¾ 9 æ‰€ç¤ºï¼Œå€ŸåŠ© KCL è¯­è¨€ä¸°å¯Œçš„ç‰¹æ€§åŠ <a href="https://kcl-lang.io/docs/tools/cli/openapi/" target="_blank" rel="noopener noreferrer">KCL OpenAPI</a> ç­‰å·¥å…·ï¼Œå¯ä»¥å°†ç¤¾åŒºä¸­å¹¿æ³›çš„ã€è®¾è®¡è‰¯å¥½çš„æ¨¡å‹ç›´æ¥é›†æˆåˆ° KCL ä¸­ï¼ˆæ¯”å¦‚ K8s èµ„æºæ¨¡å‹ CRDï¼‰ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯è®¾è®¡ã€å®ç°è‡ªå·±çš„ KCL æ¨¡å‹ (åº“) ï¼Œå½¢æˆä¸€æ•´å¥—é¢†åŸŸæ¨¡å‹æ¶æ„äº¤ç”±å…¶ä»–é…ç½®ç»ˆç«¯ç”¨æˆ·ä½¿ç”¨ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/09-kcl-modeling-b4ad4cc5ee1ec1f61c87ac89f42c466e.png" width="753" height="389" class="img_ev3q"></p><p>å›¾ 9 KCL å¤æ‚é…ç½®å»ºæ¨¡çš„ä¸€èˆ¬æ–¹å¼</p><p>åŸºäºæ­¤ï¼Œå¯ä»¥åƒå›¾ 10 ç¤ºå‡ºçš„é‚£æ ·ç”¨ä¸€ä¸ªå¤§çš„ <a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig ä»“åº“</a> ç®¡ç†å…¨éƒ¨çš„ KCL é…ç½®ä»£ç ï¼Œå°†ä¸šåŠ¡é…ç½®ä»£ç  (åº”ç”¨ä»£ç )ã€åŸºç¡€é…ç½®ä»£ç  (æ ¸å¿ƒæ¨¡å‹+åº•å±‚æ¨¡å‹)åœ¨ä¸€ä¸ªå¤§åº“ä¸­ï¼Œæ–¹ä¾¿ä»£ç é—´çš„ç‰ˆæœ¬ä¾èµ–ç®¡ç†ï¼Œè‡ªåŠ¨åŒ–ç³»ç»Ÿå¤„ç†ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå®šä½å”¯ä¸€ä»£ç åº“çš„ç›®å½•åŠæ–‡ä»¶å³å¯ï¼Œä»£ç äº’é€šï¼Œç»Ÿä¸€ç®¡ç†ï¼Œä¾¿äºæŸ¥æ‰¾ã€ä¿®æ”¹ã€ç»´æŠ¤ï¼Œå¯ä»¥ä½¿ç”¨ç»Ÿä¸€çš„ CI/CD æµç¨‹è¿›è¡Œé…ç½®ç®¡ç†ï¼ˆæ­¤å¤–ï¼Œå¤§åº“æ¨¡å¼ä¹Ÿæ˜¯ Google ç­‰å¤´éƒ¨äº’è”ç½‘å…¬å¸å†…éƒ¨å®è·µçš„æ¨¡å¼ï¼‰ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/10-kcl-konfig-bd148de871df5c5a301313ae17d0be0b.png" width="363" height="356" class="img_ev3q"></p><p>å›¾ 10 ä½¿ç”¨ KCL çš„è¯­è¨€èƒ½åŠ›é›†æˆé¢†åŸŸæ¨¡å‹å¹¶æŠ½è±¡ç”¨æˆ·æ¨¡å‹å¹¶ä½¿ç”¨</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-å¼ºçº¦æŸæ ¡éªŒé¿å…é…ç½®é”™è¯¯">2.3 å¼ºçº¦æŸæ ¡éªŒé¿å…é…ç½®é”™è¯¯<a href="#23-å¼ºçº¦æŸæ ¡éªŒé¿å…é…ç½®é”™è¯¯" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>å¦‚å›¾ 11 æ‰€ç¤ºï¼Œåœ¨ KCL ä¸­å¯ä»¥é€šè¿‡ä¸°å¯Œçš„å¼ºçº¦æŸæ ¡éªŒæ‰‹æ®µé¿å…é…ç½®é”™è¯¯ï¼š</p><p><img loading="lazy" src="/zh-CN/assets/images/11-kcl-constraint-e336ac2830a49b4e347a75c40a22cf9d.png" width="569" height="326" class="img_ev3q"></p><p>å›¾ 11 KCL å¼ºçº¦æŸæ ¡éªŒæ‰‹æ®µ</p><ul><li>KCL è¯­è¨€çš„ç±»å‹ç³»ç»Ÿè¢«è®¾è®¡ä¸ºé™æ€çš„ï¼Œç±»å‹å’Œå€¼å®šä¹‰åˆ†ç¦»ï¼Œæ”¯æŒç¼–è¯‘æ—¶ç±»å‹æ¨å¯¼å’Œç±»å‹æ£€æŸ¥ï¼Œé™æ€ç±»å‹ä¸ä»…ä»…å¯ä»¥æå‰åœ¨ç¼–è¯‘æ—¶åˆ†æå¤§éƒ¨åˆ†çš„ç±»å‹é”™è¯¯ï¼Œè¿˜å¯ä»¥é™ä½åç«¯è¿è¡Œæ—¶çš„åŠ¨æ€ç±»å‹æ£€æŸ¥çš„æ€§èƒ½æŸè€—ã€‚æ­¤å¤–ï¼ŒKCL Schema ç»“æ„çš„å±æ€§å¼ºåˆ¶ä¸ºéç©ºï¼Œå¯ä»¥æœ‰æ•ˆé¿å…é…ç½®é—æ¼ã€‚</li><li>å½“éœ€è¦å¯¼å‡ºçš„ KCL é…ç½®è¢«å£°æ˜ä¹‹åï¼Œå®ƒä»¬çš„ç±»å‹å’Œå€¼å‡ä¸èƒ½å‘ç”Ÿå˜åŒ–ï¼Œè¿™æ ·çš„é™æ€ç‰¹æ€§ä¿è¯äº†é…ç½®ä¸ä¼šè¢«éšæ„ç¯¡æ”¹ã€‚</li><li>KCL æ”¯æŒé€šè¿‡ç»“æ„ä½“å†…ç½®çš„æ ¡éªŒè§„åˆ™è¿›ä¸€æ­¥ä¿éšœç¨³å®šæ€§ã€‚æ¯”å¦‚å¯¹äºå¦‚å›¾ 12 æ‰€ç¤ºçš„ KCL ä»£ç ï¼Œï¼Œåœ¨ <code>App</code> ä¸­å®šä¹‰å¯¹ <code>containerPort</code>ã€<code>services</code>ã€<code>volumes</code> çš„æ ¡éªŒè§„åˆ™ï¼Œç›®å‰æ ¡éªŒè§„åˆ™åœ¨è¿è¡Œæ—¶æ‰§è¡Œåˆ¤æ–­ï¼Œåç»­ KCL ä¼šå°è¯•é€šè¿‡ç¼–è¯‘æ—¶çš„é™æ€åˆ†æå¯¹è§„åˆ™è¿›è¡Œåˆ¤æ–­ä»è€Œå‘ç°é—®é¢˜ã€‚</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/12-kcl-app-schema-0cb24fd30175faaffb6d06e3a795c260.png" width="1364" height="588" class="img_ev3q"></p><p>å›¾ 12 å¸¦è§„åˆ™çº¦æŸçš„ KCL ä»£ç æ ¡éªŒ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-åˆ†å—ç¼–å†™åŠé…ç½®åˆå¹¶">2.4 åˆ†å—ç¼–å†™åŠé…ç½®åˆå¹¶<a href="#24-åˆ†å—ç¼–å†™åŠé…ç½®åˆå¹¶" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>KCL æä¾›äº†é…ç½®åˆ†å—ç¼–å†™åŠè‡ªåŠ¨åˆå¹¶é…ç½®çš„èƒ½åŠ›ï¼Œå¹¶ä¸”æ”¯æŒå¹‚ç­‰åˆå¹¶ã€è¡¥ä¸åˆå¹¶å’Œå”¯ä¸€é…ç½®åˆå¹¶ç­‰ç­–ç•¥ã€‚å¹‚ç­‰åˆå¹¶ä¸­çš„å¤šä»½é…ç½®éœ€è¦æ»¡è¶³äº¤æ¢å¾‹ï¼Œå¹¶ä¸”éœ€è¦å¼€å‘äººå‘˜æ‰‹åŠ¨å¤„ç†åŸºç¡€é…ç½®å’Œä¸åŒç¯å¢ƒé…ç½®å†²çªã€‚ è¡¥ä¸åˆå¹¶ä½œä¸ºä¸€ä¸ªè¦†ç›–åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¦†ç›–ã€åˆ é™¤å’Œæ·»åŠ ã€‚å”¯ä¸€çš„é…ç½®è¦æ±‚é…ç½®å—æ˜¯å…¨å±€å”¯ä¸€çš„å¹¶ä¸”æœªä¿®æ”¹æˆ–ä»¥ä»»ä½•å½¢å¼é‡æ–°å®šä¹‰ã€‚ KCL é€šè¿‡å¤šç§åˆå¹¶ç­–ç•¥ç®€åŒ–äº†ç”¨æˆ·ä¾§çš„ååŒå¼€å‘ï¼Œå‡å°‘äº†é…ç½®ä¹‹é—´çš„è€¦åˆã€‚</p><p>å¦‚å›¾ 13 æ‰€ç¤ºï¼Œå¯¹äºå­˜åœ¨åŸºçº¿é…ç½®ã€å¤šç¯å¢ƒå’Œå¤šç§Ÿæˆ·çš„åº”ç”¨é…ç½®åœºæ™¯ï¼Œæœ‰ä¸€ä¸ªåŸºæœ¬é…ç½® base.kã€‚ å¼€å‘å’Œ SRE åˆ†åˆ«ç»´æŠ¤ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒçš„é…ç½® base.k å’Œ prod.kï¼Œä»–ä»¬çš„é…ç½®äº’ä¸å½±å“ï¼Œç”± KCL ç¼–è¯‘å™¨åˆå¹¶æˆä¸€ä¸ª prod ç¯å¢ƒçš„ç­‰æ•ˆé…ç½®ä»£ç ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/13-kcl-isolated-config-4bbfae7a87567d43c1285fdf93e62ad7.png" width="1638" height="842" class="img_ev3q"></p><p>å›¾ 13 å¤šç¯å¢ƒåœºæ™¯é…ç½®åˆ†å—ç¼–å†™å®ä¾‹</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-è‡ªåŠ¨åŒ–é›†æˆ">2.5 è‡ªåŠ¨åŒ–é›†æˆ<a href="#25-è‡ªåŠ¨åŒ–é›†æˆ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ KCL ä¸­æä¾›äº†å¾ˆå¤šè‡ªåŠ¨åŒ–ç›¸å…³çš„èƒ½åŠ›ï¼Œä¸»è¦åŒ…æ‹¬å·¥å…·å’Œå¤šè¯­è¨€ APIã€‚ é€šè¿‡ <code>package_identifier : key_identifier</code>çš„æ¨¡å¼æ”¯æŒå¯¹ä»»æ„é…ç½®é”®å€¼çš„ç´¢å¼•ï¼Œä»è€Œå®Œæˆå¯¹ä»»æ„é”®å€¼çš„å¢åˆ æ”¹æŸ¥ã€‚æ¯”å¦‚å›¾ 14 æ‰€ç¤ºä¿®æ”¹æŸä¸ªåº”ç”¨é…ç½®çš„é•œåƒå†…å®¹ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ä¿®æ”¹é•œåƒï¼Œä¿®æ”¹å‰åçš„ diff å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/14-kcl-image-update-da47dd269560008f15f287c5a4adb005.png" width="1828" height="502" class="img_ev3q"></p><p>å›¾ 14 ä½¿ç”¨ KCL CLI/API è‡ªåŠ¨ä¿®æ”¹åº”ç”¨é…ç½®é•œåƒ</p><p>æ­¤å¤–ï¼Œå¯ä»¥åŸºäº KCL çš„è‡ªåŠ¨åŒ–èƒ½åŠ›å®ç°å¦‚å›¾ 15 æ‰€ç¤ºçš„ä¸€é•œäº¤ä»˜åŠè‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›å¹¶é›†æˆåˆ° CI/CD å½“ä¸­ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/15-kcl-automation-8c88e4bbdd38b5040457f647986a89c3.png" width="890" height="247" class="img_ev3q"></p><p>å›¾ 15 å…¸å‹ KCL è‡ªåŠ¨åŒ–é›†æˆé“¾è·¯</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‰kcl-ä¸å…¶ä»–å£°æ˜å¼é…ç½®çš„å¯¹æ¯”">ä¸‰ã€KCL ä¸å…¶ä»–å£°æ˜å¼é…ç½®çš„å¯¹æ¯”<a href="#ä¸‰kcl-ä¸å…¶ä»–å£°æ˜å¼é…ç½®çš„å¯¹æ¯”" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-vs-jsonyaml">3.1 vs. JSON/YAML<a href="#31-vs-jsonyaml" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>YAML/JSON é…ç½®ç­‰é€‚åˆå°è§„æ¨¡çš„é…ç½®åœºæ™¯ï¼Œå¯¹äºå¤§è§„æ¨¡ä¸”éœ€è¦é¢‘ç¹ä¿®æ”¹çš„äº‘åŸç”Ÿé…ç½®åœºæ™¯ï¼Œæ¯”è¾ƒé€‚åˆ KCL æ¯”è¾ƒé€‚åˆï¼Œå…¶ä¸­æ¶‰åŠåˆ°ä¸»è¦å·®å¼‚æ˜¯é…ç½®æ•°æ®æŠ½è±¡ä¸å±•å¼€çš„å·®å¼‚ï¼š</p><ul><li>å¯¹äº JSON/YAML ç­‰é™æ€é…ç½®æ•°æ®å±•å¼€çš„å¥½å¤„æ˜¯ï¼šç®€å•ã€æ˜“è¯»ã€æ˜“äºå¤„ç†ï¼Œä½†æ˜¯éšç€é™æ€é…ç½®è§„æ¨¡çš„å¢åŠ ï¼Œå½“é…ç½®è§„æ¨¡è¾ƒå¤§æ—¶ï¼ŒJSON/YAML ç­‰æ–‡ä»¶ç»´æŠ¤å’Œé˜…è¯»é…ç½®å¾ˆå›°éš¾ï¼Œå› ä¸ºé‡è¦çš„é…ç½®ä¿¡æ¯è¢«<strong>æ·¹æ²¡åœ¨äº†å¤§é‡ä¸ç›¸å…³çš„é‡å¤ç»†èŠ‚</strong>ä¸­ã€‚</li><li>å¯¹äºä½¿ç”¨ KCL è¯­è¨€è¿›è¡Œé…ç½®æŠ½è±¡çš„å¥½å¤„æ˜¯ï¼šå¯¹äºé™æ€æ•°æ®ï¼ŒæŠ½è±¡ä¸€å±‚çš„å¥½å¤„è¿™æ„å‘³ç€æ•´ä½“ç³»ç»Ÿå…·æœ‰<strong>éƒ¨ç½²çš„çµæ´»æ€§</strong>ï¼Œä¸åŒçš„é…ç½®ç¯å¢ƒã€é…ç½®ç§Ÿæˆ·ã€è¿è¡Œæ—¶å¯èƒ½ä¼šå¯¹é™æ€æ•°æ®å…·æœ‰ä¸åŒçš„è¦æ±‚ï¼Œç”šè‡³ä¸åŒçš„ç»„ç»‡å¯èƒ½æœ‰ä¸åŒçš„è§„èŒƒå’Œäº§å“è¦æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ KCL å°†æœ€éœ€è¦ã€æœ€å¸¸ä¿®æ”¹çš„é…ç½®æš´éœ²ç»™ç”¨æˆ·ï¼Œå¯¹å·®å¼‚åŒ–çš„é…ç½®è¿›è¡ŒæŠ½è±¡ï¼ŒæŠ½è±¡çš„å¥½å¤„æ˜¯å¯ä»¥æ”¯æŒä¸åŒçš„é…ç½®éœ€æ±‚ã€‚å¹¶ä¸”å€ŸåŠ© KCL è¯­è¨€çº§åˆ«çš„è‡ªåŠ¨åŒ–é›†æˆèƒ½åŠ›ï¼Œè¿˜å¯ä»¥å¾ˆå¥½åœ°æ”¯æŒä¸åŒçš„è¯­è¨€ï¼Œä¸åŒçš„é…ç½® UI ç­‰ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-vs-kustomize">3.2 vs. Kustomize<a href="#32-vs-kustomize" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>Kustomize çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯å…¶ Overlay èƒ½åŠ›ï¼Œå¹¶ Kustomize æ”¯æŒæ–‡ä»¶çº§çš„è¦†ç›–ï¼Œä½†æ˜¯å­˜åœ¨ä¼šå­˜åœ¨å¤šä¸ªè¦†ç›–é“¾æ¡çš„é—®é¢˜ï¼Œå› ä¸ºæ‰¾åˆ°å…·ä½“å­—æ®µå€¼çš„å£°æ˜å¹¶ä¸èƒ½ä¿è¯è¿™æ˜¯æœ€ç»ˆå€¼ï¼Œå› ä¸ºå…¶ä»–åœ°æ–¹å‡ºç°çš„å¦ä¸€ä¸ªå…·ä½“å€¼å¯ä»¥è¦†ç›–å®ƒï¼Œå¯¹äºå¤æ‚çš„åœºæ™¯ï¼ŒKustomize æ–‡ä»¶çš„ç»§æ‰¿é“¾æ£€ç´¢å¾€å¾€ä¸å¦‚ KCL ä»£ç ç»§æ‰¿é“¾æ£€ç´¢æ–¹ä¾¿ï¼Œéœ€è¦ä»”ç»†è€ƒè™‘æŒ‡å®šçš„é…ç½®æ–‡ä»¶è¦†ç›–é¡ºåºã€‚æ­¤å¤–ï¼ŒKustomize ä¸èƒ½è§£å†³ YAML é…ç½®ç¼–å†™ã€é…ç½®çº¦æŸæ ¡éªŒå’Œæ¨¡å‹æŠ½è±¡ä¸å¼€å‘ç­‰é—®é¢˜ï¼Œè¾ƒä¸ºé€‚ç”¨äºç®€å•çš„é…ç½®åœºæ™¯ï¼Œå½“é…ç½®ç»„ä»¶å¢å¤šæ—¶ï¼Œå¯¹äºé…ç½®çš„ä¿®æ”¹ä»ç„¶ä¼šé™·å…¥å¤§é‡é‡å¤ä¸ç›¸å…³çš„é…ç½®ç»†èŠ‚ä¸­ï¼Œå¹¶ä¸”åœ¨ IDE ä¸­ä¸èƒ½å¾ˆå¥½åœ°æ˜¾ç¤ºé…ç½®ä¹‹é—´çš„ä¾èµ–å’Œè¦†ç›–å…³ç³»æƒ…å†µï¼Œåªèƒ½é€šè¿‡æœç´¢/æ›¿æ¢ç­‰æ‰¹é‡ä¿®æ”¹é…ç½®ã€‚</p><p>åœ¨ KCL ä¸­ï¼Œé…ç½®åˆå¹¶çš„æ“ä½œå¯ä»¥ç»†ç²’åº¦åˆ°ä»£ç ä¸­æ¯ä¸€ä¸ªé…ç½®å­—æ®µï¼Œå¹¶ä¸”å¯ä»¥çµæ´»çš„è®¾ç½®åˆå¹¶ç­–ç•¥ï¼Œå¹¶ä¸å±€é™äºèµ„æºæ•´ä½“ï¼Œå¹¶ä¸”é€šè¿‡ KCL çš„ import å¯ä»¥é™æ€åˆ†æå‡ºé…ç½®ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-vs-hcl">3.3 vs. HCL<a href="#33-vs-hcl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="331-åŠŸèƒ½å¯¹æ¯”">3.3.1 åŠŸèƒ½å¯¹æ¯”<a href="#331-åŠŸèƒ½å¯¹æ¯”" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th></th><th>HCL</th><th>KCL</th></tr></thead><tbody><tr><td>å»ºæ¨¡èƒ½åŠ›</td><td>é€šè¿‡ Terraform Go Provider Schema å®šä¹‰ï¼Œåœ¨ç”¨æˆ·ç•Œé¢ä¸ç›´æ¥æ„ŸçŸ¥ï¼Œæ­¤å¤–ç¼–å†™å¤æ‚çš„ object å’Œå¿…é€‰/å¯é€‰å­—æ®µå®šä¹‰æ—¶ç”¨æˆ·ç•Œé¢è¾ƒä¸ºç¹ç</td><td>é€šè¿‡ KCL Schema è¿›è¡Œå»ºæ¨¡ï¼Œé€šè¿‡è¯­è¨€çº§åˆ«çš„å·¥ç¨‹å’Œéƒ¨åˆ†é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œå¯ä»¥å®ç°è¾ƒé«˜çš„æ¨¡å‹æŠ½è±¡</td></tr><tr><td>çº¦æŸèƒ½åŠ›</td><td>é€šè¿‡ Variable çš„ condition å­—æ®µå¯¹åŠ¨æ€å‚æ•°è¿›è¡Œçº¦æŸï¼ŒResource æœ¬èº«çš„çº¦æŸéœ€è¦é€šè¿‡ Go Provider Schema å®šä¹‰æˆ–è€…ç»“åˆ Sentinel/Rego ç­‰ç­–ç•¥è¯­è¨€å®Œæˆï¼Œè¯­è¨€æœ¬èº«çš„å®Œæ•´èƒ½åŠ›ä¸èƒ½è‡ªé—­ç¯ï¼Œä¸”å®ç°æ–¹å¼ä¸ç»Ÿä¸€</td><td>ä»¥ Schema ä¸ºæ ¸å¿ƒï¼Œåœ¨è¿›è¡Œå»ºæ¨¡çš„åŒæ—¶å®šä¹‰å…¶çº¦æŸï¼Œåœ¨ KCL å†…éƒ¨è‡ªé—­ç¯å¹¶ä¸€ç»Ÿä¸€æ–¹å¼å®ç°ï¼Œæ”¯æŒå¤šç§çº¦æŸå‡½æ•°ç¼–å†™ï¼Œæ”¯æŒå¯é€‰/å¿…é€‰å­—æ®µå®šä¹‰</td></tr><tr><td>æ‰©å±•æ€§</td><td>Terraform HCL é€šè¿‡åˆ†æ–‡ä»¶è¿›è¡Œ Override, æ¨¡å¼æ¯”è¾ƒå›ºå®šï¼Œèƒ½åŠ›å—é™ã€‚</td><td>KCL å¯ä»¥è‡ªå®šä¹‰é…ç½®åˆ†å—ç¼–å†™æ–¹å¼å’Œå¤šç§åˆå¹¶ç­–ç•¥ï¼Œå¯ä»¥æ»¡è¶³å¤æ‚çš„å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒé…ç½®åœºæ™¯éœ€æ±‚</td></tr><tr><td>è¯­è¨€åŒ–ç¼–å†™èƒ½åŠ›</td><td>ç¼–å†™å¤æ‚çš„å¯¹è±¡å®šä¹‰å’Œå¿…é€‰/å¯é€‰å­—æ®µå®šä¹‰æ—¶ç”¨æˆ·ç•Œé¢è¾ƒä¸ºç¹ç</td><td>å¤æ‚çš„ç»“æ„å®šä¹‰ã€çº¦æŸåœºæ™¯ç¼–å†™ç®€å•ï¼Œä¸å€ŸåŠ©å…¶ä»–å¤–å›´ GPL æˆ–å·¥å…·ï¼Œè¯­è¨€ç¼–å†™è‡ªé—­ç¯</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="332-ä¸¾ä¾‹">3.3.2 ä¸¾ä¾‹<a href="#332-ä¸¾ä¾‹" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p><strong>Terraform HCL Variable çº¦æŸæ ¡éªŒç¼–å†™ vs. KCL Schema å£°æ˜å¼çº¦æŸæ ¡éªŒç¼–å†™</strong></p><ul><li>HCL</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">"subnet_delegations"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name               </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service_delegation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      actions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> d </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> n </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> d </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service_delegation </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> n </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service_delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema SubnetDelegation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service_delegation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ServiceDelegation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema ServiceDelegation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    actions?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä½¿ç”¨ ? æ ‡è®°å¯é€‰å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SubnetDelegation</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"subnet_delegations"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–ï¼ŒKCL è¿˜å¯ä»¥åƒé«˜çº§è¯­è¨€ä¸€æ ·å†™ç±»å‹ï¼Œå†™ç»§æ‰¿ï¼Œå†™å†…ç½®çš„çº¦æŸï¼Œè¿™äº›åŠŸèƒ½æ˜¯ HCL æ‰€ä¸å…·å¤‡çš„</p><p><strong>Terraform HCL å‡½æ•° vs. KCL Lambda å‡½æ•°ç¼–å†™</strong></p><ul><li><p>æ­£å¦‚ <a href="https://www.terraform.io/language/functions" target="_blank" rel="noopener noreferrer">https://www.terraform.io/language/functions</a> æ–‡æ¡£å’Œ <a href="https://github.com/hashicorp/terraform/issues/27696" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform/issues/27696</a> ä¸­å±•ç¤ºçš„é‚£æ ·ï¼ŒTerraform HCL æä¾›äº†ä¸°å¯Œçš„å†…ç½®å‡½æ•°ç”¨äºæä¾›ï¼Œä½†æ˜¯å¹¶ä¸æ”¯æŒç”¨æˆ·åœ¨ Terraform ä¸­ä½¿ç”¨ HCL è‡ªå®šä¹‰å‡½æ•° (æˆ–è€…éœ€è¦ç¼–å†™å¤æ‚çš„ Go Provider æ¥æ¨¡æ‹Ÿä¸€ä¸ªç”¨æˆ·çš„æœ¬åœ°è‡ªå®šä¹‰å‡½æ•°)ï¼›è€Œ KCL ä¸ä»…æ”¯æŒç”¨æˆ·ä½¿ç”¨ lambda å…³é”®å­—ç›´æ¥åœ¨ KCL ä»£ç ä¸­è‡ªå®šä¹‰å‡½æ•°ï¼Œè¿˜æ”¯æŒä½¿ç”¨ Python, Go ç­‰è¯­è¨€ä¸º KCL <a href="https://kcl-lang.io/docs/reference/plugin/overview" target="_blank" rel="noopener noreferrer">ç¼–å†™æ’ä»¶å‡½æ•°</a></p></li><li><p>KCL è‡ªå®šä¹‰å®šä¹‰å‡½æ•°å¹¶è°ƒç”¨</p></li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">add_func </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">two </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> add_func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>HCL åˆ é™¤ null å€¼ä¸ KCL ä½¿ç”¨ -n ç¼–è¯‘å‚æ•°åˆ é™¤ null å€¼</strong></p><ul><li>HCL</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">"conf"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      default     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">type</span><span class="token plain">        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      inputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      args    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      command </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      env </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        limits </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cpu    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        requests </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cpu    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      script     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      workingDir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">locals</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  conf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    defaults</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resources </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> steps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> step </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">steps </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> step </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL (ç¼–è¯‘å‚æ•°æ·»åŠ  -n å¿½ç•¥ null å€¼)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Param</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Step</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    env?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resources?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"limits"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"requests"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    script?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workingDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema K8sManifest</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Param</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    results?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Step</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> K8sManifest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"conf"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç»¼ä¸Šå¯ä»¥çœ‹å‡ºï¼Œåœ¨ KCL ä¸­ï¼Œé€šè¿‡ Schema æ¥å£°æ˜æ–¹å¼å®šä¹‰å…¶ç±»å‹å’Œçº¦æŸï¼Œå¯ä»¥çœ‹å‡ºç›¸æ¯”äº Terraform HCL, åœ¨å®ç°ç›¸åŒåŠŸèƒ½çš„æƒ…å†µä¸‹ï¼ŒKCL çš„çº¦æŸå¯ä»¥ç¼–å†™çš„æ›´åŠ ç®€å• (ä¸éœ€è¦åƒ Terraform é‚£æ ·é‡å¤åœ°ä¹¦å†™ validation å’Œ condition å­—æ®µ)ï¼Œå¹¶ä¸”é¢å¤–æä¾›äº†å­—æ®µè®¾ç½®ä¸ºå¯é€‰çš„èƒ½åŠ› (<code>?</code>è¿ç®—ç¬¦ï¼Œä¸åƒ Terraform é…ç½®å­—æ®µé»˜è®¤å¯ç©ºï¼ŒKCL Schema å­—æ®µé»˜è®¤å¿…é€‰)ï¼Œç»“æ„æ›´åŠ åˆ†æ˜ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä»£ç å±‚é¢ç›´æ¥è·å¾—ç±»å‹æ£€æŸ¥å’Œçº¦æŸæ ¡éªŒçš„èƒ½åŠ›ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-vs-cue">3.4 vs. CUE<a href="#34-vs-cue" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="341-åŠŸèƒ½å¯¹æ¯”">3.4.1 åŠŸèƒ½å¯¹æ¯”<a href="#341-åŠŸèƒ½å¯¹æ¯”" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th></th><th>CUE</th><th>KCL</th></tr></thead><tbody><tr><td>å»ºæ¨¡èƒ½åŠ›</td><td>é€šè¿‡ Struct è¿›è¡Œå»ºæ¨¡ï¼Œæ— ç»§æ‰¿ç­‰ç‰¹æ€§ï¼Œå½“æ¨¡å‹å®šä¹‰ä¹‹é—´æ— å†²çªæ—¶å¯ä»¥å®ç°è¾ƒé«˜çš„æŠ½è±¡ã€‚ç”±äº CUE åœ¨è¿è¡Œæ—¶è¿›è¡Œæ‰€æœ‰çš„çº¦æŸæ£€æŸ¥ï¼Œåœ¨å¤§è§„æ¨¡å»ºæ¨¡åœºæ™¯å¯èƒ½å­˜åœ¨æ€§èƒ½ç“¶é¢ˆ</td><td>é€šè¿‡ KCL Schema è¿›è¡Œå»ºæ¨¡ï¼Œé€šè¿‡è¯­è¨€çº§åˆ«çš„å·¥ç¨‹å’Œéƒ¨åˆ†é¢å‘å¯¹è±¡ç‰¹æ€§ï¼ˆå¦‚å•ç»§æ‰¿ï¼‰ï¼Œå¯ä»¥å®ç°è¾ƒé«˜çš„æ¨¡å‹æŠ½è±¡ã€‚ KCL æ˜¯é™æ€ç¼–è¯‘å‹è¯­è¨€ï¼Œå¯¹äºå¤§è§„æ¨¡å»ºæ¨¡åœºæ™¯å¼€é”€è¾ƒå°</td></tr><tr><td>çº¦æŸèƒ½åŠ›</td><td>CUE å°†ç±»å‹å’Œå€¼åˆå¹¶åˆ°ä¸€ä¸ªæ¦‚å¿µä¸­ï¼Œé€šè¿‡å„ç§è¯­æ³•ç®€åŒ–äº†çº¦æŸçš„ç¼–å†™ï¼Œæ¯”å¦‚ä¸éœ€è¦æ³›å‹å’Œæšä¸¾ï¼Œæ±‚å’Œç±»å‹å’Œç©ºå€¼åˆå¹¶éƒ½æ˜¯ä¸€å›äº‹</td><td>KCL æä¾›äº†è·Ÿæ›´ä¸°å¯Œçš„ check å£°æ˜å¼çº¦æŸè¯­æ³•ï¼Œç¼–å†™èµ·æ¥æ›´åŠ å®¹æ˜“ï¼Œå¯¹äºä¸€äº›é…ç½®å­—æ®µç»„åˆçº¦æŸç¼–å†™æ›´åŠ ç®€å•ï¼ˆèƒ½åŠ›ä¸Šæ¯” CUE å¤šäº† if guard ç»„åˆçº¦æŸï¼Œall/any/map/filter ç­‰é›†åˆçº¦æŸç¼–å†™æ–¹å¼ï¼Œç¼–å†™æ›´åŠ å®¹æ˜“ï¼‰</td></tr><tr><td>åˆ†å—ç¼–å†™èƒ½åŠ›</td><td>æ”¯æŒè¯­è¨€å†…éƒ¨é…ç½®åˆå¹¶ï¼ŒCUE çš„é…ç½®åˆå¹¶æ˜¯å®Œå…¨å¹‚ç­‰çš„ï¼Œå¯¹äºæ»¡è¶³å¤æ‚çš„å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒé…ç½®åœºæ™¯çš„è¦†ç›–éœ€æ±‚å¯èƒ½æ— æ³•æ»¡è¶³</td><td>KCL å¯ä»¥è‡ªå®šä¹‰é…ç½®åˆ†å—ç¼–å†™æ–¹å¼å’Œå¤šç§åˆå¹¶ç­–ç•¥ï¼ŒKCL åŒæ—¶æ”¯æŒå¹‚ç­‰å’Œéå¹‚ç­‰çš„åˆå¹¶ç­–ç•¥,å¯ä»¥æ»¡è¶³å¤æ‚çš„å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒé…ç½®åœºæ™¯éœ€æ±‚</td></tr><tr><td>è¯­è¨€åŒ–ç¼–å†™èƒ½åŠ›</td><td>å¯¹äºå¤æ‚çš„å¾ªç¯ã€æ¡ä»¶çº¦æŸåœºæ™¯ç¼–å†™å¤æ‚ï¼Œå¯¹äºéœ€è¦è¿›è¡Œé…ç½®ç²¾ç¡®ä¿®æ”¹çš„ç¼–å†™åœºæ™¯è¾ƒä¸ºç¹ç</td><td>å¤æ‚çš„ç»“æ„å®šä¹‰ã€å¾ªç¯ã€æ¡ä»¶çº¦æŸåœºæ™¯ç¼–å†™ç®€å•</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="342-ä¸¾ä¾‹">3.4.2 ä¸¾ä¾‹<a href="#342-ä¸¾ä¾‹" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p><strong>CUE çº¦æŸæ ¡éªŒç¼–å†™ vs. KCL Schema å£°æ˜å¼çº¦æŸæ ¡éªŒç¼–å†™åŠé…ç½®åˆ†å—ç¼–å†™èƒ½åŠ›</strong></p><p>CUE (æ‰§è¡Œå‘½ä»¤ <code>cue export base.cue prod.cue</code>)</p><ul><li>base.cue</li></ul><div class="language-cue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cue codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// base.cue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import "list"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#App: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType: "Standard" | "Customized" | "Global",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort: &gt;=1 &amp; &lt;=65535,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes: [...#Volume],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services: [...#Service],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Service: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clusterIP: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if type == "ClusterIP" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clusterIP: "None"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Volume: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container: string | *"*"  // The default value of `container` is "*"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mountPath: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _check: false &amp; list.Contains(["/", "/boot", "/home", "dev", "/etc", "/root"], mountPath),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app: #App &amp; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType: "Standard",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort: 80,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mountPath: "/tmp"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clusterIP: "None",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type: "ClusterIP"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>prod.cue</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">//</span><span class="token plain"> prod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#App &amp; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">//</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conflicting values </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>KCL (æ‰§è¡Œå‘½ä»¤ <code>kcl base.k prod.k</code>)</p><ul><li>base.k</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># base.k</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema App</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Standard"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Customized"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Global"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Volume</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Service</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65535</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clusterIP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $</span><span class="token builtin">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clusterIP </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"None"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> $</span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ClusterIP"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Volume</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*"</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># The default value of `container` is "*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mountPath </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/boot"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/home"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dev"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/etc"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/root"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Standard"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mountPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clusterIP </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"None"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $</span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ClusterIP"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>prod.k</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># prod.k</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¯ä»¥ä½¿ç”¨ = å±æ€§è¿ç®—ç¬¦å¯¹ base app çš„ containerPort è¿›è¡Œä¿®æ”¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¯ä»¥ä½¿ç”¨ += å±æ€§è¿ç®—ç¬¦å¯¹ base app çš„ volumes è¿›è¡Œæ·»åŠ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ­¤å¤„è¡¨ç¤ºåœ¨ prod ç¯å¢ƒå¢åŠ ä¸€ä¸ª volume, ä¸€å…±ä¸¤ä¸ª volume</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mountPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–ç”±äº CUE çš„å¹‚ç­‰åˆå¹¶ç‰¹æ€§ï¼Œåœ¨åœºæ™¯ä¸Šå¹¶æ— æ³•ä½¿ç”¨ç±»ä¼¼ kustomize çš„ overlay é…ç½®è¦†ç›–å’Œ patch ç­‰èƒ½åŠ›ï¼Œæ¯”å¦‚ä¸Šè¿°çš„ base.cue å’Œ prod.cue ä¸€èµ·ç¼–è¯‘ä¼šæŠ¥é”™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-performance">3.5 Performance<a href="#35-performance" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>åœ¨ä»£ç è§„æ¨¡è¾ƒå¤§æˆ–è€…è®¡ç®—é‡è¾ƒé«˜çš„åœºæ™¯æƒ…å†µä¸‹ KCL æ¯” CUE/Jsonnet/HCL ç­‰è¯­è¨€æ€§èƒ½æ›´å¥½ (CUE ç­‰è¯­è¨€å—é™äºè¿è¡Œæ—¶çº¦æŸæ£€æŸ¥å¼€é”€ï¼Œè€Œ KCL æ˜¯ä¸€ä¸ªé™æ€ç¼–è¯‘å‹è¯­è¨€)</p><ul><li>CUE (test.cue)</li></ul><div class="language-cue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cue codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import "list"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for i, _ in list.Range(0, 10000, 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "a\(i)": list.Max([1, 2])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL (test.k)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"a${i}"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Jsonnet (test.jsonnet)</li></ul><div class="language-jsonnet codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonnet codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">local a(x, y) = std.max(x, y);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    temp: {["a%d" % i]: a(1, 2) for i in std.range(0, 10000)},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Terraform HCL (test.tf, ç”±äº terraform range å‡½æ•°åªæ”¯æŒæœ€å¤š 1024 ä¸ªè¿­ä»£å™¨ï¼Œå°† range(10000) æ‹†åˆ†ä¸º 10 ä¸ªå­ range)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r1"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r2"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r3"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r4"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r5"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r6"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r7"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">6000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r8"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">7000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r9"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r10"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">9000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>è¿è¡Œæ—¶é—´ï¼ˆè€ƒè™‘åˆ°ç”Ÿäº§ç¯å¢ƒçš„å®é™…èµ„æºå¼€é”€ï¼Œæœ¬æ¬¡æµ‹è¯•ä»¥å•æ ¸ä¸ºå‡†ï¼‰</li></ul><table><thead><tr><th>ç¯å¢ƒ</th><th>KCL v0.4.3 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th><th>CUE v0.4.3 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th><th>Jsonnet v0.18.0 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th><th>HCL in Terraform v1.3.0 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th></tr></thead><tbody><tr><td>OS: macOS 10.15.7; CPU: Intel(R) Core(TM) i7-8850H CPU @ 2.60GHz; Memory: 32 GB 2400 MHz DDR4; ä¸å¼€å¯ NUMA</td><td>440 ms (kclvm_cli run test.k)</td><td>6290 ms (cue export test.cue)</td><td>3340 ms (jsonnet test.jsonnet)</td><td>1774 ms (terraform plan -parallelism=1)</td></tr></tbody></table><p>ç»¼ä¸Šå¯ä»¥çœ‹å‡ºï¼šCUE å’Œ KCL å‡å¯ä»¥è¦†ç›–åˆ°ç»å¤§å¤šæ•°é…ç½®æ ¡éªŒåœºæ™¯ï¼Œå¹¶ä¸”å‡æ”¯æŒå±æ€§ç±»å‹å®šä¹‰ã€é…ç½®é»˜è®¤å€¼ã€çº¦æŸæ ¡éªŒç­‰ç¼–å†™ï¼Œä½†æ˜¯ CUE å¯¹äºä¸åŒçš„çº¦æŸæ¡ä»¶åœºæ™¯æ— ç»Ÿä¸€çš„å†™æ³•ï¼Œä¸”ä¸èƒ½å¾ˆå¥½åœ°é€å‡ºæ ¡éªŒé”™è¯¯ï¼ŒKCL ä½¿ç”¨ check å…³é”®å­—ä½œç»Ÿä¸€å¤„ç†ï¼Œæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é”™è¯¯è¾“å‡ºã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å¦ä¸€ä¸ªå¤æ‚çš„ä¾‹å­">å¦ä¸€ä¸ªå¤æ‚çš„ä¾‹å­<a href="#å¦ä¸€ä¸ªå¤æ‚çš„ä¾‹å­" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>ä½¿ç”¨ KCL å’Œ CUE ç¼–å†™ Kubernetes é…ç½®</p><ul><li>CUE (test.cue)</li></ul><div class="language-cue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cue codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> apps "k8s.io/api/apps/v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment: apps.#Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> apiVersion: "apps/v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> kind:       "Deployment"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> metadata: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name:   "me"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels: me: "me"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL (test.k)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kubernetes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"me"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"me"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>ç¯å¢ƒ</th><th>KCL v0.4.3 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th><th>CUE v0.4.3 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th></tr></thead><tbody><tr><td>OS: macOS 10.15.7; CPU: Intel(R) Core(TM) i7-8850H CPU @ 2.60GHz; Memory: 32 GB 2400 MHz DDR4; no NUMA</td><td>140 ms (kclvm_cli run test.k)</td><td>350 ms (cue export test.cue)</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å››å°ç»“">å››ã€å°ç»“<a href="#å››å°ç»“" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>æ–‡æœ¬å¯¹å£°æ˜å¼é…ç½®æŠ€æœ¯åšäº†æ•´ä½“æ¦‚è¿°ï¼Œå…¶ä¸­é‡ç‚¹é˜è¿°äº† KCL æ¦‚å¿µã€æ ¸å¿ƒè®¾è®¡ã€ä½¿ç”¨åœºæ™¯ä»¥åŠä¸å…¶ä»–é…ç½®è¯­è¨€çš„å¯¹æ¯”ï¼ŒæœŸæœ›å¸®åŠ©å¤§å®¶æ›´å¥½çš„ç†è§£å£°æ˜å¼é…ç½®æŠ€æœ¯åŠ KCL è¯­è¨€ã€‚æ›´å¤š KCL çš„æ¦‚å¿µã€èƒŒæ™¯ã€è®¾è®¡ä¸ç”¨æˆ·æ¡ˆä¾‹ç­‰ç›¸å…³å†…å®¹ï¼Œæ¬¢è¿è®¿é—® <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äº”å‚è€ƒ">äº”ã€å‚è€ƒ<a href="#äº”å‚è€ƒ" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><ul><li>KusionStack Cloud Native Configuration Practice Blog: <a href="https://kusionstack.io/blog/2021-kusion-intro" target="_blank" rel="noopener noreferrer">https://kusionstack.io/blog/2021-kusion-intro</a></li><li>Terraform Language: <a href="https://www.terraform.io/language" target="_blank" rel="noopener noreferrer">https://www.terraform.io/language</a></li><li>Terraform Provider Kubernetes: <a href="https://github.com/hashicorp/terraform-provider-kubernetes" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-kubernetes</a></li><li>Terraform Provider AWS: <a href="https://github.com/hashicorp/terraform-provider-aws" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-aws</a></li><li>Pulumi: <a href="https://www.pulumi.com/docs/" target="_blank" rel="noopener noreferrer">https://www.pulumi.com/docs/</a></li><li>Pulumi vs. Terraform: <a href="https://www.pulumi.com/docs/intro/vs/terraform/" target="_blank" rel="noopener noreferrer">https://www.pulumi.com/docs/intro/vs/terraform/</a></li><li>Google SRE Work Book Configuration Design: <a href="https://sre.google/workbook/configuration-design/" target="_blank" rel="noopener noreferrer">https://sre.google/workbook/configuration-design/</a></li><li>Google Borg Paper: <a href="https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43438.pdf" target="_blank" rel="noopener noreferrer">https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43438.pdf</a></li><li>Holistic Configuration Management at Facebook: <a href="https://sigops.org/s/conferences/sosp/2015/current/2015-Monterey/printable/008-tang.pdf" target="_blank" rel="noopener noreferrer">https://sigops.org/s/conferences/sosp/2015/current/2015-Monterey/printable/008-tang.pdf</a></li><li>JSON Spec: <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">https://www.json.org/json-en.html</a></li><li>YAML Spec: <a href="https://yaml.org/spec/" target="_blank" rel="noopener noreferrer">https://yaml.org/spec/</a></li><li>GCL: <a href="https://github.com/rix0rrr/gcl" target="_blank" rel="noopener noreferrer">https://github.com/rix0rrr/gcl</a></li><li>HCL: <a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/hcl</a></li><li>CUE: <a href="https://github.com/cue-lang/cue" target="_blank" rel="noopener noreferrer">https://github.com/cue-lang/cue</a></li><li>Jsonnet: <a href="https://github.com/google/jsonnet" target="_blank" rel="noopener noreferrer">https://github.com/google/jsonnet</a></li><li>Dhall: <a href="https://github.com/dhall-lang/dhall-lang" target="_blank" rel="noopener noreferrer">https://github.com/dhall-lang/dhall-lang</a></li><li>Thrift: <a href="https://github.com/Thriftpy/thriftpy2" target="_blank" rel="noopener noreferrer">https://github.com/Thriftpy/thriftpy2</a></li><li>Kustomize: <a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">https://kustomize.io/</a></li><li>Kube-linter: <a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">https://github.com/stackrox/kube-linter</a></li><li>Checkov: <a href="https://github.com/bridgecrewio/checkov" target="_blank" rel="noopener noreferrer">https://github.com/bridgecrewio/checkov</a></li><li>KCL Documents: <a href="https://kcl-lang.io/docs/reference/lang/tour" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/reference/lang/tour</a></li><li>How Terraform Works: A Visual Intro: <a href="https://betterprogramming.pub/how-terraform-works-a-visual-intro-6328cddbe067" target="_blank" rel="noopener noreferrer">https://betterprogramming.pub/how-terraform-works-a-visual-intro-6328cddbe067</a> </li><li>How Terraform Works: Modules Illustrated: <a href="https://awstip.com/terraform-modules-illustrate-26cbc48be83a" target="_blank" rel="noopener noreferrer">https://awstip.com/terraform-modules-illustrate-26cbc48be83a</a></li><li>Helm: <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">https://helm.sh/</a></li><li>Helm vs. Kustomize: <a href="https://harness.io/blog/helm-vs-kustomize" target="_blank" rel="noopener noreferrer">https://harness.io/blog/helm-vs-kustomize</a></li><li>KubeVela: <a href="https://kubevela.io/docs/" target="_blank" rel="noopener noreferrer">https://kubevela.io/docs/</a></li></ul>]]></content:encoded>
            <category>KCL</category>
            <category>Configuration</category>
        </item>
        <item>
            <title><![CDATA[GIAC 2022 ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
            <link>https://kcl-lang.github.io/zh-CN/blog/2021-kcl-intro</link>
            <guid>https://kcl-lang.github.io/zh-CN/blog/2021-kcl-intro</guid>
            <pubDate>Tue, 03 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[ä»‹ç»KCLäº‘åŸç”Ÿé…ç½®è¯­è¨€åœ¨èš‚èšçš„è¯ç”ŸèƒŒæ™¯ã€è¯­è¨€ç‰¹æ€§ã€å®è·µæ¢ç´¢å’Œæœªæ¥çš„å‘å±•æ€è€ƒã€‚]]></description>
            <content:encoded><![CDATA[<p>ä»‹ç»KCLäº‘åŸç”Ÿé…ç½®è¯­è¨€åœ¨èš‚èšçš„è¯ç”ŸèƒŒæ™¯ã€è¯­è¨€ç‰¹æ€§ã€å®è·µæ¢ç´¢å’Œæœªæ¥çš„å‘å±•æ€è€ƒã€‚</p><ul><li>ç®€ä»‹ï¼š<a href="https://giac.msup.com.cn/course?id=15307" target="_blank" rel="noopener noreferrer">https://giac.msup.com.cn/course?id=15307</a></li><li>å†…å®¹ï¼š<a href="https://segmentfault.com/a/1190000040455559" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000040455559</a></li><li><a href="https://gw.alipayobjects.com/os/bmw-prod/2cb0c283-5f24-485e-b635-b6efac887eba.pdf" target="_blank" rel="noopener noreferrer">PDFä¸‹è½½</a></li></ul><p><a href="https://gw.alipayobjects.com/os/bmw-prod/2cb0c283-5f24-485e-b635-b6efac887eba.pdf" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="KCLäº‘åŸç”Ÿé…ç½®ç­–ç•¥è¯­è¨€" src="/zh-CN/assets/images/talk-cover-7bff56b2738955e27cf16a5ebb1a4506.png" width="1820" height="1366" class="img_ev3q"></a></p>]]></content:encoded>
            <category>KCL</category>
        </item>
    </channel>
</rss>