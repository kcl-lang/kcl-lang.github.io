<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://kcl-lang.github.io/zh-CN/blog</id>
    <title>KCL programming language. Blog</title>
    <updated>2023-09-15T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://kcl-lang.github.io/zh-CN/blog"/>
    <subtitle>KCL programming language. Blog</subtitle>
    <icon>https://kcl-lang.github.io/zh-CN/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[KCL v0.6.0 é‡ç£…å‘å¸ƒ - é¢å‘äº‘åŸç”Ÿåœºæ™¯æ›´æ˜“ç”¨çš„è¯­è¨€ã€å·¥å…·é“¾ï¼Œç¤¾åŒºé›†æˆå’Œæ‰©å±•æ”¯æŒ]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-09-15-kcl-0.6.0-release</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-09-15-kcl-0.6.0-release"/>
        <updated>2023-09-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ç®€ä»‹]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ <strong>KCL v0.6.0 æ–°ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨</strong>ï¼æœ¬æ¬¡å‘å¸ƒä¸ºå¤§å®¶å¸¦æ¥äº†ä¸‰æ–¹é¢çš„é‡ç‚¹æ›´æ–°ï¼š<strong>è¯­è¨€</strong>ã€<strong>å·¥å…·é“¾</strong>ã€<strong>ç¤¾åŒºé›†æˆ &amp; æ‰©å±•æ”¯æŒ</strong>ã€‚</p><ul><li><em>ä½¿ç”¨åŠŸèƒ½æ›´å®Œå–„é”™è¯¯æ›´å°‘çš„ KCL è¯­è¨€ã€å·¥å…·é“¾å’Œ IDE æå‡ä»£ç ç¼–å†™ä½“éªŒå’Œæ•ˆç‡</em></li><li><em>ä½¿ç”¨åŒ…ç®¡ç† KPM å’Œ OCI Registry ç­‰å·¥å…·ç›´æ¥ä½¿ç”¨å’Œå…±äº«æ‚¨çš„äº‘åŸç”Ÿé¢†åŸŸæ¨¡å‹ï¼Œé™ä½å­¦ä¹ å’Œä¸Šæ‰‹æˆæœ¬</em></li><li><em>ä½¿ç”¨ Helmfile KCL æ’ä»¶å’Œ KCL Operator ç­‰äº‘åŸç”Ÿé›†æˆæ‰©å±•åŒæ—¶æ”¯æŒåœ¨å®¢æˆ·ç«¯å’Œè¿è¡Œæ—¶å¯¹ Kubernetes èµ„æºè¿›è¡ŒåŸåœ°ä¿®æ”¹å’ŒéªŒè¯ï¼Œé¿å…é…ç½®ç¡¬ç¼–ç </em></li></ul><p>è¿›ä¸€æ­¥æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.6.0" target="_blank" rel="noopener noreferrer">KCL v0.6.0 å‘å¸ƒé¡µé¢</a> æˆ–è€… <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">KCL å®˜æ–¹ç½‘ç«™</a> è·å¾—ä¸‹è½½å®‰è£…æŒ‡å—å’Œè¯¦ç»†å‘å¸ƒä¿¡æ¯ã€‚</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªé¢å‘äº‘åŸç”Ÿé¢†åŸŸå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°ç¼–ç¨‹è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®æ¯”å¦‚äº‘åŸç”Ÿ Kubernetes é…ç½®åœºæ™¯çš„ç¼–å†™ï¼Œè‡´åŠ›äºå›´ç»•é…ç½®çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ‰“é€ æ›´ç®€å•çš„é€»è¾‘ç¼–å†™ä½“éªŒï¼Œæ„å»ºæ›´ç®€å•çš„è‡ªåŠ¨åŒ–å’Œç”Ÿæ€é›†æˆè·¯å¾„ã€‚</p><p>æœ¬æ–‡é‡ç‚¹ä»‹ç» KCL v0.6.0 ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹ä»¥åŠ KCL ç¤¾åŒºçš„è¿‘æœŸåŠ¨æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¯­è¨€æ›´æ–°">è¯­è¨€æ›´æ–°<a href="#è¯­è¨€æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-ç±»å‹ç³»ç»Ÿå¢å¼º">ğŸ”§ ç±»å‹ç³»ç»Ÿå¢å¼º<a href="#-ç±»å‹ç³»ç»Ÿå¢å¼º" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>æ”¯æŒ KCL é…ç½®å—å±æ€§ç±»å‹è‡ªåŠ¨æ¨å¯¼ï¼Œåœ¨ KCL v0.6.0 ç‰ˆæœ¬ä¹‹å‰ï¼Œä¸‹è¿°ä»£ç ä¸­çš„ <code>key1</code> å’Œ <code>key2</code> å±æ€§ä¼šè¢«ç±»å‹ç³»ç»Ÿæ¨å¯¼ä¸º <code>str | int</code> ç±»å‹ï¼Œç‰ˆæœ¬æ›´æ–°ä¹‹åï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å¢å¼ºäº†é…ç½®å±æ€§çš„ç±»å‹ç²¾ç¡®æ¨å¯¼ï¼Œ<code>key1</code> å’Œ <code>key2</code> å±æ€§ä¼šè·å¾—èŒƒå›´æ›´å°æ›´ç²¾ç¡®çš„å¯¹åº”ç±»å‹</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key1  </span><span class="token comment" style="color:#999988;font-style:italic"># key1 çš„ç±»å‹ä¸º str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key2  </span><span class="token comment" style="color:#999988;font-style:italic"># key2 çš„ç±»å‹ä¸º int</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–ï¼Œæˆ‘ä»¬ä¼˜åŒ–äº† Schema è¯­ä¹‰æ£€æŸ¥å’Œè”åˆç±»å‹æ£€æŸ¥ç­‰é”™è¯¯ä¿¡æ¯ä»¥åŠç³»ç»Ÿåº“å‡½æ•°çš„ç±»å‹æ£€æŸ¥é”™è¯¯ä¿¡æ¯ã€‚</p><p>æ›´å¤šä¿¡æ¯<a href="https://github.com/kcl-lang/kcl/pull/678" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-api-æ›´æ–°">ğŸ„ API æ›´æ–°<a href="#-api-æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><ul><li>KCL Schema æ¨¡å‹è§£æ&nbsp;GetSchemaType API è·å– KCL åŒ…ç›¸å…³ä¿¡æ¯å’Œ Schema å±æ€§é»˜è®¤å€¼</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-é”™è¯¯ä¿®å¤">ğŸ é”™è¯¯ä¿®å¤<a href="#-é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-å¿…é€‰å±æ€§æ£€æŸ¥é”™è¯¯ä¿®å¤">KCL å¿…é€‰å±æ€§æ£€æŸ¥é”™è¯¯ä¿®å¤<a href="#kcl-å¿…é€‰å±æ€§æ£€æŸ¥é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼ŒKCL å¿…é€‰å±æ€§æ£€æŸ¥ä¼šé—æ¼åµŒå¥—çš„ Schema å±æ€§æ£€æŸ¥ï¼Œåœ¨ KCL v0.6.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¿®å¤äº†æ­¤ç±»ç±»ä¼¼çš„é—®é¢˜</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema S</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema L</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œä¼šé—æ¼ [S] å’Œ {str:S} ä¸­çš„ S çš„ a, b å±æ€§å¿…é€‰æ£€æŸ¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># åœ¨ KCL v0.6.0 ç‰ˆæœ¬ä¹‹åï¼Œæˆ‘ä»¬ä¿®å¤äº†æ­¤ç±»é—®é¢˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ss?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sss?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">l </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> L </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ss </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">S </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"b"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯<a href="https://github.com/kcl-lang/kcl/pull/672" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ide--å·¥å…·é“¾æ›´æ–°">IDE &amp; å·¥å…·é“¾æ›´æ–°<a href="#ide--å·¥å…·é“¾æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ide-æ›´æ–°">IDE æ›´æ–°<a href="#ide-æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åŠŸèƒ½æ›´æ–°">åŠŸèƒ½æ›´æ–°<a href="#åŠŸèƒ½æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><ul><li>è·³è½¬æ€§èƒ½å¤§å¹…åº¦æå‡ï¼Œæ”¯æŒæ¯«ç§’çº§è·³è½¬</li><li>æ”¯æŒ KCL åŒ…ä¸­çš„å˜é‡ä»¥åŠ Schema å±æ€§è¡¥å…¨</li><li>æ”¯æŒ KCL Schema å±æ€§æ–‡æ¡£å±æ€§æ‚¬åœæç¤º</li><li>æ”¯æŒæ— ç”¨ Import è¯­å¥å¿«é€Ÿä¿®å¤</li></ul><p><img loading="lazy" alt="ide-quick-fix" src="/zh-CN/assets/images/ide-quick-fix-90006c35f931eb6bc6366bc16ef615f7.png" width="854" height="546" class="img_ev3q"></p><ul><li>æ”¯æŒå³é”®æ ¼å¼åŒ–æ–‡ä»¶å’Œä»£ç ç‰‡æ®µ</li></ul><p><img loading="lazy" alt="ide-format" src="/zh-CN/assets/images/ide-format-501db8f6de27999d03d6615872c0a1f2.png" width="744" height="428" class="img_ev3q"></p><ul><li>æ”¯æŒå†…ç½®å‡½æ•°å’Œç³»ç»Ÿåº“ä¸­å‡½æ•°ä¿¡æ¯çš„æ‚¬åœæç¤º</li></ul><p><img loading="lazy" alt="ide-func-hover" src="/zh-CN/assets/images/ide-func-hover-5c7c9276b2b0b52d9275474f8cbbd688.png" width="1726" height="306" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ›´å¤š-ide-æ”¯æŒ">æ›´å¤š IDE æ”¯æŒ<a href="#æ›´å¤š-ide-æ”¯æŒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>æˆ‘ä»¬å°† KCL è¯­è¨€æœåŠ¡å™¨ LSP é›†æˆåˆ°äº† NeoVim å’Œ Idea ä¸­ï¼Œä½¿å¾—å¯ä»¥åœ¨ NeoVim å’Œ IntelliJ IDEA ä¸­ä½“éªŒåˆ°å’Œ VS Code IDE æ”¯æŒçš„è¡¥å…¨ã€è·³è½¬å’Œæ‚¬åœç­‰åŠŸèƒ½</p><ul><li>NeoVim KCL æ’ä»¶</li></ul><p><img loading="lazy" alt="kcl.nvim" src="/zh-CN/assets/images/overview-1a92596ca2fc24561c231c91145aef4e.png" width="1246" height="1121" class="img_ev3q"></p><ul><li>IntelliJ æ’ä»¶</li></ul><p><img loading="lazy" alt="intellij" src="/zh-CN/assets/images/overview-8fba05fd4572ba3eeb1d34267098168c.png" width="1041" height="650" class="img_ev3q"></p><p>æ›´å¤š IDE æ’ä»¶ä¸‹è½½å®‰è£…æ–¹å¼å’ŒåŠŸèƒ½è¯´æ˜å¯å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/docs/user_docs/getting-started/install#neovim" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install#neovim</a></li><li><a href="https://kcl-lang.io/docs/user_docs/getting-started/install#intellij-idea" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install#intellij-idea</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-æ ¼å¼åŒ–å·¥å…·æ›´æ–°">KCL æ ¼å¼åŒ–å·¥å…·æ›´æ–°<a href="#kcl-æ ¼å¼åŒ–å·¥å…·æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>æ”¯æŒå¯¹ç¼©è¿›ä¸æ­£ç¡®çš„é…ç½®å—è¿›è¡Œæ ¼å¼åŒ–</p><ul><li>æ ¼å¼åŒ–å‰</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> y </span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æ ¼å¼åŒ–å</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-æ–‡æ¡£å·¥å…·æ›´æ–°">KCL æ–‡æ¡£å·¥å…·æ›´æ–°<a href="#kcl-æ–‡æ¡£å·¥å…·æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><ul><li>æ–°å¢ Markdown æ–‡æ¡£å¯¼å‡ºæ”¯æŒ</li><li>æ”¯æŒå¯¼å‡ºæ–‡æ¡£ç´¢å¼•é¡µ</li><li>æ”¯æŒå¯¼å‡ºæ–‡æ¡£è‡ªå®šä¹‰æ ·å¼æ¨¡ç‰ˆ</li><li>æ”¯æŒå¯¼å‡ºæ–‡æ¡£ HTML è½¬ä¹‰</li><li>æ–‡æ¡£ç”Ÿæˆå¢å¼ºï¼Œæ”¯æŒå¯¹æ–‡æ¡£æ³¨é‡Šä¸­ç¤ºä¾‹ä»£ç ç‰‡æ®µçš„è§£æå’Œæ¸²æŸ“</li><li>é€šè¿‡åœ¨ Github workflow ä¸­è·Ÿè¸ªæ¨¡å‹çš„æ›´æ–°ï¼Œå¹¶é‡æ–°ç”Ÿæˆæ–‡æ¡£ï¼Œå³å¯å®ç°æ–‡æ¡£çš„è‡ªåŠ¨åŒæ­¥ã€‚å…·ä½“å‚è€ƒ: <a href="https://github.com/KusionStack/catalog/pull/31/files" target="_blank" rel="noopener noreferrer">https://github.com/KusionStack/catalog/pull/31/files</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä»-kpm-åŒ…ç”Ÿæˆæ¨¡å‹æ–‡æ¡£">ä» kpm åŒ…ç”Ÿæˆæ¨¡å‹æ–‡æ¡£<a href="#ä»-kpm-åŒ…ç”Ÿæˆæ¨¡å‹æ–‡æ¡£" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><ol><li>åˆ›å»º kpm åŒ…ï¼Œä¸ºå…¶ä¸­çš„ Service æ¨¡å‹æ·»åŠ æ–‡æ¡£æ³¨é‡Šï¼ˆä½¿ç”¨ docstring è¡¨ç¤ºï¼‰ã€‚åœ¨æ–‡æ¡£ä¸­å¯ä»¥åŒ…å«å¯¹æ¨¡å‹å’Œå±æ€§çš„è¯´æ˜ã€ç¤ºä¾‹ä»£ç å’Œç”¨æ³•ç­‰ï¼Œä»¥å¸®åŠ©å…¶ä»–å¼€å‘äººå‘˜å¿«é€Ÿä¸Šæ‰‹å¹¶æ­£ç¡®åœ°ä½¿ç”¨ã€‚</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">âœ kpm init demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">âœ cat &gt; demo/server.k &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    """</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Service is a kind of workload profile that describes how to run your application code. This</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    is typically used for long-running web applications that should "never" go down, and handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    short-lived latency-sensitive web requests, or events.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workloadType : str = "Deployment" | "StatefulSet", default is Deployment, required.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        workloadType represents the type of workload used by this Service. Currently, it supports several</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        types, including Deployment and StatefulSet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image : str, default is Undefined, required.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Image refers to the Docker image name to run for this container.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        More info: https://kubernetes.io/docs/concepts/containers/images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas : int, default is 2, required.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Number of container replicas based on this configuration that should be ran.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Instantiate a long-running service and its image is "nginx:v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc = Service {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        workloadType: "Deployment"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: "nginx:v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replica: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    """</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workloadType: "Deployment" | "StatefulSet"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: str</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replica: int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>ç”Ÿæˆ Markdown æ ¼å¼çš„åŒ…æ–‡æ¡£ï¼š
ä»¥ä¸‹å‘½ä»¤å°† demo åŒ…æ–‡æ¡£è¾“å‡ºåˆ°å½“å‰å·¥ä½œç›®å½•ä¸‹çš„ doc/ ç›®å½•ï¼š</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl-go doc generate --file-path demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="docgen" src="/zh-CN/assets/images/docgen-ebe405b469fef789e9bf3df2abb61f74.png" width="1846" height="1510" class="img_ev3q"></p><blockquote><p>æ›´å¤šä½¿ç”¨æ–¹å¼è¯·é€šè¿‡ <code>kcl-go doc generate -h</code> æŸ¥çœ‹</p></blockquote><ol><li>é€šè¿‡æµæ°´çº¿å®ç°æ–‡æ¡£çš„è‡ªåŠ¨åŒæ­¥</li></ol><p>é€šè¿‡åœ¨ Github workflow ä¸­è·Ÿè¸ªæ¨¡å‹çš„æ›´æ–°ï¼Œå¹¶é‡æ–°ç”Ÿæˆæ–‡æ¡£ï¼Œå³å¯å®ç°æ–‡æ¡£çš„è‡ªåŠ¨åŒæ­¥ã€‚å¯å‚ç…§ <a href="https://github.com/KusionStack/catalog/pull/31/files" target="_blank" rel="noopener noreferrer">Kusionstack/catalog</a> ä¸­çš„åšæ³•ï¼Œç”Ÿæˆæ–‡æ¡£å¹¶è‡ªåŠ¨å‘æ–‡æ¡£ä»“åº“æäº¤å˜æ›´ PRã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-å¯¼å…¥å·¥å…·æ›´æ–°">KCL å¯¼å…¥å·¥å…·æ›´æ–°<a href="#kcl-å¯¼å…¥å·¥å…·æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ KCL v0.6.0 ç‰ˆæœ¬ï¼ŒKCL å¯¼å‡º Import å·¥å…·æ–°å¢æ”¯æŒäº† JsonSchema, Terraform Provider Schema, Go ç»“æ„ä½“ è½¬æ¢ä¸º KCLï¼Œä»¥åŠä¸€é”®æ”¯æŒ JSON/YAML é…ç½®æ•°æ®è½¬æ¢ä¸º KCL é…ç½®ä»£ç ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹çš„ Terraform Provider Json (é€šè¿‡ <code>terraform providers schema -json &gt; provider.json</code> å‘½ä»¤è·å¾—ï¼Œè¯¦æƒ…è¯·å‚è€ƒ <a href="https://developer.hashicorp.com/terraform/cli/commands/providers/schema" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/terraform/cli/commands/providers/schema</a>)</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"format_version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"provider_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"registry.terraform.io/aliyun/alicloud"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"provider"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"block_types"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"resource_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"alicloud_db_instance"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"db_instance_type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"engine"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"required"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"security_group_ids"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"set"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"security_ips"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"set"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"map"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token property" style="color:#36acaa">"block_types"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"alicloud_config_rule"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"compliance"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"list"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token property" style="color:#36acaa">"compliance_type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token property" style="color:#36acaa">"count"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"number"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"resource_types_scope"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"list"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"data_source_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç»è¿‡ KCL Import å·¥å…·å¯ä»¥è¾“å‡ºä¸ºå¦‚ä¸‹ KCL ä»£ç </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">This file was generated by the KCL auto-gen tool. DO NOT EDIT.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Editing this file might prove futile when you re-run the KCL auto-gen generate command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema AlicloudConfigRule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    AlicloudConfigRule</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    compliance: [ComplianceObject], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    resource_types_scope: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compliance?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ComplianceObject</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource_types_scope?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema ComplianceObject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ComplianceObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    compliance_type: str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    count: int, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compliance_type?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema AlicloudDbInstance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    AlicloudDbInstance</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db_instance_type: str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    engine: str, required</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    security_group_ids: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    security_ips: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    tags: {str:str}, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db_instance_type?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    engine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    security_group_ids?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    security_ips?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isunique</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">security_group_ids</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isunique</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">security_ips</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŒ…ç®¡ç†å·¥å…·-kpm-æ›´æ–°">åŒ…ç®¡ç†å·¥å…· KPM æ›´æ–°<a href="#åŒ…ç®¡ç†å·¥å…·-kpm-æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kpm-pull-æ”¯æŒé€šè¿‡åŒ…åæ‹‰å–-kcl-package">kpm pull æ”¯æŒé€šè¿‡åŒ…åæ‹‰å– kcl package<a href="#kpm-pull-æ”¯æŒé€šè¿‡åŒ…åæ‹‰å–-kcl-package" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>kpm æ”¯æŒé€šè¿‡ kpm pull &lt;package_name&gt;:&lt;package_version&gt; çš„æ–¹å¼æ‹‰å–å¯¹åº”çš„åŒ…ã€‚
ä»¥ <code>k8s</code>åŒ…ä¸ºä¾‹ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç›´æ¥ä¸‹è½½å¯¹åº”çš„åŒ…åˆ°æœ¬åœ°ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm pull k8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ–è€…</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm pull k8s:1.27</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>kpm pull ä¸‹è½½çš„åŒ…ï¼Œå°†ä¼šä¸ºæ‚¨ä¿å­˜åœ¨ <code>æ‰§è¡Œå‘½ä»¤çš„ç›®å½•/&lt;oci registry&gt;/&lt;package_name&gt;</code>ç›®å½•ä¸‹, ä»¥ kpm é»˜è®¤çš„ registry ä¸ºä¾‹ï¼Œåœ¨ä½¿ç”¨ <code>kpm pull k8s</code>å‘½ä»¤åï¼Œæ‚¨èƒ½åœ¨<code>æ‰§è¡Œå‘½ä»¤çš„ç›®å½•/ghcr.io/kcl-lang/k8s</code>ç›®å½•ä¸‹æ‰¾åˆ°æ‚¨ä¸‹è½½çš„å†…å®¹ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ tree ghcr.io/kcl-lang/k8s -L 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghcr.io/kcl-lang/k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ apiextensions_apiserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ apimachinery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ kcl.mod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ kcl.mod.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ kube_aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ vendor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6 directories, 2 files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kpm-æ”¯æŒæ·»åŠ æœ¬åœ°è·¯å¾„ä½œä¸ºä¾èµ–">kpm æ”¯æŒæ·»åŠ æœ¬åœ°è·¯å¾„ä½œä¸ºä¾èµ–<a href="#kpm-æ”¯æŒæ·»åŠ æœ¬åœ°è·¯å¾„ä½œä¸ºä¾èµ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>"ä¸åŒçš„é¡¹ç›®å¯¹åº”çš„ KCL åŒ…ä¸ä¸€æ ·ï¼Œä»–ä»¬ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œä½†æ˜¯ä»–ä»¬ä¿å­˜åœ¨ä¸åŒçš„ç›®å½•ä¸‹ï¼Œæˆ‘å¸Œæœ›è¿™äº›ä¿å­˜åœ¨ä¸åŒç›®å½•ä¸‹çš„åŒ…èƒ½å¤Ÿè¢«ç»Ÿä¸€ç®¡ç†èµ·æ¥ï¼Œè€Œä¸æ˜¯åªæœ‰æŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·ä»–ä»¬æ‰èƒ½é€šè¿‡ç¼–è¯‘ã€‚" å¦‚æœæ‚¨ä¹Ÿæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œæ‚¨å¯ä»¥æ¥è¯•è¯•è¿™ä¸ªåŠŸèƒ½ã€‚kpm add ç›®å‰æ”¯æŒå°†æœ¬åœ°è·¯å¾„ä½œä¸ºä¾èµ–æ·»åŠ åˆ° kcl åŒ…ä¸­ï¼Œæ‚¨åªéœ€è¦<code>kpm add &lt;local_package_path&gt;</code>è¿™æ ·çš„å‘½ä»¤ï¼Œä¾¿å¯ä»¥å°†æ‚¨æœ¬åœ°çš„åŒ…ä½œä¸ºä¸‰æ–¹åº“æ·»åŠ åˆ°å½“å‰åŒ…çš„ä¾èµ–ä¸­ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm pull k8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®Œæˆåæ‚¨å¯ä»¥åœ¨ â€œæ‰§è¡Œå‘½ä»¤çš„ç›®å½•/ghcr.io/kcl-lang/k8sâ€ æ‰¾åˆ°ä¸‹è½½çš„ k8s åŒ…ã€‚
ä½¿ç”¨ kpm init mynginx å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ kcl åŒ…ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm init mynginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åï¼Œè¿›å…¥è¿™ä¸ªåŒ…å†…</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> mynginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨è¿™ä¸ªåŒ…å†…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ kpm add å‘½ä»¤å°†æ‚¨åˆšæ‰ä¸‹è½½åˆ°æœ¬åœ°çš„ k8s åŒ…ä½œä¸ºä¸‰æ–¹åº“æ·»åŠ åˆ° mynginx çš„ä¾èµ–ä¸­ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/ghcr.io/kcl-lang/k8s/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ¥ä¸‹æ¥ä¸º main.k æ·»åŠ å¦‚ä¸‹å†…å®¹</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">import</span><span class="token plain"> k8s.api.core.v1 as k8core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8core.Pod </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata.name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec.containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"main-container"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort: </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€šè¿‡ kpm run å¯ä»¥è¿›è¡Œæ­£å¸¸çš„ç¼–è¯‘</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kpm-å¢åŠ å¯¹å·²ç»å­˜åœ¨çš„åŒ…-tag-è¿›è¡Œæ£€æŸ¥">kpm å¢åŠ å¯¹å·²ç»å­˜åœ¨çš„åŒ… tag è¿›è¡Œæ£€æŸ¥<a href="#kpm-å¢åŠ å¯¹å·²ç»å­˜åœ¨çš„åŒ…-tag-è¿›è¡Œæ£€æŸ¥" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>kpm push ä¸­å¢åŠ äº†å¯¹ tag é‡å¤çš„æ£€æŸ¥ï¼Œä¸ºäº†é¿å…å‡ºç°ç›¸åŒ tag çš„åŒ…å­˜åœ¨ä¸åŒçš„å†…å®¹çš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨ kpm ä¸­å¢åŠ äº†å¯¹ push åŠŸèƒ½çš„é™åˆ¶ï¼Œå¦‚æœæ‚¨ push çš„ kcl åŒ…çš„ç‰ˆæœ¬å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆï¼Œæ‚¨å°†æ— æ³• push å½“å‰çš„ kcl åŒ…ã€‚æ‚¨å°†ä¼šå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm: package </span><span class="token string" style="color:#e3116c">'my_package'</span><span class="token plain"> will be pushed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kpm: package version </span><span class="token string" style="color:#e3116c">'0.1.0'</span><span class="token plain"> already exists</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯¹ä¸€ä¸ªå·²ç» push åˆ° Registry ä¸­çš„ kcl åŒ…ï¼Œåœ¨ä¸æ”¹å˜ tag çš„æƒ…å†µä¸‹æ”¹åŠ¨åŒ…çš„å†…å®¹ï¼Œä¼šäº§ç”Ÿå¾ˆå¤§çš„é£é™©ï¼Œå› ä¸ºè¿™ä¸ªåŒ…æœ‰å¯èƒ½å·²ç»è¢«å…¶ä»–äººä½¿ç”¨äº†ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨éœ€è¦ push æ‚¨çš„åŒ…ï¼Œæˆ‘ä»¬å»ºè®® </p><ul><li>å˜æ›´æ‚¨çš„ tag, å¹¶ä¸”å»ºè®®æ‚¨éµå®ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬çš„è§„èŒƒã€‚</li><li>å¦‚æœè¿«ä¸å¾—å·²éœ€è¦åœ¨ tag ä¸èƒ½å˜æ›´çš„æƒ…å†µä¸‹æ”¹å˜åŒ…çš„å†…å®¹ï¼Œæ‚¨åªèƒ½åˆ° Registry ä¸Šåˆ é™¤å·²æœ‰çš„ tagã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºé›†æˆ--æ‰©å±•æ›´æ–°">ç¤¾åŒºé›†æˆ &amp; æ‰©å±•æ›´æ–°<a href="#ç¤¾åŒºé›†æˆ--æ‰©å±•æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="helmfile-kcl-æ’ä»¶">Helmfile KCL æ’ä»¶<a href="#helmfile-kcl-æ’ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>Helmfile æ˜¯ç”¨äºéƒ¨ç½² Helm Chart çš„å£°æ˜æ€§è§„èŒƒå’Œå·¥å…·ï¼Œé€šè¿‡ Helmfile KCL æ’ä»¶æ‚¨å¯ä»¥</p><ul><li>é€šè¿‡æ— ä¾µå…¥çš„ Hook æ–¹å¼ç¼–è¾‘æˆ–è€…éªŒè¯ Helm Chart é…ç½®ï¼Œå°† Kubernetes é…ç½®ç®¡ç†çš„æ•°æ®éƒ¨åˆ†å’Œé€»è¾‘éƒ¨åˆ†åˆ†ç¦»<ul><li>ä¿®æ”¹èµ„æºæ ‡ç­¾/æ³¨è§£, æ³¨å…¥ Sidecar å®¹å™¨é…ç½®</li><li>ä½¿ç”¨ KCL Schema æ ¡éªŒèµ„æºï¼Œå®šä¹‰è‡ªå·±çš„æŠ½è±¡æ¨¡å‹å¹¶åˆ†äº«å¤ç”¨</li></ul></li><li>ä¼˜é›…åœ°ç»´æŠ¤å¤šç¯å¢ƒã€å¤šç§Ÿæˆ·åœºæ™¯é…ç½®ï¼Œè€Œä¸æ˜¯ç®€å•åœ°å¤åˆ¶ç²˜è´´</li></ul><p>ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•ç¤ºä¾‹è¿›è¡Œè¯¦ç»†è¯´æ˜ï¼Œä½¿ç”¨ Helmfile KCL æ’ä»¶æ— éœ€æ‚¨å®‰è£…ä¸ KCL ä»»ä½•ç›¸å…³çš„ç»„ä»¶ï¼Œåªéœ€æœ¬æœºå…·å¤‡ Helmfile å·¥å…·çš„æœ€æ–°ç‰ˆæœ¬å³å¯ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤º&nbsp;<code>helmfile.yaml</code>&nbsp;æ–‡ä»¶</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">repositories</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community.github.io/helm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">releases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">norbac</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;set</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;rbac.create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;transformers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token comment" style="color:#999988;font-style:italic">#&nbsp;Use&nbsp;KCL&nbsp;Plugin&nbsp;to&nbsp;mutate&nbsp;or&nbsp;validate&nbsp;Kubernetes&nbsp;manifests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"set-annotation"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config.kubernetes.io/function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;docker.io/kcllang/kustomize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v0.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">resource&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">if&nbsp;resource.kind&nbsp;==&nbsp;"Deployment"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;metadata.annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">"managed</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">by"&nbsp;=&nbsp;"helmfile</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&nbsp;for&nbsp;resource&nbsp;in&nbsp;option("resource_list").items</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ä¸Šè¿°é…ç½®ä¸­ï¼Œæˆ‘ä»¬å¼•ç”¨äº† Prometheus Helm Chart, å¹¶é€šè¿‡ä¸€è¡Œ KCL ä»£ç å°±å¯ä»¥å®Œæˆ Prometheus çš„æ‰€æœ‰çš„ Deployment èµ„æºæ³¨å…¥æ ‡ç­¾&nbsp;<code>managed-by="helmfile-kcl"</code>ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤æˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°é…ç½®ä¸‹å‘åˆ°é›†ç¾¤</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helmfile&nbsp;apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šç”¨ä¾‹å¯ä»¥å‚è€ƒ<a href="https://github.com/kcl-lang/krm-kcl" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-operator">KCL Operator<a href="#kcl-operator" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>KCL Operator æä¾›äº† Kubernetes é›†ç¾¤é›†æˆï¼Œå…è®¸æ‚¨åœ¨å°†èµ„æºåº”ç”¨åˆ°é›†ç¾¤æ—¶ä½¿ç”¨ Access Webhook æ ¹æ® KCL é…ç½®ç”Ÿæˆã€å˜å¼‚æˆ–éªŒè¯èµ„æºã€‚Webhook å°†æ•è·åˆ›å»ºã€åº”ç”¨å’Œç¼–è¾‘æ“ä½œï¼Œå¹¶ <code>KCLRun</code> åœ¨ä¸æ¯ä¸ªæ“ä½œå…³è”çš„é…ç½®ä¸Šæ‰§è¡Œèµ„æºï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨ KCL è¯­è¨€å®Œæˆå¦‚ä¸‹åŠŸèƒ½</p><ul><li>ä½¿ç”¨ KCL å¯¹èµ„æºè¿›è¡Œä¿®æ”¹ï¼Œå¦‚æ ¹æ®æŸä¸ªæ¡ä»¶æ·»åŠ /ä¿®æ”¹ label æ ‡ç­¾æˆ– annotation æ³¨é‡Šæˆ–åœ¨åŒ…å« PodTemplate çš„æ‰€æœ‰ Kubernetes Resource Model (KRM) èµ„æºä¸­æ³¨å…¥ Sidecar å®¹å™¨é…ç½®ç­‰ã€‚</li><li>ä½¿ç”¨ KCL Schema éªŒè¯æ‰€æœ‰ KRM èµ„æºï¼Œå¦‚çº¦æŸåªèƒ½ä»¥ Root æ–¹å¼å¯åŠ¨å®¹å™¨ç­‰ã€‚</li><li>ä½¿ç”¨æŠ½è±¡æ¨¡å‹ç”Ÿæˆ KRM èµ„æºæˆ–è€…å¯¹ä¸åŒçš„ KRM API è¿›è¡Œç»„åˆå¹¶ä½¿ç”¨ã€‚</li></ul><p>ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•çš„èµ„æº annotation æ³¨è§£ä¿®æ”¹ç¤ºä¾‹ä»‹ç» KCL Operator çš„ä½¿ç”¨æ–¹å¼</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="0å‰ç½®æ¡ä»¶">0.å‰ç½®æ¡ä»¶<a href="#0å‰ç½®æ¡ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>é€šè¿‡ k3d ç­‰å·¥å…·å‡†å¤‡ä¸€ä¸ª Kubernetes é›†ç¾¤ä»¥åŠ kubectl å·¥å…·</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-å®‰è£…-kcl-operator">1. å®‰è£… KCL Operator<a href="#1-å®‰è£…-kcl-operator" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kcl-lang/kcl-operator/main/config/all.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è§‚å¯Ÿå¹¶ç­‰å¾… pod çŠ¶æ€ä¸º Runningã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-éƒ¨ç½²æ³¨è§£ä¿®æ”¹æ¨¡å‹">2. éƒ¨ç½²æ³¨è§£ä¿®æ”¹æ¨¡å‹<a href="#2-éƒ¨ç½²æ³¨è§£ä¿®æ”¹æ¨¡å‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  # è®¾ç½®æ³¨è§£ä¿®æ”¹æ¨¡å‹æ‰€éœ€çš„åŠ¨æ€å‚æ•°ï¼Œåœ¨æ­¤å¤„æˆ‘ä»¬å¯ä»¥æ·»åŠ æˆ‘ä»¬æƒ³è¦ä¿®æ”¹/æ·»åŠ çš„æ ‡ç­¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      managed-by: kcl-operator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  # å¼•ç”¨ OCI ä¸Šæ³¨è§£ä¿®æ”¹æ¨¡å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  source: oci://ghcr.io/kcl-lang/set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-éƒ¨ç½²ä¸€ä¸ª-pod-èµ„æºéªŒè¯æ¨¡å‹ç»“æœ">3. éƒ¨ç½²ä¸€ä¸ª Pod èµ„æºéªŒè¯æ¨¡å‹ç»“æœ<a href="#3-éƒ¨ç½²ä¸€ä¸ª-pod-èµ„æºéªŒè¯æ¨¡å‹ç»“æœ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤éƒ¨ç½²ä¸€ä¸ª Pod èµ„æº</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    image: nginx:1.14.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - containerPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po nginx -o yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡º</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    managed-by: kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯ä»¥å‘ç° Nginx Pod ä¸Šè‡ªåŠ¨æ·»åŠ äº† <code>managed-by=kcl-operator</code> æ³¨è§£</p><p><img loading="lazy" alt="registry" src="/zh-CN/assets/images/registry-cd35895be6f805c239d719bce0001163.png" width="1972" height="1000" class="img_ev3q"></p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å·²ç»åœ¨ KCL å®˜æ–¹ Registry ä¸­å¼€ç®±æä¾›äº†å¤šè¾¾ 30 ä¸ªå†…ç½®æ¨¡å‹å¯ä»¥å…è®¸æ‚¨åœ¨è½»æ˜“å®Œæˆå¯¹å·²æœ‰ Kubernetes èµ„æºçš„ç¼–è¾‘ã€æ ¡éªŒå’ŒæŠ½è±¡ã€‚</p><p>æ¯”å¦‚ä½¿ç”¨ web-service æ¨¡å‹ç›´æ¥å®ä¾‹åŒ–å‡ºä¸€ä¸ª web åº”ç”¨æ‰€éœ€çš„ Kubernetes èµ„æºï¼›ä½¿ç”¨ set-annotation æ¨¡å‹å¯¹å·²æœ‰çš„ k8s èµ„æºæ·»åŠ  annotationï¼›ä½¿ç”¨ https-only æ¨¡å‹æ ¡éªŒæ‚¨çš„ Ingress é…ç½®åªèƒ½è®¾ç½®ä¸º https, å¦åˆ™æŠ¥é”™ã€‚</p><p><a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/krm-kcl/tree/main/examples</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vault-é›†æˆ">Vault é›†æˆ<a href="#vault-é›†æˆ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>ä»…éœ€ä¸‰æ­¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Vault æ¥å­˜å‚¨å¹¶ç®¡ç†æ•æ„Ÿä¿¡æ¯å¹¶åœ¨ KCL ä¸­ä½¿ç”¨ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å®‰è£…å¹¶ä½¿ç”¨ Vault å­˜å‚¨ <code>foo</code> å’Œ <code>bar</code> ä¿¡æ¯</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vault kv put secret/foo </span><span class="token assign-left variable" style="color:#36acaa">foo</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vault kv put secret/bar </span><span class="token assign-left variable" style="color:#36acaa">bar</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åç¼–å†™å¦‚ä¸‹ KCL ä»£ç  (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"secret-store"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vault"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Valid format:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#  "ref+vault://PATH/TO/KV_BACKEND#/KEY"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ref+vault://secret/foo#/foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ref+vault://secret/bar#/bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"${metadata.name}:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æœ€åå¯ä»¥é€šè¿‡ Vals å‘½ä»¤è¡Œå·¥å…·è·å¾—è§£å¯†åçš„é…ç½®</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> vals </span><span class="token builtin class-name">eval</span><span class="token plain"> -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šè¯¦æƒ…å’Œç”¨ä¾‹å¯ä»¥å‚è€ƒ <a href="https://kcl-lang.io/docs/user_docs/guides/secret-management/vault" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/secret-management/vault</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gitlab-ci-é›†æˆ">GitLab CI é›†æˆ<a href="#gitlab-ci-é›†æˆ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†ä½¿ç”¨ Github Action ä½œä¸º CI é€šè¿‡ GitOps æ–¹å¼è¿›è¡Œåº”ç”¨å‘å¸ƒï¼Œæ­¤æ¬¡ç‰ˆæœ¬ä¸­æˆ‘ä»¬è¿›ä¸€æ­¥æä¾›äº† GitLab CI é›†æˆï¼Œç”¨ä¾‹è¯¦æƒ…å¯å‚è€ƒï¼š<em><a href="https://kcl-lang.io/docs/user_docs/guides/ci-integration/gitlab-ci" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/ci-integration/gitlab-ci</a></em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤">å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤<a href="#å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>å®Œæ•´æ›´æ–°å’Œé”™è¯¯ä¿®å¤åˆ—è¡¨<a href="https://github.com/kcl-lang/kcl/compare/v0.5.0...v0.6.0" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–‡æ¡£æ›´æ–°">æ–‡æ¡£æ›´æ–°<a href="#æ–‡æ¡£æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> æ–°å¢ KCL v0.6.0 æ–‡æ¡£å†…å®¹å¹¶æ”¯æŒç‰ˆæœ¬åŒ–è¯­ä¹‰é€‰é¡¹ï¼Œç›®å‰æ”¯æŒ v0.4.x, v0.5.x å’Œ v0.6.0 ç‰ˆæœ¬é€‰æ‹©ï¼ŒåŒæ—¶æ¬¢è¿ç¤¾åŒºåŒå­¦è¿›è¡Œæ–‡æ¡£å…±å»ºã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºåŠ¨æ€">ç¤¾åŒºåŠ¨æ€<a href="#ç¤¾åŒºåŠ¨æ€" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>æ„Ÿè°¢ @jakezhu9 å¯¹ KCL Import å·¥å…·åŒ…æ‹¬ Terraform Provider Schema, JsonSchema, Json, YAML ç­‰é…ç½®æ ¼å¼/æ•°æ®åˆ° KCL Schema/é…ç½®çš„è½¬æ¢ ğŸ™Œ</li><li>æ„Ÿè°¢ @xxmao123 å¯¹ KCL LSP è¯­è¨€æœåŠ¡å™¨æ¥å…¥åˆ° Idea IDE æ’ä»¶çš„è´¡çŒ® ğŸ™Œ</li><li>æ„Ÿè°¢ @starkers å¯¹ KCL NeoVim æ’ä»¶çš„è´¡çŒ® ğŸ™Œ</li><li>æ„Ÿè°¢ @starkers å¯¹ mason.nvim registry å¢åŠ  KCL çš„å®‰è£…æ”¯æŒ ğŸ™Œ</li><li>æ„Ÿè°¢ @Ekko å¯¹ KCL äº‘åŸç”Ÿå·¥å…·é›†æˆä»¥åŠ KCL Operator çš„è´¡çŒ® ğŸ™Œ</li><li>æ„Ÿè°¢ @prahaladramji å¯¹ KCL Homebrew å®‰è£…è„šæœ¬çš„å‡çº§æ›´æ–°ä¸è´¡çŒ® ğŸ™Œ</li><li>æ„Ÿè°¢ @yyxhero åœ¨ Helmfile KCL æ’ä»¶æ”¯æŒä¸­æä¾›çš„å¸®åŠ©ä¸æ”¯æŒ ğŸ™Œ</li><li>æ„Ÿè°¢ @nkabir, @mihaigalos, @prahaladramji, @yamin-oanda, @dhhopen,@magick93, @MirKml, @kolloch, @steeling ç­‰åœ¨è¿‡å»ä¸¤ä¸ªæœˆä½¿ç”¨ KCL è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µåé¦ˆå’Œè®¨è®º&nbsp;ğŸ™Œ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/faq-kcl" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·å’Œç¤¾åŒºå°ä¼™ä¼´åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µåé¦ˆä¸å»ºè®®ã€‚</p><p>æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL GitHub ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion GitHub ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="Release Blog" term="Release Blog"/>
        <category label="KCL" term="KCL"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL ç¤¾åŒºå¼€æºåŒå‘¨æŠ¥ (2023 08.24 - 09.06) | Kubernetes Operatorï¼ŒIDE æ’ä»¶å’Œ v0.5.6 ç‰ˆæœ¬æ­£å¼å‘å¸ƒ!]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-09-06-biweekly-newsletter</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-09-06-biweekly-newsletter"/>
        <updated>2023-09-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€å¹¶é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®æ¯”å¦‚äº‘åŸç”Ÿ Kubernetes é…ç½®åœºæ™¯çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´ç®€å•çš„è‡ªåŠ¨åŒ–å’Œç”Ÿæ€å·¥å…·é›†æˆã€‚]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="/zh-CN/assets/images/biweekly-newsletter-zh-bd4cf8c2bcc913a580e7b0e5d6691a08.png" width="1127" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€å¹¶é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®æ¯”å¦‚äº‘åŸç”Ÿ Kubernetes é…ç½®åœºæ™¯çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´ç®€å•çš„è‡ªåŠ¨åŒ–å’Œç”Ÿæ€å·¥å…·é›†æˆã€‚</p><p>æœ¬æ ç›®å°†ä¼šåŒå‘¨æ›´æ–° KCL è¯­è¨€ç¤¾åŒºæœ€æ–°åŠ¨æ€ï¼ŒåŒ…æ‹¬åŠŸèƒ½ã€å®˜ç½‘æ›´æ–°å’Œæœ€æ–°çš„ç¤¾åŒºåŠ¨æ€ç­‰ï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½åœ°äº†è§£ KCL ç¤¾åŒºï¼</p><p><strong><em>KCL å®˜ç½‘ï¼š<a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å†…å®¹æ¦‚è¿°">å†…å®¹æ¦‚è¿°<a href="#å†…å®¹æ¦‚è¿°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…è¿‡å»ä¸¤å‘¨ (2023 08.24 - 09.06) çš„æ°å‡ºå·¥ä½œï¼Œä»¥ä¸‹æ˜¯é‡ç‚¹åˆå¹¶å†…å®¹æ¦‚è¿°</p><p><strong>ğŸ”§ è¯­è¨€åŠå·¥å…·é“¾æ›´æ–°</strong></p><ul><li>KCL&nbsp;å¯¼å…¥å·¥å…·æ›´æ–° - æ”¯æŒç”± JSON/YAML æ•°æ®å¯¼å‡ºä¸º KCL é…ç½®</li><li>KCL IDE æ›´æ–° - æ”¯æŒå³é”®ä¸€é”®æ ¼å¼åŒ–èƒ½åŠ›ï¼Œæ”¯æŒç›´æ¥æ ¼å¼åŒ–å•ä¸ªæ–‡ä»¶æˆ–éƒ¨åˆ† KCL ä»£ç </li><li>KCL æ–‡æ¡£å·¥å…·æ›´æ–° - å¯¼å‡ºæ–‡æ¡£æ”¯æŒ HTML è½¬ä¹‰</li><li>KCL åŒ…ç®¡ç†å·¥å…· KPM æ›´æ–° - kpm run è¿è¡Œå‘½ä»¤ä»¥åŠé”™è¯¯ä¿¡æ¯ä¼˜åŒ–ï¼Œæ”¯æŒç›´æ¥è¿è¡Œä½äºæœ¬åœ°è·¯å¾„çš„ KCL åŒ…</li><li>KCL è¯­è¨€æ›´æ–° - ä¼˜åŒ–ç³»ç»Ÿåº“ç±»å‹æ£€æŸ¥ç­‰é”™è¯¯ä¿¡æ¯åŠé”™è¯¯ä¿¡æ¯ä»£ç ç»Ÿä¸€</li></ul><p><strong>ğŸ“° å®˜ç½‘å’Œç”¨ä¾‹æ›´æ–°</strong></p><ul><li>KCL å®˜ç½‘æ–°å¢ v0.5.6 æ–‡æ¡£ç‰ˆæœ¬</li><li>æ–°å¢é€šè¿‡ Github Action å‘å¸ƒ KCL ä»£ç åŒ…ç›´æ¥å‘å¸ƒåˆ° docker.io å’Œ ghcr.io ç­‰ Registry ç”¨ä¾‹: <em><a href="https://github.com/kcl-lang/kpm/blob/main/docs/push_by_github_action.md" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/blob/main/docs/push_by_github_action.md</a></em></li><li>æ–°å¢ KCL Operator é›†æˆç”¨ä¾‹: <em><a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/mutate-manifests/kcl-operator" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/mutate-manifests/kcl-operator</a></em></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹åˆ«é¸£è°¢">ç‰¹åˆ«é¸£è°¢<a href="#ç‰¹åˆ«é¸£è°¢" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ä»¥ä¸‹æ’åä¸åˆ†å…ˆå</p><ul><li>æ„Ÿè°¢ @jakezhu9 å¯¹ KCL Import å·¥å…· JSON å’Œ YAML é…ç½®æ•°æ®åˆ° KCL é…ç½®å—è½¬æ¢çš„è´¡çŒ® ğŸ™Œ <em><a href="https://github.com/kcl-lang/kcl-go/pull/141" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/141</a></em></li><li>æ„Ÿè°¢ @xxmao123 å’Œ @starkers å¯¹ KCL NeoVim ä»¥åŠ Idea IDE æ’ä»¶çš„è´¡çŒ® ğŸ™Œ <em><a href="https://github.com/kcl-lang/intellij-kcl/pull/12" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/intellij-kcl/pull/12</a></em></li><li>æ­¤å¤–æ„Ÿè°¢ @kolloch, @prahaladramji ç­‰åœ¨è¿‡å»ä¸¤å‘¨ä½¿ç”¨ KCL è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µåé¦ˆå’Œè®¨è®º&nbsp;ğŸ™Œ</li></ul><p><strong>ç¥è´º @jakezhu9 ç¥è´º jakezhu9 æˆä¸º KCL ç¤¾åŒº Maintainer</strong> ğŸ‰</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç²¾é€‰æ›´æ–°">ç²¾é€‰æ›´æ–°<a href="#ç²¾é€‰æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-operator">KCL Operator<a href="#kcl-operator" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>KCL Operator æä¾›äº† Kubernetes é›†ç¾¤é›†æˆï¼Œå…è®¸æ‚¨åœ¨å°†èµ„æºåº”ç”¨åˆ°é›†ç¾¤æ—¶ä½¿ç”¨ Access Webhook æ ¹æ® KCL é…ç½®ç”Ÿæˆã€å˜å¼‚æˆ–éªŒè¯èµ„æºã€‚Webhook å°†æ•è·åˆ›å»ºã€åº”ç”¨å’Œç¼–è¾‘æ“ä½œï¼Œå¹¶ <code>KCLRun</code> åœ¨ä¸æ¯ä¸ªæ“ä½œå…³è”çš„é…ç½®ä¸Šæ‰§è¡Œèµ„æºï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨ KCL è¯­è¨€å®Œæˆå¦‚ä¸‹åŠŸèƒ½</p><ul><li>ä½¿ç”¨ KCL å¯¹èµ„æºè¿›è¡Œä¿®æ”¹ï¼Œå¦‚æ ¹æ®æŸä¸ªæ¡ä»¶æ·»åŠ /ä¿®æ”¹ label æ ‡ç­¾æˆ– annotation æ³¨é‡Šæˆ–åœ¨åŒ…å« PodTemplate çš„æ‰€æœ‰ Kubernetes Resource Model (KRM) èµ„æºä¸­æ³¨å…¥ Sidecar å®¹å™¨é…ç½®ç­‰ã€‚</li><li>ä½¿ç”¨ KCL Schema éªŒè¯æ‰€æœ‰ KRM èµ„æºï¼Œå¦‚çº¦æŸåªèƒ½ä»¥ Root æ–¹å¼å¯åŠ¨å®¹å™¨ç­‰ã€‚</li><li>ä½¿ç”¨æŠ½è±¡æ¨¡å‹ç”Ÿæˆ KRM èµ„æºæˆ–è€…å¯¹ä¸åŒçš„ KRM API è¿›è¡Œç»„åˆå¹¶ä½¿ç”¨ã€‚</li></ul><p>ä½¿ç”¨ KCL Operator, é€šè¿‡å‡ ä¸ªæ­¥éª¤æ‚¨å°±å¯ä»¥åœ¨ Kubernetes é›†ç¾¤å†…éƒ¨ä»¥å¾ˆè½»é‡çš„æ–¹å¼åœ°é€šè¿‡ KCL ä»£ç è‡ªåŠ¨åŒ–åœ°å®Œæˆèµ„æºé…ç½®çš„ç®¡ç†å’Œå®‰å…¨éªŒè¯ï¼Œæ— éœ€é‡å¤å¼€å‘ Webhook Server åœ¨è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹å’ŒéªŒè¯é…ç½®ã€‚</p><p>æ­¤å¤–å€ŸåŠ© KCL è‰¯å¥½çš„å»ºæ¨¡å’ŒæŠ½è±¡èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä¸åŒçš„èµ„æº API å®šä¹‰è¿›è¡ŒåŠŸèƒ½æŠ½è±¡/ç»„åˆå¹¶ä»¥ KCL Schema çš„å½¢å¼å¯¹å¤–é€å‡ºï¼Œå¹¶ä¸”å¯ä»¥ç”± KCL Schema è¿›ä¸€æ­¥è‡ªåŠ¨ç”Ÿæˆ OpenAPI Schema å®šä¹‰ä¾›é›†ç¾¤å…¶ä»–å®¢æˆ·ç«¯è°ƒç”¨ï¼Œè€Œæ— éœ€ä¸º API æŠ½è±¡/ç»„åˆæ‰‹åŠ¨ç»´æŠ¤å¤æ‚çš„ OpenAPI Schema å®šä¹‰ã€‚</p><p>ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•çš„èµ„æº annotation æ³¨è§£ä¿®æ”¹ç¤ºä¾‹ä»‹ç» KCL Operator çš„ä½¿ç”¨æ–¹å¼</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="0å‰ç½®æ¡ä»¶">0.å‰ç½®æ¡ä»¶<a href="#0å‰ç½®æ¡ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>é€šè¿‡ k3d ç­‰å·¥å…·å‡†å¤‡ä¸€ä¸ª Kubernetes é›†ç¾¤ä»¥åŠ kubectl å·¥å…·</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-å®‰è£…-kcl-operator">1. å®‰è£… KCL Operator<a href="#1-å®‰è£…-kcl-operator" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kcl-lang/kcl-operator/main/config/all.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è§‚å¯Ÿå¹¶ç­‰å¾… pod çŠ¶æ€ä¸º Runningã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-éƒ¨ç½²æ³¨è§£ä¿®æ”¹æ¨¡å‹">2. éƒ¨ç½²æ³¨è§£ä¿®æ”¹æ¨¡å‹<a href="#2-éƒ¨ç½²æ³¨è§£ä¿®æ”¹æ¨¡å‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  # è®¾ç½®æ³¨è§£ä¿®æ”¹æ¨¡å‹æ‰€éœ€çš„åŠ¨æ€å‚æ•°ï¼Œåœ¨æ­¤å¤„æˆ‘ä»¬å¯ä»¥æ·»åŠ æˆ‘ä»¬æƒ³è¦ä¿®æ”¹/æ·»åŠ çš„æ ‡ç­¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      managed-by: kcl-operator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  # å¼•ç”¨ OCI ä¸Šæ³¨è§£ä¿®æ”¹æ¨¡å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  source: oci://ghcr.io/kcl-lang/set-annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-éƒ¨ç½²ä¸€ä¸ª-pod-èµ„æºéªŒè¯æ¨¡å‹ç»“æœ">3. éƒ¨ç½²ä¸€ä¸ª Pod èµ„æºéªŒè¯æ¨¡å‹ç»“æœ<a href="#3-éƒ¨ç½²ä¸€ä¸ª-pod-èµ„æºéªŒè¯æ¨¡å‹ç»“æœ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤éƒ¨ç½²ä¸€ä¸ª Pod èµ„æº</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    image: nginx:1.14.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - containerPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get po nginx -o yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡º</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    managed-by: kcl-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯ä»¥å‘ç° Nginx Pod ä¸Šè‡ªåŠ¨æ·»åŠ äº† <code>managed-by=kcl-operator</code> æ³¨è§£</p><p>æ­¤å¤–ï¼Œé™¤äº†ä¸º <code>KCLRun</code> èµ„æº <code>source</code> å­—æ®µå¼•ç”¨å·²æœ‰çš„æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸º <code>source</code> å­—æ®µè®¾ç½® KCL ä»£ç ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œæ¯”å¦‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> set</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">operator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä»…é€šè¿‡ä¸€è¡Œ KCL ä»£ç å°±å¯å®Œæˆèµ„æºçš„ä¿®æ”¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    items = [item | {metadata.annotations: option("params").annotations} for item in option("items")]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å·²ç»å¼€ç®±æä¾›äº†å¤šè¾¾ 30+ çš„å†…ç½®æ¨¡å‹ï¼Œæ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„é“¾æ¥ä¸­è·å¾—æ›´å¤šä»£ç ç¤ºä¾‹</p><p><a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/krm-kcl/tree/main/examples</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-ide-æ’ä»¶æ›´æ–°">KCL IDE æ’ä»¶æ›´æ–°<a href="#kcl-ide-æ’ä»¶æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>è¿‡å»ä¸¤å‘¨ï¼Œæˆ‘ä»¬å°† KCL è¯­è¨€æœåŠ¡å™¨ LSP é›†æˆåˆ°äº† NeoVim å’Œ Idea ä¸­ï¼Œä½¿å¾—å¯ä»¥åœ¨ NeoVim å’Œ IntelliJ IDEA ä¸­ä½“éªŒåˆ°å’Œ VS Code IDE æ”¯æŒçš„è¡¥å…¨ã€è·³è½¬å’Œæ‚¬åœç­‰åŠŸèƒ½</p><ul><li>NeoVim KCL æ’ä»¶</li></ul><p><img loading="lazy" alt="kcl.nvim" src="/zh-CN/assets/images/overview-1a92596ca2fc24561c231c91145aef4e.png" width="1246" height="1121" class="img_ev3q"></p><ul><li>IntelliJ æ’ä»¶</li></ul><p><img loading="lazy" alt="intellij" src="/zh-CN/assets/images/overview-8fba05fd4572ba3eeb1d34267098168c.png" width="1041" height="650" class="img_ev3q"></p><p>æ›´å¤š IDE æ’ä»¶ä¸‹è½½å®‰è£…æ–¹å¼å’ŒåŠŸèƒ½è¯´æ˜å¯å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/docs/user_docs/getting-started/install#neovim" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install#neovim</a></li><li><a href="https://kcl-lang.io/docs/user_docs/getting-started/install#intellij-idea" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/getting-started/install#intellij-idea</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>â¤ï¸ æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·å’Œç¤¾åŒºå°ä¼™ä¼´åœ¨ç¤¾åŒºä¸­æå‡ºçš„å®è´µåé¦ˆä¸å»ºè®®ã€‚é¢„è®¡ 9 æœˆä¸­æ—¬æˆ‘ä»¬ä¼šæ­£å¼å‘å¸ƒ KCL v0.6 æ–°ç‰ˆæœ¬ï¼Œæ•¬è¯·æœŸå¾…!</p><p>æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack ç½‘ç«™</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 è·¯çº¿è§„åˆ’</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content>
        <author>
            <name>KCL å›¢é˜Ÿ</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Biweekly-Newsletter" term="Biweekly-Newsletter"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¿«è®¯ï¼ç¥è´º jakezhu9 æˆä¸º KCL ç¤¾åŒº Maintainerï¼KCL Import å·¥å…·å†è¿å¢å¼ºåŠŸèƒ½ï¼]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-09-04-maintainer-jakezhu9-blog</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-09-04-maintainer-jakezhu9-blog"/>
        <updated>2023-09-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[å¿«è®¯]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¿«è®¯">å¿«è®¯<a href="#å¿«è®¯" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><img loading="lazy" alt="jakezhu9" src="/zh-CN/assets/images/jakezhu9-48d55a7a1f81e641c350cb1d32c66583.png" width="460" height="460" class="img_ev3q"></p><p>ğŸ‰ è¿‘æ—¥ï¼ŒKCL ç¤¾åŒºè¿æ¥äº†ä¸€ä½æ–°çš„ Maintainer æˆå‘˜ï¼Œ<strong>æ­å–œ jakezhu9 æˆåŠŸæ™‹å‡ä¸ºç¤¾åŒºç»´æŠ¤è€…</strong>ã€‚</p><p>æ„Ÿè°¢ä»–åœ¨ KCL Go SDK ä¸­åšå‡ºä¸€ç³»åˆ—è´¡çŒ®ä»¥åŠä¸º KCL Import å·¥å…·å¸¦æ¥çš„ä¸€ç³»åˆ—å¢å¼ºåŠŸèƒ½çš„å‡çº§ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ ä¾¿æ·é«˜æ•ˆçš„æ•°æ®å’Œ Schema å¯¼å…¥ä½“éªŒã€‚ä»¥ä¸‹æ˜¯ä»–è¿‘æœŸçš„<strong>é‡è¦è´¡çŒ®åˆ—è¡¨</strong></p><ul><li>ğŸ”§ <strong>æ”¯æŒä» JSON/YAML æ•°æ®è½¬æ¢ä¸º KCL é…ç½®</strong>: <a href="https://github.com/kcl-lang/kcl-go/pull/145" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/145</a></li><li>ğŸ”§ <strong>æ”¯æŒä» Terraform Provider Schema è½¬æ¢ä¸º KCL Schema</strong>: <a href="https://github.com/kcl-lang/kcl-go/pull/141" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/141</a></li><li>ğŸ”§ <strong>æ”¯æŒä» JsonSchema è½¬æ¢ä¸º KCL Schema</strong>: <a href="https://github.com/kcl-lang/kcl-go/pull/127" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/127</a></li></ul><p>æ–°æ™‹ Maintainer çš„åŠ å…¥ï¼Œä¸ä»…æ ‡å¿—ç€ jakezhu9 åœ¨æŠ€æœ¯ä¸Šçš„å“è¶Šè¡¨ç°ï¼Œä¹Ÿä½“ç°äº†ç¤¾åŒºå¯¹ä»–çš„é«˜åº¦è®¤å¯å’Œä¿¡ä»»ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¿ƒå¾—ä½“ä¼š">å¿ƒå¾—ä½“ä¼š<a href="#å¿ƒå¾—ä½“ä¼š" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><em>ä»¥ä¸‹æ˜¯ jakezhu9 åŒå­¦å‚ä¸ KCL ç¤¾åŒºçš„å¿ƒå¾—ä½“ä¼š</em></p><p>æˆ‘éå¸¸å¹¸è¿èƒ½å¤ŸåŠ å…¥ KCL è¿™æ ·ä¸€ä¸ªä¼˜ç§€çš„ç¤¾åŒºæ¥ï¼Œå¹¶å‚ä¸é¡¹ç›®çš„å¼€å‘å’Œç¤¾åŒºçš„å»ºè®¾ã€‚ä»ä¸€å¼€å§‹äº†è§£äº‘åŸç”Ÿé¢†åŸŸ KusionStack å’Œ KCL è¿™æ ·å¼ºå¤§çš„å·¥å…·å’Œè¯­è¨€ï¼Œåˆ°ä¸ºé¡¹ç›®ä¿®å¤ä¸€ä¸ªç®€å•çš„ Bugï¼Œå†åˆ°é€æ­¥è®¾è®¡å’Œå¼€å‘ KCL è½¬æ¢å’Œç”Ÿæˆçš„éƒ¨åˆ†ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸ä»…è·å¾—äº†æŠ€æœ¯æ°´å¹³ä¸Šçš„æå‡ï¼Œè¿˜ç§¯ç´¯äº†è®¸å¤šçš„å¼€æºè´¡çŒ®çš„ç»éªŒï¼Œæ„Ÿå—åˆ°äº†ä¸æ–­è¿›æ­¥çš„å¿«ä¹å’Œæˆå°±æ„Ÿã€‚æ¯å½“çœ‹åˆ°è‡ªå·±æäº¤çš„ PR è¢«åˆå¹¶æ—¶ï¼Œæˆ‘éƒ½ä¼šæ„Ÿåˆ°ç‰¹åˆ«çš„æ»¡è¶³ã€‚æ„Ÿè°¢ KCL ç¤¾åŒºï¼Œä¹Ÿæ„Ÿè°¢ç¤¾åŒºçš„å‰è¾ˆå’Œä¸€è·¯ä¸Šé‡åˆ°çš„æ‰€æœ‰å°ä¼™ä¼´ï¼Œä»–ä»¬åœ¨æˆ‘å¼€å‘è¿‡ç¨‹ä¸­ç»™äº†æˆ‘å¾ˆå¤šçš„æƒ³æ³•å’Œå»ºè®®ï¼ŒçœŸçš„éå¸¸æœ‰å¸®åŠ©ã€‚</p><p>KCL ç¤¾åŒºæ˜¯ä¸€ä¸ªå¼€æ”¾è‡ªç”±ã€å……æ»¡æ´»åŠ›ä¸æœºé‡çš„å¼€æºç¤¾åŒºï¼Œæ¥è‡ªä¸åŒå…¬å¸ã€å­¦æ ¡ï¼Œæ‹¥æœ‰ä¸åŒæŠ€æœ¯èƒŒæ™¯çš„å¼€å‘è€…ï¼Œå…±åŒåœ¨ Githubã€ç¤¾åŒºå‘¨ä¼šä¸Šç›¸äº’äº¤æµç¢°æ’ï¼Œæ¢ç´¢å‰æ²¿çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸ºç¤¾åŒºæŒç»­è´¡çŒ®é«˜æ•ˆç®€æ´çš„ä»£ç ã€‚æ— è®ºæ˜¯å¼€æºæ–°æ‰‹è¿˜æ˜¯æŠ€æœ¯å¤§ä½¬ï¼Œéƒ½å¯ä»¥å¿«é€Ÿèå…¥ç¤¾åŒºå¹¶å‚ä¸å…¶ä¸­ã€‚ç¤¾åŒºé‡Œå’Œè°å‹å¥½ã€å…±åŒè¿›æ­¥çš„æ°›å›´ï¼Œä¹Ÿè®©æˆ‘æ„Ÿåˆ°éå¸¸çš„æ¸©æš–ã€‚æœªæ¥ï¼Œæˆ‘å°†ç»§ç»­ä¸º KCL ç¤¾åŒºè´¡çŒ®æ›´å¤šçš„åŠ›é‡ï¼Œä¹Ÿçƒ­çƒˆæ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦åŠ å…¥æˆ‘ä»¬ï¼Œå…±åŒå‚ä¸åˆ°ç¤¾åŒºçš„å»ºè®¾å’Œå‘å±•ä¸­æ¥ï¼</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>â¤ï¸ æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·å’Œç¤¾åŒºå°ä¼™ä¼´åœ¨ç¤¾åŒºä¸­æå‡ºçš„å®è´µåé¦ˆä¸å»ºè®®ã€‚æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack ç½‘ç«™</a></li><li><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 è·¯çº¿è§„åˆ’</a></li><li><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></li><li><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></li><li><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></li><li><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></li></ul>]]></content>
        <author>
            <name>KCL å›¢é˜Ÿ</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Maintainer" term="Maintainer"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2023 å¹³å°å·¥ç¨‹ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-platform-engineering-tech-summit</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-platform-engineering-tech-summit"/>
        <updated>2023-09-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[PDF ä¸‹è½½]]></summary>
        <content type="html"><![CDATA[<p><a href="https://kcl-lang.github.io/talks/kcl-platform-engineering-tech-summit2023.pdf" target="_blank" rel="noopener noreferrer">PDF ä¸‹è½½</a></p><p><img loading="lazy" alt="KCL Talk Cover" src="/zh-CN/assets/images/talk-cover-35673fcf2ac20420bf5c1675eacd7524.jpg" width="2484" height="1392" class="img_ev3q"></p>]]></content>
        <author>
            <name>KCL å›¢é˜Ÿ</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Meeting" term="Meeting"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[5 åˆ†é’Ÿç©è½¬ Helmfile KCL æ’ä»¶ï¼Œè½»æ¾ç®¡ç† Kubernetes Helm Charts]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-08-31-helmfile-kcl-plugin</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-08-31-helmfile-kcl-plugin"/>
        <updated>2023-08-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä»€ä¹ˆæ˜¯ KCL]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯-kcl">ä»€ä¹ˆæ˜¯ KCL<a href="#ä»€ä¹ˆæ˜¯-kcl" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€å¹¶é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®æ¯”å¦‚äº‘åŸç”Ÿ Kubernetes é…ç½®åœºæ™¯çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´ç®€å•çš„è‡ªåŠ¨åŒ–å’Œç”Ÿæ€å·¥å…·é›†æˆã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯-helmfile">ä»€ä¹ˆæ˜¯ Helmfile<a href="#ä»€ä¹ˆæ˜¯-helmfile" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>Helmfile æ˜¯ä¸€ä¸ªæ˜¯ç”¨äºç®€åŒ–å’Œç®¡ç† Helm Charts çš„å£°æ˜æ€§è§„èŒƒå’Œå·¥å…·ï¼ŒHelmfile KCL æ’ä»¶ä¸º Helmfile å·¥å…·æä¾›äº†é¢å¤–çš„åŠŸèƒ½ï¼Œä½¿å¾—åœ¨ä½¿ç”¨ Helmfile æ—¶æ›´åŠ ä¾¿æ·å’Œé«˜æ•ˆï¼Œé€šè¿‡ Helmfile KCL æ’ä»¶æ‚¨å¯ä»¥</p><ul><li>é€šè¿‡æ— ä¾µå…¥çš„ Hook æ–¹å¼åœ¨å®¢æˆ·ç«¯ç›´æ¥ç¼–è¾‘æˆ–è€…éªŒè¯ Helm Chart é…ç½®ï¼Œå°† Kubernetes é…ç½®ç®¡ç†çš„æ•°æ®éƒ¨åˆ†å’Œé€»è¾‘éƒ¨åˆ†åˆ†ç¦»ï¼Œæ— éœ€ Fork ä¸Šæ¸¸ Chart ä¿®æ”¹å†…éƒ¨é€»è¾‘ï¼Œæ¯”å¦‚<ul><li>ä¿®æ”¹èµ„æºæ ‡ç­¾/æ³¨è§£, æ³¨å…¥ Sidecar å®¹å™¨é…ç½®</li><li>ä½¿ç”¨ KCL Schema æ ¡éªŒ Kubernetes èµ„æºï¼Œå®šä¹‰è‡ªå·±çš„æŠ½è±¡æ¨¡å‹å¹¶åˆ†äº«å¤ç”¨</li></ul></li><li>ä¼˜é›…åœ°ç»´æŠ¤å¤šç¯å¢ƒã€å¤šç§Ÿæˆ·åœºæ™¯é…ç½®ï¼Œè€Œä¸æ˜¯ç®€å•åœ°å¤åˆ¶ç²˜è´´</li></ul><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å¸¦æ‚¨å¿«é€Ÿäº†è§£å’Œå…¥é—¨ Helmfile KCL æ’ä»¶ï¼Œè®©æ‚¨è½»æ¾ç®¡ç†æ‚¨çš„ Kubernetes Helm Chartsã€‚</p><p>ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•ç¤ºä¾‹è¿›è¡Œè¯¦ç»†è¯´æ˜ï¼Œä½¿ç”¨ Helmfile KCL æ’ä»¶æ— éœ€æ‚¨å®‰è£…ä¸ KCL ä»»ä½•ç›¸å…³çš„ç»„ä»¶ï¼Œåªéœ€æœ¬æœºå…·å¤‡ Helmfile å·¥å…·çš„æœ€æ–°ç‰ˆæœ¬ï¼ˆv0.156.0+ï¼‰å³å¯ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨-helmfile-kcl-æ’ä»¶">ä½¿ç”¨ Helmfile KCL æ’ä»¶<a href="#ä½¿ç”¨-helmfile-kcl-æ’ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-å·¥å…·å®‰è£…">1. å·¥å…·å®‰è£…<a href="#1-å·¥å…·å®‰è£…" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>é¦–å…ˆï¼Œç¡®ä¿æ‚¨å·²ç»å®‰è£…äº† Helmfile å®¢æˆ·ç«¯å·¥å…·ï¼Œå¯ä»¥æ ¹æ®ä¸‹é¢é“¾æ¥ä¸­çš„æ–‡æ¡£æç¤ºè¿›è¡Œå®‰è£…ã€‚</p><p><a href="https://github.com/helmfile/helmfile" target="_blank" rel="noopener noreferrer">https://github.com/helmfile/helmfile</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-åˆ›å»º-helmfile-é…ç½®æ–‡ä»¶">2. åˆ›å»º Helmfile é…ç½®æ–‡ä»¶<a href="#2-åˆ›å»º-helmfile-é…ç½®æ–‡ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨æ‚¨çš„é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º helmfile.yaml çš„æ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§ Helmfile çš„è¯­æ³•ç¼–å†™é…ç½®ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥æŒ‡å®šè¦ä½¿ç”¨çš„ Helm Chartsã€é…ç½®å€¼å’Œä»»ä½•å…¶ä»– Helmfile æ”¯æŒçš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ helmfile.yaml ä¸­ä½¿ç”¨ KCL æ’ä»¶çš„åŠŸèƒ½æ¥åŠ è½½å¯¹ Helm Chart è¿›è¡ŒåŸåœ°é…ç½®ä¿®æ”¹å’ŒéªŒè¯</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">repositories</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community.github.io/helm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">releases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">norbac</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">set</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">transformers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Use KCL Plugin to mutate or validate Kubernetes manifests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"set-annotation"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">config.kubernetes.io/function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          container:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            image: docker.io/kcllang/kustomize-kcl:v0.2.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        # ä»…é€šè¿‡ä¸€è¡Œ KCL ä»£ç ï¼Œå°±å¯å®ç°å¯¹ workload é…ç½®åŸåœ°ä¿®æ”¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        items = [resource | {if resource.kind == "Deployment": metadata.annotations: {"managed-by" = "helmfile-kcl"}} for resource in option("resource_list").items]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ä¸Šè¿°é…ç½®ä¸­ï¼Œæˆ‘ä»¬å¼•ç”¨äº† Prometheus Helm Chart, å¹¶é€šè¿‡ä¸€è¡Œ KCL ä»£ç å°±å¯ä»¥å®Œæˆ Prometheus çš„æ‰€æœ‰çš„ Deployment èµ„æºæ³¨å…¥æ ‡ç­¾ managed-by="helmfile-kcl"ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-è¿è¡Œ-helmfile-å·¥å…·">3. è¿è¡Œ Helmfile å·¥å…·<a href="#3-è¿è¡Œ-helmfile-å·¥å…·" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>ä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œæ‚¨å¯ä»¥è¿è¡Œ Helmfile å‘½ä»¤æ¥éƒ¨ç½²ã€ç®¡ç†å’Œç»´æŠ¤æ‚¨çš„ Helm Chartsï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤æˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°é…ç½®ä¸‹å‘åˆ°é›†ç¾¤ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helmfile apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­£å¸¸æƒ…å†µæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹é¢æ‰€ç¤ºçš„è¾“å‡º</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Adding repo prometheus-community https://prometheus-community.github.io/helm-charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">"prometheus-community"</span><span class="token plain"> has been added to your repositories</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æƒ³è¦æ›´å¤š">æƒ³è¦æ›´å¤š?<a href="#æƒ³è¦æ›´å¤š" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>å¯¹äºä¸Šè¿° helmfile é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å°è£…ä¸ºå¸¸ç”¨çš„é…ç½®ä¿®æ”¹é€»è¾‘å¹¶ä½¿ç”¨ï¼Œæ— éœ€ä¸æ–­é‡å¤ç¼–å†™ KCL ä»£ç å¹¶åˆ°å¤„å¤åˆ¶ç²˜è´´ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨ KCL å®˜æ–¹ Registry å·²ç»å°è£…å¥½äº†è®¸å¤šå¸¸ç”¨çš„ Kubernetes é…ç½®ç¼–è¾‘å’Œæ ¡éªŒä»£ç ç‰‡æ®µ <a href="https://github.com/orgs/kcl-lang/packages" target="_blank" rel="noopener noreferrer">https://github.com/orgs/kcl-lang/packages</a></p><p><img loading="lazy" alt="registry" src="/zh-CN/assets/images/registry-cb3a2191e72696315540cae3fee50290.png" width="1080" height="1064" class="img_ev3q"></p><p>é™¤äº†æ”¯æŒåœ¨é…ç½®æ–‡ä»¶ä¸­ä¹¦å†™ KCL ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ”¯æŒç›´æ¥å¼•ç”¨ Registry ä¸­çš„ä»£ç ç‰‡æ®µï¼Œå¦‚ä¸‹æ‰€ç¤º</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">krm.kcl.dev/version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">krm.kcl.dev/type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">documentation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Requires Ingress resources to be HTTPS only.  Ingress resources must</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      include the `kubernetes.io/ingress.allow</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">http` annotation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> set to `false`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      By default a valid TLS </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> configuration is required</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> this can be made</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      optional by setting the `tlsOptional` parameter to `true`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">More info</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//kubernetes.io/docs/concepts/services</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">networking/ingress/</span><span class="token comment" style="color:#999988;font-style:italic">#tls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Use the OCI source</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oci</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//ghcr.io/kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lang/https</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">only</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…·ä½“çš„ç¤ºä¾‹ä»£ç åœ¨<a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a></p><p>å¦‚æœæ‚¨æƒ³è´¡çŒ®æ›´å¤šçš„ KCL ä»£ç åº“ï¼Œæ¬¢è¿è”ç³»æˆ‘ä»¬å¹¶å‚é˜…æ–‡æ¡£è¿›è¡Œè´¡çŒ® <a href="https://kcl-lang.io/zh-CN/docs/user_docs/guides/package-management/share_your_pkg/" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/zh-CN/docs/user_docs/guides/package-management/share_your_pkg/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å°ç»“">å°ç»“<a href="#å°ç»“" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æœ¬æ–‡æä¾›äº†ä¸€ä¸ªå¿«é€Ÿå…¥é—¨æŒ‡å—ï¼Œå¸®åŠ©æ‚¨åœ¨ 5 åˆ†é’Ÿå†…æŒæ¡ Helmfile KCL æ’ä»¶çš„åŸºæœ¬ç”¨æ³•ã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥å¼€å§‹ä½¿ç”¨è¿™ä¸ªå¼ºå¤§çš„å·¥å…·æ¥ç®€åŒ–å’Œä¼˜åŒ–æ‚¨çš„ Kubernetes åº”ç”¨éƒ¨ç½²æµç¨‹äº†ï¼</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack ç½‘ç«™</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 è·¯çº¿è§„åˆ’</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content>
        <author>
            <name>KCL å›¢é˜Ÿ</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Biweekly-Newsletter" term="Biweekly-Newsletter"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL ç¤¾åŒºå¼€æºåŒå‘¨æŠ¥ (2023 08.10 - 08.23) | KCL v0.5.3, v0.5.4 å’Œ v0.5.5 ç‰ˆæœ¬å‘å¸ƒ]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-08-23-biweekly-newsletter</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-08-23-biweekly-newsletter"/>
        <updated>2023-08-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€å¹¶é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®æ¯”å¦‚äº‘åŸç”Ÿ Kubernetes é…ç½®åœºæ™¯çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´ç®€å•çš„è‡ªåŠ¨åŒ–å’Œç”Ÿæ€å·¥å…·é›†æˆã€‚]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="/zh-CN/assets/images/biweekly-newsletter-zh-bd4cf8c2bcc913a580e7b0e5d6691a08.png" width="1127" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€å¹¶é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®æ¯”å¦‚äº‘åŸç”Ÿ Kubernetes é…ç½®åœºæ™¯çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´ç®€å•çš„è‡ªåŠ¨åŒ–å’Œç”Ÿæ€å·¥å…·é›†æˆã€‚</p><p>æœ¬æ ç›®å°†ä¼šåŒå‘¨æ›´æ–° KCL è¯­è¨€ç¤¾åŒºæœ€æ–°åŠ¨æ€ï¼ŒåŒ…æ‹¬åŠŸèƒ½ã€å®˜ç½‘æ›´æ–°å’Œæœ€æ–°çš„ç¤¾åŒºåŠ¨æ€ç­‰ï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½åœ°äº†è§£ KCL ç¤¾åŒºï¼</p><p><strong><em>KCL å®˜ç½‘ï¼š<a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å†…å®¹æ¦‚è¿°">å†…å®¹æ¦‚è¿°<a href="#å†…å®¹æ¦‚è¿°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…è¿‡å»ä¸¤å‘¨ (2023 08.10 - 08.23) çš„æ°å‡ºå·¥ä½œï¼Œä»¥ä¸‹æ˜¯é‡ç‚¹åˆå¹¶å†…å®¹æ¦‚è¿°</p><ul><li><strong>ğŸ”§ è¯­è¨€åŠå·¥å…·é“¾æ›´æ–°</strong><ul><li>KCL æ ¼å¼åŒ–å·¥å…·æ›´æ–°<ul><li>æ”¯æŒå¯¹æœ‰è¯­æ³•é”™è¯¯çš„ä»£ç ç‰‡æ®µå’Œéƒ¨åˆ†ä»£ç ç‰‡æ®µè¿›è¡Œæ ¼å¼åŒ–</li><li>æ”¯æŒå¯¹ç¼©è¿›ä¸å¯¹çš„é…ç½®å—è¿›è¡Œè‡ªåŠ¨æ ¡æ­£</li></ul></li><li>KCL æ–‡æ¡£å·¥å…·æ›´æ–°<ul><li>æ”¯æŒå¯¼å‡ºæ–‡æ¡£ç´¢å¼•é¡µ</li></ul></li><li>KCL&nbsp;å¯¼å…¥å·¥å…·æ›´æ–°<ul><li>æ”¯æŒ Terraform Provider Schema è½¬æ¢ä¸º KCL Schema</li></ul></li><li>KCL å¯¼å‡ºå·¥å…·æ›´æ–°<ul><li>æ”¯æŒç”± KCL Schema å¯¼å‡º OpenAPI Specï¼Œæ¥å…¥ OpenAPI ç”Ÿæ€</li></ul></li><li>KCL IDE æ›´æ–°<ul><li>æ”¯æŒç¼–è¯‘ç¼“å­˜ç‰¹æ€§ï¼Œæå‡éƒ¨åˆ† IDE åŠŸèƒ½æ€§èƒ½</li><li>ä¸°å¯Œ IDE é”™è¯¯ä¿¡æ¯ï¼Œå¹¶æä¾› Import è¯­å¥å¿«é€Ÿä¿®å¤èƒ½åŠ›</li></ul></li><li>KCL åŒ…ç®¡ç†å·¥å…· KPM æ›´æ–°<ul><li>kpm push è¾“å‡ºä¿¡æ¯ä½“éªŒä¼˜åŒ–ï¼Œå¢åŠ æ¨é€ KCL ç¨‹åºåŒ…çš„é‡å¤ tag æ£€æŸ¥</li><li>ä¸º kpm push å’Œ kpm pkg å¢åŠ å‚æ•° â€”vendor å†³å®šæ˜¯å¦å°† KCL ç¨‹åºåŒ…çš„ä¸‰æ–¹åº“æ‰“åŒ…åœ¨ä¸€èµ·</li></ul></li><li>KCL è¯­è¨€æ›´æ–°<ul><li>ä¼˜åŒ– Schema è¯­ä¹‰æ£€æŸ¥å’Œè”åˆç±»å‹æ£€æŸ¥ç­‰é”™è¯¯ä¿¡æ¯</li><li>æ”¯æŒå¯¼å‡ºé…ç½®å—çš„ç±»å‹è¾“å‡º</li></ul></li></ul></li><li><strong>ğŸ„ API æ›´æ–°</strong><ul><li>KCL Schema æ¨¡å‹è§£æ&nbsp;GetSchemaType API è·å– KCL åŒ…ç›¸å…³ä¿¡æ¯å’Œ Schema å±æ€§é»˜è®¤å€¼</li></ul></li><li><strong>ğŸ“° å®˜ç½‘å’Œç”¨ä¾‹æ›´æ–°</strong><ul><li>æ–°å¢é€šè¿‡ docker.io å‘å¸ƒ KCL åŒ…ç”¨ä¾‹: <em><a href="https://github.com/kcl-lang/kpm/blob/main/docs/publish_to_docker_reg.md" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kpm/blob/main/docs/publish_to_docker_reg.md</a></em></li><li>æ–°å¢ KCL Gitlab CI é›†æˆç”¨ä¾‹: <em><a href="https://kcl-lang.io/docs/user_docs/guides/ci-integration/gitlab-ci" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/ci-integration/gitlab-ci</a></em></li><li>æ–°å¢ KCL å¯†é’¥ç®¡ç† Vault å’Œ Vals é›†æˆç”¨ä¾‹:&nbsp;<em><a href="https://kcl-lang.io/docs/user_docs/guides/secret-management/vault" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/secret-management/vault</a></em></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹åˆ«é¸£è°¢">ç‰¹åˆ«é¸£è°¢<a href="#ç‰¹åˆ«é¸£è°¢" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ä»¥ä¸‹æ’åä¸åˆ†å…ˆå</p><ul><li>æ„Ÿè°¢ @jakezhu9 å¯¹ KCL Import å·¥å…· Terraform Schema åˆ° KCL Schema è½¬æ¢çš„è´¡çŒ® ğŸ™Œ <em><a href="https://github.com/kcl-lang/kcl-go/pull/141" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-go/pull/141</a></em></li><li>æ„Ÿè°¢ @xxmao123 å’Œ @starkers å¯¹ NeoVim KCL æ’ä»¶çš„è®¨è®ºä¸è´¡çŒ® ğŸ™Œ <em><a href="https://github.com/kcl-lang/vim-kcl/pull/2" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/vim-kcl/pull/2</a></em></li><li>æ„Ÿè°¢ @starkers å¯¹ mason.nvim registry å¢åŠ  KCL çš„å®‰è£…æ”¯æŒ ğŸ™Œ <em><a href="https://github.com/mason-org/mason-registry/pull/2425" target="_blank" rel="noopener noreferrer">https://github.com/mason-org/mason-registry/pull/2425</a></em></li><li>æ„Ÿè°¢ @prahaladramji å¯¹ KCL Homebrew å®‰è£…è„šæœ¬çš„å‡çº§æ›´æ–°ä¸è´¡çŒ® ğŸ™Œ <em><a href="https://github.com/kcl-lang/homebrew-tap/pull/1" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/homebrew-tap/pull/1</a></em></li><li>æ„Ÿè°¢ @yamin-oanda ä¸º Pulumi å®˜æ–¹æä¾› KCL æ”¯æŒçš„è®¨è®º ğŸ™Œ <em><a href="https://github.com/pulumi/pulumi/discussions/13722" target="_blank" rel="noopener noreferrer">https://github.com/pulumi/pulumi/discussions/13722</a></em></li><li>æ­¤å¤–æ„Ÿè°¢ @nkabir, @mihaigalos, @prahaladramji, @yamin-oanda, @magick93, @MirKml ç­‰åœ¨è¿‡å»ä¸¤å‘¨ä½¿ç”¨ KCL è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µåé¦ˆå’Œè®¨è®º&nbsp;ğŸ™Œ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç²¾é€‰æ›´æ–°">ç²¾é€‰æ›´æ–°<a href="#ç²¾é€‰æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-import-å·¥å…·æ›´æ–°">KCL Import å·¥å…·æ›´æ–°<a href="#kcl-import-å·¥å…·æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>KCL Import å·¥å…·åœ¨ Protobuf, JsonSchema OpenAPI æ¨¡å‹å’Œ Go ç»“æ„ä½“è½¬æ¢ä¸º KCL Schema çš„åŸºç¡€ä¸Šï¼Œæ–°å¢ Terraform Provider Schema åˆ° KCL Schema çš„è½¬æ¢æ”¯æŒï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹çš„ Terraform Provider Json (é€šè¿‡ <code>terraform providers schema -json &gt; provider.json</code> å‘½ä»¤è·å¾—ï¼Œè¯¦æƒ…è¯·å‚è€ƒ <a href="https://developer.hashicorp.com/terraform/cli/commands/providers/schema" target="_blank" rel="noopener noreferrer">https://developer.hashicorp.com/terraform/cli/commands/providers/schema</a>)</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"format_version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.2"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"provider_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"registry.terraform.io/aliyun/alicloud"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"provider"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"block_types"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"resource_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"alicloud_db_instance"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"db_instance_type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"engine"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"required"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"security_group_ids"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"set"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"security_ips"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"set"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"tags"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"map"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token property" style="color:#36acaa">"block_types"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"alicloud_config_rule"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token property" style="color:#36acaa">"block"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token property" style="color:#36acaa">"attributes"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"compliance"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"list"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        </span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token property" style="color:#36acaa">"compliance_type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token property" style="color:#36acaa">"count"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"number"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token property" style="color:#36acaa">"resource_types_scope"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"list"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"description_kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"plain"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"optional"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token property" style="color:#36acaa">"computed"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"data_source_schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç»è¿‡ KCL Import å·¥å…·å¯ä»¥è¾“å‡ºä¸ºå¦‚ä¸‹ KCL ä»£ç </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">This file was generated by the KCL auto-gen tool. DO NOT EDIT.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Editing this file might prove futile when you re-run the KCL auto-gen generate command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema AlicloudConfigRule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    AlicloudConfigRule</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    compliance: [ComplianceObject], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    resource_types_scope: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compliance?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ComplianceObject</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource_types_scope?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema ComplianceObject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ComplianceObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    compliance_type: str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    count: int, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compliance_type?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema AlicloudDbInstance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    AlicloudDbInstance</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    db_instance_type: str, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    engine: str, required</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    security_group_ids: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    security_ips: [str], optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    tags: {str:str}, optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db_instance_type?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    engine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    security_group_ids?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    security_ips?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isunique</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">security_group_ids</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isunique</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">security_ips</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-vault-é›†æˆ">KCL Vault é›†æˆ<a href="#kcl-vault-é›†æˆ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>ä»…éœ€ä¸‰æ­¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Vault æ¥å­˜å‚¨å¹¶ç®¡ç†æ•æ„Ÿä¿¡æ¯å¹¶åœ¨ KCL ä¸­ä½¿ç”¨ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å®‰è£…å¹¶ä½¿ç”¨ Vault å­˜å‚¨ <code>foo</code> å’Œ <code>bar</code> ä¿¡æ¯</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vault kv put secret/foo </span><span class="token assign-left variable" style="color:#36acaa">foo</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vault kv put secret/bar </span><span class="token assign-left variable" style="color:#36acaa">bar</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åç¼–å†™å¦‚ä¸‹ KCL ä»£ç  (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"secret-store"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"vault"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Valid format:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#  "ref+vault://PATH/TO/KV_BACKEND#/KEY"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"foo"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ref+vault://secret/foo#/foo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"bar"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ref+vault://secret/bar#/bar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"${metadata.name}:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æœ€åå¯ä»¥é€šè¿‡ Vals å‘½ä»¤è¡Œå·¥å…·è·å¾—è§£å¯†åçš„é…ç½®</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> vals </span><span class="token builtin class-name">eval</span><span class="token plain"> -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šè¯¦æƒ…å’Œç”¨ä¾‹å¯ä»¥å‚è€ƒ <a href="https://kcl-lang.io/docs/user_docs/guides/secret-management/vault" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/user_docs/guides/secret-management/vault</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºåŠ¨æ€">ç¤¾åŒºåŠ¨æ€<a href="#ç¤¾åŒºåŠ¨æ€" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>ğŸ‰ æ­å–œæ¥è‡ªåä¸­ç§‘æŠ€å¤§å­¦çš„æœ±ä¿Šæ˜ŸåŒå­¦æˆåŠŸé€šè¿‡ Gitlink ç¼–ç¨‹å¤ä»¤è¥ (GLCC) ä¸­æœŸè€ƒæ ¸å¹¶å‡ºè‰²åœ°å®Œæˆäº† KCL Import å·¥å…· Jsonschema å’Œ Terraform Provider Schema ä¸ KCL Schema è½¬æ¢çš„éƒ¨åˆ†ï¼Œåç»­ç¤¾åŒºå°†ä¸ºå…¶æˆäºˆ KCL ç¤¾åŒº Maintainer è§’è‰²</li><li>ğŸ’» KCL å‚åŠ  CNCF äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šåº”ç”¨äº¤ä»˜ TAG ç¤¾åŒºä¼šè®®å¹¶ä½œé¡¹ç›®æ±‡æŠ¥</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>â¤ï¸ æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·å’Œç¤¾åŒºå°ä¼™ä¼´åœ¨ç¤¾åŒºä¸­æå‡ºçš„å®è´µåé¦ˆä¸å»ºè®®ã€‚åç»­æˆ‘ä»¬ä¼šæ’°å†™æ›´å¤š KCL v0.5.x æ–°ç‰ˆæœ¬åŠŸèƒ½è§£è¯»ç³»åˆ—æ–‡ç« ï¼Œæ•¬è¯·æœŸå¾…!</p><p>æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack ç½‘ç«™</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 è·¯çº¿è§„åˆ’</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li></ul>]]></content>
        <author>
            <name>KCL å›¢é˜Ÿ</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Biweekly-Newsletter" term="Biweekly-Newsletter"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL ç¤¾åŒºå¼€æºåŒå‘¨æŠ¥ (2023 07.26 - 08.09) | KCL 0.5.1 å’Œ 0.5.2 ç‰ˆæœ¬æ­£å¼å‘å¸ƒ]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-08-09-biweekly-newsletter</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-08-09-biweekly-newsletter"/>
        <updated>2023-08-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€å¹¶é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®æ¯”å¦‚äº‘åŸç”Ÿ Kubernetes é…ç½®åœºæ™¯çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´ç®€å•çš„è‡ªåŠ¨åŒ–å’Œç”Ÿæ€å·¥å…·é›†æˆã€‚]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="/zh-CN/assets/images/biweekly-newsletter-zh-bd4cf8c2bcc913a580e7b0e5d6691a08.png" width="1127" height="435" class="img_ev3q"></p><p><a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€å¹¶é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®æ¯”å¦‚äº‘åŸç”Ÿ Kubernetes é…ç½®åœºæ™¯çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´ç®€å•çš„è‡ªåŠ¨åŒ–å’Œç”Ÿæ€å·¥å…·é›†æˆã€‚</p><p>æœ¬æ ç›®å°†ä¼šåŒå‘¨æ›´æ–° KCL è¯­è¨€ç¤¾åŒºæœ€æ–°åŠ¨æ€ï¼ŒåŒ…æ‹¬åŠŸèƒ½ã€å®˜ç½‘æ›´æ–°å’Œæœ€æ–°çš„ç¤¾åŒºåŠ¨æ€ç­‰ï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½åœ°äº†è§£ KCL ç¤¾åŒºï¼</p><p><strong><em>KCL å®˜ç½‘ï¼š<a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">https://kcl-lang.io</a></em></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å†…å®¹æ¦‚è¿°">å†…å®¹æ¦‚è¿°<a href="#å†…å®¹æ¦‚è¿°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è¿‡å»ä¸¤å‘¨ (2023 07.26 - 08.09)ï¼ŒKCL æ‰€æœ‰é¡¹ç›®ä¸­æ€»è®¡æœ‰&nbsp;<strong>34</strong>&nbsp;ä¸ª PR è¢«åˆå¹¶ï¼Œæ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„æ°å‡ºå·¥ä½œï¼Œä»¥ä¸‹æ˜¯é‡ç‚¹åˆå¹¶å†…å®¹æ¦‚è¿°</p><ul><li><strong>ğŸ”§ è¯­è¨€åŠå·¥å…·é“¾æ›´æ–°</strong><ul><li>KCL Doc æ–‡æ¡£å·¥å…·æ–°å¢ Markdown æ–‡æ¡£å¯¼å‡ºæ”¯æŒ</li><li>KCL&nbsp;Import å¯¼å…¥å·¥å…·æ›´æ–° - æ”¯æŒ JsonSchema è½¬æ¢ä¸º KCL Schema</li><li>KCL åŒ…ç®¡ç†å·¥å…· KPM æ”¯æŒåœ¨ kcl.mod ä¸­è®¾ç½®ç¼–è¯‘å‚æ•°ï¼Œä¼˜åŒ–å‘½ä»¤è¡Œæç¤ºä¿¡æ¯</li><li>KCL IDE æ’ä»¶ä¼˜åŒ–è¡¥å…¨ã€è·³è½¬å’Œæ‚¬åœæ–‡æ¡£æ˜¾ç¤ºç­‰åŠŸèƒ½ï¼Œå¹¶æ”¯æŒ NeoVim ç¼–è¾‘å™¨</li></ul></li><li><strong>ğŸ„ API æ›´æ–°</strong><ul><li>KCL Schema æ¨¡å‹è§£æ&nbsp;GetSchemaType API æ–°å¢è£…é¥°å™¨ä¿¡æ¯å’ŒåŒ…ä¿¡æ¯å­—æ®µ</li></ul></li><li><strong>ğŸ  ç¤¾åŒºæ‰©å±•æ›´æ–°</strong><ul><li>Helmfile KCL æ’ä»¶æ”¯æŒ</li></ul></li><li><strong>ğŸ“° å®˜ç½‘å’Œç”¨ä¾‹æ›´æ–°</strong><ul><li>KCL å®˜ç½‘æ–°å¢&nbsp;v0.5.x&nbsp;æ–‡æ¡£ç‰ˆæœ¬é€‰æ‹©</li><li>æ–°å¢ KCL ç”¨ä¾‹ä»“åº“:&nbsp;<em><a href="https://github.com/kcl-lang/examples" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/examples</a></em>  </li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç‰¹åˆ«é¸£è°¢">ç‰¹åˆ«é¸£è°¢<a href="#ç‰¹åˆ«é¸£è°¢" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>æ„Ÿè°¢ @jakezhu9 å¯¹ KCL Import å·¥å…· JsonSchema è½¬æ¢çš„è´¡çŒ® ğŸ™Œ</li><li>æ„Ÿè°¢ @xxmao123 å¯¹ Vim å’Œ NeoVim KCL æ’ä»¶çš„è´¡çŒ® ğŸ™Œ</li><li>æ„Ÿè°¢ @yyxhero åœ¨ Helmfile KCL æ’ä»¶æ”¯æŒä¸­æä¾›çš„å¸®åŠ©ä¸æ”¯æŒ ğŸ™Œ</li><li>æ„Ÿè°¢ @nkabir, @mihaigalos, @prahaladramji, @dhhopen ç­‰åœ¨ä½¿ç”¨ KCL è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µå»ºè®®å’Œè®¨è®º&nbsp;ğŸ™Œ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç²¾é€‰æ›´æ–°">ç²¾é€‰æ›´æ–°<a href="#ç²¾é€‰æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-import-å·¥å…·æ›´æ–°">KCL Import å·¥å…·æ›´æ–°<a href="#kcl-import-å·¥å…·æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>KCL Import å·¥å…·åœ¨ Protobuf, OpenAPI æ¨¡å‹å’Œ Go ç»“æ„ä½“è½¬æ¢ä¸º KCL Schema çš„åŸºç¡€ä¸Šï¼Œæ–°å¢ JsonSchema åˆ° KCL Schema çš„è½¬æ¢æ”¯æŒï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹çš„ JsonSchema</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;</span><span class="token property" style="color:#36acaa">"$schema"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"http://json-schema.org/draft-07/schema#"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;</span><span class="token property" style="color:#36acaa">"$id"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"https://example.com/schemas/customer.json"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;</span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;</span><span class="token property" style="color:#36acaa">"$defs"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"address"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"city"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"state"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"$ref"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"#/$defs/state"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"state"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"object"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;</span><span class="token property" style="color:#36acaa">"properties"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"name"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"string"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"address"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;</span><span class="token property" style="color:#36acaa">"$ref"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"#/$defs/address"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç»è¿‡ KCL Import å·¥å…·å¯ä»¥è¾“å‡ºä¸ºå¦‚ä¸‹ KCL ä»£ç </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema&nbsp;Customer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Customer</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;str,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;address:&nbsp;Address,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;name?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;address?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;Address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema&nbsp;Address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Address</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;city:&nbsp;str,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;state:&nbsp;State,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;city?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;state?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema&nbsp;State</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;State</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;Attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;str,&nbsp;optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&nbsp;&nbsp;&nbsp;&nbsp;"""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;name?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token builtin">str</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="helmfile-kcl-æ’ä»¶">Helmfile KCL æ’ä»¶<a href="#helmfile-kcl-æ’ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>Helmfile æ˜¯ç”¨äºéƒ¨ç½² Helm Chart çš„å£°æ˜æ€§è§„èŒƒå’Œå·¥å…·ï¼Œé€šè¿‡ Helmfile KCL æ’ä»¶æ‚¨å¯ä»¥</p><ul><li>é€šè¿‡æ— ä¾µå…¥çš„ Hook æ–¹å¼ç¼–è¾‘æˆ–è€…éªŒè¯ Helm Chart é…ç½®ï¼Œå°† Kubernetes é…ç½®ç®¡ç†çš„æ•°æ®éƒ¨åˆ†å’Œé€»è¾‘éƒ¨åˆ†åˆ†ç¦»<ul><li>ä¿®æ”¹èµ„æºæ ‡ç­¾/æ³¨è§£, æ³¨å…¥ Sidecar å®¹å™¨é…ç½®</li><li>ä½¿ç”¨ KCL Schema æ ¡éªŒèµ„æºï¼Œå®šä¹‰è‡ªå·±çš„æŠ½è±¡æ¨¡å‹å¹¶åˆ†äº«å¤ç”¨</li></ul></li><li>ä¼˜é›…åœ°ç»´æŠ¤å¤šç¯å¢ƒã€å¤šç§Ÿæˆ·åœºæ™¯é…ç½®ï¼Œè€Œä¸æ˜¯ç®€å•åœ°å¤åˆ¶ç²˜è´´</li></ul><p>ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•ç¤ºä¾‹è¿›è¡Œè¯¦ç»†è¯´æ˜ï¼Œä½¿ç”¨ Helmfile KCL æ’ä»¶æ— éœ€æ‚¨å®‰è£…ä¸ KCL ä»»ä½•ç›¸å…³çš„ç»„ä»¶ï¼Œåªéœ€æœ¬æœºå…·å¤‡ Helmfile å·¥å…·çš„æœ€æ–°ç‰ˆæœ¬å³å¯ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤º&nbsp;<code>helmfile.yaml</code>&nbsp;æ–‡ä»¶</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">repositories</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community.github.io/helm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">releases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">norbac</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;prometheus</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">community/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;set</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;rbac.create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;transformers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token comment" style="color:#999988;font-style:italic">#&nbsp;Use&nbsp;KCL&nbsp;Plugin&nbsp;to&nbsp;mutate&nbsp;or&nbsp;validate&nbsp;Kubernetes&nbsp;manifests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&nbsp;apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token string" style="color:#e3116c">"set-annotation"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config.kubernetes.io/function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;docker.io/kcllang/kustomize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v0.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">resource&nbsp;</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">if&nbsp;resource.kind&nbsp;==&nbsp;"Deployment"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;metadata.annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">&nbsp;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">"managed</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">by"&nbsp;=&nbsp;"helmfile</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&nbsp;for&nbsp;resource&nbsp;in&nbsp;option("resource_list").items</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ä¸Šè¿°é…ç½®ä¸­ï¼Œæˆ‘ä»¬å¼•ç”¨äº† Prometheus Helm Chart, å¹¶é€šè¿‡ä¸€è¡Œ KCL ä»£ç å°±å¯ä»¥å®Œæˆ Prometheus çš„æ‰€æœ‰çš„ Deployment èµ„æºæ³¨å…¥æ ‡ç­¾&nbsp;<code>managed-by="helmfile-kcl"</code>ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤æˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°é…ç½®ä¸‹å‘åˆ°é›†ç¾¤</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helmfile&nbsp;apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šç”¨ä¾‹å¯ä»¥å‚è€ƒ<a href="https://github.com/kcl-lang/krm-kcl" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>â¤ï¸ æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·å’Œç¤¾åŒºå°ä¼™ä¼´åœ¨ç¤¾åŒºä¸­æå‡ºçš„å®è´µåé¦ˆä¸å»ºè®®ã€‚åç»­æˆ‘ä»¬ä¼šæ’°å†™æ›´å¤š KCL v0.5.x æ–°ç‰ˆæœ¬åŠŸèƒ½è§£è¯»ç³»åˆ—æ–‡ç« ï¼Œæ•¬è¯·æœŸå¾…!</p><p>æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></p></li><li><p><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">KusionStack ç½‘ç«™</a></p></li><li><p><a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 è·¯çº¿è§„åˆ’</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">KCL Github Issues</a></p></li><li><p><a href="https://github.com/orgs/kcl-lang/discussions" target="_blank" rel="noopener noreferrer">KCL Github Discussion</a></p></li><li><p><a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL Community</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/releases/tag/v0.5.0" target="_blank" rel="noopener noreferrer">KCL v0.5.0 Release</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/releases/tag/v0.5.1" target="_blank" rel="noopener noreferrer">KCL v0.5.1 Release</a></p></li><li><p><a href="https://github.com/kcl-lang/kcl/releases/tag/v0.5.2" target="_blank" rel="noopener noreferrer">KCL v0.5.2&nbsp;Release</a></p></li></ul>]]></content>
        <author>
            <name>KCL å›¢é˜Ÿ</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Biweekly-Newsletter" term="Biweekly-Newsletter"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä½¿ç”¨ Githubã€Argo CD å’Œ KCL å®ç° GitOps ä»¥ç®€åŒ– DevOps]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-07-31-kcl-github-argocd-gitops</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-07-31-kcl-github-argocd-gitops"/>
        <updated>2023-07-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[å‰è¨€]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼ŒGitOps ä½œä¸ºç®¡ç†åŸºç¡€æ¶æ„å’Œåº”ç”¨ç¨‹åºçš„å•ä¸€çœŸç›¸è‡ªåŠ¨åŒ–çš„æ–¹æ³•å¯ä»¥æé«˜æ•ˆç‡å’Œå‡å°‘äººä¸ºé”™è¯¯æ–¹é¢å‘æŒ¥ç€å…³é”®ä½œç”¨ï¼Œç›®å‰å¹¿æ³›æµè¡Œäºäº‘åŸç”Ÿç­‰é¢†åŸŸã€‚ä½†æ˜¯å…³äº GitOps ç›¸å…³çš„å®è·µç¤ºä¾‹å¹¶ä¸å¤šè§ï¼Œæœ¬æ–‡å°†ä»¥ KCLã€Githubã€ArgoCD å’Œ GitOps ä½œä¸ºä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹æ¥è¯¦ç»†ä»‹ç»ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©å¤§å®¶å®è·µè‡ªå·±çš„ GitOps è‡ªåŠ¨åŒ–æµç¨‹å¹¶ç®€åŒ– DevOpsã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯-gitops">ä»€ä¹ˆæ˜¯ GitOps<a href="#ä»€ä¹ˆæ˜¯-gitops" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>GitOps æ˜¯ä¸€ç§å®ç°æŒç»­äº¤ä»˜çš„ç°ä»£æ–¹å¼ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯æ‹¥æœ‰ä¸€ä¸ªåŒ…å«ç¯å¢ƒå’Œåº”ç”¨ç¨‹åºé…ç½®çš„ Git å­˜å‚¨åº“ã€‚é€šè¿‡æ›´æ”¹åº”ç”¨å­˜å‚¨åº“ä¸­çš„æ–‡ä»¶ï¼Œå¯ä»¥è‡ªåŠ¨éƒ¨ç½²åº”ç”¨ç¨‹åºã€‚åº”ç”¨ GitOps çš„å¥½å¤„åŒ…æ‹¬ï¼š</p><ul><li>æé«˜ç”Ÿäº§åŠ›ï¼ŒæŒç»­äº¤ä»˜å¯ä»¥åŠ å¿«éƒ¨ç½²æ—¶é—´ã€‚</li><li>é™ä½å¼€å‘äººå‘˜éƒ¨ç½²çš„éšœç¢ã€‚é€šè¿‡æ¨é€ä»£ç è€Œä¸æ˜¯å®¹å™¨é…ç½®ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨ä¸çŸ¥é“å…¶å†…éƒ¨å®ç°çš„æƒ…å†µä¸‹è½»æ¾éƒ¨ç½² Kubernetes é›†ç¾¤å’Œåº”ç”¨ã€‚</li><li>è¿½è¸ªå˜æ›´è®°å½•ã€‚ä½¿ç”¨ Git ç®¡ç†é…ç½®ä½¿æ¯ä¸€é¡¹æ›´æ”¹éƒ½å…·æœ‰å¯è·Ÿè¸ªæ€§ï¼Œä»è€Œå¢å¼ºå®¡è®¡è·Ÿè¸ªã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å°†-kcl-ä¸-gitops-ä¸€èµ·ä½¿ç”¨">å°† KCL ä¸ GitOps ä¸€èµ·ä½¿ç”¨<a href="#å°†-kcl-ä¸-gitops-ä¸€èµ·ä½¿ç”¨" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>å°† KCL ä¸ GitOps å·¥å…·ä¸€èµ·ä½¿ç”¨å…·æœ‰å¦‚ä¸‹å¥½å¤„:</p><ul><li>é€šè¿‡ KCL è¯­è¨€çš„æŠ½è±¡èƒ½åŠ›å’Œå¯ç¼–ç¨‹èƒ½åŠ›å¯ä»¥å¸®åŠ©æˆ‘ä»¬<strong>ç®€åŒ–å¤æ‚çš„ Kubernetes éƒ¨ç½²é…ç½®æ–‡ä»¶</strong>ï¼Œé™ä½æ‰‹åŠ¨ç¼–å†™ YAML æ–‡ä»¶çš„é”™è¯¯ç‡ï¼Œå°†é…ç½®çº¦æŸæ£€æŸ¥æ§åˆ¶åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–å†™å³æ„ŸçŸ¥é”™è¯¯ï¼›åŒæ—¶å¯ä»¥æ¶ˆé™¤å¤šä½™çš„é…ç½®æ¨¡ç‰ˆï¼Œæå‡å¤šç¯å¢ƒå¤šç§Ÿæˆ·çš„é…ç½®æ‰©å±•èƒ½åŠ›ï¼Œæé«˜é…ç½®çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li><li>KCL å…è®¸å¼€å‘äººå‘˜ä»¥å£°æ˜å¼çš„æ–¹å¼å®šä¹‰åº”ç”¨ç¨‹åºæ‰€éœ€çš„èµ„æºï¼Œé€šè¿‡å°† KCL å’Œ ArgoCD ç›¸ç»“åˆå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å®ç°<strong>åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰</strong>ï¼Œæé«˜éƒ¨ç½²æ•ˆç‡ï¼Œç®€åŒ–åº”ç”¨ç¨‹åºçš„é…ç½®ç®¡ç†ã€‚</li><li>ArgoCD å¯ä»¥<strong>è‡ªåŠ¨åŒ–</strong>åœ°å®ç°åº”ç”¨ç¨‹åºçš„è¿ç»­éƒ¨ç½²ï¼Œå¹¶æä¾›å‹å¥½çš„ KCL é…ç½®<strong>å¯è§†åŒ–ç®¡ç†ç•Œé¢</strong>ã€‚</li></ul><p>ä½¿ç”¨ GitOpsï¼Œå¼€å‘äººå‘˜å’Œè¿ç»´å›¢é˜Ÿå¯ä»¥é€šè¿‡åˆ†åˆ«ä¿®æ”¹åº”ç”¨å’Œé…ç½®ä»£ç æ¥ç®¡ç†åº”ç”¨ç¨‹åºçš„éƒ¨ç½²ï¼ŒGitOps å·¥å…·é“¾å°†è‡ªåŠ¨åŒæ­¥å¯¹é…ç½®çš„æ›´æ”¹ï¼Œä»è€Œå®ç°æŒç»­éƒ¨ç½²å¹¶ç¡®ä¿ä¸€è‡´æ€§ã€‚å¦‚æœå‡ºç°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ GitOps å·¥å…·é“¾å¿«é€Ÿå›æ»šã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å·¥ä½œæµç¨‹">å·¥ä½œæµç¨‹<a href="#å·¥ä½œæµç¨‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª Python Flask åº”ç”¨å’Œ Github Actions ä½œä¸º CI ç¤ºä¾‹ï¼Œä½¿ç”¨ ArgoCD ä½œä¸º CD ç¤ºä¾‹ï¼Œä½¿ç”¨ KCL å®šä¹‰éœ€è¦éƒ¨ç½²çš„ Kubernetes èµ„æº</p><blockquote><p>æ³¨æ„ï¼šä½ å¯ä»¥åœ¨æ­¤æ–¹æ¡ˆä¸­ä½¿ç”¨ä»»ä½•å®¹å™¨åŒ–åº”ç”¨ä»¥åŠä¸åŒçš„ CI å’Œ CD ç³»ç»Ÿå¦‚ Gitlab CIï¼ŒJenkins CIï¼ŒFluxCD ç­‰ï¼Œåç»­æˆ‘ä»¬ä¼šå‡ºæ›´å¤šçš„ç¤ºä¾‹æ–‡ç« æ¥è¿›è¡Œè¯´æ˜</p></blockquote><p>æˆ‘ä»¬å°† Python Flask åº”ç”¨ä»£ç å’Œé…ç½®ä»£ç åˆ†æˆä¸¤ä¸ªä»“åº“ï¼Œ<em>ä»¥å®ç°ä¸åŒè§’è‰²å¦‚å¼€å‘äººå‘˜å’Œè¿ç»´å›¢é˜Ÿçš„å…³æ³¨ç‚¹åˆ†ç¦»</em></p><ul><li>ä¸šåŠ¡ä»£ç ä»“åº“: <a href="https://github.com/kcl-lang/flask-demo" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/flask-demo</a></li><li>é…ç½®æ¸…å•ä»“åº“: <a href="https://github.com/kcl-lang/flask-demo-kcl-manifests" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/flask-demo-kcl-manifests</a></li></ul><p>æ•´ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><p><img loading="lazy" alt="workflow" src="/zh-CN/assets/images/workflow-e95f2993e77762a23be96013944a68d7.jpg" width="1048" height="624" class="img_ev3q"></p><ol><li>ä» Github æ‹‰å–åº”ç”¨ä»£ç </li><li>åº”ç”¨ä»£ç å¼€å‘å¹¶æäº¤åˆ°æäº¤åˆ° GitHub å­˜å‚¨åº“</li><li>è§¦å‘ GitHub Actions å¯¹åº”ç”¨ä»£ç è¿›è¡Œç¼–è¯‘ï¼Œç”Ÿæˆå®¹å™¨é•œåƒï¼Œå¹¶å°†å®¹å™¨é•œåƒæ¨é€åˆ° Docker Hub å®¹å™¨æ³¨å†Œè¡¨</li><li>è§¦å‘ GitHub Actions æ ¹æ® docker.io å®¹å™¨æ³¨å†Œè¡¨ä¸­å®¹å™¨é•œåƒçš„ç‰ˆæœ¬å·å¹¶åŒæ­¥æ›´æ–° KCL å®šä¹‰çš„ Kubernetes æ¸…å•éƒ¨ç½²æ–‡ä»¶</li><li>ArgoCD è·å– KCL å®šä¹‰çš„ Kubernetes æ¸…å•æ›´æ”¹å¹¶æ›´æ–°éƒ¨ç½²è‡³ Kubernetes é›†ç¾¤</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…·ä½“æ­¥éª¤">å…·ä½“æ­¥éª¤<a href="#å…·ä½“æ­¥éª¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="0å…ˆå†³æ¡ä»¶">0.å…ˆå†³æ¡ä»¶<a href="#0å…ˆå†³æ¡ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><ul><li>ç†Ÿæ‚‰ Unix/Linux çš„åŸºæœ¬å‘½ä»¤</li><li>ç†Ÿæ‚‰ Git ä»¥åŠ Github Action ä½¿ç”¨</li><li>äº†è§£ Kubernetes åŸºæœ¬çŸ¥è¯†</li><li>äº†è§£ ArgoCD ç­‰å·¥å…·</li><li>äº†è§£ KCL åŸºæœ¬çŸ¥è¯†</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-é…ç½®-kubernetes-é›†ç¾¤">1. é…ç½® Kubernetes é›†ç¾¤<a href="#1-é…ç½®-kubernetes-é›†ç¾¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><ul><li>å®‰è£… <a href="https://github.com/k3d-io/k3d" target="_blank" rel="noopener noreferrer">K3d</a> å¹¶åˆ›å»ºä¸€ä¸ªé›†ç¾¤</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">k3d cluster create mycluster</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ³¨æ„ï¼šä½ å¯ä»¥åœ¨æ­¤æ–¹æ¡ˆä¸­ä½¿ç”¨å…¶ä»–æ–¹å¼åˆ›å»ºæ‚¨è‡ªå·±çš„ Kubernetes é›†ç¾¤ï¼Œå¦‚ kind, minikube ç­‰ã€‚</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-é…ç½®-argocd">2. é…ç½® ArgoCD<a href="#2-é…ç½®-argocd" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®-argocd-æ§åˆ¶å™¨">é…ç½® ArgoCD æ§åˆ¶å™¨<a href="#é…ç½®-argocd-æ§åˆ¶å™¨" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><blockquote><p>æ³¨æ„ï¼šä½ å¯ä»¥åœ¨æ­¤æ–¹æ¡ˆä¸­ä½¿ç”¨å…¶ä»–æ–¹å¼åˆ›å»ºæ‚¨è‡ªå·±çš„ Kubernetes é›†ç¾¤ï¼Œå¦‚ kind, minikube ç­‰ã€‚</p></blockquote><ul><li>å®‰è£… <a href="https://github.com/argoproj/argo-cd/releases/" target="_blank" rel="noopener noreferrer">ArgoCD</a>.</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create namespace argocd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>å®‰è£… ArgoCD KCL æ’ä»¶</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/kcl-lang.io.git/ </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> ./kcl-lang.io/examples/gitops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f ./install/kcl-cmp.yaml </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kubectl -n argocd patch deploy/argocd-repo-server -p </span><span class="token string" style="color:#e3116c">"</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">cat</span><span class="token string variable" style="color:#36acaa"> ./install/patch-argocd-repo-server.yaml</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>é€šè¿‡ <code>kubectl get</code> å‘½ä»¤æŸ¥çœ‹ argocd æ§åˆ¶å™¨å®¹å™¨æ˜¯å¦åˆå§‹åŒ–å®Œæˆè¿›å…¥è¿è¡Œï¼ˆRunningï¼‰çŠ¶æ€ã€‚</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pod -n argocd -l app.kubernetes.io/name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">argocd-repo-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ‰“å¼€ ArgoCD UI</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl port-forward svc/argocd-server -n argocd </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">:443</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æ‰“å¼€æµè§ˆå™¨ <code>https://localhost:8080</code> è¾“å…¥ç”¨æˆ·å "admin" å’Œå¯†ç ç™»é™† ArgoCD UIï¼Œå¯†ç å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¾—åˆ°:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n argocd get secret argocd-initial-admin-secret -o </span><span class="token assign-left variable" style="color:#36acaa">jsonpath</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"{.data.password}"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> base64 -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®-argocd-å®¢æˆ·ç«¯å·¥å…·">é…ç½® ArgoCD å®¢æˆ·ç«¯å·¥å…·<a href="#é…ç½®-argocd-å®¢æˆ·ç«¯å·¥å…·" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><ul><li><p>å®‰è£… <a href="https://github.com/argoproj/argo-cd/releases" target="_blank" rel="noopener noreferrer">ArgoCD å®¢æˆ·ç«¯å·¥å…·</a></p></li><li><p>ä½¿ç”¨ç”¨æˆ·å "admin" å’Œåˆšæ‰å¾—åˆ°çš„å¯†ç ç™»é™†</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">argocd login localhost:8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€šè¿‡å¦‚ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ª ArgoCD KCL åº”ç”¨</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">argocd app create flaskdemo </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--repo https://github.com/kcl-lang/flask-demo-kcl-manifests </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--path </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--dest-namespace default </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--dest-server https://kubernetes.default.svc </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--config-management-plugin kcl-v1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœåˆ›å»ºæˆåŠŸï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡º:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">application </span><span class="token string" style="color:#e3116c">'flaskdemo'</span><span class="token plain"> created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ç§æœ‰å­˜å‚¨åº“ï¼Œåˆ™åœ¨æ‰§è¡Œ create å‘½ä»¤ä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨ç§é’¥å‡­æ®é…ç½®ä¸“ç”¨ç§æœ‰å­˜å‚¨åº“è®¿é—®æƒé™ã€‚è¯·å‚é˜…<a href="https://argo-cd.readthedocs.io/en/stable/user-guide/private-repositories/" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a>ä»¥è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</p></blockquote><p>é€šè¿‡ ArgoCD UIï¼Œæ‚¨å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„åº”ç”¨ç¨‹åºå°šæœªåŒæ­¥ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨è¿›è¡Œé…ç½®åŒæ­¥æˆ–è®¾ç½®ä¸ºè‡ªåŠ¨åŒæ­¥ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/argocd-kcl-app-6375cd6479ce5c6c2af2786fd331afe0.jpg" width="2128" height="1008" class="img_ev3q"></p><p>æœ‰å…³åŒæ­¥ç­–ç•¥çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥è¯·å‚é˜…<a href="https://argo-cd.readthedocs.io/en/stable/user-guide/sync-options/" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a></p><p><img loading="lazy" src="/zh-CN/assets/images/argocd-kcl-app-dashboard-2bce178f2be48ed46cee799d02e44b36.jpg" width="3328" height="1132" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-è·å¾—ä¸šåŠ¡ä»£ç ">3. è·å¾—ä¸šåŠ¡ä»£ç <a href="#3-è·å¾—ä¸šåŠ¡ä»£ç " class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/flask-demo.git/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> flask-demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ Python ç¼–å†™çš„ Web åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åº”ç”¨ç›®å½•çš„ <code>Dockerfile</code> æ¥ç”Ÿæˆè¿™ä¸ªåº”ç”¨çš„å®¹å™¨é•œåƒï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡ Github CI è‡ªåŠ¨æ„å»º <code>flask_demo</code> é•œåƒï¼ŒCI é…ç½®å¦‚ä¸‹</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># This is a basic workflow to help you get started with Actions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Controls when the workflow will run</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Triggers the workflow on push or pull request events but only for the main branch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> main </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> main </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Allows you to run this workflow manually from the Actions tab</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">workflow_dispatch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># This workflow contains a single job called "build"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># The type of runner that the job will run on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Steps represent a sequence of tasks that will be executed as part of the job</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Docker Login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/login</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@v1.10.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DOCKER_USERNAME </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DOCKER_PASSWORD </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">logout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Runs a set of commands using the runners shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          make image</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          docker tag flask_demo:latest ${{ secrets.DOCKER_USERNAME }}/flask_demo:${{ github.sha }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          docker push ${{ secrets.DOCKER_USERNAME }}/flask_demo:${{ github.sha }}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Trigger KCL manifest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Trigger CI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InformaticsMatters/trigger</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ci</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@1.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-repository</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-ref</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> refs/heads/main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kcl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-user-token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DEPLOY_ACCESS_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ci-inputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.DOCKER_USERNAME </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sha</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tag=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.sha </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬éœ€è¦æºç ä»“åº“çš„å·¥ä½œæµè‡ªåŠ¨è§¦å‘éƒ¨ç½²æ¸…å•ä»“åº“ä¸­çš„å·¥ä½œæµï¼Œæ­¤æ—¶éœ€è¦åˆ›å»ºå…·æœ‰ Github CI æ“ä½œæƒé™çš„ <code>secrets.DEPLOY_ACCESS_TOKEN</code> ä»¥åŠ Docker Hub é•œåƒæ¨é€çš„è´¦å·ä¿¡æ¯ <code>secrets.DOCKER_USERNAME</code> å’Œ <code>secrets.DOCKER_PASSWORD</code>, è¿™äº›å¯ä»¥åœ¨ Github ä»“åº“çš„ <code>Secrets and variables</code> è®¾ç½®ä¸­è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img loading="lazy" src="/zh-CN/assets/images/github-secrets-c08dcb44c0fabc46137aefefaf3f9c97.png" width="2204" height="632" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-æäº¤åº”ç”¨ä»£ç ">4. æäº¤åº”ç”¨ä»£ç <a href="#4-æäº¤åº”ç”¨ä»£ç " class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>flask-demo ä»“åº“æäº¤ä»£ç åï¼ŒGithub ä¼šè‡ªåŠ¨æ„å»ºå®¹å™¨é•œåƒï¼Œå¹¶å°†åˆ¶å“æ¨é€åˆ° Docker hub ä¸­ï¼Œä¼šå†è§¦å‘ flask-demo-kcl-manifests ä»“åº“çš„ Actionï¼Œ<a href="/zh-CN/docs/user_docs/guides/automation">é€šè¿‡ KCL è‡ªåŠ¨åŒ– API</a> ä¿®æ”¹éƒ¨ç½²æ¸…å•ä»“åº“ä¸­çš„é•œåƒåœ°å€ã€‚ç°åœ¨è®©æˆ‘ä»¬ä¸º flask-demo ä»“åº“åˆ›å»ºä¸€ä¸ªæäº¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»£ç æäº¤åè§¦å‘ä¸šåŠ¡ä»“åº“ Github CI æµç¨‹</p><p><img loading="lazy" src="/zh-CN/assets/images/app-ci-722f8f31885ae67c956df7921faf15bd.png" width="2252" height="1038" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-é…ç½®è‡ªåŠ¨æ›´æ–°">5. é…ç½®è‡ªåŠ¨æ›´æ–°<a href="#5-é…ç½®è‡ªåŠ¨æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>å½“ä¸šåŠ¡ä»“åº“ Github CI æµç¨‹æ‰§è¡Œå®Œæˆåï¼Œä¼šè‡ªåŠ¨åœ¨å­˜æ”¾ KCL èµ„æºé…ç½®çš„ä»“åº“è§¦å‘ä¸€ä¸ª CI è‡ªåŠ¨æ›´æ–°é…ç½®å¹¶æäº¤åˆ° flask-demo-kcl-manifests main åˆ†æ”¯ï¼Œcommit ä¿¡æ¯å¦‚ä¸‹</p><p><img loading="lazy" src="/zh-CN/assets/images/image-auto-update-c98f7e713ab04391266ae88c99e85492.png" width="2240" height="1090" class="img_ev3q"></p><ul><li>æˆ‘ä»¬å¯ä»¥è·å¾—éƒ¨ç½²æ¸…å•æºç è¿›è¡Œç¼–è¯‘éªŒè¯</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/flask-demo-kcl-manifests.git/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> flask-demo-kcl-manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout main </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kcl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¾“å‡º YAML ä¸º</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcllang/flask_demo:6428cff4309afc8c1c40ad180bb9cfd82546be3e"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»ä¸Šè¿°é…ç½®å¯ä»¥çœ‹å‡ºèµ„æºçš„é•œåƒç¡®å®è‡ªåŠ¨æ›´æ–°ä¸ºäº†æ–°æ„å»ºçš„é•œåƒå†…å®¹ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ ArgoCD UI ç•Œé¢ä¸­å°†åŒæ­¥ç­–ç•¥è®¾ç½®ä¸ºè‡ªåŠ¨åŒæ­¥ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ä¸šåŠ¡ä»£ç æäº¤å¹¶éƒ¨ç½² Kubernetes çš„ e2e å®Œæ•´è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»“è®º">ç»“è®º<a href="#ç»“è®º" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>é€šè¿‡æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Github, ArgoCD å’Œ KCL ç­‰åˆ›å»º GitOps è‡ªåŠ¨åŒ–æµæ°´çº¿ï¼Œå¯ä»¥é«˜æ•ˆç¨³å®šåœ°æ„å»ºå®¹å™¨åŒ–åº”ç”¨ï¼ŒåŒæ—¶è‡ªåŠ¨åŒ–æ›´æ–°æœ€æ–°çš„ Dcoker é•œåƒæ ‡ç­¾ï¼Œå¹¶ä¿æŒ Git é…ç½®ä¸é›†ç¾¤é…ç½®ä¸€è‡´ã€‚æ­¤å¤–ï¼Œé€šè¿‡å°† KCL å’Œ ArgoCD ç›¸ç»“åˆå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å®ç°åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰ï¼Œæé«˜éƒ¨ç½²æ•ˆç‡ï¼Œå®ç°ä¸åŒè§’è‰²çš„å…³æ³¨ç‚¹åˆ†ç¦»å¹¶ç®€åŒ–åº”ç”¨ç¨‹åºçš„é…ç½®ç®¡ç†ã€‚</p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Github" term="Github"/>
        <category label="ArgoCD" term="ArgoCD"/>
        <category label="GitOps" term="GitOps"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL ä»‹ç» PPT]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-07-18-kcl-intro-slides</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-07-18-kcl-intro-slides"/>
        <updated>2023-07-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[PDF ä¸‹è½½]]></summary>
        <content type="html"><![CDATA[<p><a href="https://kcl-lang.github.io/talks/kcl-intro.pdf" target="_blank" rel="noopener noreferrer">PDF ä¸‹è½½</a></p>]]></content>
        <author>
            <name>å¾é¹é£</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Configuration" term="Configuration"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL v0.5.0 å‘å¸ƒæ—¥å¿—]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.5.0-release-blog</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.5.0-release-blog"/>
        <updated>2023-07-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ç®€ä»‹]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ KCL v0.5.0 æ–°ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼æœ¬æ¬¡å‘å¸ƒä¸ºå¤§å®¶å¸¦æ¥äº†ä¸‰æ–¹é¢çš„é‡ç‚¹æ›´æ–°ï¼š<strong>è¯­è¨€</strong>ã€<strong>å·¥å…·é“¾</strong>ã€<strong>ç¤¾åŒºé›†æˆ &amp; æ‰©å±•æ”¯æŒ</strong>ã€‚</p><ul><li><em>ä½¿ç”¨åŠŸèƒ½æ›´å®Œå–„é”™è¯¯æ›´å°‘çš„ KCL è¯­è¨€å’Œ IDE æå‡ä»£ç ç¼–å†™ä½“éªŒå’Œæ•ˆç‡</em></li><li><em>ä½¿ç”¨ KPM, KCL OpenAPI å’Œ OCI Registry ç­‰å·¥å…·ç›´æ¥ä½¿ç”¨å’Œå…±äº«æ‚¨çš„äº‘åŸç”Ÿé¢†åŸŸæ¨¡å‹ï¼Œé™ä½å­¦ä¹ å’Œä¸Šæ‰‹æˆæœ¬</em></li><li><em>ä½¿ç”¨ Github Action, ArgoCD å’Œ Kubectl KCL æ’ä»¶ç­‰ç¤¾åŒºå·¥å…·é›†æˆå’Œæ‰©å±•æ”¯æŒæå‡è‡ªåŠ¨åŒ–æ•ˆç‡</em></li></ul><p>è¿›ä¸€æ­¥æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.5.0" target="_blank" rel="noopener noreferrer">KCL v0.5.0 å‘å¸ƒé¡µé¢</a> æˆ–è€… <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">KCL å®˜æ–¹ç½‘ç«™</a> è·å¾—ä¸‹è½½å®‰è£…æŒ‡å—å’Œè¯¦ç»†å‘å¸ƒä¿¡æ¯ã€‚</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€å¹¶é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®æ¯”å¦‚äº‘åŸç”Ÿ Kubernetes é…ç½®åœºæ™¯çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´ç®€å•çš„è‡ªåŠ¨åŒ–å’Œç”Ÿæ€å·¥å…·é›†æˆã€‚</p><p>æœ¬æ–‡é‡ç‚¹ä»‹ç» KCL v0.5.0 ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹ä»¥åŠ KCL ç¤¾åŒºçš„è¿‘æœŸåŠ¨æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¯­è¨€æ›´æ–°">è¯­è¨€æ›´æ–°<a href="#è¯­è¨€æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é¡¶çº§å˜é‡è¾“å‡º">é¡¶çº§å˜é‡è¾“å‡º<a href="#é¡¶çº§å˜é‡è¾“å‡º" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œè¿è¡Œå¦‚ä¸‹ KCL ä»£ç ä¸ä¼šå¾—åˆ° YAML è¾“å‡ºï¼Œåœ¨ KCL v0.5.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯¹æ­¤è¿›è¡Œäº†æ”¹è¿›å¹¶æ”¯æŒäº†é¡¶çº§å˜é‡å¯¼å‡ºä¸º YAML é…ç½®ï¼Œç”¨äºå‡å°‘é¢å¤–çš„ KCL ä»£ç ä¹¦å†™å’Œå‘½ä»¤è¡Œå‚æ•°ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹ KCL ä»£ç  (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nginx </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™é‡Œçš„ Nginx å®ä¾‹ä¼šç›´æ¥è¾“å‡ºä¸º YAML</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listen </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        location </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            root </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/var/www/html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            index </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"index.html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œè¿è¡Œ KCL ä»£ç å¯ä»¥ç›´æ¥è·å¾—å¦‚ä¸‹è¾“å‡º</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">listen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">root</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /var/www/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> index.html</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯<a href="https://github.com/kcl-lang/kcl/pull/556" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç´¢å¼•ç­¾åæ›´æ–°">ç´¢å¼•ç­¾åæ›´æ–°<a href="#ç´¢å¼•ç­¾åæ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œå°šæœªæ”¯æŒåœ¨ Schema ç´¢å¼•ç­¾åä¸­ç›´æ¥å¼•ç”¨ï¼Œåœ¨ KCL v0.5.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯¹æ­¤è¿›è¡Œäº†æ”¹è¿›å¹¶æ”¯æŒäº†é¡¶çº§å˜é‡å¯¼å‡ºä¸º YAML é…ç½®ï¼Œç”¨äºå‡å°‘é¢å¤–çš„ KCL æ ·æ¿é…ç½®ä»£ç ä¹¦å†™ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹ KCL ä»£ç  (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema TeamSpec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fullName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shortName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema TeamMap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TeamSpec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TeamSpec </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n  </span><span class="token comment" style="color:#999988;font-style:italic"># n ä½œä¸º Schema ç´¢å¼•ç­¾ååˆ«åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">teamMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TeamMap </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fullName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"alpha"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fullName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bravo"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œè¿è¡Œ KCL ä»£ç å¯ä»¥è·å¾—å¦‚ä¸‹è¾“å‡º</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">teamMap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">b</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">fullName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bravo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">shortName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">a</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">fullName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alpha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">shortName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯<a href="https://github.com/kcl-lang/kcl/pull/582" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-æ”¯æŒè¿è¡Œæ—¶é”™è¯¯-backtrace-æ‰“å°">KCL æ”¯æŒè¿è¡Œæ—¶é”™è¯¯ Backtrace æ‰“å°<a href="#kcl-æ”¯æŒè¿è¡Œæ—¶é”™è¯¯-backtrace-æ‰“å°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒå½“ KCL ä»£ç è¿è¡Œå‘ç”ŸæŠ¥é”™æ—¶è¾“å‡º Backtrace çš„ç‰¹æ€§ï¼Œç”¨äºæå‡ KCL ä»£ç é”™è¯¯æ’æŸ¥æ•ˆç‡ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹ä»£ç  (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Fib</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    n1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    n2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n1 </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    n</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™é‡Œæœ‰ç´¢å¼•æº¢å‡ºçš„è¿è¡Œæ—¶é”™è¯¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Fib </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> Fib </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fib8 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Fib </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œåä¼šè·å¾—å¦‚ä¸‹æŠ¥é”™</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k -d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">E3M38</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: EvaluationError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EvaluationError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> main.k:8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">         value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™é‡Œæœ‰ç´¢å¼•æº¢å‡ºçš„è¿è¡Œæ—¶é”™è¯¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  list index out of range: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">note: backtrace:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">: __main__.Fib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                at main.k:8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">: __main__.Fib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                at main.k:12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: __main__.Fib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                at main.k:12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">: main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                at main.k:14</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯<a href="https://github.com/kcl-lang/kcl/pull/528" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é”™è¯¯ä¿®å¤">é”™è¯¯ä¿®å¤<a href="#é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="filter-è¡¨è¾¾å¼è¿”å›å€¼ç±»å‹é”™è¯¯ä¿®å¤">filter è¡¨è¾¾å¼è¿”å›å€¼ç±»å‹é”™è¯¯ä¿®å¤<a href="#filter-è¡¨è¾¾å¼è¿”å›å€¼ç±»å‹é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œfilter è¡¨è¾¾å¼ä¼šè¿”å›é”™è¯¯çš„ç±»å‹ï¼ˆåº”è¯¥è¿”å›è¢«è¿­ä»£å¯¹è±¡çš„ç±»å‹ï¼Œè€Œä¸æ˜¯è¿”å›è¿­ä»£å¯¹è±¡çš„ç±»å‹ï¼‰ï¼Œåœ¨ KCL v0.5.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¿®å¤äº†æ­¤ç±»ç±»ä¼¼çš„é—®é¢˜</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Student</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grade</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">students</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Alice"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grade </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">85</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Bob"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grade </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">70</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">studentsGrade70</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Student</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">filter</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> students </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">grade </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">70</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># è¿™é‡Œä¹‹å‰å¾—åˆ°ä¸€ä¸ªç±»å‹é”™è¯¯ï¼Œç‰ˆæœ¬æ›´æ–°åä¿®å¤äº†æ­¤ç±»é—®é¢˜</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯<a href="https://github.com/kcl-lang/kcl/pull/546" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lambda-å‡½æ•°é—­åŒ…æ•è·">lambda å‡½æ•°é—­åŒ…æ•è·<a href="#lambda-å‡½æ•°é—­åŒ…æ•è·" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ç¼–å†™å¦‚ä¸‹ KCL ä»£ç æ—¶ï¼Œä¼šé”™è¯¯çš„æ•è·é—­åŒ…å˜é‡çš„å€¼ã€‚åœ¨ KCL v0.5.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¿®å¤äº†æ­¤ç±»ç±»ä¼¼çš„é—®é¢˜</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">z </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> y </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> y </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># x æ˜¯å†…å±‚ lambda å‡½æ•°çš„é—­åŒ…å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯<a href="https://github.com/kcl-lang/kcl/pull/548" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="åŒ…å«-utf-8-å­—ç¬¦çš„å­—ç¬¦ä¸²è”åˆç±»å‹æ£€æŸ¥é”™è¯¯ä¿®å¤">åŒ…å« UTF-8 å­—ç¬¦çš„å­—ç¬¦ä¸²è”åˆç±»å‹æ£€æŸ¥é”™è¯¯ä¿®å¤<a href="#åŒ…å«-utf-8-å­—ç¬¦çš„å­—ç¬¦ä¸²è”åˆç±»å‹æ£€æŸ¥é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ç¼–å†™å¦‚ä¸‹åŒ…å« UTF-8 å­—ç¬¦çš„å­—ç¬¦ä¸²è”åˆç±»å‹ KCL ä»£ç æ—¶ï¼Œä¼šè·å¾—ä¸€ä¸ªéé¢„æœŸçš„ç±»å‹é”™è¯¯ã€‚åœ¨ KCL v0.5.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¿®å¤äº†æ­¤ç±»ç±»ä¼¼çš„é—®é¢˜</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"æ— éœ€å®¹ç¾"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"æ ‡å‡†å‹"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"æµæ°´å‹"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"æµæ°´å‹"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯<a href="https://github.com/kcl-lang/kcl/pull/600" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ide--å·¥å…·é“¾æ›´æ–°">IDE &amp; å·¥å…·é“¾æ›´æ–°<a href="#ide--å·¥å…·é“¾æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-openapi-å·¥å…·">KCL OpenAPI å·¥å…·<a href="#kcl-openapi-å·¥å…·" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>kcl-openapi å‘½ä»¤è¡Œå·¥å…·æ”¯æŒç”± OpenAPI Spec åˆ° KCL ä»£ç çš„è½¬æ¢ã€‚å¯é€šè¿‡ go install æˆ– curl è·å¾—å®‰è£…ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># go install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kcl-lang.io/kcl-openapi@latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># curl install (MacOS &amp; Linux)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://kcl-lang.io/script/install-kcl-openapi.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-kcl-åŒ…è½¬æ¢ä¼˜åŒ–">Kubernetes KCL åŒ…è½¬æ¢ä¼˜åŒ–<a href="#kubernetes-kcl-åŒ…è½¬æ¢ä¼˜åŒ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>v0.5.0 ç‰ˆæœ¬ä¼˜åŒ–äº†ä½¿ç”¨ Kubernetes KCL åŒ…çš„ä½“éªŒï¼š</p><ul><li>å…è½¬æ¢è·å¾—ï¼šKCL æä¾›äº†å¼€ç®±å³ç”¨çš„ Kubernetes 1.14-1.27 å„ä¸ªç‰ˆæœ¬çš„ KCL åŒ…ï¼Œé€šè¿‡åŒ…ç®¡ç†å·¥å…· <code>kpm add k8s:&lt;version&gt;</code> å³å¯è·å¾—</li><li>å¦‚éœ€è‡ªè¡Œè½¬æ¢å…¶ä»– Kubernetes ç‰ˆæœ¬çš„ KCL æ¨¡å‹ï¼Œå¯é€šè¿‡å¦‚ä¸‹çš„é¢„å¤„ç†è„šæœ¬ä¸€é”®ä» Kubernetes ä»“åº“ä¸‹è½½çš„ swagger.json æ–‡ä»¶è½¬æ¢ä¸º KCL åŒ…ï¼Œå°†å¦‚ä¸‹å‘½ä»¤çš„ 1.27 æ”¹ä¸ºéœ€è¦çš„ Kubernetes ç‰ˆæœ¬å³å¯</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">version</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1.27</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">spec_path</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">swagger.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">script_path</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">main.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://raw.githubusercontent.com/kubernetes/kubernetes/release-</span><span class="token variable" style="color:#36acaa">${version}</span><span class="token plain">/api/openapi-spec/swagger.json -O swagger.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://raw.githubusercontent.com/kcl-lang/kcl-openapi/main/scripts/preprocess/main.py -O main.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 </span><span class="token variable" style="color:#36acaa">${script_path}</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${spec_path}</span><span class="token plain"> --omit-status --rename</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">io.k8s</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kcl-openapi generate model -f processed-</span><span class="token variable" style="color:#36acaa">${spec_path}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è„šæœ¬é¢„æœŸçš„æ‰§è¡Œè¾“å‡ºä¸ºå¯¹åº”ç‰ˆæœ¬çš„ KCL Kubernetes æ¨¡å‹ï¼Œç”Ÿæˆçš„è·¯å¾„ä¸º <code>&lt;å·¥ä½œç©ºé—´è·¯å¾„&gt;/models/k8s</code></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ tree models/k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">models/k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ admissionregistration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”œâ”€â”€ v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚   â”œâ”€â”€ match_condition.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚   â”œâ”€â”€ mutating_webhook.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚   â”œâ”€â”€ mutating_webhook_configuration.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚   â”œâ”€â”€ mutating_webhook_configuration_list.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚   â”œâ”€â”€ rule_with_operations.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚   â”œâ”€â”€ service_reference.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚   â”œâ”€â”€ validating_webhook.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é”™è¯¯ä¿®å¤-1">é”™è¯¯ä¿®å¤<a href="#é”™è¯¯ä¿®å¤-1" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><ul><li>å°†å¸¦æœ‰-ç¬¦å·çš„å±æ€§åç§°è½¬ä¹‰ä¸º_ç¬¦å·ï¼Œä»¥ç¬¦åˆ KCL v0.5.0 è¯­æ³•ï¼Œ<a href="https://github.com/kcl-lang/kcl-openapi/pull/43" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>è‡ªåŠ¨è¯†åˆ«å¹¶è®¾ç½® import as å¼•ç”¨åˆ«åï¼Œé¿å…å¼•ç”¨å†²çªï¼Œ<a href="https://github.com/kcl-lang/kcl-openapi/pull/45" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>ä¿®å¤ docstring ä¸­å±æ€§æè¿°ç¼©è¿›é—®é¢˜ï¼Œå¯¹å±æ€§æè¿°å†…éƒ¨æ¢è¡Œè¿›è¡Œè‡ªåŠ¨ç¼©è¿›ï¼Œ<a href="https://github.com/kcl-lang/kcl-openapi/pull/46" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>ä¿®å¤ç”Ÿæˆçš„å¼•ç”¨è·¯å¾„ä¸ºåŸºäºåŒ…çš„æ ¹ç›®å½•çš„å…¨å¼•ç”¨è·¯å¾„ï¼Œ<a href="https://github.com/kcl-lang/kcl-openapi/pull/51" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŒ…ç®¡ç†å·¥å…·">åŒ…ç®¡ç†å·¥å…·<a href="#åŒ…ç®¡ç†å·¥å…·" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ KCL v0.5.0 æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†å…¨æ–°çš„ KCL åŒ…ç®¡ç†å·¥å…·ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å‡ ä¸ªå‘½ä»¤å³å¯è·å¾—ç¤¾åŒºä¸­å·²ç»ç¼–å†™å¥½çš„ KCL æ¨¡å‹ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-kpm-å‘½ä»¤è¡Œç®¡ç†-kcl-ç¨‹åº">é€šè¿‡ kpm å‘½ä»¤è¡Œç®¡ç† KCL ç¨‹åº<a href="#é€šè¿‡-kpm-å‘½ä»¤è¡Œç®¡ç†-kcl-ç¨‹åº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ä½¿ç”¨ kpm ä¹‹å‰ï¼Œéœ€è¦ç¡®ä¿æ‚¨å½“å‰åœ¨ä¸€ä¸ª KCL åŒ…ä¸­å·¥ä½œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤ kpm init åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„ KCL ç¨‹åºåŒ…ã€‚</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm init kubernetes_demo </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> kubernetes_demo </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kpm </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> k8s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åï¼Œä½¿ç”¨ k8s åŒ…ä¸­çš„å†…å®¹ç¼–å†™æ‚¨çš„ KCL ä»£ç ï¼ˆmain.kï¼‰ã€‚</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># å¯¼å…¥ k8s åŒ…ä¸­çš„å†…å®¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx-deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€šè¿‡ <code>kpm run</code> å’Œ <code>kubectl</code> å‘½ä»¤è¡Œç»“åˆä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†èµ„æºé…ç½®ä¸‹å‘åˆ°é›†ç¾¤</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kpm run </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> kubectl apply -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/nginx-deployment configured</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="oci-registry-æ”¯æŒ">OCI Registry æ”¯æŒ<a href="#oci-registry-æ”¯æŒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>kpm æ”¯æŒé€šè¿‡ OCI Registry ä¿å­˜ KCL çš„ç¨‹åºåŒ…ï¼Œkpm ç›®å‰æä¾›çš„é»˜è®¤çš„ OCI Registry ä¸ºï¼š<a href="https://github.com/orgs/KusionStack/packages" target="_blank" rel="noopener noreferrer">https://github.com/orgs/KusionStack/packages</a></p><p>æ‚¨å¯ä»¥åœ¨è¿™é‡Œæµè§ˆæ‚¨éœ€è¦çš„ KCL åŒ…ï¼Œæˆ‘ä»¬ç›®å‰æä¾›äº† k8s çš„ KCL ç¨‹åºåŒ…ï¼Œæ”¯æŒ k8s 1.14 åˆ° 1.27 çš„å…¨éƒ¨ç‰ˆæœ¬ã€‚æ¬¢è¿æ <a href="https://github.com/kcl-lang/kpm/issues" target="_blank" rel="noopener noreferrer">Issues</a> å…±å»º KCL æ¨¡å‹</p><p>æ›´å¤šå…³äº kpm åŒ…ç®¡ç†å·¥å…·çš„å†…å®¹<a href="https://kcl-lang.io/docs/user_docs/guides/package-management/quick-start" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºé›†æˆ--æ‰©å±•æ›´æ–°">ç¤¾åŒºé›†æˆ &amp; æ‰©å±•æ›´æ–°<a href="#ç¤¾åŒºé›†æˆ--æ‰©å±•æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-é›†æˆ">CI é›†æˆ<a href="#ci-é›†æˆ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨æ­¤æ¬¡æ›´æ–°ä¸­æˆ‘ä»¬æä¾›äº† <strong>Github Actions ä½œä¸º CI é›†æˆ</strong>çš„ç¤ºä¾‹æ–¹æ¡ˆï¼Œå¸Œæœ›é€šè¿‡ä½¿ç”¨å®¹å™¨ã€ç”¨äºç”Ÿæˆé…ç½®çš„æŒç»­é›†æˆ (CI) å’Œç”¨äºæŒç»­éƒ¨ç½² (CD) çš„ GitOps æ¥å®ç°ç«¯åˆ°ç«¯åº”ç”¨ç¨‹åºå¼€å‘æµç¨‹ã€‚æ•´ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>åº”ç”¨ä»£ç å¼€å‘å¹¶æäº¤åˆ°æäº¤åˆ° GitHub å­˜å‚¨åº“è§¦å‘ CI (è¿™é‡Œä½¿ç”¨ Python Flask Web åº”ç”¨ä½œä¸ºç¤ºä¾‹)</li></ul><p><img loading="lazy" alt="app" src="/zh-CN/assets/images/app-397ebd3eec365e754b0c606ee525313b.png" width="1080" height="492" class="img_ev3q"></p><ul><li>GitHub Actions ä»åº”ç”¨ä»£ç ç”Ÿæˆå®¹å™¨é•œåƒï¼Œå¹¶å°†å®¹å™¨é•œåƒæ¨é€åˆ° docker.io å®¹å™¨æ³¨å†Œè¡¨</li></ul><p><img loading="lazy" alt="app-ci" src="/zh-CN/assets/images/app-ci-6a47924cbd1b5435cf7f8b8527791ce5.png" width="1080" height="498" class="img_ev3q"></p><ul><li>GitHub Actions æ ¹æ® docker.io å®¹å™¨æ³¨å†Œè¡¨ä¸­å®¹å™¨é•œåƒçš„ç‰ˆæœ¬å·å¹¶è‡ªåŠ¨åŒæ­¥æ›´æ–° KCL æ¸…å•éƒ¨ç½²æ–‡ä»¶</li></ul><p><img loading="lazy" alt="auto-update" src="/zh-CN/assets/images/auto-update-2f391f3b2316b3d2299f045dc6c6fffd.png" width="1080" height="526" class="img_ev3q"></p><p>æˆ‘ä»¬å¯ä»¥è·å¾—éƒ¨ç½²æ¸…å•æºç è¿›è¡Œç¼–è¯‘éªŒè¯ä¼šå¾—åˆ°å¦‚ä¸‹ YAML è¾“å‡º</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcllang/flask_demo:6428cff4309afc8c1c40ad180bb9cfd82546be3e"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> flask_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»ä¸Šè¿°é…ç½®å¯ä»¥çœ‹å‡ºèµ„æºçš„é•œåƒç¡®å®è‡ªåŠ¨æ›´æ–°ä¸ºäº†æ–°æ„å»ºçš„é•œåƒå†…å®¹ ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ Argo CD KCL æ’ä»¶è‡ªåŠ¨ä» Git å­˜å‚¨åº“åŒæ­¥æˆ–ä»ä¸­æ‹‰å–æ•°æ®å¹¶å°†åº”ç”¨éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤</p><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ<a href="https://kcl-lang.io/docs/user_docs/guides/ci-integration/github-actions" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cd-é›†æˆ">CD é›†æˆ<a href="#cd-é›†æˆ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>æ­¤å¤–æˆ‘ä»¬è¿˜æä¾›äº† <strong>ArgoCD ä½œä¸º CD é›†æˆ</strong>çš„ç¤ºä¾‹æ–¹æ¡ˆï¼Œé€šè¿‡ Github Action CI é›†æˆå’Œ ArgoCD KCL æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å®Œæˆç«¯åˆ°ç«¯çš„ GitOps å·¥ä½œæµï¼Œæå‡åº”ç”¨é…ç½®è‡ªåŠ¨å˜æ›´å’Œéƒ¨ç½²æ•ˆç‡ã€‚å¦‚ä¸‹ç¤ºå‡ºäº†ä½¿ç”¨ ArgoCD åº”ç”¨ Kubernetes é…ç½®çš„æ¦‚è§ˆå’ŒåŒæ­¥æƒ…å†µï¼Œé€šè¿‡ä½¿ç”¨ ArgoCD çš„èƒ½åŠ›ï¼Œå½“ä¸šåŠ¡ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨åŒæ­¥æ›´æ–°å¹¶éƒ¨ç½²ã€‚</p><ul><li><strong>åº”ç”¨æ¦‚è§ˆ</strong></li></ul><p><img loading="lazy" alt="argocd-app" src="/zh-CN/assets/images/argocd-app-30577189bb10882c712f54bb38da0041.png" width="1080" height="512" class="img_ev3q"></p><ul><li><strong>é…ç½®åŒæ­¥</strong></li></ul><p><img loading="lazy" alt="argocd-sync" src="/zh-CN/assets/images/argocd-sync-bfaec4c5a44808938c6b61e4947da70c.png" width="1080" height="367" class="img_ev3q"></p><p>æ›´å¤šæ’ä»¶å®‰è£…å’Œä½¿ç”¨æ–¹å¼è¯·å‚è€ƒ<a href="https://kcl-lang.io/docs/user_docs/guides/gitops/gitops-quick-start" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-é…ç½®ç®¡ç†å·¥å…·æ‰©å±•æ”¯æŒ">Kubernetes é…ç½®ç®¡ç†å·¥å…·æ‰©å±•æ”¯æŒ<a href="#kubernetes-é…ç½®ç®¡ç†å·¥å…·æ‰©å±•æ”¯æŒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ KCL v0.5.0 ä¸­ï¼Œæˆ‘ä»¬ä»¥ç»Ÿä¸€çš„ç¼–ç¨‹ç•Œé¢æ–¹å¼ä¸º Kubernetes ç¤¾åŒºçš„ Kubectl, Helm, Kustomize, KPT ç­‰é…ç½®ç®¡ç†å·¥å…·æä¾›äº†æ’ä»¶æ”¯æŒï¼Œç¼–å†™å‡ è¡Œé…ç½®ä»£ç å³å¯æ— ä¾µå…¥åœ°å®Œæˆå¯¹å­˜é‡ Kustomize YAMLï¼ŒHelm Charts çš„ç¼–è¾‘å’Œæ ¡éªŒï¼Œæ¯”å¦‚ä¿®æ”¹èµ„æºæ ‡ç­¾/æ³¨è§£, æ³¨å…¥ Sidecar å®¹å™¨é…ç½®ï¼Œä½¿ç”¨ KCL schema æ ¡éªŒèµ„æºï¼Œå®šä¹‰è‡ªå·±çš„æŠ½è±¡æ¨¡å‹å¹¶åˆ†äº«å¤ç”¨ç­‰ã€‚</p><p>ä¸‹é¢ä»¥ Kubectl å·¥å…·å¯¹ KCL çš„é›†æˆä¸ºä¾‹è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚æ‚¨å¯ä»¥åœ¨<a href="https://github.com/kcl-lang/kubectl-kcl" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a>è·å– Kubectl KCL æ’ä»¶çš„å®‰è£…æ–¹å¼</p><p>é¦–å…ˆæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è·å–ä¸€ä¸ªé…ç½®ç¤ºä¾‹</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/kubectl-kcl.git </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> ./kubectl-kcl/examples/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ˜¾ç¤ºé…ç½®</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> krm-kcl-abstration.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: krm.kcl.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: KCLRun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: web-service-abtraction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ngnix:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: ngnix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - containerPort: </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - port: </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source: oci://ghcr.io/kcl-lang/web-service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ä¸Šè¿°é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åœ¨ OCI ä¸Šå·²ç»é¢„å®šå¥½çš„ä¸€ä¸ª Kubernetes Web æœåŠ¡åº”ç”¨æŠ½è±¡æ¨¡å‹ <code>oci://ghcr.io/kcl-lang/web-service</code>, å¹¶é€šè¿‡ <code>params</code> å­—æ®µé…ç½®äº†è¯¥æ¨¡å‹æ‰€éœ€çš„é…ç½®å­—æ®µã€‚é€šè¿‡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯ä»¥è·å¾—åŸå§‹çš„ Kubernetes YAML è¾“å‡ºå¹¶ä¸‹å‘åˆ°é›†ç¾¤:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl kcl apply -f krm-kcl-abstration.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/app created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/app created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤š Kubernetes é…ç½®ç®¡ç†å·¥å…·è¯¦ç»†ä»‹ç»å†…å®¹ä»¥åŠç”¨ä¾‹<a href="https://github.com/kcl-lang/krm-kcl/tree/main/examples" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><p>ç›®å‰ KCL æ”¯æŒçš„ Kubernetes é…ç½®ç®¡ç†å·¥å…·é›†æˆä»å¤„äºæ—©æœŸï¼Œå¦‚æœæ‚¨æœ‰æ›´å¤šçš„æƒ³æ³•å’Œéœ€æ±‚ï¼Œæ¬¢è¿å‘èµ· Issues è®¨è®ºå…±å»º</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤">å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤<a href="#å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>å®Œæ•´æ›´æ–°å’Œé”™è¯¯ä¿®å¤åˆ—è¡¨<a href="https://github.com/kcl-lang/kcl/compare/v0.4.6...v0.5.0" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–‡æ¡£æ›´æ–°">æ–‡æ¡£æ›´æ–°<a href="#æ–‡æ¡£æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> æ–°å¢ KCL v0.5.0 æ–‡æ¡£å†…å®¹å¹¶æ”¯æŒç‰ˆæœ¬åŒ–è¯­ä¹‰é€‰é¡¹ï¼Œç›®å‰æ”¯æŒ v0.4.3, v0.4.4, v0.4.5, v0.4.6 å’Œ v0.5.0 ç‰ˆæœ¬é€‰æ‹©ã€‚åŒæ—¶æ¬¢è¿ç¤¾åŒºåŒå­¦è¿›è¡Œæ–‡æ¡£å…±å»ºã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºåŠ¨æ€">ç¤¾åŒºåŠ¨æ€<a href="#ç¤¾åŒºåŠ¨æ€" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>æ„Ÿè°¢ @harri2012 å¯¹ KCL IDE æ’ä»¶çš„é¦–æ¬¡è´¡çŒ® ğŸ™Œ</li><li>æ„Ÿè°¢ @niconical å¯¹ KCL å‘½ä»¤è¡ŒåŸºç¡€ä»£ç å’Œ CI/CD è„šæœ¬çš„è´¡çŒ® ğŸ™Œ</li><li>æ„Ÿè°¢ @Ekko å¯¹ KCL äº‘åŸç”Ÿå·¥å…·é›†æˆçš„è´¡çŒ® ğŸ™Œ</li><li>æ­å–œæ¥è‡ªåä¸­ç§‘æŠ€å¤§å­¦æœ±ä¿Šæ˜ŸåŒå­¦æˆåŠŸå…¥é€‰ GitLinkç¼–ç¨‹å¤ä»¤è¥ï¼ˆGLCCï¼‰"Terraform/JsonSchema è½¬ KCL Schema" è¯¾é¢˜ ğŸ‰</li><li>æ­å–œæ¥è‡ªä¸œå—å¤§å­¦çš„ä»»ä¸€é¸£åŒå­¦æˆåŠŸå…¥é€‰ å¼€æºä¹‹å¤ "IDE æ’ä»¶å¢å¼ºå’Œ Language Server é›†æˆ" è¯¾é¢˜ ğŸ‰</li><li>ä¸ºä¾¿äº KCL åŠå…¶å­é¡¹ç›®çš„ä»“åº“æ£€ç´¢å’Œç®¡ç†ï¼Œæˆ‘ä»¬å°† KCL 30+ ä»“åº“æ•´ä½“æ¬è¿åˆ°äº†æ–°çš„ Github <strong>kcl-lang</strong> ç»„ç»‡ï¼Œç‰¢è®°é¡¹ç›®åœ°å€ï¼Œé˜²æ­¢è¿·è·¯ <a href="https://github.com/kcl-lang" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang</a> â¤ï¸</li><li>KCL åŠ å…¥ CNCF Landscapeï¼Œç®—æ˜¯äº‘åŸç”Ÿç¤¾åŒºå¯¹æˆ‘ä»¬å°å°çš„é¼“åŠ±å’Œè®¤å¯ï¼Œä¸‹ä¸€æ­¥è®¡åˆ’æ˜¯åŠªåŠ›åŠ å…¥ CNCF Sandboxï¼Œä¸ºäº‘åŸç”Ÿç¤¾åŒºä½œå‡ºæ›´å¤šçš„è´¡çŒ® ğŸ’ª</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>é¢„è®¡ 2023 å¹´ 9 æœˆï¼Œæˆ‘ä»¬å°†å‘å¸ƒ <strong>KCL v0.6.0 ç‰ˆæœ¬</strong>ï¼Œé¢„æœŸé‡ç‚¹æ¼”è¿›åŒ…æ‹¬ï¼š</p><ul><li>æ›´å¤šé’ˆå¯¹åœºæ™¯é—®é¢˜çš„ KCL è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›ï¼Œç”¨æˆ·ç•Œé¢æŒç»­ä¼˜åŒ–ä¸ä½“éªŒæå‡ï¼Œç”¨æˆ·æ”¯æŒå’Œç—›ç‚¹è§£å†³</li><li>æ›´å¤š IDE æ’ä»¶ã€è¯­è¨€å·¥å…·é“¾ã€åŒ…ç®¡ç†å·¥å…·ã€Registry åŠŸèƒ½æ”¯æŒå’Œç”¨æˆ·ä½“éªŒæå‡</li><li>é’ˆå¯¹äº‘åŸç”Ÿåœºæ™¯æä¾›æ›´å¤šå¼€ç®±å³ç”¨çš„ KCL æ¨¡å‹æ”¯æŒï¼Œä¸»è¦åŒ…å«å®¹å™¨ã€æœåŠ¡ã€è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œç­‰</li><li>æ›´å¤šçš„ CI/CD å·¥å…·é›†æˆï¼šå¦‚ Jenkins, Gitlab CI, FluxCD ç­‰ã€‚</li><li>æ”¯æŒ Helmfile KCL æ’ä»¶ï¼Œé€šè¿‡ KCL ä»£ç ç›´æ¥ç”Ÿæˆã€ç¼–è¾‘å’Œæ ¡éªŒ Kubernetes åŸç”Ÿèµ„æº</li><li>æ”¯æŒåœ¨ Kubernetes è¿è¡Œæ—¶é€šè¿‡ KCL Operator è¿è¡Œä»£ç å¯¹ YAML è¿›è¡Œç¼–è¾‘å’Œæ ¡éªŒ</li></ul><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://kcl-lang.io/docs/community/release-policy/roadmap" target="_blank" rel="noopener noreferrer">KCL 2023 è·¯çº¿è§„åˆ’</a> å’Œ <a href="https://github.com/kcl-lang/kcl/milestone/6" target="_blank" rel="noopener noreferrer">KCL v0.6.0 Milestone</a></p><p>å¦‚æœæ‚¨æœ‰æ›´å¤šçš„æƒ³æ³•å’Œéœ€æ±‚ï¼Œæ¬¢è¿åœ¨ KCL Github ä»“åº“å‘èµ· <a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">Issues</a>ï¼Œä¹Ÿæ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ™Œ ğŸ™Œ ğŸ™Œ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/faq-kcl" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·å’Œç¤¾åŒºå°ä¼™ä¼´åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µåé¦ˆä¸å»ºè®®ã€‚</p><p>æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="Release Blog" term="Release Blog"/>
        <category label="KCL" term="KCL"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç”¨ Rust é‡å†™çš„ KCL LSP]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023/07/10/kcl-LSP</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023/07/10/kcl-LSP"/>
        <updated>2023-07-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL çš„ v0.4.6 ç‰ˆæœ¬åœ¨è¯­è¨€ã€å·¥å…·é“¾ã€ç¤¾åŒºé›†æˆ&æ‰©å±•æ”¯æŒç­‰æ–¹é¢è¿›è¡Œäº†é‡ç‚¹æ›´æ–°ã€‚æœ¬æ–‡å°†ä¸ºæ‚¨è¯¦ç»†ä»‹ç»IDEçš„æ–°åŠŸèƒ½ã€LSPçš„ä»‹ç»ã€KCL LSP Serverç«¯çš„è®¾è®¡å’Œå®ç°ä»¥åŠæœªæ¥çš„è§„åˆ’å’ŒæœŸæœ›ã€‚]]></summary>
        <content type="html"><![CDATA[<p>KCL çš„ v0.4.6 ç‰ˆæœ¬åœ¨è¯­è¨€ã€å·¥å…·é“¾ã€ç¤¾åŒºé›†æˆ&amp;æ‰©å±•æ”¯æŒç­‰æ–¹é¢è¿›è¡Œäº†é‡ç‚¹æ›´æ–°ã€‚æœ¬æ–‡å°†ä¸ºæ‚¨è¯¦ç»†ä»‹ç»IDEçš„æ–°åŠŸèƒ½ã€LSPçš„ä»‹ç»ã€KCL LSP Serverç«¯çš„è®¾è®¡å’Œå®ç°ä»¥åŠæœªæ¥çš„è§„åˆ’å’ŒæœŸæœ›ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ideçš„æ–°ç‰¹æ€§">IDEçš„æ–°ç‰¹æ€§<a href="#ideçš„æ–°ç‰¹æ€§" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>åœ¨è¿™æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬å‘å¸ƒäº†å…¨æ–° KCL VSCode æ’ä»¶ï¼Œå¹¶ä¸”ç”¨ Rust é‡å†™äº† LSP çš„ Server ç«¯ã€‚æˆ‘ä»¬æä¾›äº† IDE ä¸­å¸¸ç”¨çš„ä»£ç è¾…åŠ©åŠŸèƒ½ï¼Œå¦‚é«˜äº®ã€è·³è½¬ã€è¡¥å…¨ã€Outlineã€æ‚¬åœã€é”™è¯¯æç¤ºç­‰ã€‚</p><ul><li><strong>é«˜äº®:</strong><img loading="lazy" alt="Highlight" src="/zh-CN/assets/images/Highlight-7e1f5208ba57f3ebe9926efba8e270a2.png" width="1312" height="782" class="img_ev3q"></li><li><strong>è·³è½¬:</strong><img loading="lazy" alt="Goto Definition" src="/zh-CN/assets/images/GotoDef-0875243eacd6b76e49b7a5b95cb9ce55.gif" width="1312" height="780" class="img_ev3q"></li><li><strong>è¡¥å…¨:</strong><img loading="lazy" alt="Completion" src="/zh-CN/assets/images/Completion-584771cd4bed237e74d3da3decaa9757.gif" width="1312" height="780" class="img_ev3q"></li><li><strong>Outline:</strong><img loading="lazy" alt="Outline" src="/zh-CN/assets/images/Outline-c443b2ee1e35746795e7b09c11f3f4da.gif" width="1312" height="780" class="img_ev3q"></li><li><strong>Hover:</strong><img loading="lazy" alt="Hover" src="/zh-CN/assets/images/Hover-339697d17ca0d4f167b1b1a904c9f1aa.gif" width="1312" height="780" class="img_ev3q"></li><li><strong>Diagnostics:</strong><img loading="lazy" alt="Diagnostics" src="/zh-CN/assets/images/Diagnostics-716fc3b938a94e4db2cbafaad4f4174d.gif" width="1312" height="780" class="img_ev3q"></li></ul><p>æ¬¢è¿åˆ° <a href="https://kcl-lang.io/docs/tools/Ide/vs-code/" target="_blank" rel="noopener noreferrer">KCL VSCode æ’ä»¶</a> äº†è§£æ›´å¤šğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯-lsp">ä»€ä¹ˆæ˜¯ LSPï¼Ÿ<a href="#ä»€ä¹ˆæ˜¯-lsp" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>åœ¨è¿™æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬åŸºäº LSP å®ç°äº†ä»¥ä¸Šèƒ½åŠ›ã€‚LSP æŒ‡çš„æ˜¯ Language Server Protocolï¼Œå®ƒæ˜¯ç”±å¾®è½¯åœ¨ 2016 å¹´æ¨å‡ºçš„ä¸€ç§ç”¨äºç¼–ç¨‹è¯­è¨€å·¥å…·çš„åè®®ã€‚å€Ÿç”¨ä¸€å¼ å›¾ï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥ç†è§£ LSPã€‚</p><p><img loading="lazy" alt="LSP" src="/zh-CN/assets/images/lsp-4d40c09909e7dc972f884e4eefea5a92.png" width="1162" height="538" class="img_ev3q"></p><p>é€šè¿‡ LSP ï¼Œç¼–è¾‘å™¨å’Œ IDE å¯ä»¥é€šè¿‡ JSON-RPC é€šä¿¡åè®®ä¸åç«¯è¿è¡Œçš„è¯­è¨€æœåŠ¡å™¨(Server ç«¯)è¿›è¡Œé€šä¿¡ã€‚è¯­è¨€æœåŠ¡å™¨å¯ä»¥æä¾›ä»£ç åˆ†æã€è‡ªåŠ¨è¡¥å…¨ã€è¯­æ³•é«˜äº®ã€å®šä¹‰è·³è½¬ç­‰åŠŸèƒ½ã€‚åŸºäº LSPï¼Œå¼€å‘è€…å¯ä»¥åœ¨ä¸åŒçš„ç¼–è¾‘å™¨å’Œ IDE ä¹‹é—´è¿ç§»ï¼Œä½¿å¾—è¯­è¨€å·¥å…·çš„å¼€å‘ä» M(è¯­è¨€æ•°é‡) * N(ç¼–è¾‘å™¨/IDEæ•°é‡) é™ä½ä¸º M + Nã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºä»€ä¹ˆç”¨-rust-é‡å†™">ä¸ºä»€ä¹ˆç”¨ Rust é‡å†™<a href="#ä¸ºä»€ä¹ˆç”¨-rust-é‡å†™" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL ç¼–è¯‘å™¨å’Œå…¶ä»–å·¥å…·æœ€åˆç”± Python å®ç°ï¼Œå› ä¸ºæ€§èƒ½åŸå› ï¼Œæˆ‘ä»¬ç”¨ Rust è¯­è¨€é‡å†™äº†ç¼–è¯‘å™¨ã€‚åœ¨æ­¤ä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨ Rust é€æ­¥é‡å†™äº† KCL çš„å…¶ä»–å·¥å…·ï¼Œå¦‚æµ‹è¯•å·¥å…·ã€Format å·¥å…·ç­‰ã€‚åœ¨è¿™æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬ç”¨ Rust é‡å†™äº† LSP Server ç«¯ï¼Œå…¶ä¸»è¦è€ƒè™‘å› ç´ ä¹Ÿæ˜¯æ€§èƒ½ã€‚</p><p>è¿‡å»ï¼ŒPython ç‰ˆæœ¬çš„ Server ç«¯åœ¨å¤„ç†ä¸€äº›å¤æ‚çš„åœºæ™¯ï¼ˆç¼–è¯‘æ–‡ä»¶æ•°é‡è¶…è¿‡200ä¸ªï¼‰æ—¶ï¼Œå¤„ç†ä¸€ä¸ªè·³è½¬çš„è¯·æ±‚ï¼ŒServer ç«¯ä»æ¥æ”¶åˆ°è¯·æ±‚åˆ°è®¡ç®—ç»“æœå¹¶å“åº”ï¼Œæ—¶é—´é•¿è¾¾ 6 ç§’ä»¥ä¸Šï¼Œå‡ ä¹æ˜¯ä¸å¯ç”¨çŠ¶æ€ã€‚ç”±äº Server ç«¯çš„å®ç°ä¸»è¦åŸºäºè¯­è¨€ç¼–è¯‘å™¨å‰ä¸­ç«¯çš„è¯æ³•è§£æå’Œè¯­ä¹‰åˆ†æï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨ Rust é‡å†™ä»¥åï¼Œè¿™éƒ¨åˆ†æ€§èƒ½åˆ†åˆ«æå‡äº† 20 å’Œ 40 å€ï¼Œ å¸¦æ¥çš„æ˜¾è‘—ç»“æœå°±æ˜¯ Server ç«¯çš„å“åº”æ—¶é—´å¾—åˆ°äº†å·¨å¤§æå‡ï¼Œå¯¹äºåŒæ ·çš„åœºæ™¯ï¼Œå“åº”æ—¶é—´ç¼©çŸ­è‡³ 100 æ¯«ç§’å·¦å³ã€‚è€Œå¯¹äºä¸€äº›ç®€å•çš„åœºæ™¯ï¼Œå“åº”æ—¶é—´åªæœ‰å‡ æ¯«ç§’ï¼Œåšåˆ°äº†ç”¨æˆ·æ— æ„Ÿã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-lsp-serverçš„è®¾è®¡ä¸å®ç°">KCL LSP Serverçš„è®¾è®¡ä¸å®ç°<a href="#kcl-lsp-serverçš„è®¾è®¡ä¸å®ç°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL LSP Server çš„è®¾è®¡å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img loading="lazy" alt="KCL-LSP" src="/zh-CN/assets/images/kcl-LSP-5466adee5a10481b8f41cb615977a034.png" width="627" height="421" class="img_ev3q"></p><p>ä¸»è¦æµç¨‹å¯ä»¥åˆ†ä¸ºå‡ ä¸ªé˜¶æ®µï¼š</p><ol><li>å»ºç«‹è¿æ¥ï¼Œåˆå§‹åŒ– LSP èƒ½åŠ›ã€‚åœ¨ IDE çš„ Client ç«¯ï¼Œæ‰“å¼€ç‰¹å®šæ–‡ä»¶ï¼ˆKCLçš„ *.kï¼‰æ—¶ï¼ŒIDE ä¼šå¯åŠ¨æœ¬åœ°çš„ kcl_language_server äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯åŠ¨ Server ç«¯ã€‚è¿™ä¸ªæ–‡ä»¶ä¸ KCL ä¸€èµ·å‘å¸ƒï¼Œå¹¶å®‰è£…åœ¨ KCL çš„ bin ç›®å½•ä¸‹ã€‚Server å¯åŠ¨åä¼šå»ºç«‹ standard IO çš„ Connectionï¼Œå¹¶ç­‰å¾… Client å‘é€çš„åˆå§‹åŒ–è¯·æ±‚ã€‚Server ç«¯æ¥æ”¶åˆå§‹åŒ–è¯·æ±‚åä¼šå®šä¹‰ Server ç«¯ä¿¡æ¯å’Œèƒ½åŠ›ï¼Œå¹¶è¿”å›ç»™ Clientï¼Œä»¥æ­¤å®Œæˆ LSP çš„åˆå§‹åŒ–è¿æ¥ã€‚</li><li>å»ºç«‹è¿æ¥åï¼ŒServer ç«¯ä¼šå¯åŠ¨ä¸€ä¸ªè½®è¯¢å‡½æ•°ï¼Œä¸æ–­æ¥æ”¶æ¥è‡ª Client çš„ LSP Messageï¼Œä¾‹å¦‚ Notificationï¼ˆæ‰“å¼€/å…³é—­/å˜æ›´/åˆ é™¤æ–‡ä»¶ç­‰ï¼‰å’Œ Requestï¼ˆè·³è½¬ã€æ‚¬åœç­‰ï¼‰ï¼Œä»¥åŠæ¥è‡ª Server ç«¯è‡ªèº«çš„ Taskã€‚å¹¶ç»Ÿä¸€å°è£…æˆäº‹ä»¶ï¼ˆEventï¼‰äº¤ç»™ä¸‹ä¸€æ­¥å¤„ç†ã€‚</li><li>å¯¹äºå„ç§äº‹ä»¶ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¤„ç†ï¼š</li></ol><div class="language-Rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// Handles an event from one of the many sources that the language server subscribes to.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn handle_event(&amp;mut self, event: Event) -&gt; anyhow::Result&lt;()&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1. Process the incoming event</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match event {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Event::Task(task) =&gt; self.handle_task(task)?,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Event::Lsp(msg) =&gt; match msg {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lsp_server::Message::Request(req) =&gt; self.on_request(req, start_time)?,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lsp_server::Message::Notification(not) =&gt; self.on_notification(not)?,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _ =&gt; {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2. Process changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let state_changed: bool = self.process_vfs_changes();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 3. Handle Diagnostics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if state_changed{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let mut snapshot = self.snapshot();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let task_sender = self.task_sender.clone();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Spawn the diagnostics in the threadpool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.thread_pool.execute(move || {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            handle_diagnostics(snapshot, task_sender)ï¼Ÿ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ok(())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>3.1 ä»»åŠ¡åˆ†å‘ï¼šæ ¹æ®ä»»åŠ¡ç±»å‹ï¼Œåšå‡½æ•°åˆ†å‘ã€‚åœ¨å­å‡½æ•°ä¸­ï¼Œä¼šè¿›ä¸€æ­¥åŸºäº Request æˆ– Notification çš„ç±»å‹ç»§ç»­åˆ†å‘åˆ°æœ€ç»ˆçš„å¤„ç†å‡½æ•°ä¸­ï¼Œå¦‚å¤„ç†æ–‡ä»¶å˜æ›´ã€å¤„ç†è·³è½¬è¯·æ±‚ç­‰ã€‚è¿™äº›å‡½æ•°ä¼šæ ¹æ®åŸºäºç¼–è¯‘å™¨ä¸­å‰ç«¯ç¼–è¯‘å‡ºçš„è¯­ä¹‰æ¨¡å‹ï¼ˆASTï¼Œç¬¦å·è¡¨ï¼Œé”™è¯¯ä¿¡æ¯ç­‰ï¼‰åšåˆ†æï¼Œè®¡ç®—ç”Ÿæˆå¯¹åº”çš„ Responseï¼ˆå¦‚è·³è½¬è¯·æ±‚çš„ç›®æ ‡ä½ç½®ï¼‰ã€‚</p><p>3.2 å¤„ç†å˜æ›´ï¼šç”¨æˆ·åœ¨ä¿®æ”¹ä»£ç æˆ–æ›´æ”¹æ–‡ä»¶æ—¶ï¼Œä¼šå‘é€å¯¹åº”çš„ Notificationã€‚åœ¨å‰ä¸€æ­¥çš„å¤„ç†ä¸­ï¼Œä¼šå°†å˜æ›´ä¿å­˜åœ¨è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰ä¸­ã€‚Server ç«¯ä¼šæ ¹æ®æ–°çš„æºä»£ç ï¼Œè¿›è¡Œé‡æ–°ç¼–è¯‘ï¼Œä¿å­˜æ–°çš„è¯­ä¹‰æ¨¡å‹ï¼Œä»¥ä¾›ä¸‹ä¸€ä¸ªè¯·æ±‚åšå¤„ç†ã€‚</p><p>3.3 é”™è¯¯å¤„ç†ï¼šè¿™é‡Œçš„é”™è¯¯å¹¶éæŒ‡ Server ç«¯çš„è¿è¡Œé”™è¯¯ï¼Œè€Œæ˜¯ä»£ç ç¼–è¯‘ä¸­çš„è¯­æ³•ã€è¯­ä¹‰é”™è¯¯ï¼Œç¼–è¯‘è­¦å‘Šç­‰ã€‚Client ç«¯å¹¶æ²¡æœ‰å¯¹åº”çš„è¯·æ±‚ç±»å‹æ¥è¯·æ±‚è¿™äº›é”™è¯¯ï¼Œè€Œæ˜¯ç”± Server ç«¯ä¸»åŠ¨å‘é€ Diagnosticsã€‚å› æ­¤ï¼Œåœ¨å‘ç”Ÿå˜æ›´åï¼ŒåŒæ­¥åœ°å°†é”™è¯¯ä¿¡æ¯æ›´æ–°è‡³ Client ç«¯ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜<a href="#é‡åˆ°çš„é—®é¢˜" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ">1. ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Ÿ<a href="#1-ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨æœ€åˆçš„è®¾è®¡ä¸­ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘ä½¿ç”¨è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚æˆ‘ä»¬æ¯æ¬¡ä»æ–‡ä»¶ç³»ç»Ÿä¸­è·å–æºä»£ç ï¼Œè¿›è¡Œç¼–è¯‘å’Œåˆ†æã€‚å¯¹äºä¸€äº›â€œé™æ€â€çš„ä»»åŠ¡ï¼Œå¦‚è·³è½¬ï¼Œå¯ä»¥åœ¨å˜æ›´ä»£ç åä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åå†è¿›è¡Œè·³è½¬çš„æ“ä½œã€‚é…åˆåˆ° VS Code çš„è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ï¼Œä½“éªŒä¸Šå¹¶æ²¡æœ‰æ˜æ˜¾çš„å·®è·ã€‚ä½†å¯¹äºä»£ç è¡¥å…¨è¿™ä¸€åŠŸèƒ½ï¼ŒIDE ä¸­è¾“å…¥çš„è¡¥å…¨triggerï¼ˆå¦‚ â€œ.â€ï¼‰ä¼šè§¦å‘æ–‡ä»¶å˜æ›´çš„é€šçŸ¥å’Œä»£ç è¡¥å…¨çš„è¯·æ±‚ï¼Œä½†å¯¹åº”çš„ä»£ç è¿˜æœªä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç¼–è¯‘åçš„è¯­ä¹‰æ¨¡å‹æ— æ³•åšå¯¹åº”çš„åˆ†æã€‚å› æ­¤ï¼Œæˆ‘ä»¬å€ŸåŠ© Rust Analyzer å¯¹åº”çš„ vfs çš„createï¼Œåœ¨ Server ç«¯å¼•å…¥äº†è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå°†ç¼–è¯‘çš„å…¥å£ä»æ–‡ä»¶è·¯å¾„å˜ä¸ºäº† source codeã€‚Client ç«¯è¾“å…¥ä»£ç åï¼Œæ–‡ä»¶å˜æ›´çš„é€šçŸ¥ä¼šå…ˆæ›´æ–°è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œé‡æ–°ç¼–è¯‘æ–‡ä»¶ï¼Œç”Ÿæˆæ–°çš„è¯­ä¹‰æ¨¡å‹ï¼Œç„¶åå†å¤„ç†è¡¥å…¨è¯·æ±‚ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-å¦‚ä½•å¤„ç†ä¸å®Œæ•´çš„ä»£ç ">2. å¦‚ä½•å¤„ç†ä¸å®Œæ•´çš„ä»£ç ï¼Ÿ<a href="#2-å¦‚ä½•å¤„ç†ä¸å®Œæ•´çš„ä»£ç " class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>æˆ‘ä»¬é‡åˆ°çš„å¦ä¸€ä¸ªæ¯”è¾ƒå¤§çš„é—®é¢˜æ˜¯å¦‚ä½•å¤„ç†ä¸å®Œæ•´çš„ä»£ç ã€‚åŒæ ·çš„ï¼Œå¯¹äºè·³è½¬è¿™ç±»â€œé™æ€â€çš„ä»»åŠ¡ï¼Œå¯ä»¥å‡å®šä»£ç æ˜¯å®Œæ•´ã€æ­£ç¡®çš„ã€‚ä½†å¯¹äºè¡¥å…¨æ“ä½œï¼Œå¦‚ä»¥ä¸‹ä»£ç ï¼Œå¸Œæœ›åœ¨è¾“å…¥.åï¼Œè¡¥å…¨å­—ç¬¦ä¸²çš„å‡½æ•°ã€‚å¯¹äºç¼–è¯‘æµç¨‹ï¼Œç¬¬äºŒè¡Œå®é™…ä¸Šæ˜¯ä¸å®Œæ•´çš„ä»£ç ï¼Œæ— æ³•ç¼–è¯‘å‡ºæ­£å¸¸çš„ AST æ ‘ã€‚</p><div class="language-Rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s: str = "hello kcl"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">len = s.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨ KCL çš„ç¼–è¯‘ä¸­å®ç°äº†è¯­æ³•å’Œè¯­ä¹‰ä¸Šçš„å¤šç§é”™è¯¯æ¢å¤ï¼Œä¿è¯ç¼–è¯‘è¿‡ç¨‹å§‹ç»ˆèƒ½äº§ç”Ÿå®Œæ•´çš„ AST å’Œç¬¦å·è¡¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ªè¡¨ç¤ºç©ºçš„ AST èŠ‚ç‚¹ä½œä¸ºå ä½ç¬¦ï¼Œä½¿å¾—ç¬¬äºŒè¡Œèƒ½å¤Ÿç”Ÿæˆå®Œæ•´çš„ ASTã€‚åœ¨å¤„ç†è¡¥å…¨çš„è¯·æ±‚æ—¶ï¼Œä¼šæ ¹æ® s çš„ç±»å‹å’Œå…¶ä»–è¯­ä¹‰ä¿¡æ¯ï¼Œè¡¥å…¨å‡½æ•°åã€schema attr æˆ– pkg ä¸­å®šä¹‰çš„ schema åã€‚</p><blockquote><p>Rust Analyzer architecture:</p><p>Architecture Invariant: parsing never fails, the parser produces (T, Vec<!-- -->&lt;<!-- -->Error<!-- -->&gt;<!-- -->) rather than Result<!-- -->&lt;<!-- -->T, Error<!-- -->&gt;<!-- -->.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€»ç»“ä¸å±•æœ›">æ€»ç»“ä¸å±•æœ›<a href="#æ€»ç»“ä¸å±•æœ›" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL çš„ IDE æ’ä»¶ç›®å‰å·²ç»å®ç°é«˜äº®ã€è·³è½¬ã€è¡¥å…¨ã€Outlineã€æ‚¬åœã€é”™è¯¯æç¤ºç­‰åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½æå‡äº† KCL ç”¨æˆ·çš„å¼€å‘æ•ˆç‡ã€‚ç„¶è€Œï¼Œä½œä¸ºä¸€æ¬¾ IDE æ’ä»¶ï¼Œå®ƒçš„åŠŸèƒ½è¿˜ä¸å¤Ÿå®Œæ•´ã€‚åœ¨æœªæ¥çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šç»§ç»­å®Œå–„ï¼Œæœªæ¥çš„å·¥ä½œæœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹å‘ï¼š</p><ul><li>æ›´å¤šçš„è¯­è¨€èƒ½åŠ›ï¼šæä¾›æ›´å¤šçš„åŠŸèƒ½ï¼Œå¦‚ä»£ç é‡æ„ï¼Œé”™è¯¯çš„quick fixï¼Œä»£ç  fmtç­‰ï¼Œè¿›ä¸€æ­¥å®Œå–„åŠŸèƒ½ï¼Œæå‡å¼€å‘æ•ˆç‡</li><li>æ›´å¤šçš„ IDE æ¥å…¥ï¼šç›®å‰ï¼ŒKCL è™½ç„¶æä¾›äº† LSPï¼Œåªæ¥å…¥äº† VS Codeï¼Œæœªæ¥ä¼šåŸºäº LSP çš„èƒ½åŠ›ä¸º KCL ç”¨æˆ·æä¾›æ›´å¤šé€‰æ‹©ã€‚</li><li>AI èƒ½åŠ›çš„é›†æˆï¼šç›®å‰ï¼ŒChatGPT é£é¡å…¨ç½‘ï¼Œå„è¡Œå„ä¸šéƒ½åœ¨å…³æ³¨ã€‚æˆ‘ä»¬ä¹Ÿåœ¨æ¢ç´¢ AIÃ—KCL çš„ç»“åˆï¼Œæä¾›æ›´æ™ºèƒ½çš„ç ”å‘ä½“éªŒã€‚æ€»ä¹‹ï¼Œæˆ‘ä»¬ä¼šç»§ç»­å®Œå–„å’Œä¼˜åŒ– KCL çš„ IDE æ’ä»¶ï¼Œè®©å®ƒæ›´åŠ æˆç†Ÿå’Œå®ç”¨ã€‚ä¸ºKCLç”¨æˆ·å¸¦æ¥æ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆçš„å¼€å‘ä½“éªŒã€‚
å¦‚æœæ‚¨æœ‰æ›´å¤šçš„æƒ³æ³•å’Œéœ€æ±‚ï¼Œæ¬¢è¿åœ¨ KCL Github ä»“åº“å‘èµ· Issue æˆ–è®¨è®ºï¼Œä¹Ÿæ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ™Œ ğŸ™Œ ğŸ™Œ</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[WAIC 2023 ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-03-26-kcl-os2atc-meeting</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-03-26-kcl-os2atc-meeting"/>
        <updated>2023-07-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL Talk Cover]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" alt="KCL Talk Cover" src="/zh-CN/assets/images/talk-cover-d1ad5adb402484a069bfc2b3a906c55e.jpg" width="2766" height="1108" class="img_ev3q"></p><p><a href="https://kcl-lang.github.io/talks/kcl-waic2023.pdf" target="_blank" rel="noopener noreferrer">PDF ä¸‹è½½</a></p>]]></content>
        <author>
            <name>å¾é¹é£</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Configuration" term="Configuration"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[èŠèŠ K8S ä¸­çš„ Sidecar è®¾è®¡æ¨¡å¼Â·ç¬¬ 2 ç¯‡]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-06-29-k8s-sidecar-2</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-06-29-k8s-sidecar-2"/>
        <updated>2023-06-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä»‹ç»]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»‹ç»">ä»‹ç»<a href="#ä»‹ç»" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>åœ¨å‰ä¸€ç¯‡æ–‡ç«  <a href="/zh-CN/blog/2023-06-05-k8s-sidecar-1/">èŠèŠ K8S ä¸­çš„Sidecarè®¾è®¡æ¨¡å¼Â·ç¬¬ 1 ç¯‡</a>ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†åœŸè¯è¯´çš„ä¸‰è¹¦å­çš„ Sidecar è®¾è®¡æ¨¡å¼ã€‚æœ¬æ–‡å°è¯•ç”¨ KCL è¿™ç§ç°ä»£åŒ–çš„ç±»å‹å®‰å…¨çš„é…ç½®è¯­è¨€ï¼Œæ¥å±•ç¤º Pod èµ„æºçš„æè¿°ï¼Œåœ¨åç»­çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥ KCL æ¥ä»‹ç» Sidecar è¿™ç§æ¨¡å¼çš„å®é™…åº”ç”¨ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-pod-çš„-openapi-å®šä¹‰">1. Pod çš„ OpenAPI å®šä¹‰<a href="#1-pod-çš„-openapi-å®šä¹‰" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>å…ˆå›åˆ°æœ€å¼€å§‹æœ€ç®€å•çš„ Nginx ä¾‹å­ï¼Œå…¶ YAML æ–‡ä»¶å‡ ä¹æ˜¯ç›¸åŒçš„æ¨¡å¼ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™é‡Œçš„ Pod æ•°æ®æ»¡è¶³ Kubernetes è§„èŒƒ ä¸­ <code>io.k8s.api.core.v1.Pod</code> æ¨¡å‹çš„å®šä¹‰ã€‚å®Œæ•´çš„ OpenAPI å®šä¹‰è¯· <a href="https://github.com/kubernetes/kubernetes/tree/master/api/openapi-spec" target="_blank" rel="noopener noreferrer">å‚è€ƒ</a>ã€‚ä»”ç»†åˆ†æå¯ä»¥å‘ç°ï¼ŒapiVersion å’Œ kind ä¿¡æ¯éƒ½æ˜¯æ¯”è¾ƒå¸¸è§çš„é»˜è®¤é…ç½®ï¼Œæˆ‘ä»¬éœ€è¦æ›´ç°ä»£çš„é…ç½®è¯­è¨€æ¥ç®€åŒ–ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-ä½¿ç”¨-kcl-å®šä¹‰-pod-èµ„æº">2. ä½¿ç”¨ KCL å®šä¹‰ Pod èµ„æº<a href="#2-ä½¿ç”¨-kcl-å®šä¹‰-pod-èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL æ˜¯ä¸€é—¨é¢å‘äº‘åŸç”Ÿé¢†åŸŸé…ç½®ç­–ç•¥è¯­è¨€ï¼Œè¯¦ç»†èµ„æ–™å¯å‚è€ƒ<a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">è¯­è¨€å®˜ç½‘</a></p><p>åŸºæœ¬çš„ KCL é…ç½®ç¨‹åºä»ç„¶éµå¾ª <code>K=V</code> çš„å½¢å¼ï¼Œ YAML æ¯”è¾ƒç›¸ä¼¼ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„ KCL ä»£ç æ¥é‡å†™ Nginx å®¹å™¨çš„é…ç½®ï¼š</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> k8core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pod </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"main-container"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­ import å¯¼å…¥äº† k8s åŒ…ä¸­çš„ <code>k8s/api/core/v1</code> åŒ…ï¼Œå…¶ä¸­çš„ Pod ç»“æ„å®šä¹‰å¯¹åº” Pod æ¨¡å‹ï¼Œå…¶ä¸­å·²ç»åŒ…å«äº† apiVersion å’Œ kind çš„é»˜è®¤å€¼ï¼Œå› æ­¤åªéœ€è¦æ·»åŠ  <code>metadata.name</code> å’Œ <code>spec.containers</code> å±æ€§ï¼ˆKCL ä¹Ÿé’ˆå¯¹ä¸€äº›å¤šçº§åµŒå¥—çš„å±æ€§æä¾›äº†çš„è¯­æ³•ç³–ï¼‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="https://kcl-lang.io/docs/user_docs/guides/package-management/installation" target="_blank" rel="noopener noreferrer">kpm åŒ…ç®¡ç†å·¥å…·</a>ï¼Œåˆ›å»ºä¸€ä¸ª KCL ç¨‹åºæ¥å®šä¹‰ä¸€ä¸ª Pod èµ„æºã€‚å¹¶æ‰§è¡Œè¿™ä¸ªç¨‹åºæ¥å¾—åˆ°å¯¹åº”çš„ YAMLã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 1. åˆå§‹åŒ–ä¸€ä¸ª kcl ç¨‹åºåŒ… hello.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kpm init hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 2. ç¼–è¾‘ hello åŒ…å†…çš„ main.k æ–‡ä»¶ï¼Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># å°†å‰æ–‡ä¸­æåˆ°çš„ KCL é…ç½®ä»£ç æ·»åŠ åˆ° hello/main.k ä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> hello/main.k</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">import k8s.api.core.v1 as k8core</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">k8core.Pod {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    metadata.name = "web-app"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec.containers = [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        name = "main-container"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        image = "nginx"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        ports = [{containerPort: 80}]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 3. è¿›å…¥åˆ° hello åŒ…å†…ï¼Œæ·»åŠ  k8s ä¾èµ–ï¼Œå¹¶ä¸”è¿è¡Œ hello åŒ…ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> hello </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kpm </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> k8s </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kpm run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥å¾—åˆ°å¦‚ä¸‹ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-å°ç»“">3. å°ç»“<a href="#3-å°ç»“" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è¿™ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ç®€è¦ä»‹ç»äº†å¦‚ä½•é€šè¿‡ KCL æ„å»ºå‡º Pod é…ç½®æ¥è·å¾—æ›´çµæ´»ã€æ›´å¥å£®çš„é…ç½®ã€‚åç»­æ–‡ç« ä¸­æˆ‘ä»¬å°†é€šè¿‡ KCL æ¥æç‚¼å’ŒæŠ½è±¡æœ€ä½³çš„ Sidecar æ¨¡å¼å®è·µï¼ŒåŒ…æ‹¬ä½¿ç”¨ KCL å¯¹ Sidecar æ¨¡å‹è¿›è¡ŒæŠ½è±¡ä»¥åŠä½¿ç”¨ KCL å¯¹å·²å­˜åœ¨çš„ä¸Šæ¸¸ YAML é…ç½®è¿›è¡Œ Sidecar æ³¨å…¥ã€‚</p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="k8s" term="k8s"/>
        <category label="Sidecar" term="Sidecar"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[èŠèŠ K8S ä¸­çš„ Sidecar è®¾è®¡æ¨¡å¼Â·ç¬¬ 1 ç¯‡]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-06-05-k8s-sidecar-1</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-06-05-k8s-sidecar-1"/>
        <updated>2023-06-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä»‹ç»]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»‹ç»">ä»‹ç»<a href="#ä»‹ç»" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><code>Sidecar</code> åŒ—äº¬åœŸè¯å«ä¸‰è¹¦å­ï¼Œé€šä¿—å«å°±æ˜¯å¸¦æ£šå­çš„ä¸‰è½®æ‘©æ‰˜è½¦ã€‚ä»Šå¤©æˆ‘ä»¬è¦èŠçš„ K8S ä¸­ä¸‰è¹¦å­ä¹Ÿç§°ä¸ºè¾¹ä¸‰è½®è½¦ï¼šè¾¹ä¸‰è½®è½¦æ˜¯åœ¨æ‘©æ‰˜è½¦è¾¹ä¸ŠæŒ‚é ä¸€ä¸ªæ‹–æ–—ï¼Œäº‘åŸç”Ÿä¸­çš„å«æ³•æ˜¯ä¸»å®¹å™¨å’Œè¾¹å®¹å™¨ã€‚æœ¬ç³»åˆ—æ–‡ç« å°†å±•ç¤º <code>Sidecar</code> æ¨¡å¼çš„ç”¨æ³•ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL</a> ç­‰é¢å‘é…ç½®çš„ç¼–ç¨‹è¯­è¨€æ¥ç®€åŒ– YAML çš„ç¼–å†™ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸€ä¸ªæœ€ç®€å•çš„äº‘åŸç”Ÿ-web-æœåŠ¡">ä¸€ä¸ªæœ€ç®€å•çš„äº‘åŸç”Ÿ Web æœåŠ¡<a href="#ä¸€ä¸ªæœ€ç®€å•çš„äº‘åŸç”Ÿ-web-æœåŠ¡" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>é¦–å…ˆä»¥æœ€ç®€æ–¹å¼åœ¨ <code>Kubernetes</code> ç¯å¢ƒå¯åŠ¨ä¸€ä¸ª Web æœåŠ¡ã€‚åœ¨ä¸‹é¢ <code>pod.yaml</code> æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ª <code>Pod</code>ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ª <code>Nginx</code> æœåŠ¡ï¼Œåœ¨ 80 ç«¯å£å¯åŠ¨ä¸€ä¸ª <code>web</code> æœåŠ¡ã€‚</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Pod</code> æ˜¯äº‘åŸç”Ÿä¸­çš„ä¸€ä¸ªåŸºç¡€åŸè¯­ã€‚<code>Pod</code> å°†å¤šä¸ªå®¹å™¨åŒ…è£…ä¸ºä¸€ä¸ªé€»è¾‘å•å…ƒï¼Œ<code>Kubernetes</code> è¿è¡Œæ—¶ç¡®ä¿ <code>Pod</code> ä¸­çš„å®¹å™¨è¿è¡Œåœ¨ä¸€ä¸ªæœºå™¨ä¸Šã€‚å› æ­¤ <code>Pod</code> ä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½å…±äº«ç”Ÿå‘½å‘¨æœŸã€å…±äº«ç£ç›˜å·ã€å…±äº«ç½‘ç»œç¯å¢ƒç­‰ã€‚<code>Sidecar</code> æ¨¡å¼å°±æ˜¯åœ¨ <code>Pod</code> ä¸­å¢åŠ å…¶ä»–å®¹å™¨æ¥æ‰©å±•å’Œå¢å¼ºä¸»å®¹å™¨çš„èƒ½åŠ›ã€‚</p><p>ç„¶åé€šè¿‡ <code>kubectl create</code> å‘½ä»¤è¡Œå·¥å…·åˆ›å»º <code>Pod</code>ï¼Œç„¶åé€šè¿‡ <code>kubectl get po</code> æŸ¥çœ‹ <code>Pod</code> æ‰§è¡ŒçŠ¶æ€ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get po</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME READY STATUS RESTARTS AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">web-app </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1 Running </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> 45m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåä¸º <code>web-app</code> çš„ <code>Pod</code> å·²ç»æ­£å¸¸å¯åŠ¨å¹¶è¿è¡Œï¼Œå…¶ä¸­åŒ…å« <code>Nginx</code> æœåŠ¡ã€‚ä¸ºäº†ä¾¿äºå¤–éƒ¨è®¿é—®é…ç½®ç«¯å£è½¬å‘ï¼Œå°†å®¿ä¸»çš„ 3999 ç«¯å£å¯¹åº”åˆ°ä¸»å®¹å™¨çš„ 80 ç«¯å£ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward web-app </span><span class="token number" style="color:#36acaa">3999</span><span class="token plain">:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding from </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:3999 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding from </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">::1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:3999 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç«¯å£è½¬å‘æ˜¯ä¸€ä¸ªé˜»å¡ç¨‹åºï¼Œä¿æŒå‘½ä»¤è¡Œçª—å£æ‰“å¼€ã€‚ç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€æµ‹è¯•é¡µé¢ï¼š</p><p><img loading="lazy" src="/zh-CN/assets/images/port-forward-fcc6e21e525bbdb7d267d01ffc61c85c.png" width="1136" height="614" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é€šè¿‡-sidecar-å®šæ‰©å±•é¡µé¢å†…å®¹">é€šè¿‡ Sidecar å®šæ‰©å±•é¡µé¢å†…å®¹<a href="#é€šè¿‡-sidecar-å®šæ‰©å±•é¡µé¢å†…å®¹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ç°åœ¨æˆ‘ä»¬å°è¯•åœ¨ä¸ä¿®æ”¹åŸå§‹ <code>Nginx</code> å®¹å™¨é•œåƒçš„å‰æä¸‹ï¼Œé€šè¿‡ <code>Sidecar</code> æ¨¡å¼ä¸º <code>Nginx</code> æœåŠ¡å¢åŠ å®šåˆ¶ <code>Web</code> é¡µé¢çš„èƒ½åŠ›ã€‚åœ¨å¼€å§‹å‰å…ˆåˆ é™¤ä¹‹å‰å¯åŠ¨çš„ <code>Pod</code>ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete po web-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod </span><span class="token string" style="color:#e3116c">"web-app"</span><span class="token plain"> deleted</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶ååœ¨ <code>Pod</code> ä¸­å¢åŠ ç¬¬äºŒä¸ª <code>Busybox Sidecar</code> å®¹å™¨ï¼Œå®Œæ•´çš„ <code>pod.yaml</code> æ–‡ä»¶å¦‚ä¸‹ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># --- ä»¥ä¸‹æ˜¯æ–°æ·»åŠ çš„å†…å®¹ ---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å’Œ Sidecar é€šè¿‡ ç£ç›˜å·å…±äº«è¦å‘å¸ƒçš„æ–‡ä»¶ç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /usr/share/nginx/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Sidecar å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"/bin/sh"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"-c"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"while true; do echo $(date -u) 'Hi I am from Sidecar container' &gt; /var/log/index.html; sleep 5;done"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Sidecar</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /var/log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Pod ä¸­å…¨éƒ¨å®¹å™¨å…±äº«ç£ç›˜å·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">emptyDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Busybox Sidecar</code> å®¹å™¨æ‰§è¡Œçš„å‘½ä»¤å¯¹åº”ä»¥ä¸‹ <code>Shell</code> è„šæœ¬ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">date</span><span class="token variable" style="color:#36acaa"> -u</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Hi I am from Sidecar container'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /var/log/index.html</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Sidecar</code> å®¹å™¨åªæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼šæ¯éš” 5 ç§’é’Ÿè¦†ç›–ä¸€æ¬¡ <code>/var/log/index.html</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åˆšå¥½å¯¹åº” <code>Nginx</code> çš„æœåŠ¡çš„é¦–é¡µé¡µé¢æ–‡ä»¶ã€‚</p><p>ç„¶åé‡æ–°å¯åŠ¨ <code>Pod</code>ï¼Œå¹¶é‡æ–°æ˜ å°„æœ¬åœ°å®¿ä¸»æœºç«¯å£åˆ°å®¹å™¨ç«¯å£ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f pod.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/web-app created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward web-app </span><span class="token number" style="color:#36acaa">3999</span><span class="token plain">:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding from </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:3999 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Forwarding from </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">::1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:3999 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é‡æ–°æ‰“å¼€æµè§ˆå™¨åå°†çœ‹åˆ°ä»¥ä¸‹é¡µé¢ï¼š</p><p><img loading="lazy" src="/zh-CN/assets/images/port-forward-1-3d8c5e37622b12a92121d7f040f52825.png" width="1038" height="192" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sidecar-æ¨¡å¼çš„å·¥ä½œåŸç†">Sidecar æ¨¡å¼çš„å·¥ä½œåŸç†<a href="#sidecar-æ¨¡å¼çš„å·¥ä½œåŸç†" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ç®€å•æ¥è¯´ï¼Œ<code>Busybox</code> æ˜¯ <code>Sidecar</code> å®¹å™¨è§’è‰²ï¼Œè´Ÿè´£ç”Ÿäº§é¦–é¡µæ•°æ®ï¼›è€Œ <code>Nginx</code> æ˜¯ä¸»å®¹å™¨ï¼Œè´Ÿè´£æ¶ˆè´¹ <code>Busybox</code> ç”Ÿäº§çš„ä¸»é¡µæ•°æ®ï¼›ä¸¤ä¸ªå®¹å™¨é€šè¿‡ <code>var-logs</code> ç£ç›˜å·å…±äº«ç©ºé—´ã€‚å¦‚æœä»¥ Go è¯­è¨€çš„æœ¯è¯­ç±»æ¯”ï¼Œ<code>Nginx</code> æ˜¯ä¸» <code>Goroutine</code>ï¼Œ<code>Busybox</code> æ˜¯åå°å¹²è„æ´»çš„ <code>Goroutine</code>ï¼Œè€Œå…±äº«çš„ç£ç›˜å·ç±»ä¼¼ <code>Channel</code> çš„ä½œç”¨ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/how-sidecar-work-0c950a059d9aeb53ecee68e3509baf64.png" width="1066" height="658" class="img_ev3q"></p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ <code>Nginx</code> ä¾ç„¶æ˜¯ä¸»å®¹å™¨ï¼Œ<code>Sidecar</code> å®¹å™¨æ˜¯ <code>BusyBox</code>ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æŒ‚æ›´å¤š <code>Sidecar</code> å®¹å™¨ï¼Œæ¯”å¦‚ç½‘ç»œã€ç›‘æ§ã€æ—¥å¿—ç­‰ç­‰ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/how-sidecar-work-1-1670ff5790f17bd1be1f502f404d8a7e.png" width="1512" height="616" class="img_ev3q"></p><p>è¿™æ ·å°±é€šè¿‡ <code>Sidecar</code> æ¨¡å¼ï¼Œåœ¨ä¸ä¿®æ”¹ <code>Nginx</code> ä¸»å®¹å™¨çš„å‰æä¸‹ï¼Œæ‰©å±•å‡ºäº†ç½‘ç»œã€ç›‘æ§ã€æ—¥å¿—ç­‰èƒ½åŠ›ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sidecar-æ¨¡å¼çš„ä¼˜ç‚¹">Sidecar æ¨¡å¼çš„ä¼˜ç‚¹<a href="#sidecar-æ¨¡å¼çš„ä¼˜ç‚¹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ç°åœ¨å®¹å™¨å·²ç»æˆä¸ºä¸€ç§æµè¡Œçš„æ‰“åŒ…æŠ€æœ¯ï¼Œå„ç§ä¸åŒè§’è‰²çš„åŒå­¦å¯ä»¥é€šè¿‡å®¹å™¨ä»¥ç»Ÿä¸€çš„æ–¹å¼æ„å»ºã€å‘å¸ƒå’Œè¿è¡Œç¨‹åºï¼Œç”šè‡³ç®¡ç†å„ç§èµ„æºã€‚å› æ­¤å®¹å™¨æ›´åƒä¸€ä¸ªåŠŸèƒ½æ˜ç¡®çš„äº§å“ï¼Œå®ƒæœ‰è‡ªå·±çš„è¿è¡Œæ—¶ã€å‘å¸ƒå‘¨æœŸã€æ–‡æ¡£å’Œ API ç­‰ã€‚å¥½çš„å®¹å™¨/äº§å“åªè´Ÿè´£è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œä¿æŒäº† KISS åŸåˆ™å¯ä»¥è®©å®¹å™¨æœ¬èº«å…·æœ‰æé«˜çš„é‡ç”¨æ€§å’Œå¯è¢«æ›¿ä»£æ€§ã€‚æ­£æ˜¯å› ä¸ºå¯é‡ç”¨æ‰ä½¿å¾—ç°ä»£åŒ–çš„æ„å»ºç¨‹åºçš„æµç¨‹æ›´åŠ æ•æ·å’Œé«˜æ•ˆã€‚ä½†æ˜¯å¯å¤ç”¨çš„å®¹å™¨ä¸€èˆ¬éƒ½åŠŸèƒ½å•ä¸€ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦é€šè¿‡å„ç§æ‰‹æ®µæ‰©å±•å®¹å™¨çš„åŠŸèƒ½ï¼Œä»¥åŠéœ€è¦æ›´å¤šçš„å®¹å™¨ä¹‹é—´çš„ååŒã€‚</p><p>ä¸‰è¹¦å­ <code>Sidecar</code> å¯ä»¥åœ¨ä¸æ”¹é€ ä¸»æ‘©æ‰˜è½¦çš„å‰æä¸‹å¢åŠ  N ä¸ªæ‹–è½¦åŠŸèƒ½ï¼Œç›¸åº”åœ°äº‘åŸç”Ÿ <code>Sidecar</code> æ¨¡å¼å¯ä»¥åœ¨æ— éœ€ä¿®æ”¹ä¸»å®¹å™¨çš„å‰æä¸‹æ‰©å±•å¹¶å¢å¼ºå·²æœ‰ä¸»å®¹å™¨åŠŸèƒ½ã€‚å¦‚æœå°†äº‘åŸç”Ÿçš„ç©æ³•å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹è”ç³»èµ·æ¥ï¼Œå®¹å™¨é•œåƒå°±æ˜¯ <code>Java</code> ä¸­çš„ <code>class</code>ï¼Œè€Œæ‰§è¡Œä¸­çš„å®¹å™¨å°±æ˜¯ <code>class</code> çš„å®ä¾‹ã€‚è€Œé¢å‘å¯¹è±¡çš„ <code>class</code> ç»§æ‰¿å°±æ˜¯åŸºäºå·²æœ‰çš„å®¹å™¨é•œåƒåšæ‰©å±•ï¼Œ<code>Sidecar</code> åˆ™æ˜¯é€šè¿‡ç±»ä¼¼ç»„åˆçš„æ¨¡å¼æ‰©å±• <code>class</code> çš„èƒ½åŠ›ã€‚</p><p>é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­æœ‰ä¸€ä¸ªâ€œç»„åˆä¼˜äºç»§æ‰¿ï¼Œå¤šç”¨ç»„åˆå°‘ç”¨ç»§æ‰¿â€çš„è§„åˆ™ï¼Œå› æ­¤ Sidecar ä¹Ÿæ˜¯æ¨èä½¿ç”¨çš„æ¨¡å¼ã€‚æ­£æ˜¯å› ä¸ºä¸‰è¹¦å­æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œæœ€è¿‘åœ¨äº‘åŸç”Ÿåœºæ™¯ä¹Ÿè¢«å¤§é‡ä½¿ç”¨ï¼šæ¯”å¦‚åœ¨è¾¹è½¦ä¸Šæ¶ä¸€äº›ç±»ä¼¼æœºå…³æªçš„ç½‘ç»œæœåŠ¡ã€ç›‘æ§ã€è·Ÿè¸ªç­‰åŠŸèƒ½ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è¿™ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ç®€è¦ä»‹ç»å¹¶åœ¨ <code>Kubernetes</code> ç¯å¢ƒå±•ç¤ºäº† <code>Sidecar</code> æ¨¡å¼ï¼ŒåŒæ—¶ç»“åˆä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³å¯¹æ¯”äº† <code>Sidecar</code> å’Œç»„åˆç¼–ç¨‹æ¨¡å¼çš„å…³ç³»ã€‚<code>Sidecar</code> æ¨¡å¼çš„ä¼˜åŠ¿ä¸ä»…ä»…ä½“ç°åœ¨æ— å®³å¢å¼ºä¸»å®¹å™¨ï¼Œæ›´çµæ´»çš„æ˜¯å¯ä»¥åœ¨ <code>apply</code> æ—¶åŠ¨æ€è°ƒæ•´ <code>Sidecar</code> èƒ½åŠ›ã€‚</p><p>åœ¨åé¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å°è¯•ç»“åˆ <code>KCL</code> ç­‰ç°ä»£åŒ–çš„äº‘åŸç”Ÿé…ç½®è¯­è¨€æ¥ç®€åŒ– <code>Sidecar</code> é…ç½®çš„ç¼–å†™ã€‚é€šè¿‡å°è¯•æ¢ç´¢é€šè¿‡ <code>KCL</code> åŠ¨æ€æ³¨å…¥å’Œä¿®æ”¹ <code>Sidecar</code> æ¥æ‰©å±•åŸºäºå·²æœ‰é…ç½®çš„èƒ½åŠ›ã€‚</p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="k8s" term="k8s"/>
        <category label="Sidecar" term="Sidecar"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL ä¸å…¶ä»– Kubernetes é…ç½®ç®¡ç†å·¥å…·çš„å¼‚åŒ - Helm ç¯‡]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-05-30-vs-helm</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-05-30-vs-helm"/>
        <updated>2023-05-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ç®€ä»‹]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm</a> æ˜¯ä¸€ä¸ªä¸º Kubernetes å¯¹è±¡ç”Ÿæˆå¯éƒ¨ç½²æ¸…å•çš„å·¥å…·ï¼Œå®ƒæ‰¿æ‹…äº†ä»¥ä¸¤ç§ä¸åŒå½¢å¼ç”Ÿæˆæœ€ç»ˆæ¸…å•çš„ä»»åŠ¡ã€‚Helm æ˜¯ä¸€ä¸ªç®¡ç† Kubernetes åŒ…ï¼ˆç§°ä¸º chartsï¼‰çš„å¿…å¤‡æ¨¡æ¿å·¥å…·ã€‚å›¾è¡¨æ˜¯ YAML æ¸…å•çš„æ¨¡æ¿åŒ–ç‰ˆæœ¬ï¼Œå…¶ä¸­æ··åˆäº† Go template çš„å­é›†ï¼Œå®ƒä¹Ÿæ˜¯ Kubernetes çš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥æ‰“åŒ…ã€é…ç½®å’Œéƒ¨ç½²/åº”ç”¨ Helm å›¾è¡¨åˆ° Kubernetes é›†ç¾¤ã€‚</p><p>åœ¨ KCL ä¸­ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨æ›´å¤šçš„å·¥å…·å’Œ IDE æ’ä»¶æ”¯æŒç›´æ¥ç¼–å†™é…ç½®ä»£ç æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ¨¡æ¿æ–‡ä»¶ï¼Œè¿™äº›å·¥å…·å’Œæ’ä»¶æ”¯æŒéœ€è¦åœ¨ç›¸åº”ä½ç½®çš„ä»£ç ä¸­è¿›è¡Œä¿®æ”¹ï¼Œä»è€Œæ¶ˆé™¤äº†è¯»å– YAML çš„æˆæœ¬ã€‚åŒæ—¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä»£ç é‡ç”¨é…ç½®ç‰‡æ®µï¼Œé¿å…äº†YAML é…ç½®çš„å¤§é‡å¤åˆ¶å’Œç²˜è´´ã€‚ä¿¡æ¯å¯†åº¦æ›´é«˜ï¼Œæ›´ä¸å®¹æ˜“å‡ºé”™ã€‚</p><p>ä¸‹é¢ä»¥ä¸€ä¸ªç»å…¸çš„ Helm Chart é…ç½®ç®¡ç†çš„ä¾‹å­è¯¦ç»†è¯´æ˜ Kustomize å’Œ KCL åœ¨ Kubernetes èµ„æºé…ç½®ç®¡ç†ä¸Šçš„åŒºåˆ«ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="helm">Helm<a href="#helm" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>Helm å…·å¤‡ <code>values.yaml</code> å’Œ <code>template</code> çš„æ¦‚å¿µ, é€šå¸¸ä¸€ä¸ª Helm Chart ç”±ä¸€ä¸ªåŒ…å« <code>Chart.yaml</code> çš„è·¯å¾„ç»„æˆã€‚æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è·å¾—ä¸€ä¸ªå…¸å‹çš„ Helm Chart å·¥ç¨‹</p><ul><li>åˆ›å»º <code>workload-helm</code> ç›®å½•æ¥ä¿å­˜ chart å·¥ç¨‹</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold the chart project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> workload-helm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-helm/Chart.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/Chart.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">appVersion: 0.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">description: A helm chart to provision standard workloads.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">name: workload</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">type: application</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">version: 0.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-helm/values.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/values.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  type: ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - name: www</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      port: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      targetPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  my-container:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    image:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      name: busybox:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    command: ["/bin/echo"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    args: </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - "-c"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - "Hello World!"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      limits:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        cpu: 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        memory: 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      requests:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        cpu: 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        memory: 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>åˆ›å»ºæ¨¡ç‰ˆæ–‡ä»¶å¤¹</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold templates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> workload-helm/templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-helm/templates/helpers.tpl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/templates/helpers.tpl</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Expand the name of the chart.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.name" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- default .Release.Name .Values.nameOverride | trunc 63 | trimSuffix "-" }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Create a default fully qualified app name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">If release name contains chart name it will be used as a full name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.fullname" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c"> := default .Chart.Name .Values.nameOverride }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- if contains \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c"> .Release.Name }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- .Release.Name | trunc 63 | trimSuffix "-" }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- else }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- printf "%s-%s" .Release.Name \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c"> | trunc 63 | trimSuffix "-" }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Create chart name and version as used by the chart label.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.chart" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- printf "%s-%s" .Chart.Name .Chart.Version | replace "+" "_" | trunc 63 | trimSuffix "-" }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Common labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.labels" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">helm.sh/chart: {{ include "workload.chart" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{ include "workload.selectorLabels" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- if .Chart.AppVersion }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">app.kubernetes.io/version: {{ .Chart.AppVersion | quote }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">app.kubernetes.io/managed-by: {{ .Release.Service }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Selector labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">*/}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- define "workload.selectorLabels" -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">app.kubernetes.io/name: {{ include "workload.name" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">app.kubernetes.io/instance: {{ .Release.Name }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/templates/deployment.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: {{ include "workload.name" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {{- include "workload.labels" . | nindent 4 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      {{- include "workload.selectorLabels" . | nindent 6 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {{- include "workload.selectorLabels" . | nindent 8 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {{- range \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c">, \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c"> := .Values.containers }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: {{ \</span><span class="token string variable" style="color:#36acaa">$name</span><span class="token string" style="color:#e3116c"> }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          image: "{{ </span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.image.name }}"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.command }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.command | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.args }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.args | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.env }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          env:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.env | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.volumeMounts }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.volumeMounts | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.livenessProbe }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          livenessProbe:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.livenessProbe | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.readinessProbe }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          readinessProbe:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.readinessProbe | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- with \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.resources }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            {{- toYaml \</span><span class="token string variable" style="color:#36acaa">$container</span><span class="token string" style="color:#e3116c">.resources | nindent 12 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-helm/templates/service.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{ if .Values.service }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: {{ include "workload.name" . }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {{- include "workload.labels" . | nindent 4 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  type: {{ .Values.service.type }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {{- include "workload.selectorLabels" . | nindent 4 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  {{- with .Values.service.ports }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {{- toYaml . | nindent 4 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  {{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{{- end }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„ Helm chart å·¥ç¨‹</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Chart.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ _helpers.tpl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ service.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ values.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤æ¸²æŸ“çœŸå®çš„éƒ¨ç½²é…ç½®</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm template workload-helm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥å¾—åˆ°å¦‚ä¸‹ YAML è¾“å‡º</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Source: workload-helm/templates/service.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">helm.sh/chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">0.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.3.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Helm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> www</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Source: workload-helm/templates/deployment.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">helm.sh/chart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">0.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.3.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Helm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"busybox:latest"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /bin/echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Hello World</span><span class="token tag" style="color:#00009f">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 128Mi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl">KCL<a href="#kcl" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>åœ¨ KCL ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†ä¸ Helm <code>values.yaml</code> ç›¸ä¼¼çš„åŠ¨æ€é…ç½®å‚æ•° <code>kcl.yaml</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œå¦‚ä¸‹çš„å‘½ä»¤è·å¾—ä¸€ä¸ªå…¸å‹çš„ KCL å·¥ç¨‹ã€‚</p><ul><li>åˆ›å»º <code>workload-kcl</code> ç›®å½•æ¥ä¿å­˜ KCL å·¥ç¨‹</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold the KCL project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> workload-kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-kcl/kcl.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-kcl/kcl.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kcl_options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - key: containers</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    value:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      my-container:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        image:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          name: busybox:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        command: ["/bin/echo"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        args: </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          - "-c"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          - "Hello World!"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          limits:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            cpu: 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            memory: 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          requests:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            cpu: 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            memory: 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - key: service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    value:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      type: ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: www</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          port: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          targetPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>åˆ›å»ºå¦‚ä¸‹ KCL æ–‡ä»¶æ¥ä¿å­˜ kubernetes èµ„æº</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a workload-kcl/deployment.k</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-kcl/deployment.k</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion = "apps/v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind = "Deployment"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    name = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    labels = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        "app.kubernetes.io/name" = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        "app.kubernetes.io/instance" = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    selector.matchLabels = metadata.labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    template.metadata.labels = metadata.labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    template.spec.containers = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            name = name</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            image = container.image.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            command = container.command</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            command = container.args</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            env = container.env</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            resources = container.resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        } for name, container in option("containers") or {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> workload-kcl/service.k</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion = "v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind = "Service"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    name = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    labels = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        "app.kubernetes.io/name" = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        "app.kubernetes.io/instance" = "release-name"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    selector.matchLabels = metadata.labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    type = option("service", default={})?.type</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    ports = option("service", default={})?.ports</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šè¿° KCL ä»£ç ä¸­æˆ‘ä»¬åˆ†åˆ«å£°æ˜äº†ä¸€ä¸ª Kubernetes <code>Deployment</code> å’Œ <code>Service</code> èµ„æºçš„ <code>apiVersion</code>ã€<code>kind</code>ã€<code>metadata</code> å’Œ <code>spec</code> ç­‰å˜é‡ï¼Œå¹¶åˆ†åˆ«èµ‹å€¼äº†ç›¸åº”çš„å†…å®¹ï¼Œç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬å°† <code>metadata.labels</code> å­—æ®µåˆ†åˆ«é‡ç”¨åœ¨ <code>spec.selector.matchLabels</code> å’Œ <code>spec.template.metadata.labels</code> å­—æ®µã€‚å¯ä»¥çœ‹å‡ºï¼Œç›¸æ¯”äº Helm æ¨¡ç‰ˆ æˆ–è€… YAMLï¼ŒKCL å®šä¹‰çš„æ•°æ®ç»“æ„æ›´åŠ ç´§å‡‘ï¼Œè€Œä¸”å¯ä»¥é€šè¿‡å®šä¹‰å±€éƒ¨å˜é‡å®ç°é…ç½®é‡ç”¨ã€‚</p><p>åœ¨ KCL ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¡ä»¶è¯­å¥å’Œ <code>option</code> å†…ç½®å‡½æ•°æ¥æ”¶åŠ¨æ€å‚æ•°ï¼Œå¹¶è®¾ç½®ä¸åŒçš„é…ç½®å€¼ä»¥ç”Ÿæˆèµ„æºã€‚</p><p>å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤å¾—åˆ° <code>Deployment</code> å’Œ <code>Service</code> YAML è¾“å‡º:</p><ul><li><code>Deployment</code></li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl/deployment.k </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Y workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl/kcl.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Hello World</span><span class="token tag" style="color:#00009f">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 128Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 128Mi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>Service</code></li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl/service.k </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Y workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl/kcl.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> www</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>-D</code> æ ‡å¿—è®¾ç½®é¢å¤–çš„å‚æ•°å¹¶è¦†ç›– <code>kcl.yaml</code> æ–‡ä»¶çš„é…ç½®å€¼</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl/service.k </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Y workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl/kcl.yaml </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">D service=None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å°ç»“">å°ç»“<a href="#å°ç»“" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>å¯ä»¥çœ‹å‡ºï¼Œä¸ Helm ç›¸æ¯”ï¼ŒKCL é€šè¿‡åœ¨é…ç½®é‡ç”¨å’Œè¦†ç›–çš„åŸºç¡€ä¸Šç”Ÿæˆä»£ç ï¼Œå‡å°‘äº†é…ç½®æ–‡ä»¶å’Œä»£ç è¡Œçš„æ•°é‡ã€‚ä¸ Helm ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ä¸ªçº¯å®¢æˆ·ç«¯è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥å°†é…ç½®å’Œç­–ç•¥éªŒè¯å°½å¯èƒ½åœ°å·¦ç§»ï¼Œè€Œä¸ä¼šå¯¹é›†ç¾¤é€ æˆé¢å¤–çš„ä¾èµ–æˆ–è´Ÿæ‹…ï¼Œæˆ–è€…ç”šè‡³æ²¡æœ‰ Kubernetes é›†ç¾¤æ—¶ä¹Ÿå¯ä»¥é€šè¿‡ KCL Schema ç­‰ç‰¹æ€§å¯¹ YAML è¿›è¡Œå……åˆ†éªŒè¯å’Œæµ‹è¯•ã€‚</p><p>Helm å¯ä»¥åœ¨ <code>.tpl</code> æ–‡ä»¶ä¸­å®šä¹‰å¯é‡ç”¨æ¨¡æ¿ï¼Œå¹¶æ”¯æŒå…¶ä»–æ¨¡æ¿å¼•ç”¨å®ƒã€‚ä½†æ˜¯ï¼Œåªæœ‰æ¨¡æ¿å®šä¹‰æ‰èƒ½é‡ç”¨ã€‚åœ¨ä¸€ä¸ªå¤æ‚çš„ Helm å›¾è¡¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰è®¸å¤šé™„åŠ çš„åŸºæœ¬æ¨¡æ¿ã€‚ä¸ Helm ç¹ççš„å†™ä½œæ–¹æ³•ç›¸æ¯”ï¼ŒKCL ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯å˜é‡ã€‚æŒ‡å®šæ¨¡æ¿ä¸éœ€è¦å…¶ä»–è¯­æ³•ã€‚ä»»ä½•å˜é‡éƒ½å¯ä»¥ç›¸äº’å¼•ç”¨ã€‚</p><p>æ­¤å¤–ï¼ŒHelm ä¸­è¿˜æœ‰å¤§é‡ä¸å®é™…é€»è¾‘æ— å…³çš„ <code>{{- include }}</code>, <code>nindent</code> å’Œ <code>toYaml</code> æ ‡è®°å­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ¯ä¸ª Helm å¼•ç”¨å¤„çš„ç©ºæ ¼å’Œç¼©è¿›ã€‚åœ¨ KCL ä¸­ï¼Œæ— ç”¨ä»£ç æ›´å°‘ï¼Œå¹¶ä¸”ä¸éœ€è¦å¾ˆå¤šçš„ <code>{{*}}</code> æ¥æ ‡è®°ä»£ç å—ï¼Œä¿¡æ¯å¯†åº¦æ›´é«˜ã€‚</p><p>äº‹å®ä¸Šï¼ŒKCL å’Œ Helm Chart å¹¶ä¸å¯¹ç«‹ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥ä½¿ç”¨ KCL ç¼–å†™ Helm æ¨¡æ¿æˆ–è€…ä½¿ç”¨ KCL æ¥ç”Ÿæˆ <code>values.yaml</code>ï¼Œæˆ–è€…ä¸ºç°æœ‰çš„ Helm å›¾è¡¨æä¾›å¯ç¼–ç¨‹æ‰©å±•åŠŸèƒ½ï¼Œæ¯”å¦‚ä¸º Helm å¼€å‘å¯é€‰çš„ KCL Schema æ’ä»¶æ¥éªŒè¯å·²æœ‰çš„ Helm å›¾è¡¨æˆ–è€…ä¸º Helm Chart ç¼–å†™é¢å¤–çš„ Transformer æ¥ Patch å·²æœ‰çš„ Helm Chartã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æœªæ¥è®¡åˆ’">æœªæ¥è®¡åˆ’<a href="#æœªæ¥è®¡åˆ’" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æˆ‘ä»¬åç»­è®¡åˆ’ KCL çš„æ¨¡å‹å’Œçº¦æŸå¯ä»¥ä½œä¸ºä¸€ä¸ªåŒ…æ¥ç®¡ç†ï¼ˆè¿™ä¸ªåŒ…åªæœ‰ KCL æ–‡ä»¶ï¼‰ã€‚ä¾‹å¦‚ï¼ŒKubernetes çš„æ¨¡å‹å’Œçº¦æŸå¯ä»¥å¼€ç®±å³ç”¨ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å·²æœ‰çš„æ¨¡å‹ç”Ÿæˆé…ç½®æˆ–éªŒè¯ç°æœ‰é…ç½®ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ KCL ç»§æ‰¿æ‰‹æ®µç®€å•åœ°æ‰©å±•ç”¨æˆ·æƒ³è¦çš„æ¨¡å‹å’Œçº¦æŸã€‚</p><p>åœ¨æ­¤é˜¶æ®µï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Git æˆ– <a href="https://github.com/oras-project/oras" target="_blank" rel="noopener noreferrer">OCI Registry as Storageï¼ˆORAS)</a> ç­‰å·¥å…·æ¥ç®¡ç† KCL é…ç½®ç‰ˆæœ¬ã€‚</p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Helm" term="Helm"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL ä¸å…¶ä»– Kubernetes é…ç½®ç®¡ç†å·¥å…·çš„å¼‚åŒ - Kustomize ç¯‡]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-05-20-vs-kustomize</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-05-20-vs-kustomize"/>
        <updated>2023-05-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ç®€ä»‹]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a> æä¾›äº†ä¸€ç§æ— éœ€æ¨¡æ¿å’Œå³å¯è‡ªå®šä¹‰ Kubernetes èµ„æºåŸºç¡€é…ç½®å’Œå·®å¼‚åŒ–é…ç½®çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡æ–‡ä»¶çº§çš„ YAML é…ç½®æ–¹å¼å®Œæˆé…ç½®åˆå¹¶æˆ–è¦†ç›–ã€‚åœ¨ Kustomize ä¸­ç”¨æˆ·éœ€è¦æ›´è¯¦ç»†åœ°äº†è§£å°†è¦å‘ç”Ÿæ›´æ”¹çš„å†…å®¹å’Œä½ç½®ï¼Œå¯¹äºå¤æ‚é€’å½’è¿‡æ·±çš„åŸºç¡€ YAML å¯èƒ½ä¸å¤ªå®¹æ˜“é€šè¿‡é€‰æ‹©å™¨æ¥åŒ¹é… Kustomize æ–‡ä»¶ã€‚</p><p>è€Œåœ¨ KCL ä¸­ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥æŠŠå¯¹åº”ä»£ç éœ€è¦ä¿®æ”¹çš„é…ç½®ä¹¦å†™åœ¨å¯¹åº”çš„åœ°æ–¹ï¼Œå…å»äº†é˜…è¯»åŸºç¡€ YAML çš„æˆæœ¬ï¼ŒåŒæ—¶èƒ½å¤Ÿé€šè¿‡ä»£ç çš„æ–¹å¼å¤ç”¨é…ç½®ç‰‡æ®µï¼Œé¿å… YAML é…ç½®çš„å¤§é‡å¤åˆ¶ç²˜è´´ï¼Œä¿¡æ¯å¯†åº¦æ›´é«˜ï¼Œä¹Ÿä¸å®¹æ˜“å‡ºé”™ã€‚</p><p>ä¸‹é¢ä»¥ä¸€ä¸ªç»å…¸çš„ Kustomize å¤šç¯å¢ƒé…ç½®ç®¡ç†ä¾‹å­è¯¦ç»†è¯´æ˜ Kustomize å’Œ KCL åœ¨ Kubernetes èµ„æºé…ç½®ç®¡ç†ä¸Šçš„åŒºåˆ«ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kustomize">Kustomize<a href="#kustomize" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>Kustomize æœ‰ base å’Œ overlay çš„æ¦‚å¿µï¼Œbases å’Œ overlays ä¸€èˆ¬æ˜¯ä¸€ä¸ªåŒ…å« <code>kustomization.yaml</code> æ–‡ä»¶çš„ç›®å½•ï¼Œä¸€ä¸ª base å¯ä»¥è¢«å¤šä¸ª overlay ä½¿ç”¨</p><p>æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¡Œè·å¾—ä¸€ä¸ªå…¸å‹çš„ Kustomize å·¥ç¨‹</p><ul><li>åˆ›å»º base ç›®å½•å¹¶æ–°å»ºä¸€ä¸ª deployment èµ„æº</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold the base</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a base/deployment.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> base/deployment.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    app: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      app: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        app: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          image: osixia/openldap:1.1.11</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          args: ["--copy-service"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            - name: ldap-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              mountPath: /var/lib/ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            - containerPort: 389</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">              name: openldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: ldap-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          emptyDir: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a base/kustomization.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> base/kustomization.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">- deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>åˆ›å»ºä¸€ä¸ª prod ç›®å½•å¹¶æ”¾ç½®ç”Ÿäº§ç¯å¢ƒçš„é…ç½®</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a directory to hold the prod overlay</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a prod/deployment.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> prod/deployment.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  replicas: 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - name: ldap-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          emptyDir: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          gcePersistentDisk:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            readOnly: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            pdName: ldap-persistent-storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;</span><span class="token string bash punctuation" style="color:#393A34"> prod/kustomization.yaml</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - ../base</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">patchesStrategicMerge:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŸºæœ¬çš„ Kustomzie ç›®å½•</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ kustomization.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€â”€ deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€â”€ kustomization.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­ï¼Œbase ç›®å½•å­˜æ”¾çš„æ˜¯åŸºæœ¬çš„ deployment é…ç½®ï¼Œprod ç¯å¢ƒå­˜æ”¾çš„æ˜¯éœ€è¦è¦†ç›–çš„ deployment é…ç½®ï¼Œåœ¨å…¶ä¸­æŒ‡å®šäº† <code>metadata.name</code> ç­‰å­—æ®µç”¨äºè¡¨ç¤ºå¯¹å“ªä¸ªèµ„æºè¿›è¡Œè¦†ç›–</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¡Œæ˜¾ç¤º prod ç¯å¢ƒçš„çœŸå® deployment é…ç½®</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl kustomize ./prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - --copy-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: osixia/openldap:1.1.11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - containerPort: </span><span class="token number" style="color:#36acaa">389</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: openldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        volumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - mountPath: /var/lib/ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: ldap-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - gcePersistentDisk:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          pdName: ldap-persistent-storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          readOnly: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: ldap-data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¹Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¡Œç›´æ¥å°†é…ç½®ä¸‹å‘åˆ°é›†ç¾¤å½“ä¸­</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -k ./prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/ldap created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl">KCL<a href="#kcl" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>æˆ‘ä»¬å¯ä»¥ç¼–å†™å¦‚ä¸‹ KCL ä»£ç å¹¶å‘½åä¸º main.k</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># When env is prod, override the `replicas` attribute with `6`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"env"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Assign `metadata.labels` to `selector.matchLabels`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"osixia/openldap:1.1.11"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            args </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"--copy-service"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            volumeMounts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap-data"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mountPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/var/lib/ldap"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"openldap"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">volumes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap-data"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            emptyDir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># When env is prod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># override the `emptyDir` attribute with `None`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># patch a `gcePersistentDisk` attribute with the value `{readOnly = True, pdName = "ldap-persistent-storage"}`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"env"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                emptyDir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                gcePersistentDisk </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    readOnly </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pdName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ldap-persistent-storage"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šè¿° KCL ä»£ç ä¸­æˆ‘ä»¬åˆ†åˆ«å£°æ˜äº†ä¸€ä¸ª Kubernetes Deployment èµ„æºçš„ <code>apiVersion</code>ã€<code>kind</code>ã€<code>metadata</code> å’Œ <code>spec</code> ç­‰å˜é‡ï¼Œå¹¶åˆ†åˆ«èµ‹å€¼äº†ç›¸åº”çš„å†…å®¹ï¼Œç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬å°† <code>metadata.labels</code> å­—æ®µåˆ†åˆ«é‡ç”¨åœ¨ <code>spec.selector.matchLabels</code> å’Œ <code>spec.template.metadata.labels</code> å­—æ®µã€‚å¯ä»¥çœ‹å‡ºï¼Œç›¸æ¯”äº Kustomize æˆ–è€… YAMLï¼ŒKCL å®šä¹‰çš„æ•°æ®ç»“æ„æ›´åŠ ç´§å‡‘ï¼Œè€Œä¸”å¯ä»¥é€šè¿‡å®šä¹‰å±€éƒ¨å˜é‡å®ç°é…ç½®é‡ç”¨ã€‚</p><p>åœ¨ KCL ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¡ä»¶è¯­å¥å’Œ option å‡½æ•°åŠ¨æ€åœ°æ¥æ”¶å¤–éƒ¨å‚æ•°ï¼Œä¸ºä¸åŒçš„ç¯å¢ƒéœ€è¦è®¾ç½®ä¸åŒçš„é…ç½®å€¼ç”Ÿæˆä¸åŒç¯å¢ƒçš„èµ„æºã€‚æ¯”å¦‚å¯¹äºå¦‚ä¸Šä»£ç ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªæ¡ä»¶è¯­å¥å¹¶è¾“å…¥ä¸€ä¸ªåä¸º <code>env</code> çš„åŠ¨æ€å‚æ•°ï¼Œå½“ <code>env</code> ä¸º <code>prod</code> æ—¶ï¼Œæˆ‘ä»¬å°† <code>replicas</code> å­—æ®µç”± <code>1</code> è¦†ç›–ä¸º <code>6</code>ï¼Œå¹¶ä¸”å¯¹åä¸º <code>ldap-data</code> çš„ volume é…ç½®è¿›è¡Œä¸€äº›è°ƒæ•´ï¼Œå¦‚å°† <code>emptyDir</code> å­—æ®µä¿®æ”¹ä¸º <code>None</code>, å¢åŠ  <code>gcePersistentDisk</code> çš„é…ç½®å€¼ç­‰ã€‚</p><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ä¸åŒç¯å¢ƒé…ç½®çš„ diff</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kcl main.k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kcl main.k -D </span><span class="token assign-left variable" style="color:#36acaa">env</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">prod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">more</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¾“å‡ºå¦‚ä¸‹:</p><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token coord">8c8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted-arrow deleted prefix deleted" style="color:#d73a49">&lt;</span><span class="token deleted-arrow deleted line" style="color:#d73a49">   replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-arrow deleted line" style="color:#d73a49"></span><span class="token coord">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">   replicas: 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-arrow inserted line" style="color:#36acaa"></span><span class="token coord">30c30,33</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token deleted-arrow deleted prefix deleted" style="color:#d73a49">&lt;</span><span class="token deleted-arrow deleted line" style="color:#d73a49">         emptyDir: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-arrow deleted line" style="color:#d73a49"></span><span class="token coord">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">         emptyDir: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-arrow inserted line" style="color:#36acaa"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">         gcePersistentDisk:</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-arrow inserted line" style="color:#36acaa"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">           readOnly: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-arrow inserted line" style="color:#36acaa"></span><span class="token inserted-arrow inserted prefix inserted" style="color:#36acaa">&gt;</span><span class="token inserted-arrow inserted line" style="color:#36acaa">           pdName: ldap-persistent-storage</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥çœ‹åˆ°ç”Ÿäº§ç¯å¢ƒçš„é…ç½®å’ŒåŸºæœ¬é…ç½®çš„ diff ä¸»è¦åœ¨äº <code>replicas</code> å’Œ <code>emptyDir</code> ç­‰å­—æ®µï¼Œä¸é¢„æœŸç›¸ç¬¦</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ KCL å‘½ä»¤è¡Œå·¥å…·çš„ -o å‚æ•°å°†ç¼–è¯‘äº§ç”Ÿçš„ YAML è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶æŸ¥çœ‹æ–‡ä»¶ä¹‹é—´çš„ diff</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Generate base deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k -o deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Generate prod deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kcl main.k -o prod-deployment.yaml -D </span><span class="token assign-left variable" style="color:#36acaa">env</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Diff prod deployment and base deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> prod-deployment.yaml deployment.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å°† KCL å·¥å…·ä¸ kubectl ç­‰å·¥å…·ç»“åˆä½¿ç”¨ï¼Œå°†ç”Ÿäº§ç¯å¢ƒçš„é…ç½®ä¸‹å‘åˆ°é›†ç¾¤å½“ä¸­</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k -D </span><span class="token assign-left variable" style="color:#36acaa">env</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">prod </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> kubectl apply -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/ldap created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥ä»å‘½ä»¤è¡Œçš„ç»“æœçœ‹å‡ºä¸æˆ‘ä»¬ä½¿ç”¨ç›´æ¥ä½¿ç”¨ Kustomize é…ç½®å’Œ kubectl apply çš„ä¸€ä¸ª Deployment ä½“éªŒå®Œå…¨ä¸€è‡´ï¼Œå¹¶ä¸”æ— æ›´å¤šçš„å‰¯ä½œç”¨</p><p>æœ€åï¼Œé€šè¿‡ kubectl æ£€æŸ¥éƒ¨ç½²çŠ¶æ€</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME   READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ldap   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/6     </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">           15s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å°ç»“">å°ç»“<a href="#å°ç»“" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æœ¬æœŸå†…å®¹å¤§æ¦‚ç®€å•ä»‹ç»äº†ç”¨ KCL ç¼–å†™å¤æ‚å¤šç¯å¢ƒ Kubernetes é…ç½®çš„å¿«é€Ÿå…¥é—¨å’Œä½¿ç”¨ Kustomize å·¥å…·è¿›è¡Œ Kubernetes å¤šç¯å¢ƒé…ç½®ç®¡ç†çš„å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡ºç›¸æ¯”äº Kustomize, KCL åœ¨å®ç°é…ç½®å¤ç”¨å’Œè¦†ç›–çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡ä»£ç åŒ–çš„æ–¹å¼å‡å°‘äº†é…ç½®æ–‡ä»¶çš„ä¸ªæ•°å’Œä»£ç è¡Œæ•°ï¼Œæå‡äº†ä¿¡æ¯å¯†åº¦æ¯”ï¼Œå¹¶ä¸”åŒ Kustomize ä¸€æ ·æ˜¯ä¸€ä¸ªçº¯å®¢æˆ·ç«¯æ–¹æ¡ˆï¼Œå¹¶ä¸ä¼šå¯¹é›†ç¾¤æœ‰é¢å¤–ä¾èµ–æˆ–é€ æˆè´Ÿæ‹…ã€‚</p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Kustomize" term="Kustomize"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL æ–°ç‰ˆæœ¬åŠŸèƒ½è§£è¯»ç³»åˆ— - Go SDK åŠŸèƒ½é€Ÿè§ˆï¼]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-new-version-feature-interpretation-kclvm-go-feature-overview</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-new-version-feature-interpretation-kclvm-go-feature-overview"/>
        <updated>2023-04-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL æ˜¯ä»€ä¹ˆï¼Ÿ]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-æ˜¯ä»€ä¹ˆ">KCL æ˜¯ä»€ä¹ˆï¼Ÿ<a href="#kcl-æ˜¯ä»€ä¹ˆ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-go-sdk-æ˜¯ä»€ä¹ˆ"><code>KCL Go SDK</code> æ˜¯ä»€ä¹ˆï¼Ÿ<a href="#kcl-go-sdk-æ˜¯ä»€ä¹ˆ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>kclvm æ˜¯ä¸€ä¸ª KCL è¯­è¨€çš„è¿è¡Œæ—¶åº“ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªä¸ KCL ç¼–è¯‘å™¨äº¤äº’çš„ç¼–ç¨‹æ¥å£ã€‚å®ƒæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯åº“ï¼Œå¯ç”¨äºå¯¹ KCLæºä»£ç æ‰§è¡Œå„ç§æ“ä½œï¼Œä¾‹å¦‚ æ‰§è¡Œã€æ ¼å¼åŒ–ç­‰ã€‚<code>KCL Go SDK</code>æ˜¯ kclvm çš„ Go è¯­è¨€åŒ…è£…ï¼Œæä¾›äº† Go è¯­è¨€çš„ SDKï¼Œæ–¹ä¾¿äº†åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸‹ KCL è¯­è¨€çš„é›†æˆã€‚</p><p>ç›®å‰ï¼Œ<code>KCL Go SDK</code> å®¢æˆ·ç«¯æ„å»ºåœ¨ kclvm json2 rpc API ä¹‹ä¸Šï¼Œè¿™æ„å‘³ç€å®ƒä½¿ç”¨å’Œå…¶ä»–è¯­è¨€çš„ kclvm å®¢æˆ·ç«¯ä½¿ç”¨çš„ç›¸åŒ API ä¸ KCL æºä»£ç äº¤äº’ï¼Œè¿™ä¸å…¶ä»–è¯­è¨€çš„ KCL SDK å·¥ä½œæ–¹å¼ç±»ä¼¼ï¼Œä½†æä¾›äº†æ›´åŠ å‹å¥½çš„ Go è¯­è¨€é£æ ¼çš„åŒ…è£…ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°ç‰ˆæœ¬-kcl-go-sdk-è§£å†³äº†ä»€ä¹ˆé—®é¢˜">æ–°ç‰ˆæœ¬ <code>KCL Go SDK</code> è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ<a href="#æ–°ç‰ˆæœ¬-kcl-go-sdk-è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL ä½œä¸ºä¸€é—¨é…ç½®å‹è¯­è¨€ï¼Œå’Œäº‘åŸç”Ÿé¢†åŸŸæœ‰ç€æå…¶ç´§å¯†çš„è”ç³»ï¼Œè€Œå¦ä¸€æ–¹é¢ï¼ŒGo è¯­è¨€å·²ç»æˆä¸ºäº†äº‘åŸç”Ÿé¢†åŸŸé€šç”¨ç¼–ç¨‹è¯­è¨€çš„äº‹å®æ ‡å‡†ã€‚åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œå¼€å‘ KCL çš„ Go SDK æ¥å®Œæˆ KCL ç¼–è¯‘å™¨ä¸ Go è¯­è¨€çš„ç›´æ¥äº¤äº’å°±æœ‰äº†å¿…è¦ï¼Œè¿™ä¹Ÿæ˜¯<code>KCL Go SDK</code>è¯ç”Ÿçš„åŸå› ã€‚</p><p>æœ€åˆç‰ˆæœ¬çš„ KCL ç¼–è¯‘å™¨åŠè¿è¡Œæ—¶ä½¿ç”¨ python ç¼–å†™ï¼Œç”±äº python è¯­è¨€æœ¬èº«çš„æ€§èƒ½é—®é¢˜å’Œå…¶åŠ¨æ€è¯­è¨€çš„ç‰¹æ€§ï¼Œåˆç‰ˆ KCL è¯­è¨€çš„è¿è¡Œé€Ÿåº¦å’Œå®‰å…¨æ€§éƒ½æœ‰å¾ˆå¤§æå‡ç©ºé—´ã€‚å‡ºäºå®‰å…¨ä¸æ•ˆç‡é—®é¢˜çš„è€ƒè™‘ï¼Œåç»­ç‰ˆæœ¬ KCL ç¼–è¯‘å™¨åˆä½¿ç”¨äº† rust è¯­è¨€ç¼–å†™ï¼Œå› æ­¤æ–°ç‰ˆæœ¬çš„<code>KCL Go SDK</code>åŸºäº Rust å®ç°çš„ KCL æ ¸å¿ƒè¿›è¡ŒåŒ…è£…ï¼Œå»é™¤äº† python ä¾èµ–ï¼Œç®€åŒ–äº†å®‰è£…ï¼Œä¼˜åŒ–äº†ä½¿ç”¨ä½“éªŒã€‚</p><p>æ–°ç‰ˆæœ¬<code>KCL Go SDK</code>å¯ä»¥è§†ä¸ºä¸€ä¸ªçº¯ Go åŒ…ä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•å¤–ç½®ä¾èµ–ï¼Œå¯ä»¥é€šè¿‡ä¸€é”®<code>go install</code>å³å¯å®Œæˆå®‰è£…ä½¿ç”¨ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‘½ä»¤è¡Œ-kcl-go-sdkå¿«é€Ÿä½“éªŒ">å‘½ä»¤è¡Œ <code>KCL Go SDK</code>å¿«é€Ÿä½“éªŒ<a href="#å‘½ä»¤è¡Œ-kcl-go-sdkå¿«é€Ÿä½“éªŒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><code>KCL Go SDK</code>æä¾›äº†ä¸€ä¸ªè‡ªå¸¦çš„ KCL Go å‘½ä»¤è¡Œï¼Œæ”¯æŒç”¨æˆ·é€šè¿‡<code>go install</code>æ¥ä¸€é”®å®‰è£… kclvm çš„ Go å‘½ä»¤è¡Œå·¥å…· <code>kcl-go</code>ï¼Œå…¶è¦æ±‚æœ¬åœ° Go ç‰ˆæœ¬ä¸º1.18+, åŒæ—¶è¦æ±‚æœ¬åœ°æœ‰å®Œæ•´çš„ CGO å·¥å…·é“¾ã€‚</p><p>åªéœ€æ‰§è¡Œ</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kusionstack.io/kclvm-go/cmds/kcl-go@latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ–°å»º KCL æºæ–‡ä»¶ hello.k</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"apps/v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"${metadata.name}:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¹‹åå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ KCL</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl-go run ./hello.k </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          image: </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - containerPort: </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="go-ä»£ç å¦‚ä½•é›†æˆ-kcl">Go ä»£ç å¦‚ä½•é›†æˆ KCL<a href="#go-ä»£ç å¦‚ä½•é›†æˆ-kcl" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ä»¥ä¸Šä¸€èŠ‚çš„ hello.k ä¸ºä¾‹ï¼Œæ„å»ºä»¥ä¸‹çš„ main.go ä»£ç ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"kusionstack.io/kclvm-go"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> kclvm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MustRun</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"./hello.k"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetRawYamlResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>kclvm.MustRun("./hello.k").GetRawYamlResult()</code>è¿è¡Œå¯¹åº”çš„kclæºæ–‡ä»¶</li><li><code>fmt.Println(result)</code>æ‰“å°è¿è¡Œç»“æœ</li></ul><p>æœ¬åœ°ç¯å¢ƒè¦æ±‚ Go ç‰ˆæœ¬ä¸º1.18+,ä¸å®Œæ•´çš„ CGO å·¥å…·é“¾ã€‚è¿è¡Œå‘½ä»¤è¡Œæ·»åŠ  <code>KCL Go SDK</code>ä¾èµ–</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go get kusionstack.io/kclvm-go@main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œ Go ç¨‹åºï¼Œç»“æœä¸ºï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ go run main.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">101</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>é€šè¿‡è¿™ä¸€æ¬¡çš„ <code>KCL Go SDK</code> çš„ç‰ˆæœ¬å˜æ›´ï¼Œæˆ‘ä»¬å»é™¤äº† python ä¾èµ–å¹¶åˆ‡æ¢è‡³æ€§èƒ½æ›´åŠ ä¼˜ç§€çš„ rust è¿è¡Œæ—¶ã€‚æ–‡ç« åˆ†åˆ«ç®€å•å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ &nbsp;<code>kcl-go</code> å‘½ä»¤è¡Œå·¥å…·æ‰§è¡Œ KCL æºä»£ç , ä»¥åŠå¦‚ä½•å°† KCL é›†æˆè‡³æ‚¨çš„ Go ç¨‹åºä¹‹ä¸­ã€‚</p><p>å½“ç„¶é™¤äº†ç®€å•çš„ç¼–è¯‘å¹¶è¿è¡Œ KCL æºç ä¹‹å¤–ï¼Œ<code>KCL Go SDK</code> è¿˜æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ä»¥æ–¹ä¾¿ç”¨æˆ·æ›´å¥½åœ°åœ¨ Go ä¸­é›†æˆ KCL ï¼Œ åŒ…æ‹¬ï¼š</p><ul><li>KCL é™æ€é”™è¯¯åˆ†æï¼ˆlintä¸æ ¼å¼åŒ–ï¼‰</li><li>KCL ä¾èµ–åˆ†æã€</li><li>Go ç»“æ„ä½“å’Œ KCL Schema äº’ç›¸è½¬æ¢ç­‰ç­‰</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·å’Œç¤¾åŒºå°ä¼™ä¼´åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µåé¦ˆä¸å»ºè®®ã€‚å—é™äºæ–‡ç« ç¯‡å¹…ï¼Œåç»­æˆ‘ä»¬ä¼šæ’°å†™æ›´å¤š KCL v0.4.6 æ–°ç‰ˆæœ¬åŠŸèƒ½è§£è¯»ç³»åˆ—æ–‡ç« ï¼Œæ•¬è¯·æœŸå¾…!</p><p>æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/kcl-lang/kcl-go" target="_blank" rel="noopener noreferrer">kclvm-go Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a> ğŸ‘ğŸ‘ğŸ‘</p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="kcl-go" term="kcl-go"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL v0.4.6 å‘å¸ƒæ—¥å¿—]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.6-release-blog</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.6-release-blog"/>
        <updated>2023-04-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ç®€ä»‹]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ KCL v0.4.6 æ–°ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼æœ¬æ¬¡å‘å¸ƒä¸ºå¤§å®¶å¸¦æ¥äº†ä¸‰æ–¹é¢çš„é‡ç‚¹æ›´æ–°ï¼š<strong>è¯­è¨€</strong>ã€<strong>å·¥å…·é“¾</strong>ã€<strong>ç¤¾åŒºé›†æˆ &amp; æ‰©å±•æ”¯æŒ</strong>ã€‚</p><ul><li><em>ä½¿ç”¨ IDE æ’ä»¶æå‡ KCL ä»£ç ç¼–å†™ä½“éªŒå’Œæ•ˆç‡</em></li><li><em>Helm/Kustomize/KPT äº‘åŸç”Ÿç¤¾åŒºå·¥å…·é›†æˆ</em></li><li><em>å®Œå–„ KCL å¤šè¯­è¨€ SDKï¼Œæ–¹ä¾¿åº”ç”¨ç¨‹åºé›†æˆ</em></li></ul><p>è¿›ä¸€æ­¥æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.4.6" target="_blank" rel="noopener noreferrer">KCL v0.4.6 å‘å¸ƒé¡µé¢</a> æˆ–è€… <a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer">KCL å®˜æ–¹ç½‘ç«™</a> è·å¾—ä¸‹è½½å®‰è£…æŒ‡å—å’Œè¯¦ç»†å‘å¸ƒä¿¡æ¯ã€‚</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>æœ¬æ–‡é‡ç‚¹ä»‹ç» KCL v0.4.6 ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹ä»¥åŠ KCL ç¤¾åŒºçš„è¿‘æœŸåŠ¨æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¯­è¨€æ›´æ–°">è¯­è¨€æ›´æ–°<a href="#è¯­è¨€æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å†…ç½®å‡½æ•°æ›´æ–°">å†…ç½®å‡½æ•°æ›´æ–°<a href="#å†…ç½®å‡½æ•°æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>KCL å­—ç¬¦ä¸²æ–°å¢ <code>removeprefix</code> å’Œ <code>removesuffix</code> æˆå‘˜å‡½æ•°ç”¨äºå»é™¤å­—ç¬¦ä¸²çš„å‰ç¼€å’Œåç¼€å­å­—ç¬¦ä¸²</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prefix-string"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">removeprefix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"prefix-"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># "string" </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string-suffix"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">removesuffix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"-suffix"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># "string"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä½¿ç”¨æ–¹å¼ <a href="https://kcl-lang.io/docs/reference/model/builtin#string-builtin-member-functions" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¼–è¯‘å™¨æç¤ºä¿¡æ¯æ”¹è¿›">ç¼–è¯‘å™¨æç¤ºä¿¡æ¯æ”¹è¿›<a href="#ç¼–è¯‘å™¨æç¤ºä¿¡æ¯æ”¹è¿›" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œè¿è¡Œä¸€æ¬¡ KCL å‘½ä»¤è¡Œå·¥å…·åªä¼šæ˜¾ç¤ºä¸€ä¸ªé”™è¯¯ä¿¡æ¯ä¸è­¦å‘Šï¼Œåœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œæ”¯æŒäº†ä¸€æ¬¡ç¼–è¯‘æ˜¾ç¤ºå¤šä¸ªé”™è¯¯ä¸è­¦å‘Šçš„èƒ½åŠ›å¹¶æ”¹å–„äº†é”™è¯¯æç¤ºä¿¡æ¯ï¼Œç”¨äºæå‡ KCL ä»£ç é”™è¯¯æ’æŸ¥æ•ˆç‡ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹ KCL ä»£ç  (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> "kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹ KCL å‘½ä»¤è¡Œï¼Œå¯ä»¥çœ‹åˆ°ä¼šåŒæ—¶æç¤ºå­—ç¬¦ä¸²ç¼–å†™é”™è¯¯å’ŒèŠ±æ‹¬å·æœªæ­£ç¡®åŒ¹é…é”™è¯¯çš„è¯­æ³•é”™è¯¯ä¿¡æ¯</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">E1001</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: InvalidSyntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> main.k:2:21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">     labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  |                     ^ unterminated string</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">error[E1001]: InvalidSyntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"> --&gt; main.k:2:24</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">2 |     labels = {key = "</span><span class="token plain">kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">                        ^ expected </span><span class="token string" style="color:#e3116c">"}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é¡¶çº§-schema-è¯­å¥åˆå¹¶è¿ç®—ç¬¦">é¡¶çº§ schema è¯­å¥åˆå¹¶è¿ç®—ç¬¦<a href="#é¡¶çº§-schema-è¯­å¥åˆå¹¶è¿ç®—ç¬¦" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ç¼–å†™å¦‚ä¸‹ KCL ä»£ç æ—¶ï¼Œä¼šå°†ä¸¤ä¸ª schema é…ç½®è¿›è¡Œåˆå¹¶åè¾“å‡ºï¼Œåœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œè¦æ±‚æ˜¾å¼ä½¿ç”¨å±æ€§åˆå¹¶è¿ç®—ç¬¦è€Œä¸æ˜¯å±æ€§è¦†ç›–è¿ç®—ç¬¦</p><ul><li>æ›´æ–°å‰</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æ›´æ–°å</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use the union operator `:` instead of the override operator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use the union operator `:` instead of the override operator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è·¯å¾„é€‰æ‹©å™¨å‚æ•°ç®€åŒ–">è·¯å¾„é€‰æ‹©å™¨å‚æ•°ç®€åŒ–<a href="#è·¯å¾„é€‰æ‹©å™¨å‚æ•°ç®€åŒ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>æˆ‘ä»¬ä½¿ç”¨ path selector CLI å‚æ•° (-S) ä¸å¿…å†å¡«å…¥åŒ…è·¯å¾„ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ç­›é€‰å†…éƒ¨å˜é‡</p><p>å¯¹äºå¦‚ä¸‹çš„ KCL ä»£ç  (main.k):</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">person </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Alice"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kcl main.k -S person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: Alice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age: </span><span class="token number" style="color:#36acaa">18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é”™è¯¯ä¿®å¤">é”™è¯¯ä¿®å¤<a href="#é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å•è¡Œæ¡ä»¶é…ç½®å—è¯­æ³•è§£æé”™è¯¯">å•è¡Œæ¡ä»¶é…ç½®å—è¯­æ³•è§£æé”™è¯¯<a href="#å•è¡Œæ¡ä»¶é…ç½®å—è¯­æ³•è§£æé”™è¯¯" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ç¼–å†™å¦‚ä¸‹ KCL ä»£ç æ—¶ä¼šå‡ºç°éé¢„æœŸçš„è¯­æ³•é”™è¯¯ï¼Œåœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¿®å¤äº†æ­¤ç±»ç±»ä¼¼çš„é—®é¢˜</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">env </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> env </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prod"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"kubernetes.io/env"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> env</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="schema-å¿…é€‰å±æ€§æ£€æŸ¥">Schema å¿…é€‰å±æ€§æ£€æŸ¥<a href="#schema-å¿…é€‰å±æ€§æ£€æŸ¥" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ç¼–å†™å¦‚ä¸‹ KCL ä»£ç æ—¶ï¼Œæ²¡æœ‰æŒ‰é¢„æœŸæç¤º <code>versions</code> å±æ€§æ²¡æœ‰èµ‹å€¼çš„é”™è¯¯ï¼Œåœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¿®å¤äº†æ­¤ç±»ç±»ä¼¼çš„é—®é¢˜</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema App</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    versions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Version </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å·¥å…·é“¾æ›´æ–°">å·¥å…·é“¾æ›´æ–°<a href="#å·¥å…·é“¾æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-vs-code-æ’ä»¶">KCL VS Code æ’ä»¶<a href="#kcl-vs-code-æ’ä»¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨æ­¤æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬å‘å¸ƒäº†å…¨æ–°çš„ KCL VS Code æ’ä»¶å’Œä½¿ç”¨ Rust è¯­è¨€é‡å†™çš„è¯­è¨€æœåŠ¡æœåŠ¡å™¨ï¼Œç›¸æ¯”äºä¹‹å‰ KCL ç‰ˆæœ¬æ€§èƒ½çº¦æå‡ 20 å€ï¼Œå¹¶æ”¯æŒäº† KCL é”™è¯¯è­¦å‘Šåœ¨ IDE ä¸­å®æ—¶æ˜¾ç¤ºï¼Œä»¥åŠ KCL ä»£ç è¡¥å…¨ç­‰æ–°åŠŸèƒ½ã€‚</p><ul><li><strong>é”™è¯¯ä¸å‘Šè­¦å®æ—¶æ˜¾ç¤º</strong></li></ul><p><img loading="lazy" alt="Diagnostics" src="/zh-CN/assets/images/Diagnostics-716fc3b938a94e4db2cbafaad4f4174d.gif" width="1312" height="780" class="img_ev3q"></p><ul><li><strong>è·³è½¬</strong></li></ul><p><img loading="lazy" alt="Goto Definition" src="/zh-CN/assets/images/GotoDef-0875243eacd6b76e49b7a5b95cb9ce55.gif" width="1312" height="780" class="img_ev3q"></p><ul><li><strong>è¡¥å…¨</strong></li></ul><p><img loading="lazy" alt="Completion" src="/zh-CN/assets/images/Completion-584771cd4bed237e74d3da3decaa9757.gif" width="1312" height="780" class="img_ev3q"></p><ul><li><strong>æ‚¬åœ</strong></li></ul><p><img loading="lazy" alt="Hover" src="/zh-CN/assets/images/Hover-339697d17ca0d4f167b1b1a904c9f1aa.gif" width="1312" height="780" class="img_ev3q"></p><p>æ›´å¤š KCL VS Code æ’ä»¶å®‰è£…æ–¹å¼åŠè¯¦ç»†æ›´æ–°å†…å®¹<a href="https://kcl-lang.io/docs/tools/Ide/vs-code" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŒ…ç®¡ç†å·¥å…·">åŒ…ç®¡ç†å·¥å…·<a href="#åŒ…ç®¡ç†å·¥å…·" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ KCL v0.4.6 æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†å…¨æ–°çš„ KCL åŒ…ç®¡ç†å·¥å…· alpha ç‰ˆæœ¬ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å‡ ä¸ªå‘½ä»¤å³å¯è·å¾—ç¤¾åŒºä¸­å·²ç»ç¼–å†™å¥½çš„ KCL æ¨¡å‹ã€‚æ¯”å¦‚å¯ä»¥é€šè¿‡åŒ…ç®¡ç†å·¥å…·ä¸€é”®å¯¼å…¥ KCL Kubernetes æ¨¡å‹å¹¶ä½¿ç”¨</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kpm init kubernetes_demo </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> kpm </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> -git https://github.com/awesome-kusion/konfig.git -tag v0.0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¼–å†™ KCL ä»£ç  (main.k)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> konfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">base</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pkg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kusion_kubernetes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1 </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx-deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replicas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> selector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">matchLabels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ports </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹ KCL å‘½ä»¤å³å¯è·å¾—ä¸€ä¸ª Nginx Deployment YAML è¾“å‡º</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kpm run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: nginx-deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: </span><span class="token string" style="color:#e3116c">"nginx:1.14.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - containerPort: </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æ›´å¤š KCL åŒ…ç®¡ç†å·¥å…·å®‰è£…æ–¹å¼ã€è¯¦ç»†å†…å®¹åŠç”¨ä¾‹<a href="https://kcl-lang.io/docs/user_docs/guides/package-management/overview" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>æ›´å¤š Konfig æ¨¡å‹åº“çš„å†…å®¹å’Œä½¿ç”¨æ–¹å¼<a href="https://kcl-lang.io/docs/user_docs/guides/working-with-konfig/overview" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºé›†æˆ--æ‰©å±•æ›´æ–°">ç¤¾åŒºé›†æˆ &amp; æ‰©å±•æ›´æ–°<a href="#ç¤¾åŒºé›†æˆ--æ‰©å±•æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-é…ç½®ç®¡ç†å·¥å…·æ‰©å±•æ”¯æŒ">Kubernetes é…ç½®ç®¡ç†å·¥å…·æ‰©å±•æ”¯æŒ<a href="#kubernetes-é…ç½®ç®¡ç†å·¥å…·æ‰©å±•æ”¯æŒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ KCL v0.4.6 ä¸­ï¼Œæˆ‘ä»¬ä»¥ç»Ÿä¸€çš„ç¼–ç¨‹ç•Œé¢æ–¹å¼ä¸º Kubernetes ç¤¾åŒºçš„ Helm, Kustomize, KPT ç­‰é…ç½®ç®¡ç†å·¥å…·æä¾›äº†æ’ä»¶æ”¯æŒï¼Œç¼–å†™å‡ è¡Œ KCL ä»£ç å³å¯æ— ä¾µå…¥åœ°å®Œæˆå¯¹å­˜é‡ Kustomize YAMLï¼ŒHelm Charts çš„ç¼–è¾‘å’Œæ ¡éªŒï¼Œæ¯”å¦‚ç¼–å†™å°‘é‡ KCL ä»£ç ä¿®æ”¹èµ„æºæ ‡ç­¾/æ³¨è§£, æ³¨å…¥ sidecar å®¹å™¨é…ç½®ï¼Œä½¿ç”¨ KCL schema æ ¡éªŒèµ„æºç­‰ã€‚</p><p>ä¸‹é¢ä»¥ Kustomize å·¥å…·å¯¹ KCL çš„é›†æˆä¸ºä¾‹è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚ä½¿ç”¨ Kustomize KCL æ’ä»¶æ— éœ€å®‰è£…ä»»ä½•ä¸ KCL ç›¸å…³çš„äºŒè¿›åˆ¶ï¼Œä»…éœ€æ‚¨æœ¬åœ°å®‰è£…æœ‰ Kustomize å·¥å…·å³å¯ã€‚</p><p>é¦–å…ˆæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è·å–ä¸€ä¸ª Kustomize YAML é…ç½®ç¤ºä¾‹:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/kcl-lang/kustomize-kcl.git </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token builtin class-name">cd</span><span class="token plain"> ./kustomize-kcl/examples/set-annotation/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿ç”¨ KCL ä»£ç ä»…ä¸ºæ‰€æœ‰çš„ <code>Deployment</code> èµ„æºæ·»åŠ ä¸€ä¸ª <code>managed-by=kustomize-kcl</code> æ³¨è§£</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> kustomize fn run ./local-resource/ --as-current-user --dry-run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥å¾—åˆ°å¦‚ä¸‹ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internal.config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MyApp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9376</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internal.config.kubernetes.io/path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">use.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># This annotation is added through the kcl code.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">managed-by</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kustomize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.14.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ä¸Šè¿° YAML é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä»…ç¼–å†™äº†ä¸€è¡Œ KCL ä»£ç å°±å®Œæˆä¸º Deployment èµ„æºæ·»åŠ ä¸€ä¸ª <code>managed-by=kustomize-kcl</code> æ³¨è§£</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">resource </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> resource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"managed-by"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> resource </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"resource_list"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–æˆ‘ä»¬ä¸º Kustomize/Helm/KPT ä¸‰ä¸ªå·¥å…·å‡æä¾›äº†å¸¸ç”¨çš„å®¹å™¨ã€æœåŠ¡é…ç½®ä¿®æ”¹æ ¡éªŒ KCL æ¨¡å‹ï¼Œå¹¶ä¸”ä¼šæŒç»­å®Œå–„ï¼Œæ¬¢è¿ç¤¾åŒºå°ä¼™ä¼´ä¸€èµ·å‚ä¸å…±å»ºã€‚</p><ul><li>æ›´å¤š Kustomize KCL æ’ä»¶è¯¦ç»†å†…å®¹ä»¥åŠç”¨ä¾‹ <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/kustomize_kcl_plugin" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>æ›´å¤š Helm KCL æ’ä»¶è¯¦ç»†å†…å®¹ä»¥åŠç”¨ä¾‹ <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/helm_kcl_plugin" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>æ›´å¤š KPT KCL æ’ä»¶è¯¦ç»†å†…å®¹ä»¥åŠç”¨ä¾‹ <a href="https://kcl-lang.io/docs/user_docs/guides/working-with-k8s/kpt_kcl_sdk" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤šè¯­è¨€-sdk">å¤šè¯­è¨€ SDK<a href="#å¤šè¯­è¨€-sdk" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨æ­¤æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬å‘å¸ƒäº†å…¨æ–°çš„ KCL Go SDK å°† KCL é›†æˆåˆ°æ‚¨çš„ Go åº”ç”¨ç¨‹åºä¸­ï¼Œå¹¶æä¾›ä¸°å¯Œçš„ API ä¸ KCL è¿›è¡Œäº¤äº’ã€‚æ‚¨å¯ä»¥åœ¨ <a href="https://kcl-lang.io/docs/next/reference/xlang-api/go-api" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a> æŸ¥è¯¢è¯¦ç»†çš„ API æ–‡æ¡£ã€‚æ­¤å¤–æˆ‘ä»¬è¿˜æ›´æ–°äº†å¦‚ä¸‹ç‰¹æ€§å’Œé”™è¯¯ä¿®å¤ï¼š</p><ul><li>æ„Ÿè°¢ @jakezhu9 ä¿®å¤äº† kcl-go æœªé¢„æœŸçš„ KCL æ ¼å¼åŒ– API åœ¨ CI Pipeline ä¸­å•å…ƒæµ‹è¯•é”™è¯¯</li><li>æ„Ÿè°¢ @Ekko è´¡çŒ® Go struct å’Œ KCL schema åŒå‘è½¬æ¢æ”¯æŒï¼Œè¯¦è§:<ul><li><a href="https://github.com/kcl-lang/kcl-go/blob/main/pkg/tools/gen/genkcl.go#L23" target="_blank" rel="noopener noreferrer">Go struct -&gt; KCL schema</a></li><li><a href="https://github.com/kcl-lang/kcl-go/blob/main/pkg/tools/gen/gengo.go#L23" target="_blank" rel="noopener noreferrer">KCL schema -&gt; Go struct</a></li></ul></li><li>KCL schema åˆ° protobuf message çš„è½¬æ¢æ”¯æŒï¼Œ<a href="https://github.com/kcl-lang/kcl-go/blob/main/pkg/tools/gen/genpb.go#L25" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li><li>KCL æ–°å¢è·å– schema ç±»å‹å’Œå®ä¾‹ APIï¼Œ<a href="https://kcl-lang.io/docs/reference/xlang-api/go-api#func-getschematype" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤">å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤<a href="#å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>KCL python plugin åŠŸèƒ½é»˜è®¤ä¸å¼€å¯ï¼Œå¦‚éœ€å¼€å¯å¯å‚è€ƒ <a href="https://kcl-lang.io/docs/reference/plugin/overview" target="_blank" rel="noopener noreferrer">KCL Plugin æ–‡æ¡£</a></li><li>KCL playground æ”¯æŒä»£ç åˆ†äº«èƒ½åŠ›ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¿é—® <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL å®˜ç½‘</a> å¹¶ç‚¹å‡» Playground æŒ‰é’®è¿›è¡Œä½“éªŒ</li><li>æ›´å¤šæ›´æ–°ä¸é”™è¯¯ä¿®å¤ï¼Œ<a href="https://github.com/kcl-lang/kcl/milestone/3?closed=1" target="_blank" rel="noopener noreferrer">è¯¦è§</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–‡æ¡£æ›´æ–°">æ–‡æ¡£æ›´æ–°<a href="#æ–‡æ¡£æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> æ–°å¢ KCL v0.4.6 æ–‡æ¡£å†…å®¹å¹¶æ”¯æŒç‰ˆæœ¬åŒ–è¯­ä¹‰é€‰é¡¹ï¼Œç›®å‰æ”¯æŒ v0.4.3, v0.4.4, v0.4.5 å’Œ v0.4.6 ç‰ˆæœ¬é€‰æ‹©ã€‚åŒæ—¶æ¬¢è¿ç¤¾åŒºåŒå­¦è¿›è¡Œæ–‡æ¡£å…±å»ºã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>é¢„è®¡ 2023 å¹´å¹´ä¸­ï¼Œæˆ‘ä»¬å°†å‘å¸ƒ <strong>KCL v0.5.0 ç‰ˆæœ¬</strong>ï¼Œé¢„æœŸé‡ç‚¹æ¼”è¿›åŒ…æ‹¬ï¼š</p><ul><li>æ›´å¤šé’ˆå¯¹åœºæ™¯é—®é¢˜çš„ KCL è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›ï¼Œç”¨æˆ·ç•Œé¢æŒç»­ä¼˜åŒ–ä¸ä½“éªŒæå‡ï¼Œç”¨æˆ·æ”¯æŒå’Œç—›ç‚¹è§£å†³</li><li>æ›´å¤š IDE æ’ä»¶ã€åŒ…ç®¡ç†å·¥å…·ã€Helm/Kustomize/KPT åœºæ™¯é›†æˆã€åŠŸèƒ½æ”¯æŒå’Œç”¨æˆ·ä½“éªŒæå‡</li><li>é’ˆå¯¹äº‘åŸç”Ÿåœºæ™¯æä¾›æ›´å¤šå¼€ç®±å³ç”¨çš„ KCL æ¨¡å‹æ”¯æŒï¼Œä¸»è¦åŒ…å«å®¹å™¨ã€æœåŠ¡ã€è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œç­‰</li><li>æ”¯æŒ KCL Schema ç›´æ¥ç”Ÿæˆ Kubernetes CRD</li><li>æ”¯æŒ kubectl å’Œ helmfile KCL pluginï¼Œé€šè¿‡ KCL ä»£ç ç›´æ¥ç”Ÿæˆã€ç¼–è¾‘å’Œæ ¡éªŒ Kubernetes åŸç”Ÿèµ„æº</li><li>æ”¯æŒåœ¨ Kubernetes è¿è¡Œæ—¶é€šè¿‡ Admission Controller è¿è¡Œ KCL ä»£ç å¯¹ YAML è¿›è¡Œç¼–è¾‘å’Œæ ¡éªŒ</li><li>æ›´å¤šé Kubernetes åœºæ™¯æ”¯æŒï¼Œå¦‚é€šè¿‡ KCL Schema å¯¹ AI æ¨¡å‹è¿›è¡Œæ•°æ®æ¸…ç†å’Œæ•°æ®åº“ Schema é›†æˆæ”¯æŒ</li></ul><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/kcl-lang/kcl/milestone/5" target="_blank" rel="noopener noreferrer">KCL v0.5.0 Milestone</a></p><p>å¦‚æœæ‚¨æœ‰æ›´å¤šçš„æƒ³æ³•å’Œéœ€æ±‚ï¼Œæ¬¢è¿åœ¨ KCL Github ä»“åº“å‘èµ· <a href="https://github.com/kcl-lang/kcl/issues" target="_blank" rel="noopener noreferrer">Issues</a>ï¼Œä¹Ÿæ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ™Œ ğŸ™Œ ğŸ™Œ</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/faq-kcl" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·å’Œç¤¾åŒºå°ä¼™ä¼´åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µåé¦ˆä¸å»ºè®®ã€‚å—é™äºæ–‡ç« ç¯‡å¹…ï¼Œåç»­æˆ‘ä»¬ä¼šæ’°å†™æ›´å¤š KCL v0.4.6 æ–°ç‰ˆæœ¬åŠŸèƒ½è§£è¯»ç³»åˆ—æ–‡ç« ï¼Œæ•¬è¯·æœŸå¾…!</p><p>æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="Release Blog" term="Release Blog"/>
        <category label="KCL" term="KCL"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[OS2ATC 2022 ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-03-26-kcl-os2atc-meeting</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-03-26-kcl-os2atc-meeting"/>
        <updated>2023-03-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL Talk Cover]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" alt="KCL Talk Cover" src="/zh-CN/assets/images/talk-cover-d1ad5adb402484a069bfc2b3a906c55e.jpg" width="2766" height="1108" class="img_ev3q"></p><p><a href="https://kcl-lang.github.io/talks/kcl-waic2023.pdf" target="_blank" rel="noopener noreferrer">PDF ä¸‹è½½</a></p>]]></content>
        <author>
            <name>å¾é¹é£</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Configuration" term="Configuration"/>
        <category label="Policy" term="Policy"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL v0.4.6-alpha.1 å‘å¸ƒæ—¥å¿—]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.6-alpha.1-release-blog</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.6-alpha.1-release-blog"/>
        <updated>2023-03-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ç®€ä»‹]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ KCL v0.4.6-alpha.1 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼</p><p>æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.4.6-alpha.1" target="_blank" rel="noopener noreferrer">KCL v0.4.6-alpha.1 å‘å¸ƒé¡µé¢</a> æˆ–è€… <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL å®˜æ–¹ç½‘ç«™</a> è·å¾— KCL äºŒè¿›åˆ¶ä¸‹è½½é“¾æ¥å’Œæ›´å¤šè¯¦ç»†å‘å¸ƒä¿¡æ¯ã€‚</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‘å¸ƒå†…å®¹">å‘å¸ƒå†…å®¹<a href="#å‘å¸ƒå†…å®¹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>åŒ…å«æ•°å­—ã€å­—é¢å€¼ã€æ‹¬å·ç­‰è¯æ³•é”™è¯¯æ¢å¤</li><li>KCL IDE æ’ä»¶æ”¯æŒé”™è¯¯å’Œå‘Šè­¦æ˜¾ç¤ºï¼Œè·³è½¬ç­‰èƒ½åŠ›</li><li>éƒ¨åˆ†ç¼–è¯‘å™¨æŠ¥é”™æ”¹å–„</li><li>KCL Playground æ”¯æŒä»£ç åˆ†äº«èƒ½åŠ›</li><li><a href="https://github.com/kcl-lang/kcl/issues/434" target="_blank" rel="noopener noreferrer">Kubernetes KPT å·¥å…·é›†æˆæ–¹æ¡ˆè®¾è®¡</a></li><li><a href="https://github.com/kcl-lang/kcl/issues/426" target="_blank" rel="noopener noreferrer">Kubernetes Helm KCL å·¥å…·æ’ä»¶æ–¹æ¡ˆ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>KPM åŒ…ç®¡ç†å·¥å…·æ­£å¼å‘å¸ƒ</li><li>æ›´å¤š KCL ç¼–è¯‘å™¨è¯­æ³•é”™è¯¯æ¢å¤æ”¯æŒæ–°ç‰ˆ IDE æ’ä»¶å‘å¸ƒï¼Œæ€§èƒ½é¢„è®¡æå‡ 20 å€</li><li>Helmï¼ŒKPT ç­‰ Kubernetes å·¥å…· KCL é›†æˆæ­£å¼å‘å¸ƒ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µçš„åé¦ˆä¸å»ºè®®ã€‚æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„<a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">ç¤¾åŒº</a>è¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘</p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="Release Blog" term="Release Blog"/>
        <category label="KCL" term="KCL"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[å…¨æ–°çš„ KCL Playground æ¥äº†!]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2023-kcl-playground-0.4.5-release</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2023-kcl-playground-0.4.5-release"/>
        <updated>2023-03-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ç®€ä»‹]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ KCL Playground v0.4.5 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>æ‚¨å¯ä»¥è®¿é—® <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> ç‚¹å‡» playground è¿›è¡Œä½“éªŒã€‚åœ¨è¿™ä¸ªæ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒäº†æ ¹æ®è¾“å…¥ KCL ä»£ç å˜åŒ–è‡ªåŠ¨ç¼–è¯‘å’Œè¿è¡Œ KCL ä»£ç ã€æ ¼å¼åŒ–ä»£ç å’Œä»¥åŠå…±äº«ä»£ç çš„èƒ½åŠ›ã€‚æ¬¢è¿å‚ä¸æ’°å†™å¹¶å°† KCL ä»£ç åˆ†äº«ç»™æ‚¨çš„å°ä¼™ä¼´ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-website-playground-cbf056a40b11b94ed416e019233bd760.png" width="3352" height="966" class="img_ev3q"></p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-playground-fc658aae9889527aa6db0f023872ed33.png" width="1400" height="509" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>é¢„è®¡ 2023 å¹´ 4 æœˆä¸­æ—¬ï¼Œæˆ‘ä»¬å°†å‘å¸ƒ <strong>KCL Playground v0.4.6 ç‰ˆæœ¬</strong>ï¼Œé¢„æœŸé‡ç‚¹æ¼”è¿›åŒ…æ‹¬ï¼šKCL ç‰ˆæœ¬é€‰æ‹©ï¼Œå¯¼å…¥å·²æœ‰ä»£ç ç‰‡æ®µç­‰èƒ½åŠ›ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µçš„åé¦ˆä¸å»ºè®®ã€‚æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="Release Blog" term="Release Blog"/>
        <category label="KCL" term="KCL"/>
        <category label="Playground" term="Playground"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL v0.4.5 å‘å¸ƒæ—¥å¿—]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.5-release-blog</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.5-release-blog"/>
        <updated>2023-02-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ç®€ä»‹]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ KCL v0.4.5 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼æœ¬æ¬¡å‘å¸ƒä¸»è¦ä¸º KCL è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§å’Œç¨³å®šæ€§æå‡ï¼Œé”™è¯¯ä¿¡æ¯æ”¹è¿›ä»¥åŠæ›´å¤šå¹³å°åŒ…æ‹¬ windows ç‰ˆæœ¬æ”¯æŒä»¥åŠæ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒã€‚åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç¼–å†™æ›´å°‘çš„ KCL ä»£ç æ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆï¼›åœ¨æ–°ç‰ˆæœ¬ä¸­æä¾›äº†åˆæ­¥çš„ KCL Playground æ”¯æŒå¯ç”¨äºåœ¨çº¿å…å®‰è£…ç¼–å†™å¹¶è¿è¡Œ KCL ä»£ç ï¼›æ­¤å¤–æ­¤æ¬¡æ›´æ–°è¿˜åŒ…å«å¤šé¡¹ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯ä¼˜åŒ–å’Œé”™è¯¯ä¿®å¤ã€‚</p><p>æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.4.5" target="_blank" rel="noopener noreferrer">KCL v0.4.5 å‘å¸ƒé¡µé¢</a> æˆ–è€… <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL å®˜æ–¹ç½‘ç«™</a> è·å¾— KCL äºŒè¿›åˆ¶ä¸‹è½½é“¾æ¥å’Œæ›´å¤šè¯¦ç»†å‘å¸ƒä¿¡æ¯ã€‚</p><p><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>æœ¬æ–‡å°†ä¼šä»‹ç» KCL v0.4.5 ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹ä»¥åŠ KCL ç¤¾åŒºçš„è¿‘æœŸåŠ¨æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¯­è¨€æ›´æ–°">è¯­è¨€æ›´æ–°<a href="#è¯­è¨€æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›">KCL è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›<a href="#kcl-è¯­è¨€ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ”¯æŒ-schema-éç©ºå±æ€§æƒ°æ€§æ ¡éªŒ">æ”¯æŒ Schema éç©ºå±æ€§æƒ°æ€§æ ¡éªŒ<a href="#æ”¯æŒ-schema-éç©ºå±æ€§æƒ°æ€§æ ¡éªŒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ”¯æŒäº† schema å±æ€§äº’ç›¸å¼•ç”¨ï¼ˆåŒ…å«ç»§æ‰¿ï¼‰ä»¥åŠ check æ ¡éªŒè¡¨è¾¾å¼çš„æƒ°æ€§æ±‚å€¼ä¸æ ¡éªŒèƒ½åŠ›ï¼Œåœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒäº†æ›´å¤šçš„ schema æƒ°æ€§æ±‚å€¼èƒ½åŠ›: Schema å±æ€§éç©ºæƒ°æ€§æ ¡éªŒã€‚æ¯”å¦‚å¯¹äºä¸‹è¿°çš„ KCL çš„ä»£ç ï¼š</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Spec </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œè¿™ä¸ªè¯­å¥ä¼šæŠ¥å±æ€§éç©ºé”™è¯¯ï¼Œv0.4.5 ç‰ˆæœ¬ä¹‹åï¼Œæ”¯æŒ Schema éç©ºå±æ€§æƒ°æ€§æ ¡éªŒèƒ½åŠ›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ v0.4.5 ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œç›´æ¥æ‰§è¡Œä¸Šè¿°ä»£ç ä¼šåœ¨ <code>schema Config</code> è¯­å¥å—çš„ <code>spec: Spec = Spec {</code> å¤„æŠ›å‡ºä¸€ä¸ª <code>spec</code> çš„ <code>value</code> å±æ€§ä¸èƒ½ä¸ºç©ºçš„é”™è¯¯ï¼Œå› ä¸ºåœ¨è¯¥å¤„åªå¯¹ <code>spec</code> çš„ <code>id</code> å±æ€§èµ‹å€¼ä¸º <code>1</code>ï¼Œè€Œæ²¡æœ‰å¯¹ <code>spec</code> çš„ <code>value</code> å±æ€§èµ‹å€¼ã€‚</p><p>åœ¨ KCL çš„ v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œæˆ‘ä»¬æ”¯æŒäº† schema å±æ€§çš„æƒ°æ€§éç©ºæ ¡éªŒèƒ½åŠ›ä¹‹åä¼šé¿å…è¿™ä¸ªé”™è¯¯çš„æŠ›å‡ºï¼Œå³å½“åœ¨ <code>config</code> å±æ€§çš„ <code>spec.value = "value"</code> ä¸ <code>spec.id = 1</code> åˆå¹¶ä¹‹åæ‰ä¼šé€’å½’åœ°å¯¹ <code>config</code> çš„æ‰€æœ‰å±æ€§è¿›è¡Œéç©ºæ£€æŸ¥ï¼Œæ­¤æ—¶ <code>spec</code> å±æ€§çš„æ‰€æœ‰å€¼æ˜¯è¢«å®Œæ•´èµ‹å€¼çš„ (<code>spec</code> çš„ <code>id</code> å­—æ®µçš„å€¼ä¸º <code>1</code>, <code>value</code> å­—æ®µä¸º <code>"value"</code>ï¼Œ)ï¼Œä¸ä¼šæŠ›å‡ºå¿…é€‰å±æ€§å­—æ®µä¸ºç©ºé”™è¯¯ã€‚</p><p>å› æ­¤åœ¨ v0.4.5 ç‰ˆæœ¬ä¹‹åï¼Œæ‰§è¡Œä¸Šè¿° KCL ä»£ç ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å®Œæ•´ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> value</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ”¯æŒé…ç½®å—å±æ€§äº’ç›¸å¼•ç”¨ä»¥æ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆ">æ”¯æŒé…ç½®å—å±æ€§äº’ç›¸å¼•ç”¨ä»¥æ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆ<a href="#æ”¯æŒé…ç½®å—å±æ€§äº’ç›¸å¼•ç”¨ä»¥æ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ v0.4.5 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒKCL å°šæœªæ”¯æŒé…ç½®å—å†…éƒ¨çš„å±æ€§äº’ç›¸å¼•ç”¨ï¼Œå¯¼è‡´åœ¨æŸäº›åœºæ™¯ä¸­ä¼šéœ€è¦å®šä¹‰é¢å¤–çš„é…ç½®å˜é‡æˆ–è€…æ¨¡ç‰ˆæ¥è¿›è¡Œå¼•ç”¨ï¼Œä¼šäº§ç”Ÿè¾ƒå¤šçš„é…ç½®æ¨¡ç‰ˆå’Œé‡å¤ä»£ç ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹æ‰€ç¤ºçš„ KCL ä»£ç ï¼š</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"app-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># `metadata.name` ä¸èƒ½ç›´æ¥å¼•ç”¨ `data` å†…éƒ¨çš„ `name` å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>data</code> é…ç½®å—çš„ <code>metadata.name</code> å±æ€§ä¸èƒ½ç›´æ¥å¼•ç”¨ <code>data</code> å†…éƒ¨çš„ <code>name</code> å±æ€§ï¼Œéœ€è¦é¢å¤–å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ <code>name</code> è¿›è¡Œå¼•ç”¨ã€‚</p><p>è€Œåœ¨ KCL çš„ v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œæˆ‘ä»¬æ”¯æŒäº†é…ç½®å—å±æ€§äº’ç›¸å¼•ç”¨çš„ç‰¹æ€§ï¼Œå¯ä»¥ç”¨äºæ¶ˆé™¤æ›´å¤šçš„é…ç½®æ¨¡ç‰ˆï¼Œæ¯”å¦‚å¦‚ä¸‹æ‰€ç¤ºçš„ KCL ä»£ç ï¼š</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"app-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># ç›´æ¥å¼•ç”¨ `data` é…ç½®çš„ name å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>data</code> é…ç½®å—çš„ <code>metadata.name</code> å±æ€§å¯ä»¥ç›´æ¥å¼•ç”¨ <code>data</code> å†…éƒ¨çš„ <code>name</code> å±æ€§è€Œæ— éœ€å®šä¹‰é¢å¤–çš„å…¨å±€å˜é‡ã€‚</p><p>æ‰§è¡Œä¸Šè¿° KCL ä»£ç å¯ä»¥è·å¾—å¦‚ä¸‹ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"global-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"metadata-name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"app.kubernetes.io/name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># ç›´æ¥å¼•ç”¨ `metadata.name`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"app.kubernetes.io/instance"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># ç›´æ¥å¼•ç”¨ `metadata.name`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name  </span><span class="token comment" style="color:#999988;font-style:italic"># å¼•ç”¨å…¨å±€çš„ `name` å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata  </span><span class="token comment" style="color:#999988;font-style:italic"># å¼•ç”¨å…¨å±€çš„ `metadata` å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name  </span><span class="token comment" style="color:#999988;font-style:italic"># å¼•ç”¨ `data` å†…éƒ¨çš„ `metadata` å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œä¸Šè¿°ä»£ç å¯ä»¥è·å¾—å¦‚ä¸‹ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>âš ï¸ æ³¨æ„ï¼šå½“å‰ KCL ç‰ˆæœ¬å°šæœªæ”¯æŒé…ç½®å—å†…éƒ¨å±æ€§åå‘å¼•ç”¨ä»¥åŠè·³è¿‡å†…éƒ¨ä½œç”¨åŸŸç›´æ¥å¼•ç”¨å…¨å±€å˜é‡ï¼Œéœ€è¦å°†è¢«å¼•ç”¨çš„å±æ€§ä¹¦å†™åœ¨é…ç½®å¼•ç”¨å¤„çš„å‰æ–¹</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-è¯­è¨€æ–°å¢åŠŸèƒ½">KCL è¯­è¨€æ–°å¢åŠŸèƒ½<a href="#kcl-è¯­è¨€æ–°å¢åŠŸèƒ½" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å­—ç¬¦ä¸²-format-æˆå‘˜å‡½æ•°æ”¯æŒç´¢å¼•æ ¼å¼åŒ–">å­—ç¬¦ä¸² format æˆå‘˜å‡½æ•°æ”¯æŒç´¢å¼•æ ¼å¼åŒ–<a href="#å­—ç¬¦ä¸²-format-æˆå‘˜å‡½æ•°æ”¯æŒç´¢å¼•æ ¼å¼åŒ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼ŒKCL æ”¯æŒäº†ç±»ä¼¼ Python å­—ç¬¦ä¸² format æˆå‘˜å‡½æ•°åœ¨ <code>{}</code> æ ¼å¼åŒ–å—ä¸­ä½¿ç”¨ <code>&lt;format_ele_index&gt;[&lt;index_or_key&gt;]</code> ç´¢å¼•æ ‡è®°æ ·å¼å¯¹åˆ—è¡¨å’Œå­—å…¸ç±»å‹çš„ KCL å˜é‡è¿›è¡Œæ ¼å¼åŒ–ã€‚å…¶ä¸­</p><ul><li><code>&lt;format_ele_index&gt;</code> è¡¨ç¤ºéœ€è¦éœ€è¦åºåˆ—åŒ–åˆ—è¡¨å’Œå­—å…¸ç±»å‹å…ƒç´ çš„ç´¢å¼•</li><li><code>&lt;index_or_key&gt;</code> è¡¨ç¤ºå¯¹åº”åˆ—è¡¨å’Œå­—å…¸ç±»å‹å…ƒç´ çš„åˆ—è¡¨å­å…ƒç´ ç´¢å¼•æˆ–è€…å­—å…¸å­å…ƒç´ é”®å€¼</li></ul><p>æ¯”å¦‚å¯¹äºå¦‚ä¸‹çš„ KCL ä»£ç </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 0[0] è¡¨ç¤ºå– ["Hello", "World"] çš„ç¬¬ 0 ä¸ªå…ƒç´ ï¼š"Hello"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 0[1] è¡¨ç¤ºå– ["Hello", "World"] çš„ç¬¬ 1 ä¸ªå…ƒç´ ï¼š"World"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">listIndexFormat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"{0[0]}{0[1]}"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"Hello"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"World"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 0[0] è¡¨ç¤ºå– ["0", "1"] çš„ç¬¬ 0 ä¸ªå…ƒç´ ï¼š"1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1[Hello] è¡¨ç¤ºå– {"Hello": "World"} é”®å€¼ä¸º Hello çš„å­—å…¸å…ƒç´ ï¼š"World"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dictIndexFormat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0{0[0]}, 1{0[1]}, Hello{1[Hello]}"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"0"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"1"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"Hello"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"World"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œä¸Šè¿°ä»£ç å¯ä»¥è·å¾—å¦‚ä¸‹ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">listIndexFormat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HelloWorld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">dictIndexFormat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"00, 11, HelloWorld"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-è¯­è¨€-playground-æ›´æ–°">KCL è¯­è¨€ Playground æ›´æ–°<a href="#kcl-è¯­è¨€-playground-æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨æ­¤æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬æ›´æ–°äº† KCL Playground çš„ç‰ˆæœ¬å¹¶æ”¯æŒ KCL ä»£ç è‡ªåŠ¨ç¼–è¯‘å’Œæ ¼å¼åŒ–ä¸¤é¡¹èƒ½åŠ›ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¿é—® <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL å®˜ç½‘</a> å¹¶ç‚¹å‡» Playground æŒ‰é’®è¿›è¡Œä½“éªŒã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-website-playground-cbf056a40b11b94ed416e019233bd760.png" width="3352" height="966" class="img_ev3q"></p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-playground-f4db51c9b35d15ee785b22cd0b4c52da.png" width="3132" height="886" class="img_ev3q"></p><p>åœ¨åç»­ KCL ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¼šæŒç»­æ›´æ–° KCL Playground æ›´å¤šèƒ½åŠ›æ”¯æŒå¦‚ KCL ç‰ˆæœ¬é€‰æ‹©ä¸ä»£ç åˆ†äº«ç­‰åŠŸèƒ½ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-æ›´å¤šå¹³å°å’Œæ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ">KCL æ›´å¤šå¹³å°å’Œæ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ<a href="#kcl-æ›´å¤šå¹³å°å’Œæ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="windows-ç‰ˆæœ¬æ”¯æŒ">Windows ç‰ˆæœ¬æ”¯æŒ<a href="#windows-ç‰ˆæœ¬æ”¯æŒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>KCL Windows äºŒè¿›åˆ¶ç‰ˆæœ¬å¯ä»¥ä» <a href="https://github.com/kcl-lang/kcl/releases/" target="_blank" rel="noopener noreferrer">Github</a> æ‰‹åŠ¨ä¸‹è½½å¹¶å®‰è£…ï¼Œä¸‹è½½å®Œæˆåå°† <code>{install-location}\kclvm\bin</code> æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ <code>PATH</code> ä¸­ã€‚</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$env:PATH += ";{install-location}\kclvm\bin;"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å¦‚ä¸‹æ‰€ç¤ºçš„ Powershell è„šæœ¬è¿›è¡Œå®‰è£…:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">powershell -Command "iwr -useb https://kcl-lang.io/script/install.ps1 | iex"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬åç»­ä¼šæ”¯æŒæ›´å¤šçš„ Windows åŒ…ç®¡ç†ä¸‹è½½æ–¹å¼ï¼Œå¦‚ <code>Scoop</code> ç­‰ã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="æ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ">æ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ<a href="#æ›´å¤šä¸‹è½½æ–¹å¼æ”¯æŒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒäº†æ›´å¤šçš„ KCL ä¸‹è½½æ–¹å¼ï¼ŒåŒ…æ‹¬è„šæœ¬, Python, Go, Homebrew å’Œ Docker ä¸€é”®å®‰è£…ï¼Œæ›´å¤šè¯¦ç»†å†…å®¹è¯·å‚è€ƒ <a href="https://kcl-lang.io/docs/user_docs/getting-started/install" target="_blank" rel="noopener noreferrer">KCL ä¸‹è½½ä¸å®‰è£…</a>ï¼Œåç»­æˆ‘ä»¬ä¼šæ”¯æŒæ›´å¤š KCL å®‰è£…æ–¹å¼ã€‚</p><blockquote><p>âš ï¸ æ³¨æ„ï¼šå¯¹äºä¸Šè¿°æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œå®‰è£…æ–¹å¼ï¼Œå¦‚æœè¦ä½¿ç”¨ <a href="https://kcl-lang.io/docs/reference/plugin/overview" target="_blank" rel="noopener noreferrer">KCL Python æ’ä»¶</a> èƒ½åŠ›ï¼Œéœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº† Python 3.7+ ç‰ˆæœ¬å¹¶å°† python3 å‘½ä»¤æ·»åŠ åˆ°æ‚¨çš„ PATH ç¯å¢ƒå˜é‡ä¸­ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é”™è¯¯ä¿®å¤">é”™è¯¯ä¿®å¤<a href="#é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å½“å­˜åœ¨éé…ç½®è¡¨è¾¾å¼çš„å³å€¼æ—¶é…ç½®åˆå¹¶é¡ºåºé”™è¯¯">å½“å­˜åœ¨éé…ç½®è¡¨è¾¾å¼çš„å³å€¼æ—¶é…ç½®åˆå¹¶é¡ºåºé”™è¯¯<a href="#å½“å­˜åœ¨éé…ç½®è¡¨è¾¾å¼çš„å³å€¼æ—¶é…ç½®åˆå¹¶é¡ºåºé”™è¯¯" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Resource </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"8Gi"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Resource </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"4Gi"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç  (main.k) ä¼šå¾—åˆ°éé¢„æœŸçš„é…ç½®å€¼ï¼Œæ˜¯å› ä¸º KCL ç¼–è¯‘å™¨é”™è¯¯åœ°ä¼˜åŒ–äº†å¦‚ä¸‹å½¢å¼ç­‰æ•ˆåˆå¹¶é…ç½®å—</p><div class="language-python3 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python3 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config: Config {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource: r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource: Resource {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cpu = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        memory = "4Gi"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>KCL v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œä¿®æ­£äº†ä¸æ­£ç¡®é…ç½®åˆå¹¶é¡ºåºï¼Œå¯ä»¥æ‰§è¡Œ main.k å¹¶è·å¾—é¢„æœŸçš„ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">r</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 8Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 8Gi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/kcl-lang/kcl/issues/422" target="_blank" rel="noopener noreferrer">KCL Issue #422</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®-if-è¡¨è¾¾å¼ç±»å‹ä¸åŒ¹é…é”™è¯¯ä¼˜åŒ–">é…ç½® if è¡¨è¾¾å¼ç±»å‹ä¸åŒ¹é…é”™è¯¯ä¼˜åŒ–<a href="#é…ç½®-if-è¡¨è¾¾å¼ç±»å‹ä¸åŒ¹é…é”™è¯¯ä¼˜åŒ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"A"</span><span class="token operator" style="color:#393A34">|</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œå¯¹äºé…ç½® if è¡¨è¾¾å¼ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç ä¼šå¾—åˆ°é¢„æœŸçš„é…ç½®å€¼å¯¼è‡´ Type Unsoundness é—®é¢˜ï¼Œæ˜¯å› ä¸º KCL ç¼–è¯‘å™¨é”™è¯¯åœ°æ²¡æœ‰æ£€æŸ¥å‡º <code>A</code> å±æ€§çš„å€¼ <code>"2"</code> ä¸å£°æ˜çš„ç±»å‹ <code>int</code> ä¸åŒ¹é…ï¼ŒKCL v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œä¿®æ­£äº†æ­¤ç±»é—®é¢˜ï¼Œå¯ä»¥æ‰§è¡Œä¸Šè¿°ä»£ç å¯ä»¥è·å¾—é¢„æœŸçš„ç±»å‹ä¸åŒ¹é…é”™è¯¯:</p><div class="language-stderr codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-stderr codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">KCL Compile Error[E2G22] : The type got is inconsistent with the type expected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---&gt; File main.k:1:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 |config: {"A"|"B": int} = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 1 ^  -&gt; got {str(A):str(2)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expect {str(A)|str(B):int}, got {str(A):str(2)}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/kcl-lang/kcl/issues/389" target="_blank" rel="noopener noreferrer">KCL Issue #389</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rule-è¯­å¥æ ¡éªŒä¸ç”Ÿæ•ˆé—®é¢˜">Rule è¯­å¥æ ¡éªŒä¸ç”Ÿæ•ˆé—®é¢˜<a href="#rule-è¯­å¥æ ¡éªŒä¸ç”Ÿæ•ˆé—®é¢˜" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œåœ¨ä½¿ç”¨å¦‚ä¸‹ rule è§„åˆ™ä»£ç æ—¶ (main.k)ï¼Œ<code>ServiceCheckRule</code> çš„çº¦æŸä»£ç ä¼šä¸ç”Ÿæ•ˆã€‚</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protocol KubeResourceProtocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule ServiceCheckRule </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> KubeResourceProtocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">svc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"name"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ServiceCheckRule </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    svc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿›è¡Œæ”¹è¿›åï¼Œæˆ‘ä»¬æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªå‡†ç¡®çš„æ ¡éªŒä¸é€šè¿‡é”™è¯¯:</p><div class="language-stderr codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-stderr codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">KCL Runtime Error[E3B17] : Schema check is failed to check condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---&gt; File main.k:14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14 |ServiceCheckRule { -&gt; Instance check failed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ---&gt; File main.k:8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8 |    svc.name != "name" -&gt; Check failed on the condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Check failed on check conditions</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®å—å±æ€§ç±»å‹æ¨å¯¼ä¼˜åŒ–">é…ç½®å—å±æ€§ç±»å‹æ¨å¯¼ä¼˜åŒ–<a href="#é…ç½®å—å±æ€§ç±»å‹æ¨å¯¼ä¼˜åŒ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">id</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"A"</span><span class="token operator" style="color:#393A34">|</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ­¤å¤„ä¼šå¾—åˆ°ä¸€ä¸ªç±»å‹ä¸åŒ¹é…é”™è¯¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        B </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Id</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç ä¼šå¾—åˆ°ä¸€ä¸ªéé¢„æœŸçš„ç±»å‹ä¸åŒ¹é…ï¼Œæ˜¯å› ä¸º KCL ç¼–è¯‘å™¨é”™è¯¯åœ°å°† <code>c.data.A</code> å±æ€§çš„ç±»å‹æ¨å¯¼ä¸º <code>str</code> ç±»å‹ï¼Œå¯¼è‡´ä¸ <code>"A"|"B"</code> å­—é¢å€¼è”åˆç±»å‹ä¸åŒ¹é…é”™è¯¯ï¼ŒKCL v0.4.5 ç‰ˆæœ¬æ›´æ–°åï¼Œä¿®æ­£äº†æ­¤ç±»é—®é¢˜ï¼Œå¯ä»¥æ‰§è¡Œä¸Šè¿°ä»£ç å¯ä»¥è·å¾—é¢„æœŸçš„ YAML è¾“å‡º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">c</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">A</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">B</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="èµ‹å€¼è¯­å¥ä½¿ç”¨-schema-ç±»å‹æ³¨è§£é”™è¯¯ä¼˜åŒ–">èµ‹å€¼è¯­å¥ä½¿ç”¨ schema ç±»å‹æ³¨è§£é”™è¯¯ä¼˜åŒ–<a href="#èµ‹å€¼è¯­å¥ä½¿ç”¨-schema-ç±»å‹æ³¨è§£é”™è¯¯ä¼˜åŒ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Bar </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ­¤å¤„ä¼šå¾—åˆ°ä¸€ä¸ªè¿è¡Œæ—¶ç±»å‹ä¸åŒ¹é…é”™è¯¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç ä¼šå¾—åˆ°ä¸€ä¸ªè¿è¡Œæ—¶ç±»å‹ä¸åŒ¹é…é”™è¯¯ï¼Œç‰ˆæœ¬æ›´æ–°åï¼Œä¼šå°†æ­¤ç±»ç±»å‹ä¸åŒ¹é…é”™è¯¯ä¼˜åŒ–åˆ°ç¼–è¯‘æ—¶ï¼Œå°†é”™è¯¯å·¦ç§»ï¼Œæ›´æ—©åœ°å‘ç°æ­¤ç±»é”™è¯¯ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kcl-æ¨¡å—ç±»å‹ä½¿ç”¨--è¿ç®—ç¬¦ç±»å‹é”™è¯¯ä¿®å¤">KCL æ¨¡å—ç±»å‹ä½¿ç”¨ ?. è¿ç®—ç¬¦ç±»å‹é”™è¯¯ä¿®å¤<a href="#kcl-æ¨¡å—ç±»å‹ä½¿ç”¨--è¿ç®—ç¬¦ç±»å‹é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> math</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> math?</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ­¤å¤„ä¼šå¾—åˆ°ä¸€ä¸ªéé¢„æœŸçš„ `math is not defined` é”™è¯¯</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ KCL v0.4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç ä¼šå¾—åˆ°ä¸€ä¸ªéé¢„æœŸçš„å˜é‡æœªå®šä¹‰é”™è¯¯ï¼Œæ˜¯å› ä¸º KCL ç¼–è¯‘å™¨æ²¡æœ‰æ­£ç¡®åœ°å¤„ç† <code>math</code> module ç±»å‹å’Œ <code>?.</code> è¿ç®—ç¬¦ç»“åˆä½¿ç”¨çš„æƒ…å†µï¼Œç‰ˆæœ¬æ›´æ–°åï¼Œæ­¤ç±»é—®é¢˜å¾—åˆ°ä¿®å¤ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤">å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤<a href="#å…¶ä»–æ›´æ–°ä¸é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ›´å¤šæ›´æ–°ä¸é”™è¯¯ä¿®å¤ <a href="https://github.com/kcl-lang/kcl/milestone/3" target="_blank" rel="noopener noreferrer">è¯¦è§</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–‡æ¡£æ›´æ–°">æ–‡æ¡£æ›´æ–°<a href="#æ–‡æ¡£æ›´æ–°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> æ–°å¢ KCL v0.4.5 æ–‡æ¡£å†…å®¹å¹¶æ”¯æŒç‰ˆæœ¬åŒ–è¯­ä¹‰é€‰é¡¹ï¼Œç›®å‰æ”¯æŒ v0.4.3, v0.4.4 å’Œ v0.4.5 ç‰ˆæœ¬é€‰æ‹©ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/kcl-website-doc-version-eef23e0cebb08732c7fa1f9037d40663.png" width="3358" height="918" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºåŠ¨æ€">ç¤¾åŒºåŠ¨æ€<a href="#ç¤¾åŒºåŠ¨æ€" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>KCL ç¤¾åŒºæ–°å¢ä¸¤åå¤–éƒ¨è´¡çŒ®è€… @thinkrapido, @Rishav1707, æ„Ÿè°¢ä»–ä»¬çƒ­æƒ…å¹¶ç§¯æåœ°å‚ä¸è´¡çŒ®ã€‚</li><li>æ„Ÿè°¢ @Rishav1707 åŸºäº KCL å»ºç«‹äº† Rust è¯­è¨€ç‰ˆæœ¬çš„ <a href="https://github.com/i-think-rapido/kcl-loader-rs" target="_blank" rel="noopener noreferrer">kcl-loader-rs</a> å­é¡¹ç›®ï¼Œå½“å‰ç‰ˆæœ¬æ”¯æŒæ ¹æ® KCL æ–‡ä»¶ä¸­çš„ Schema å’Œé…ç½®å®šä¹‰è‡ªåŠ¨ç”Ÿæˆ Rust ç»“æ„ä½“å¹¶æ”¯æŒ KCL å€¼åˆ° Rust ç»“æ„ä½“å€¼çš„ååºåˆ—åŒ–å‡½æ•°ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>é¢„è®¡ 2023 å¹´ 4 æœˆä¸­æ—¬ï¼Œæˆ‘ä»¬å°†å‘å¸ƒ <strong>KCL v0.4.6 ç‰ˆæœ¬</strong>ï¼Œé¢„æœŸé‡ç‚¹æ¼”è¿›åŒ…æ‹¬ï¼š</p><ul><li>KCL è¯­è¨€è¿›ä¸€æ­¥ç¼–å†™ä¾¿åˆ©æ€§æ”¹è¿›ï¼Œç”¨æˆ·ç•Œé¢æŒç»­ä¼˜åŒ–ä¸ä½“éªŒæå‡ï¼Œç”¨æˆ·æ”¯æŒå’Œç—›ç‚¹è§£å†³</li><li>å…¨æ–°ç‰ˆæœ¬çš„ KCL Language Server å’Œ <a href="https://github.com/kcl-lang/vscode-kcl" target="_blank" rel="noopener noreferrer">VSCode è¯­è¨€æ’ä»¶</a>ï¼Œæ€§èƒ½é¢„è®¡<strong>æå‡ 20 å€</strong>ï¼Œå¹¶é¢„æœŸæ”¯æŒä»£ç è­¦å‘Šå’Œé”™è¯¯æ³¢æµªçº¿æç¤ºï¼Œè·³è½¬ï¼Œå¼•ç”¨æŸ¥æ‰¾ç­‰æ ¸å¿ƒåŸºç¡€èƒ½åŠ›</li><li>é’ˆå¯¹ Kubernetes Manifests é…ç½®ç®¡ç†åœºæ™¯ç—›ç‚¹æŒç»­è¿›è¡Œè¯­è¨€èƒ½åŠ›æå‡ï¼šå¦‚è®¾è®¡æä¾› <a href="https://github.com/helm/helm" target="_blank" rel="noopener noreferrer">Helm</a> KCL Schema æ’ä»¶ä»¥åŠä¸º <a href="https://github.com/GoogleContainerTools/kpt" target="_blank" rel="noopener noreferrer">kpt</a> å·¥å…·æä¾› KCL SDK ç­‰</li><li><a href="https://github.com/kcl-lang/kpm" target="_blank" rel="noopener noreferrer">KCL åŒ…ç®¡ç†å·¥å…· KPM</a> å‘å¸ƒï¼Œé¢„æœŸæ”¯æŒ Git ä»“åº“ä»£ç ä¾èµ–é…ç½®ä¸æ›´æ–°ï¼Œä»£ç ä¸‹è½½ç­‰åŸºç¡€èƒ½åŠ›</li><li><a href="https://github.com/kcl-lang/kcl-playground" target="_blank" rel="noopener noreferrer">KCL Playground</a> æ”¯æŒä»£ç åˆ†äº«èƒ½åŠ›å’Œ KCL ç‰ˆæœ¬é€‰æ‹©èƒ½åŠ›</li><li><a href="https://github.com/kcl-lang/kcl-go" target="_blank" rel="noopener noreferrer">KCL Go SDK</a> æ›´å¤šèƒ½åŠ›æ”¯æŒï¼šå¦‚æ”¯æŒ KCL Schema å’Œ Go ç»“æ„ä½“çš„åŒå‘è½¬æ¢ç­‰</li><li><a href="https://github.com/kcl-lang/kcl-py" target="_blank" rel="noopener noreferrer">KCL Python SDK</a> æ›´å¤šèƒ½åŠ›æ”¯æŒ</li></ul><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/kcl-lang/kcl/milestone/4" target="_blank" rel="noopener noreferrer">KCL v0.4.6 Milestone</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è¯¦è§ <a href="https://kcl-lang.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">KCL å¸¸è§é—®é¢˜</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ„Ÿè°¢æ‰€æœ‰ KCL ç”¨æˆ·åœ¨æ­¤æ¬¡ç‰ˆæœ¬æ›´æ–°è¿‡ç¨‹ä¸­æå‡ºçš„å®è´µçš„åé¦ˆä¸å»ºè®®ã€‚æ›´å¤šå…¶ä»–èµ„æºè¯·å‚è€ƒï¼š</p><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion Github ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig Github ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="Release Blog" term="Release Blog"/>
        <category label="KCL" term="KCL"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[OSDT 2022 ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-osdt-meeting</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-kcl-osdt-meeting"/>
        <updated>2022-12-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL Talk Cover]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" alt="KCL Talk Cover" src="/zh-CN/assets/images/talk-cover-b14b8fcd6a49d0dc12b6cf1c1f6e8219.jpg" width="2548" height="1428" class="img_ev3q"></p><p><a href="https://kcl-lang.github.io/talks/kcl-osdt2022.pdf" target="_blank" rel="noopener noreferrer">PDF ä¸‹è½½</a></p>]]></content>
        <author>
            <name>å¾é¹é£</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Configuration" term="Configuration"/>
        <category label="Policy" term="Policy"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL v0.4.4 å‘å¸ƒæ—¥å¿—]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.4-release-blog</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-kcl-0.4.4-release-blog"/>
        <updated>2022-12-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ 0.4.4 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼æœ¬æ¬¡å‘å¸ƒä¸»è¦ä¸º KCL è¯­è¨€å¢åŠ äº†è‡ªå®šä¹‰ YAML Manifests è¾“å‡ºçš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç¼–å†™ä»£ç å¹¶è°ƒç”¨ç³»ç»Ÿå‡½æ•°æ¥è‡ªå®šä¹‰ YAML è¾“å‡ºçš„æ ·å¼è€Œæ— éœ€ç†è§£å¤æ‚çš„ schema settings è¯­ä¹‰ï¼›æ­¤å¤–æœ¬æ¬¡å‘å¸ƒæä¾›äº†æœ€æ–°çš„ KCL Python SDK å¯ç”¨äº Python ç”¨æˆ·å¯¹ KCL ç›´æ¥é›†æˆï¼›åŒæ—¶æˆ‘ä»¬å¤§å¤§é™ä½äº† KCL å®‰è£…åŒ…çš„ä½“ç§¯ï¼Œå¹³å‡å®‰è£…åŒ…ä½“ç§¯é™ä½ä¸ºä¹‹å‰ç‰ˆæœ¬çš„äº”åˆ†ä¹‹ä¸€ï¼Œå¹¶åŒ…å«å¤šé¡¹ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯ä¼˜åŒ–å’Œ bug ä¿®å¤ã€‚æ‚¨å¯ä»¥åœ¨ KCL å‘å¸ƒé¡µé¢ è·å¾—æ›´å¤šè¯¦ç»†å‘å¸ƒä¿¡æ¯å’Œ KCL äºŒè¿›åˆ¶ä¸‹è½½é“¾æ¥ã€‚]]></summary>
        <content type="html"><![CDATA[<p>KCL å›¢é˜Ÿå¾ˆé«˜å…´åœ°å®£å¸ƒ 0.4.4 ç‰ˆæœ¬ç°åœ¨å·²ç»å¯ç”¨ï¼æœ¬æ¬¡å‘å¸ƒä¸»è¦ä¸º KCL è¯­è¨€å¢åŠ äº†è‡ªå®šä¹‰ YAML Manifests è¾“å‡ºçš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç¼–å†™ä»£ç å¹¶è°ƒç”¨ç³»ç»Ÿå‡½æ•°æ¥è‡ªå®šä¹‰ YAML è¾“å‡ºçš„æ ·å¼è€Œæ— éœ€ç†è§£å¤æ‚çš„ schema settings è¯­ä¹‰ï¼›æ­¤å¤–æœ¬æ¬¡å‘å¸ƒæä¾›äº†æœ€æ–°çš„ <a href="https://github.com/kcl-lang/kcl-py" target="_blank" rel="noopener noreferrer">KCL Python SDK</a> å¯ç”¨äº Python ç”¨æˆ·å¯¹ KCL ç›´æ¥é›†æˆï¼›åŒæ—¶æˆ‘ä»¬å¤§å¤§é™ä½äº† KCL å®‰è£…åŒ…çš„ä½“ç§¯ï¼Œå¹³å‡å®‰è£…åŒ…ä½“ç§¯é™ä½ä¸ºä¹‹å‰ç‰ˆæœ¬çš„äº”åˆ†ä¹‹ä¸€ï¼Œå¹¶åŒ…å«å¤šé¡¹ç¼–è¯‘å™¨æŠ¥é”™ä¿¡æ¯ä¼˜åŒ–å’Œ bug ä¿®å¤ã€‚æ‚¨å¯ä»¥åœ¨ <a href="https://github.com/kcl-lang/kcl/releases/tag/v0.4.4-alpha.2" target="_blank" rel="noopener noreferrer">KCL å‘å¸ƒé¡µé¢</a> è·å¾—æ›´å¤šè¯¦ç»†å‘å¸ƒä¿¡æ¯å’Œ KCL äºŒè¿›åˆ¶ä¸‹è½½é“¾æ¥ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èƒŒæ™¯">èƒŒæ™¯<a href="#èƒŒæ™¯" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ï¼ŒæœŸæœ›é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®å’Œç­–ç•¥çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>æœ¬æ–‡å°†å‘è¯»è€…ä»‹ç» KCL ç¤¾åŒºçš„è¿‘æœŸåŠ¨æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–°å¢ç‰¹æ€§">æ–°å¢ç‰¹æ€§<a href="#æ–°å¢ç‰¹æ€§" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªå®šä¹‰-yaml-æ ¼å¼è¾“å‡º">è‡ªå®šä¹‰ YAML æ ¼å¼è¾“å‡º<a href="#è‡ªå®šä¹‰-yaml-æ ¼å¼è¾“å‡º" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨è¿‡å»çš„ KCL ç‰ˆæœ¬ä¸­ï¼ŒYAML è¾“å‡ºçš„æ ·å¼æ˜¯åœ¨ KCL ç¼–è¯‘å™¨ä¸­æ˜¯ç¡¬ç¼–ç çš„ï¼Œç”¨æˆ·å¯ä»¥ä¸º schema çš„ <code>__settings__</code> å…ƒå±æ€§è®¾ç½®ä¸ºä¸åŒçš„å€¼æ¥å†³å®š YAML è¾“å‡ºæ ·å¼ï¼Œè¿™å¸¦æ¥äº†è¾ƒé«˜çš„å¤æ‚åº¦å’Œè®°å¿†æˆæœ¬ï¼Œå› æ­¤åœ¨ 0.4.4 ç‰ˆæœ¬ä¸­æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç³»ç»Ÿåº“å‡½æ•°ç”¨äºå¼€å‘äººå‘˜æ›´ç®€å•åœ°è‡ªå®šä¹‰ YAML è¾“å‡ºæ ·å¼ï¼Œè¿™ä¸ªå‡½æ•°çš„ç­¾åå¦‚ä¸‹ï¼š</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">manifests</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">yaml_stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sort_keys </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ignore_private </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ignore_none </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sep </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"---"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½æ˜¯å°† KCL å¯¹è±¡åˆ—è¡¨åºåˆ—åŒ–ä¸ºå¸¦ <code>---</code> åˆ†éš”ç¬¦çš„æ ·å¼ YAML è¾“å‡ºï¼Œå®ƒå…·æœ‰ä¸¤ä¸ªå‚æ•°:</p><ul><li><code>values</code> - ä¸€ä¸ª KCL å¯¹è±¡åˆ—è¡¨</li><li><code>opts</code> - YAML åºåˆ—åŒ–é€‰é¡¹<ul><li><code>sort_keys</code>ï¼šæ˜¯å¦æŒ‰å±æ€§åç§°çš„å­—å…¸åºå¯¹åºåˆ—åŒ–ç»“æœè¿›è¡Œæ’åºï¼ˆé»˜è®¤ä¸º <code>False</code>ï¼‰ã€‚</li><li><code>ignore_private</code>ï¼šæ˜¯å¦å¿½ç•¥åç§°ä»¥ <code>_</code> å¼€å¤´çš„å±æ€§åºåˆ—åŒ–è¾“å‡ºï¼ˆé»˜è®¤ä¸º <code>True</code>ï¼‰ã€‚</li><li><code>ignore_none</code>ï¼šæ˜¯å¦å¿½ç•¥å€¼ä¸º <code>None</code> çš„å±æ€§ï¼ˆé»˜è®¤ä¸º <code>False</code>ï¼‰ã€‚</li><li><code>sep</code>ï¼šåœ¨å¤šä¸ª YAML æ–‡æ¡£ä¹‹é—´é€‰æ‹©æ€æ ·çš„åˆ†éš”ç¬¦ï¼ˆé»˜è®¤ä¸º <code>"---"</code>ï¼‰ã€‚</li></ul></li></ul><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Deployment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Deployment"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"deploy"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replica </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"v1"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"svc"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployments </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">manifests</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">yaml_stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">deployments </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> services</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é¦–å…ˆæˆ‘ä»¬é€šè¿‡ <code>import</code> å…³é”®å­—å¯¼å…¥ <code>manifests</code> æ¨¡å—å¹¶å®šä¹‰ 2 ä¸ª Deployment ä»¥åŠ 2 ä¸ª Service èµ„æºï¼Œå½“æˆ‘ä»¬æƒ³ä»¥ YAML stream å¹¶ä»¥ <code>---</code> ä½œä¸ºåˆ†éš”ç¬¦çš„æ ¼å¼ä¾æ¬¡è¾“å‡ºè¿™ 4 ä¸ªèµ„æºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ª KCL åˆ—è¡¨å¹¶ä½œä¸º <code>manifests.yaml_stream</code> å‡½æ•°çš„ <code>values</code> å½¢å‚è¿›è¡Œä¼ å…¥ (å¦‚æ— ç‰¹æ®Šéœ€æ±‚ï¼Œopts å‚æ•°ä¸€èˆ¬ä½¿ç”¨é»˜è®¤å€¼å³å¯)ï¼Œæœ€ç»ˆå¾—åˆ° YAML è¾“å‡ºä¸º:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replica</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replica</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> svc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ³¨ï¼šschema çš„ <code>__settings__</code> å…ƒå±æ€§è®¾ç½® YAML è¾“å‡ºæ ·å¼çš„ç‰¹æ€§ä»ç„¶å¯ä»¥åœ¨ v0.4.4 ç‰ˆæœ¬ä¸­ä½¿ç”¨ï¼Œå¤§çº¦åç»­ä¸¤ä¸ªå°ç‰ˆæœ¬å‘å¸ƒååœ¨ KCL v0.4.6 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¼šç§»é™¤è¿™ä¸ªç‰¹æ€§</p></blockquote><p>æ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š<a href="https://github.com/kcl-lang/kcl/issues/94" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/94</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="python-sdk">Python SDK<a href="#python-sdk" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>é™¤äº†å·²æœ‰çš„ <a href="https://github.com/kcl-lang/kcl-go" target="_blank" rel="noopener noreferrer">KCL Go SDK</a>, æœ¬æ¬¡å‘å¸ƒè¿˜æ–°å¢äº† KCL Python SDKï¼Œä½¿ç”¨ Python SDK è¦æ±‚æ‚¨æœ¬åœ°å…·å¤‡é«˜äº 3.7.3 çš„ Python ç‰ˆæœ¬å’Œ pip åŒ…ç®¡ç†å·¥å…·ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…å¹¶è·å¾—å¸®åŠ©ä¿¡æ¯</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kclvm --user </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> python3 -m kclvm --help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å‘½ä»¤è¡Œå·¥å…·">å‘½ä»¤è¡Œå·¥å…·<a href="#å‘½ä»¤è¡Œå·¥å…·" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>ç¼–å†™åä¸º <code>main.k</code> çš„ KCL æ–‡ä»¶:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Person</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"kcl"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Person </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">101</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¹¶è·å¾—è¾“å‡º:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ python3 -m kclvm hello.k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">101</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="api">API<a href="#api" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ Python ä»£ç å®ç°å¯¹ KCL æ–‡ä»¶çš„æ‰§è¡Œ</p><p>ç¼–å†™åä¸º <code>main.py</code> çš„ python æ–‡ä»¶:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kclvm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">program</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">exec</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> kclvm_exec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kclvm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">planner </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> planner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">planner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">plan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kclvm_exec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"hello.k"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">filter_by_path_selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¹¶è·å¾—è¾“å‡º:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ python3 main.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: kcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  age: </span><span class="token number" style="color:#36acaa">101</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥çœ‹å‡ºé€šè¿‡å‘½ä»¤è¡Œå·¥å…·å’Œ API å¯ä»¥è·å¾—åŒæ ·çš„è¾“å‡ºã€‚</p><p>ç›®å‰ KCL Python SDK è¿˜å¤„äºæ—©æœŸé¢„è§ˆç‰ˆæœ¬ï¼Œåç»­ KCL å›¢é˜Ÿä¼šæŒç»­æ›´æ–°å¹¶æä¾›æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œæ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š<a href="https://github.com/kcl-lang/kcl-py" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-py</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…ä½“ç§¯ä¼˜åŒ–">å®‰è£…ä½“ç§¯ä¼˜åŒ–<a href="#å®‰è£…ä½“ç§¯ä¼˜åŒ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>åœ¨æ–°çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å°† KCL å†…ç½®çš„ Python3 å‰¥ç¦»ï¼Œä½¿å¾— KCL äºŒè¿›åˆ¶å‹ç¼©åŒ…çš„ä½“ç§¯ä»å¹³å‡ 200M é™ä½ä¸º 35Mï¼Œç”¨æˆ·å¯ä»¥æ›´å¿«åœ°ä¸‹è½½å¹¶ä½¿ç”¨ KCLï¼Œå¹¶ä¸” Python Plugin æˆä¸ºä¸€ä¸ªå¯é€‰é¡¹ï¼Œå¦‚æœæ‚¨æƒ³å¯ç”¨ KCL Python æ’ä»¶ï¼Œä¸€ä¸ªé¢å¤–è¦æ±‚æ˜¯éœ€è¦æ‚¨æœ¬åœ°å…·å¤‡é«˜äº 3.7.3 ç‰ˆæœ¬çš„ Python ä»¥åŠ pip åŒ…ç®¡ç†å·¥å…·ï¼Œæ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/kcl-lang/kcl-plugin" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl-plugin</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é”™è¯¯ä¿®å¤">é”™è¯¯ä¿®å¤<a href="#é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‡½æ•°è°ƒç”¨é”™è¯¯ä¿¡æ¯ä¼˜åŒ–">å‡½æ•°è°ƒç”¨é”™è¯¯ä¿¡æ¯ä¼˜åŒ–<a href="#å‡½æ•°è°ƒç”¨é”™è¯¯ä¿¡æ¯ä¼˜åŒ–" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ 0.4.4 ç‰ˆæœ¬ä¸­ï¼ŒKCL ä¼˜åŒ–äº†å½“å‡½æ•°å‚æ•°ä¸ªæ•°ä¸åŒ¹é…æ—¶çš„é”™è¯¯ä¿¡æ¯è¾“å‡ºï¼Œæ”¯æŒæ˜¾ç¤ºå‡½æ•°åç§°ä»¥åŠå‚æ•°ä¸åŒ¹é…ä¸ªæ•°</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Foo</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Error: "Foo" takes 1 positional argument but 3 were given</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Error: "f" takes 1 positional argument but 2 were given</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š<a href="https://github.com/kcl-lang/kcl/issues/299" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/299</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ’å€¼ä¸‰å¼•å·å­—ç¬¦ä¸²æ ¼å¼åŒ–é”™è¯¯ä¿®å¤">æ’å€¼ä¸‰å¼•å·å­—ç¬¦ä¸²æ ¼å¼åŒ–é”™è¯¯ä¿®å¤<a href="#æ’å€¼ä¸‰å¼•å·å­—ç¬¦ä¸²æ ¼å¼åŒ–é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œå¯¹å¦‚ä¸‹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ä¼šé”™è¯¯å°†æºå¸¦å­—ç¬¦ä¸²æ’å€¼çš„ä¸‰å¼•å·æ ¼å¼åŒ–ä¸ºå•å¼•å·å­—ç¬¦ä¸²å¹¶å¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œåœ¨ 0.4.4 ç‰ˆæœ¬ä¸­æˆ‘ä»¬è¿›è¡Œäº†ä¿®å¤</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Before KCL v0.4.4, variable "bar" will be formatted as:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># foo = 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># bar = "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ${foo}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">${foo}</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ¡ä»¶é…ç½®å—æ ¼å¼åŒ–é”™è¯¯ä¿®å¤">æ¡ä»¶é…ç½®å—æ ¼å¼åŒ–é”™è¯¯ä¿®å¤<a href="#æ¡ä»¶é…ç½®å—æ ¼å¼åŒ–é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œå¯¹å¦‚ä¸‹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ä¼šå¯¼è‡´é”™è¯¯çš„ç¼©è¿›ï¼Œåœ¨ 0.4.4 ç‰ˆæœ¬ä¸­æˆ‘ä»¬è¿›è¡Œäº†ä¿®å¤</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Before KCL v0.4.4, variable "foo" will be formatted as:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># foo = [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     if True:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#         {key = "value"}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     {key = "value"}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"value"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å­—ç¬¦ä¸²å­—é¢å€¼ç±»å‹æ£€æŸ¥é”™è¯¯">å­—ç¬¦ä¸²å­—é¢å€¼ç±»å‹æ£€æŸ¥é”™è¯¯<a href="#å­—ç¬¦ä¸²å­—é¢å€¼ç±»å‹æ£€æŸ¥é”™è¯¯" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä¹‹å‰çš„ KCL ç‰ˆæœ¬ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹ä»£ç ä¼šå¾—åˆ°ä¸€ä¸ªéé¢„æœŸçš„ç±»å‹æ£€æŸ¥é”™è¯¯ï¼Œåœ¨ 0.4.4 ç‰ˆæœ¬ä¸­æˆ‘ä»¬è¿›è¡Œäº†ä¿®å¤</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Before KCL v0.4.4, we will get a unexpected type mismatch error.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"A"</span><span class="token operator" style="color:#393A34">|</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š<a href="https://github.com/kcl-lang/kcl/issues/294" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/issues/294</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–é”™è¯¯ä¿®å¤">å…¶ä»–é”™è¯¯ä¿®å¤<a href="#å…¶ä»–é”™è¯¯ä¿®å¤" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>æ›´å¤šé”™è¯¯ä¿®å¤è¯¦è§ï¼š<a href="https://github.com/kcl-lang/kcl/milestone/2?closed=1" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl/milestone/2?closed=1</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ–‡æ¡£">æ–‡æ¡£<a href="#æ–‡æ¡£" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p><a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a> åˆæ­¥å»ºç«‹ï¼Œå¹¶å®Œå–„ Kubernetes åœºæ™¯<a href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/" target="_blank" rel="noopener noreferrer">ç›¸å…³æ–‡æ¡£</a>.</p><p>æ›´å¤šç½‘ç«™ä¿¡æ¯è¯¦è§ <a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">https://kcl-lang.github.io/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾åŒºåŠ¨æ€">ç¤¾åŒºåŠ¨æ€<a href="#ç¤¾åŒºåŠ¨æ€" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL ç¤¾åŒºæ–°å¢ä¸‰åå¤–éƒ¨è´¡çŒ®è€… @my-vegetable-has-exploded, @possible-fqz, @orangebees, æ„Ÿè°¢ä»–ä»¬çƒ­æƒ…å¹¶ç§¯æåœ°å‚ä¸è´¡çŒ®</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥è®¡åˆ’">ä¸‹ä¸€æ­¥è®¡åˆ’<a href="#ä¸‹ä¸€æ­¥è®¡åˆ’" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>é¢„è®¡ 2023 å¹´ 1 æœˆåº•ï¼Œæˆ‘ä»¬å°†å‘å¸ƒ KCL v0.4.5 ç‰ˆæœ¬ï¼Œé¢„æœŸé‡ç‚¹æ¼”è¿›åŒ…æ‹¬</p><ul><li>è¯­è¨€ç”¨æˆ·ç•Œé¢æŒç»­ä¼˜åŒ–ï¼Œä½“éªŒæŒç»­æå‡å’Œç”¨æˆ·ç—›ç‚¹è§£å†³</li><li>æ›´å¤šåœºæ™¯å’Œç”Ÿæ€å¦‚ Kubernetes å’Œ CI/CD Pipeline åœºæ™¯ KCL æ”¯æŒå’Œæ–‡æ¡£æ›´æ–°</li><li>KCL Windows ç‰ˆæœ¬æ”¯æŒ</li><li>KCL åŒ…ç®¡ç†å·¥å…· kpm å‘å¸ƒ</li><li>KCL æ–°ç‰ˆ playground æ”¯æŒ</li></ul><p>æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ <a href="https://github.com/kcl-lang/kcl/milestone/3" target="_blank" rel="noopener noreferrer">KCL v0.4.5 Milestone</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜åŠè§£ç­”">å¸¸è§é—®é¢˜åŠè§£ç­”<a href="#å¸¸è§é—®é¢˜åŠè§£ç­”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>å¸¸è§é—®é¢˜åŠè§£ç­”è¯¦è§ï¼š<a href="https://kcl-lang.github.io/docs/user_docs/support/" target="_blank" rel="noopener noreferrer">https://kcl-lang.github.io/docs/user_docs/support/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶ä»–èµ„æº">å…¶ä»–èµ„æº<a href="#å…¶ä»–èµ„æº" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li><a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></li><li><a href="https://kusionstack.io/" target="_blank" rel="noopener noreferrer">Kusion ç½‘ç«™</a></li><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL ä»“åº“</a></li><li><a href="https://github.com/KusionStack/kusion" target="_blank" rel="noopener noreferrer">Kusion ä»“åº“</a></li><li><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig ä»“åº“</a></li></ul><p>æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè¿›è¡Œäº¤æµ ğŸ‘ğŸ‘ğŸ‘ï¼š<a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a></p>]]></content>
        <author>
            <name>KCL Team</name>
        </author>
        <category label="Release Blog" term="Release Blog"/>
        <category label="KCL" term="KCL"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ€§èƒ½æå‡ 40 å€ï¼æˆ‘ä»¬ç”¨ Rust é‡å†™äº†è‡ªå·±çš„é¡¹ç›®]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-rewrite-with-rust</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-kcl-rewrite-with-rust"/>
        <updated>2022-11-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[å‰è¨€]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>Rust å·²ç»æ‚„ç„¶æˆä¸ºäº†æœ€å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚ä½œä¸ºä¸€é—¨æ–°å…´åº•å±‚ç³»ç»Ÿè¯­è¨€ï¼ŒRust æ‹¥æœ‰ç€å†…å­˜å®‰å…¨æ€§æœºåˆ¶ã€æ¥è¿‘äº C/C++ è¯­è¨€çš„æ€§èƒ½ä¼˜åŠ¿ã€å‡ºè‰²çš„å¼€å‘è€…ç¤¾åŒºå’Œä½“éªŒå‡ºè‰²çš„æ–‡æ¡£ã€å·¥å…·é“¾å’ŒIDE ç­‰è¯¸å¤šç‰¹ç‚¹ã€‚æœ¬æ–‡å°†ä»‹ç»ç¬”è€…ä½¿ç”¨ Rust é‡å†™é¡¹ç›®å¹¶é€æ­¥è½åœ°ç”Ÿäº§ç¯å¢ƒçš„è¿‡ç¨‹ï¼Œä»¥åŠåœ¨é‡å†™è¿‡ç¨‹é€‰æ‹© Rust çš„åŸå› ã€é‡åˆ°çš„é—®é¢˜ä»¥åŠä½¿ç”¨ Rust é‡å†™å¸¦æ¥çš„æˆæœã€‚</p><p>æˆ‘ä»¬ç›®å‰æ­£åœ¨ä½¿ç”¨ Rust å¼€å‘çš„é¡¹ç›®å«åš <a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a>ï¼Œç›®å‰å…¨éƒ¨å®ç°ä»£ç å·²ç»åœ¨ Github ä¸Šå¼€æºã€‚KCL æ˜¯ä¸€ä¸ªåŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°é¢†åŸŸç¼–ç¨‹è¯­è¨€ï¼Œè‡´åŠ›äºé€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›ç‰¹é¢†åŸŸå¦‚äº‘åŸç”Ÿ kubernetes é¢†åŸŸçš„å¤§é‡ç¹æ‚é…ç½®ç¼–å†™å’Œå®‰å…¨ç­–ç•¥æ ¡éªŒç­‰ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚æ›´å…·ä½“çš„ KCL ä½¿ç”¨åœºæ™¯è¯·è®¿é—® <a href="https://kcl-lang.github.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a>ï¼Œæœ¬æ–‡ä¸­ä¸å†è¿‡å¤šèµ˜è¿°ã€‚</p><p>KCL ä¹‹å‰æ˜¯ä½¿ç”¨ Python ç¼–å†™çš„ï¼Œå‡ºäºç”¨æˆ·ä½¿ç”¨ä½“éªŒã€æ€§èƒ½å’Œç¨³å®šæ€§çš„è€ƒè™‘ï¼Œå†³å®šç”¨ Rust è¯­è¨€è¿›è¡Œé‡å†™ï¼Œå¹¶è·å¾—äº†ä»¥ä¸‹å¥½å¤„ï¼š</p><ul><li>æ›´å°‘çš„ Bugï¼Œæºäº Rust å¼ºå¤§çš„ç¼–è¯‘æ£€æŸ¥å’Œé”™è¯¯å¤„ç†æ–¹å¼</li><li>è¯­è¨€ç«¯åˆ°ç«¯ç¼–è¯‘æ‰§è¡Œæ€§èƒ½æå‡äº† 66%</li><li>è¯­è¨€å‰ç«¯è§£æå™¨æ€§èƒ½æå‡äº† 20 å€</li><li>è¯­è¨€ä¸­ç«¯è¯­ä¹‰åˆ†æå™¨æ€§èƒ½æå‡äº† 40 å€</li><li>è¯­è¨€ç¼–è¯‘å™¨ç¼–è¯‘è¿‡ç¨‹å¹³å‡å†…å­˜ä½¿ç”¨é‡å˜ä¸ºåŸæ¥ Python ç‰ˆæœ¬çš„ä¸€åŠ</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æˆ‘ä»¬é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜">æˆ‘ä»¬é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜<a href="#æˆ‘ä»¬é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>å°±åƒç¤¾åŒºä¸­åŒç±»å‹é¡¹ç›® <a href="https://github.com/denoland/deno" target="_blank" rel="noopener noreferrer">deno</a>, <a href="https://github.com/swc-project/swc" target="_blank" rel="noopener noreferrer">swc</a>, <a href="https://github.com/vercel/turbo" target="_blank" rel="noopener noreferrer">turbopack</a>, <a href="https://github.com/rust-lang/rust" target="_blank" rel="noopener noreferrer">rustc</a> ç­‰ç¼–è¯‘å™¨ã€æ„å»ºç³»ç»Ÿæˆ–è€…è¿è¡Œæ—¶åœ¨æŠ€æœ¯ä¸Šä½¿ç”¨ Rust åšçš„äº‹æƒ…ç±»ä¼¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ Rust å®Œæ•´æ„å»ºäº†ç¼–è¯‘å™¨çš„å‰ä¸­ç«¯å’Œè¿è¡Œæ—¶ï¼Œå–å¾—äº†ä¸€å®šçš„é˜¶æ®µæ€§æˆæœï¼Œä½†æ˜¯æˆ‘ä»¬å¤§çº¦åœ¨ä¸€å¹´å‰å¹¶ä¸æ˜¯è¿™ä¸ªæ ·å­çš„ã€‚</p><p>ä¸€å¹´å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ Python è¯­è¨€æ„å»ºäº†æ•´ä¸ª KCL è¯­è¨€ç¼–è¯‘å™¨çš„å®ç°ï¼Œè™½ç„¶åœ¨ä¸€å¼€å§‹çš„æ—¶å€™è¿è¡Œè‰¯å¥½ï¼ŒPython ç®€å•æ˜“ä¸Šæ‰‹ï¼Œç”Ÿæ€ä¸°å¯Œï¼Œå›¢é˜Ÿçš„ç ”å‘æ•ˆç‡ä¹Ÿå¾ˆé«˜ï¼Œä½†æ˜¯éšç€ä»£ç åº“çš„æ‰©å¼ å’Œå·¥ç¨‹å¸ˆäººæ•°çš„å¢åŠ ï¼Œä»£ç ç»´æŠ¤èµ·æ¥æ„ˆåŠ å›°éš¾ï¼Œå°½ç®¡æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¼ºåˆ¶ç¼–å†™ Python ç±»å‹æ³¨è§£ï¼Œé‡‡ç”¨æ›´ä¸¥æ ¼çš„ lint å·¥å…·ï¼Œä»£ç æµ‹è¯•è¡Œè¦†ç›–ç‡ä¹Ÿè¾¾åˆ°äº† 90% ä»¥ä¸Šï¼Œä½†æ˜¯ä»ç„¶ä¼šå‡ºç°å¾ˆå¤šè¯¸å¦‚ Python None ç©ºå¯¹è±¡ï¼Œå±æ€§æœªæ‰¾åˆ°ç­‰è¿è¡Œæ—¶æ‰ä¼šå‡ºç°é”™è¯¯ï¼Œå¹¶ä¸”é‡æ„ Python ä»£ç æ—¶ä¹Ÿéœ€è¦å°å¿ƒç¿¼ç¿¼ï¼Œååº”åˆ° KCL è¯­è¨€ä¸Šå°±æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªçš„ bug, ä¸¥é‡å½±å“ç”¨æˆ·ä½¿ç”¨ä½“éªŒã€‚</p><p>æ­¤å¤–ï¼Œå½“ KCL ä½¿ç”¨å¯¹è±¡æ˜¯å¹¿å¤§å¼€å‘è€…ç”¨æˆ·æ—¶ï¼Œç¼–ç¨‹è¯­è¨€æˆ–è€…è¯´ç¼–è¯‘å™¨å†…éƒ¨å®ç°å‡ºç°ä»»ä½•é”™è¯¯éƒ½æ˜¯ä¸å¯å®¹å¿çš„ï¼Œè¿™äº›ä¹Ÿç»™æˆ‘ä»¬çš„ç”¨æˆ·ä½¿ç”¨ä½“éªŒå¸¦æ¥äº†ä¸€ç³»åˆ—é—®é¢˜ï¼Œä½¿ç”¨ Python ç¼–å†™çš„ç¨‹åºå¯åŠ¨é€Ÿåº¦è¾ƒæ…¢ï¼Œæ€§èƒ½æ— æ³•æ»¡è¶³è‡ªåŠ¨åŒ–ç³»ç»Ÿåœ¨çº¿ç¼–è¯‘å’Œæ‰§è¡Œçš„æ•ˆç‡è¯‰æ±‚ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼Œç”¨æˆ·ä¿®æ”¹ KCL ä»£ç åéœ€è¦èƒ½å¾ˆå¿«çš„å±•ç¤ºç¼–è¯‘ç»“æœï¼Œæ˜¾ç„¶ä½¿ç”¨ Python ç¼–å†™çš„ç¼–è¯‘å™¨å¹¶ä¸èƒ½å¾ˆå¥½åœ°æ»¡è¶³ä½¿ç”¨éœ€æ±‚ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºä»€ä¹ˆé€‰æ‹©-rust">ä¸ºä»€ä¹ˆé€‰æ‹© Rust<a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-rust" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ç¬”è€…æ‰€åœ¨å›¢é˜ŸåŸºäºå¦‚ä¸‹åŸå› é€‰æ‹©äº† Rust</p><ul><li>ä½¿ç”¨ Go, Python, Rust ä¸‰ç§è¯­è¨€å®ç°äº†ç®€å•çš„ç¼–ç¨‹è¯­è¨€æ ˆå¼è™šæ‹Ÿæœºå¹¶ä½œäº†æ€§èƒ½å¯¹æ¯”ï¼ŒGo å’Œ Rust åœ¨è¿™ä¸ªåœºæ™¯ä¸‹æ€§èƒ½æ¥è¿‘ï¼ŒPython æœ‰è¾ƒå¤§æ€§èƒ½å·®è·ï¼Œç»¼åˆè€ƒè™‘ä¸‹é‡‡ç”¨äº† Rustï¼Œå…·ä½“ä¸‰ç§è¯­è¨€å®ç°çš„æ ˆå¼è™šæ‹Ÿæœºä»£ç ç»†èŠ‚åœ¨ <a href="https://github.com/Peefy/StackMachine" target="_blank" rel="noopener noreferrer">https://github.com/Peefy/StackMachine</a>ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å‰å¾€æµè§ˆ</li><li>è¶Šæ¥è¶Šå¤šçš„ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨æˆ–è¿è¡Œæ—¶ç‰¹åˆ«æ˜¯å‰ç«¯åŸºç¡€è®¾æ–½é¡¹ç›®é‡‡ç”¨ Rust ç¼–å†™æˆ–é‡æ„ï¼Œæ­¤å¤–åŸºç¡€è®¾æ–½å±‚ï¼Œæ•°æ®åº“ã€æœç´¢å¼•æ“ã€ç½‘ç»œè®¾æ–½ã€äº‘åŸç”Ÿã€UI å±‚å’ŒåµŒå…¥å¼ç­‰é¢†åŸŸéƒ½æœ‰ Rust çš„å‡ºç°ï¼Œè‡³å°‘åœ¨ç¼–ç¨‹è¯­è¨€é¢†åŸŸå®ç°æ–¹é¢ç»è¿‡äº†å¯è¡Œæ€§å’Œç¨³å®šæ€§éªŒè¯</li><li>è€ƒè™‘åˆ°åç»­çš„é¡¹ç›®å‘å±•ä¼šæ¶‰åŠåŒºå—é“¾å’Œæ™ºèƒ½åˆçº¦æ–¹å‘ï¼Œè€Œç¤¾åŒºä¸­å¤§é‡çš„åŒºå—é“¾å’Œæ™ºèƒ½åˆçº¦é¡¹ç›®é‡‡ç”¨ Rust ç¼–å†™</li><li>é€šè¿‡ Rust è·å¾—æ›´å¥½çš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œè®©ç³»ç»Ÿæ›´å®¹æ˜“ç»´æŠ¤ã€æ›´åŠ å¥å£®çš„åŒæ—¶ï¼Œå¯ä»¥é€šè¿‡ FFI æš´éœ² C API ä¾›å¤šè¯­è¨€ä½¿ç”¨å’Œæ‰©å±•ï¼Œæ–¹ä¾¿ç”Ÿæ€æ‰©å±•ä¸é›†æˆ</li><li>Rust å¯¹ WASM çš„æ”¯æŒæ¯”è¾ƒå‹å¥½ï¼Œç¤¾åŒºä¸­å¤§é‡ WASM ç”Ÿæ€æ˜¯ç”± Rust æ„å»ºï¼ŒKCL è¯­è¨€å’Œç¼–è¯‘å™¨å¯ä»¥å€ŸåŠ© Rust ç¼–è¯‘åˆ° WASM å¹¶åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ</li></ul><p>åŸºäºä»¥ä¸ŠåŸå› ç»¼åˆè€ƒè™‘é€‰æ‹©äº† Rust è€Œä¸æ˜¯ Goï¼Œæ•´ä¸ªé‡å†™è¿‡ç¨‹ä¸‹æ¥å‘ç° Rust ç»¼åˆç´ è´¨ç¡®å®è¿‡ç¡¬ï¼ˆç¬¬ä¸€æ¢¯é˜Ÿçš„æ€§èƒ½ï¼Œè¶³å¤Ÿçš„æŠ½è±¡ç¨‹åº¦ï¼‰ï¼Œè™½ç„¶åœ¨ä¸€äº›è¯­è¨€ç‰¹æ€§ç‰¹åˆ«æ˜¯ç”Ÿå‘½å‘¨æœŸç­‰ä¸Šæ‰‹æˆæœ¬æœ‰ä¸€äº›ï¼Œç”Ÿæ€ä¸Šè¿˜ä¸å¤Ÿä¸°å¯Œï¼Œæ€»ä¹‹ç¼–ç¨‹è¯­è¨€å¯ä»¥åšçš„äº‹æƒ…ï¼ŒRust å‡å¯ä»¥åšï¼Œå…·ä½“å¯èƒ½è¿˜æ˜¯è¦æ ¹æ®å…·ä½“çš„åœºæ™¯å’Œé—®é¢˜æ¥åšé€‰æ‹©ã€‚åŒæ—¶å¦‚æœæƒ³è¦ä½¿ç”¨å¥½ Rust, è¿˜éœ€è¦æ·±å…¥ç†è§£å†…å­˜ã€å †æ ˆã€å¼•ç”¨ã€å˜é‡ä½œç”¨åŸŸç­‰è¿™äº›å…¶å®ƒé«˜çº§è¯­è¨€å¾€å¾€ä¸ä¼šæ·±å…¥æ¥è§¦çš„å†…å®¹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨-rust-è¿‡ç¨‹ä¸­é‡åˆ°äº†å“ªäº›å›°éš¾">ä½¿ç”¨ Rust è¿‡ç¨‹ä¸­é‡åˆ°äº†å“ªäº›å›°éš¾<a href="#ä½¿ç”¨-rust-è¿‡ç¨‹ä¸­é‡åˆ°äº†å“ªäº›å›°éš¾" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>è™½ç„¶å†³å®šäº†ä½¿ç”¨ Rust é‡å†™æ•´ä¸ª KCL é¡¹ç›®ï¼Œå…¶å®å›¢é˜Ÿæˆå‘˜å¤§éƒ¨åˆ†æˆå‘˜æ˜¯æ²¡æœ‰ä½¿ç”¨ Rust ç¼–å†™ä¸€å®šä»£ç ä½“é‡é¡¹ç›®çš„ç»éªŒï¼ŒåŒ…æ‹¬ç¬”è€…ä¸ªäººè‡ªå·±ä¹Ÿä»…ä»…å­¦ä¹ è¿‡ <a href="https://doc.rust-lang.org/book/" target="_blank" rel="noopener noreferrer">ã€ŠThe Rust Programming Languageã€‹</a> ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼Œä¾ç¨€è®°å¾—å­¦ä¹ åˆ° <code>Rc</code> å’Œ <code>RefCell</code> ç­‰æ™ºèƒ½æŒ‡é’ˆå†…å®¹å°±æ”¾å¼ƒäº†ï¼Œé‚£æ—¶æ²¡æƒ³åˆ° Rust ä¸­è¿˜èƒ½æœ‰ä¸ C++ ä¸­ç±»ä¼¼çš„ä¸œè¥¿ã€‚</p><p>ä½¿ç”¨ Rust å‰é¢„ä¼°çš„é£é™©ä¸»è¦æ˜¯ Rust è¯­è¨€æ¥è§¦å’Œå­¦ä¹ çš„æˆæœ¬ï¼Œè¿™ä¸ªç¡®å®åœ¨å„ç§ Rust çš„æ–‡ç« åšå®¢ä¸­å‡æœ‰æåˆ°ï¼Œå› ä¸º KCL é¡¹ç›®æ•´ä½“æ¶æ„å¹¶æœªå‘ç”Ÿå¤ªå¤§å˜åŒ–ï¼Œåªæ˜¯éƒ¨åˆ†æ¨¡å—è®¾è®¡å’Œä»£ç ç¼–å†™é’ˆå¯¹ Rust ä½œäº†ä¼˜åŒ–ï¼Œå› æ­¤æ•´ä¸ªé‡å†™æ˜¯åœ¨è¾¹å­¦è¾¹å®è·µä¸­è¿›è¡Œã€‚ç¡®å®åœ¨åˆšå¼€å§‹ä½¿ç”¨ Rust ç¼–å†™æ•´ä¸ªé¡¹ç›®çš„æ—¶å€™èŠ±è´¹åœ¨çŸ¥è¯†æŸ¥è¯¢ã€ç¼–è¯‘æ’é”™çš„æ—¶é—´è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œä¸è¿‡éšç€é¡¹ç›®çš„è¿›è¡Œæ¸å…¥ä½³å¢ƒï¼Œç¬”è€…ä¸ªäººç»éªŒä½¿ç”¨ Rust é‡åˆ°çš„å›°éš¾ä¸»è¦æ˜¯å¿ƒæ™ºè½¬æ¢å’Œå¼€å‘æ•ˆç‡ä¸¤æ–¹é¢:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¿ƒæ™ºè½¬æ¢">å¿ƒæ™ºè½¬æ¢<a href="#å¿ƒæ™ºè½¬æ¢" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>é¦–å…ˆ Rust çš„è¯­æ³•è¯­ä¹‰å¾ˆå¥½åœ°å¸æ”¶å’Œèåˆäº†å‡½æ•°å¼ç¼–ç¨‹ä¸­ç±»å‹ç³»ç»Ÿç›¸å…³çš„æ¦‚å¿µï¼Œæ¯”å¦‚æŠ½è±¡ä»£æ•°ç±»å‹ ADT ç­‰ï¼Œå¹¶ä¸” Rust ä¸­å¹¶æ— â€œç»§æ‰¿â€ç­‰ç›¸å…³æ¦‚å¿µï¼Œå¦‚æœä¸èƒ½å¾ˆå¥½åœ°ç†è§£ç”šè‡³è¿å…¶ä»–è¯­è¨€ä¸­ç¨€æ¾å¹³å¸¸çš„ç»“æ„å®šä¹‰åœ¨ Rust ä¸­å¯èƒ½éƒ½éœ€è¦èŠ±è´¹ä¸å°‘æ—¶é—´ï¼Œæ¯”å¦‚å¦‚ä¸‹çš„ Python ä»£ç å¯èƒ½åœ¨ Rust ä¸­çš„å®šä¹‰æ˜¯è¿™ä¸ªæ ·å­çš„ã€‚</p><ul><li>Python</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> dataclasses </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> dataclass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">KCLObject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@dataclass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">KCLIntObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KCLObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@dataclass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">KCLFloatObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">KCLObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">float</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Rust</li></ul><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">enum KCLObject {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Int(u64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Float(f64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ç„¶æ›´å¤šçš„æ—¶é—´æ˜¯åœ¨ä¸ Rust ç¼–è¯‘å™¨æœ¬èº«çš„æŠ¥é”™ä½œæ–—äº‰ï¼ŒRust ç¼–è¯‘å™¨ä¼šç»å¸¸ä½¿å¼€å‘äººå‘˜"ç¢°å£"ï¼Œæ¯”å¦‚å€Ÿç”¨æ£€æŸ¥æŠ¥é”™ç­‰ï¼Œç‰¹åˆ«æ˜¯å¯¹äºç¼–è¯‘å™¨æ¥è®²ï¼Œå®ƒå¤„ç†çš„æ ¸å¿ƒç»“æ„æ˜¯æŠ½è±¡è¯­æ³•æ ‘ ASTï¼Œè¿™æ˜¯ä¸€ä¸ªé€’å½’å’ŒåµŒå¥—çš„æ ‘ç»“æ„ï¼Œåœ¨ Rust ä¸­æœ‰æ—¶å¾ˆéš¾å…¼é¡¾å˜é‡å¯å˜æ€§ä¸å€Ÿç”¨æ£€æŸ¥çš„å…³ç³»ï¼Œå°±å¦‚ KCL ç¼–è¯‘å™¨ä½œç”¨åŸŸ <code>Scope</code> çš„ç»“æ„å®šä¹‰ç»“æ„é‚£æ ·ï¼Œå¯¹äºå­˜åœ¨å¾ªç¯å¼•ç”¨çš„åœºæ™¯ï¼Œç”¨äºéœ€è¦æ˜¾ç¤ºæ„è¯†åˆ°æ•°æ®çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œè€Œå¤§é‡ä½¿ç”¨ <code>Rc</code>, <code>RefCell</code> å’Œ <code>Weak</code> ç­‰ Rust ä¸­å¸¸ç”¨çš„æ™ºèƒ½æŒ‡é’ˆç»“æ„ã€‚</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// A Scope maintains a set of objects and links to its containing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// (parent) and contained (children) scopes. Objects may be inserted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// and looked up by name. The zero value for Scope is a ready-to-use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// empty scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Clone, Debug)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct Scope {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The parent scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub parent: Option&lt;Weak&lt;RefCell&lt;Scope&gt;&gt;&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The child scope list.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub children: Vec&lt;Rc&lt;RefCell&lt;Scope&gt;&gt;&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope object mapping with its name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub elems: IndexMap&lt;String, Rc&lt;RefCell&lt;ScopeObject&gt;&gt;&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope start position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub start: Position,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope end position.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub end: Position,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// The scope kind.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub kind: ScopeKind,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€å‘æ•ˆç‡">å¼€å‘æ•ˆç‡<a href="#å¼€å‘æ•ˆç‡" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>Rust çš„å¼€å‘æ•ˆç‡å¯ä»¥ç”¨å…ˆæŠ‘åæ‰¬æ¥å½¢å®¹ã€‚åœ¨åˆšå¼€å§‹ä¸Šæ‰‹å†™é¡¹ç›®æ—¶ï¼Œå¦‚æœå›¢é˜Ÿæˆå‘˜æ²¡æœ‰æ¥è§¦è¿‡å‡½æ•°å¼ç¼–ç¨‹ç›¸å…³æ¦‚å¿µä»¥åŠç›¸å…³çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œå¼€å‘é€Ÿåº¦å°†æ˜¾è‘—æ…¢äº Pythonã€Go å’Œ Java ç­‰è¯­è¨€ï¼Œä¸è¿‡ä¸€æ—¦å¼€å§‹ç†Ÿæ‚‰ Rust æ ‡å‡†åº“å¸¸ç”¨çš„æ–¹æ³•ã€æœ€ä½³å®è·µä»¥åŠå¸¸è§ Rust ç¼–è¯‘å™¨æŠ¥é”™ä¿®æ”¹ï¼Œå¼€å‘æ•ˆç‡å°†å¤§å¹…æå‡ï¼Œå¹¶ä¸”åŸç”Ÿå°±èƒ½å†™å‡ºé«˜è´¨é‡ã€å®‰å…¨ã€é«˜æ•ˆçš„ä»£ç ã€‚</p><p>æ¯”å¦‚ç¬”è€…ä¸ªäººå½“åˆé‡åˆ°ä¸€ä¸ªå¦‚ä¸‹ä»£ç æ‰€ç¤ºçš„ä¸ç”Ÿå‘½å‘¨æœŸé”™è¯¯å‰å‰ååæ’æŸ¥äº†å¾ˆä¹…çš„æ—¶é—´æ‰å‘ç°åŸæ¥æ˜¯å¿˜è®°æ ‡æ³¨ç”Ÿå‘½å‚æ•°å¯¼è‡´ç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…ã€‚æ­¤å¤– Rust çš„ç”Ÿå‘½å‘¨æœŸä¸ç±»å‹ç³»ç»Ÿã€ä½œç”¨åŸŸã€æ‰€æœ‰æƒã€å€Ÿç”¨æ£€æŸ¥ç­‰æ¦‚å¿µè€¦åˆåœ¨ä¸€èµ·ï¼Œå¯¼è‡´äº†è¾ƒé«˜çš„ç†è§£æˆæœ¬å’Œå¤æ‚åº¦ï¼Œä¸”æŠ¥é”™ä¿¡æ¯å¾€å¾€ä¸åƒç±»å‹é”™è¯¯é‚£ä¹ˆæ˜æ˜¾ï¼Œç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…é”™è¯¯æŠ¥é”™ä¿¡æ¯æœ‰æ—¶ä¹Ÿç•¥æ˜¾å‘†æ¿ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¾ƒé«˜çš„æ’é”™æˆæœ¬ï¼Œå½“ç„¶ç†Ÿæ‚‰ç›¸å…³æ¦‚å¿µå†™å¤šäº†ä¹‹åæ•ˆç‡ä¼šæé«˜ä¸å°‘ã€‚</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct Data&lt;'a&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b: &amp;'a u8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// func1 å’Œ func2 ä¸€ä¸ªçœç•¥äº†ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œä¸€ä¸ªæ²¡æœ‰çœç•¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯¹äº func2 çš„ç”Ÿå‘½å‘¨æœŸä¼šç”±ç¼–è¯‘å™¨ç¼ºçœæ¨å¯¼ä¸º '_ï¼Œå¯èƒ½å¯¼è‡´ç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…é”™è¯¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl&lt;'a&gt; Data&lt;'a&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn func1(&amp;self) -&gt; Data&lt;'a&gt; {Data { b: &amp;0 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn func2(&amp;self) -&gt; Data {Data { b: &amp;0 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨-rust-é‡å†™æ”¶ç›Šæ¯”">ä½¿ç”¨ Rust é‡å†™æ”¶ç›Šæ¯”<a href="#ä½¿ç”¨-rust-é‡å†™æ”¶ç›Šæ¯”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ç»è¿‡å›¢é˜Ÿå‡ ä¸ªäººèŠ±è´¹å‡ ä¸ªæœˆæ—¶é—´ä½¿ç”¨ Rust å®Œå…¨é‡å†™å¹¶ç¨³å®šè½åœ°ç”Ÿäº§ç¯å¢ƒå‡ ä¸ªæœˆåï¼Œå›é¡¾æ•´ä¸ªè¿‡ç¨‹æ„Ÿè§‰è¿™ä»¶äº‹æƒ…çš„æ”¶è·éå¸¸å¤§ï¼Œä»æŠ€æœ¯è§’åº¦å±‚é¢æ¥çœ‹ï¼Œé‡å†™çš„è¿‡ç¨‹ä¸ä»…ä»…é”»ç‚¼äº†å¿«é€Ÿå­¦ä¹ ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ã€ç¼–ç¨‹çŸ¥è¯†å¹¶å°†å…¶ä»˜è¯¸å®è·µï¼Œå¹¶ä¸”æ•´ä¸ªé‡å†™è¿‡ç¨‹è®©æˆ‘ä»¬åˆåæ€äº† KCL ç¼–è¯‘å™¨ä¸­è®¾è®¡ä¸åˆç†çš„éƒ¨åˆ†å¹¶è¿›è¡Œä¿®æ”¹ï¼Œå¯¹ä¸€ä¸ªç¼–ç¨‹è¯­è¨€è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªé•¿å‘¨æœŸçš„é¡¹ç›®ï¼Œæˆ‘ä»¬æ”¶è·çš„æ˜¯ç¼–è¯‘å™¨ç³»ç»Ÿæ›´åŠ ç¨³å®šã€å®‰å…¨ï¼Œä¸”ä»£ç æ¸…æ™°ï¼Œbug æ›´å°‘ã€æ€§èƒ½æ›´å¥½çš„æŠ€æœ¯äº§å“æœåŠ¡äºç”¨æˆ·ï¼Œè™½ç„¶æ²¡æœ‰å…¨éƒ¨æ¨¡å—å¾—åˆ°é«˜è¾¾ 40 å€çš„æ€§èƒ½ï¼Œå› ä¸ºéƒ¨åˆ†æ¨¡å—å¦‚ KCL è¿è¡Œæ—¶çš„æ€§èƒ½ç“¶é¢ˆåœ¨äºå†…å­˜æ·±æ‹·è´æ“ä½œï¼Œä½†ç¬”è€…ä¸ªäººè®¤ä¸ºä»ç„¶æ˜¯å€¼å¾—çš„ã€‚ä¸”å½“ Rust ä½¿ç”¨æ—¶é—´åˆ°è¾¾ä¸€å®šæ—¶é•¿åï¼Œå¿ƒæ™ºå’Œå¼€å‘æ•ˆç‡ä¸å†æ˜¯é™åˆ¶å› ç´ ï¼Œå°±åƒå­¦è½¦é‚£æ ·ï¼Œæ‹¿åˆ°é©¾ç…§åæ›´å¤šæ˜¯ä¸Šè·¯å®è·µå’Œæ€»ç»“ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»“è¯­">ç»“è¯­<a href="#ç»“è¯­" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>ç¬”è€…ä¸ªäººè§‰å¾—ä½¿ç”¨ Rust é‡å†™é¡¹ç›®åæœ€é‡è¦çš„æ˜¯ä¸æ˜¯æˆ‘å­¦ä¼šäº†ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¹Ÿä¸æ˜¯ Rust å¾ˆæµè¡Œå¾ˆç«å› æ­¤æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­é‡‡ç”¨ä¸€ä¸‹ï¼Œæˆ–è€…ä½¿ç”¨ Rust ç¼–å†™äº†å¤šå°‘ç‚«æŠ€çš„ä»£ç ï¼Œæ˜¯çœŸçœŸæ­£æ­£åœ°ä½¿å¾—è¯­è¨€å’Œç¼–è¯‘å™¨æœ¬èº«æ›´åŠ ç¨³å®šï¼Œèƒ½å¤Ÿåœ¨ç”Ÿäº§ç¯å¢ƒå¹³ç¨³è½åœ°å¹¶é•¿æœŸä½¿ç”¨ï¼Œå¯åŠ¨é€Ÿåº¦å’Œè‡ªåŠ¨åŒ–æ•ˆç‡ä¸å†å—å›°æ‰°ï¼Œæ€§èƒ½ä¼˜äºç¤¾åŒºå…¶ä»–åŒç±»å‹é¢†åŸŸç¼–ç¨‹è¯­è¨€ï¼Œä½¿æˆ‘ä»¬è¯­è¨€å’Œå·¥å…·çš„ç”¨æˆ·æ„Ÿå—åˆ°ä½“éªŒæå‡ï¼Œè¿™äº›éƒ½å¾—ç›Šäº Rust çš„æ—  GCã€é«˜æ€§èƒ½ã€æ›´å¥½çš„é”™è¯¯å¤„ç†å†…å­˜ç®¡ç†ã€é›¶æŠ½è±¡ç­‰ç‰¹æ€§ã€‚æ€»ä¹‹ä½œä¸ºç”¨æˆ·ï¼Œä»–ä»¬æ‰æ˜¯æœ€å¤§çš„å—ç›Šè€…ã€‚</p><p>æœ€åï¼Œå¦‚æœå¤§å®¶å–œæ¬¢ KCL è¯­è¨€è¿™ä¸ªé¡¹ç›®ï¼Œæˆ–æƒ³ä½¿ç”¨ä½“éªŒ KCL ç”¨äºè‡ªå·±çš„åœºæ™¯ï¼Œæˆ–æƒ³ä½¿ç”¨ Rust è¯­è¨€å‚ä¸ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ¬¢è¿å¤§å®¶è®¿é—® <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/community</a> åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºä¸€èµ·å‚ä¸è®¨è®ºå’Œå…±å»º ğŸ‘ğŸ‘ğŸ‘ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚è€ƒ">å‚è€ƒ<a href="#å‚è€ƒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl</a></li><li><a href="https://github.com/Peefy/StackMachine" target="_blank" rel="noopener noreferrer">https://github.com/Peefy/StackMachine</a></li><li><a href="https://doc.rust-lang.org/book/" target="_blank" rel="noopener noreferrer">https://doc.rust-lang.org/book/</a></li><li><a href="https://github.com/sunface/rust-course" target="_blank" rel="noopener noreferrer">https://github.com/sunface/rust-course</a></li><li><a href="https://www.influxdata.com/blog/rust-can-be-difficult-to-learn-and-frustrating-but-its-also-the-most-exciting-thing-in-software-development-in-a-long-time/" target="_blank" rel="noopener noreferrer">https://www.influxdata.com/blog/rust-can-be-difficult-to-learn-and-frustrating-but-its-also-the-most-exciting-thing-in-software-development-in-a-long-time/</a></li></ul>]]></content>
        <author>
            <name>å¾é¹é£</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Rust" term="Rust"/>
        <category label="Performance" term="Performance"/>
        <category label="Programming Language" term="Programming Language"/>
        <category label="Compiler" term="Compiler"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[SETTA 2022 ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-setta-meeting</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-kcl-setta-meeting"/>
        <updated>2022-10-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[KCL Talk Cover]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" alt="KCL Talk Cover" src="/zh-CN/assets/images/talk-cover-80a37ca1f52a69eae9daeb36794099b4.jpg" width="2548" height="1424" class="img_ev3q"></p><p><a href="https://kcl-lang.github.io/talks/kcl-setta2022.pdf" target="_blank" rel="noopener noreferrer">PDF ä¸‹è½½</a></p>]]></content>
        <author>
            <name>å¾é¹é£</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Configuration" term="Configuration"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[KCL è®ºæ–‡è¢« SETTA 2022 ä¼šè®®å½•ç”¨]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-kcl-setta-paper</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-kcl-setta-paper"/>
        <updated>2022-10-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[è¿‘æ—¥ï¼Œç”± KCL å›¢é˜Ÿæˆå‘˜æ’°å†™çš„å…³äº KCL åˆ›æ–°è®ºæ–‡è¢« SETTA 2022 å›½é™…ä¼šè®®é•¿æ–‡å½•ç”¨ã€‚]]></summary>
        <content type="html"><![CDATA[<p>è¿‘æ—¥ï¼Œç”± KCL å›¢é˜Ÿæˆå‘˜æ’°å†™çš„å…³äº KCL åˆ›æ–°è®ºæ–‡è¢« SETTA 2022 å›½é™…ä¼šè®®é•¿æ–‡å½•ç”¨ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/kcl_paper_setta-01984eaac7ffad7a51335b060e254ad0.png" width="756" height="852" class="img_ev3q"></p><p>Symposium on Dependable Software Engineeringï¼ˆä»¥ä¸‹ç®€ç§° SETTAï¼‰å¯é è½¯ä»¶å·¥ç¨‹ç ”è®¨ä¼šæ—¨åœ¨å°†å›½é™…ç ”ç©¶äººå‘˜èšé›†åœ¨ä¸€èµ·ï¼Œå°±ç¼©å°å½¢å¼åŒ–æ–¹æ³•ä¸è½¯ä»¶å·¥ç¨‹ä¹‹é—´çš„å·®è·äº¤æµç ”ç©¶æˆæœå’Œæƒ³æ³•ã€‚ä¾‹å¦‚ï¼Œå°†å½¢å¼åŒ–æŠ€æœ¯å’Œå·¥å…·åº”ç”¨äºå·¥ç¨‹å¤§å‹ç³»ç»Ÿï¼ˆå¦‚ç½‘ç»œç‰©ç†ç³»ç»Ÿ (CPS)ã€ç‰©è”ç½‘ (IoT)ã€ä¼ä¸šç³»ç»Ÿã€åŸºäºäº‘çš„ç³»ç»Ÿç­‰ï¼‰ã€‚</p><p>æ­¤æ¬¡è¢«å½•ç”¨çš„è®ºæ–‡ä¸ºã€ŠKCL: A Declarative Language for Large-scale Configuration and Policy Managementã€‹ï¼Œè¯¥è®ºæ–‡çš„æ ¸å¿ƒåˆ›æ–°ç‚¹æ˜¯æå‡ºäº† KCL å£°æ˜å¼è¯­è¨€ã€å¼€å‘æœºåˆ¶ä»¥åŠä¸€è‡´çš„å·¥ä½œæµç¨‹ã€‚é€šè¿‡è¯­è¨€çš„å»ºæ¨¡åŠçº¦æŸèƒ½åŠ›ï¼Œå¯ä»¥æå‡è¿ç»´å¼€å‘è¿‡ç¨‹ä¸­çš„å¤šå›¢é˜Ÿåä½œç”Ÿäº§åŠ›ä»¥åŠæ•ˆç‡ï¼ŒåŒæ—¶ç¡®ä¿å¤§è§„æ¨¡é…ç½®å’Œç­–ç•¥ç®¡ç†çš„ç¨³å®šæ€§ã€‚</p><p>æ­¤å¤–ï¼ŒSETTA 2022 å°†åœ¨åŒ—äº¬æ—¶é—´ 10 æœˆ 27 æ—¥è‡³ 10 æœˆ 28 æ—¥ä¸¾åŠçº¿ä¸Šä¼šè®®ï¼Œå±Šæ—¶ä¼šåˆ†äº« KCL è®ºæ–‡è¯¦ç»†å†…å®¹ï¼Œæ¬¢è¿åŠ å…¥ <a href="https://github.com/kcl-lang/community" target="_blank" rel="noopener noreferrer">KCL ç¤¾åŒº</a> è¿›è¡Œå›´è§‚ã€‚SETTA 2022 ä¼šè®®è®®ç¨‹è¯¦æƒ…è¯·å‚è€ƒï¼š<a href="https://lcs.ios.ac.cn/setta2022/program.php" target="_blank" rel="noopener noreferrer">https://lcs.ios.ac.cn/setta2022/program.php</a></p><p>æ³¨ï¼šç›®å‰ KCL å·²åœ¨ Github å¼€æºï¼Œæ¬¢è¿è®¿é—® <a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">https://github.com/kcl-lang/kcl</a> è·å¾—æ›´å¤šä¿¡æ¯ã€‚</p>]]></content>
        <author>
            <name>å¾é¹é£</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Configuration" term="Configuration"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[å£°æ˜å¼é…ç½®æŠ€æœ¯æ¦‚è¿°]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2022-declarative-config-overview</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2022-declarative-config-overview"/>
        <updated>2022-09-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[é›¶ã€å‰è¨€]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é›¶å‰è¨€">é›¶ã€å‰è¨€<a href="#é›¶å‰è¨€" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ–‡æœ¬ä»…ç”¨äºæ¾„æ¸…å£°æ˜å¼é…ç½®æŠ€æœ¯æ¦‚è¿°ï¼Œ<a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a> æ¦‚å¿µä»¥åŠæ ¸å¿ƒè®¾è®¡ï¼Œä»¥åŠä¸å…¶ä»–é…ç½®è¯­è¨€çš„å¯¹æ¯”ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸€å£°æ˜å¼é…ç½®æ¦‚è¿°">ä¸€ã€å£°æ˜å¼é…ç½®æ¦‚è¿°<a href="#ä¸€å£°æ˜å¼é…ç½®æ¦‚è¿°" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-é…ç½®çš„é‡è¦æ€§">1.1 é…ç½®çš„é‡è¦æ€§<a href="#11-é…ç½®çš„é‡è¦æ€§" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><ul><li>è½¯ä»¶ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œæ¯å¤©æœ‰æˆåƒä¸Šä¸‡çš„é…ç½®æ›´æ–°ï¼Œå¹¶ä¸”é…ç½®æœ¬èº«ä¹Ÿåœ¨é€æ¸æ¼”è¿›ï¼Œå¯¹è§„æ¨¡åŒ–æ•ˆç‡æœ‰è¾ƒé«˜çš„è¯‰æ±‚<ul><li><strong>é…ç½®æ›´æ–°è¶Šæ¥è¶Šé¢‘ç¹</strong>ï¼šé…ç½®æä¾›äº†ä¸€ç§æ”¹å˜ç³»ç»ŸåŠŸèƒ½çš„ä½å¼€é”€æ–¹å¼ï¼Œä¸æ–­å‘å±•çš„ä¸šåŠ¡éœ€æ±‚ã€åŸºç¡€è®¾æ–½è¦æ±‚å’Œå…¶ä»–å› ç´ æ„å‘³ç€ç³»ç»Ÿéœ€è¦ä¸æ–­å˜åŒ–ã€‚</li><li><strong>é…ç½®è§„æ¨¡è¶Šæ¥è¶Šå¤§</strong>ï¼šä¸€ä»½é…ç½®å¾€å¾€è¦åˆ†å‘åˆ°ä¸åŒçš„äº‘ç«™ç‚¹ã€ä¸åŒçš„ç§Ÿæˆ·ã€ä¸åŒçš„ç¯å¢ƒç­‰ã€‚</li><li><strong>é…ç½®åœºæ™¯å¹¿æ³›</strong>ï¼šåº”ç”¨é…ç½®ã€æ•°æ®åº“é…ç½®ã€ç½‘ç»œé…ç½®ã€ç›‘æ§é…ç½®ç­‰ã€‚</li><li><strong>é…ç½®æ ¼å¼ç¹å¤š</strong>ï¼šJSON, YAML, XML, TOML, å„ç§é…ç½®æ¨¡ç‰ˆå¦‚ Java Velocity, Go Template ç­‰ã€‚</li></ul></li><li>é…ç½®çš„ç¨³å®šæ€§è‡³å…³é‡è¦ï¼Œç³»ç»Ÿå®•æœºæˆ–å‡ºé”™çš„ä¸€ä¸ªæœ€ä¸»è¦åŸå› æ˜¯æœ‰å¤§é‡å·¥ç¨‹å¸ˆè¿›è¡Œé¢‘ç¹çš„å®æ—¶é…ç½®æ›´æ–°ï¼Œè¡¨ 1 ç¤ºå‡ºäº†å‡ ä¸ªç”±äºé…ç½®å¯¼è‡´çš„ç³»ç»Ÿå‡ºé”™äº‹ä»¶ã€‚</li></ul><table><thead><tr><th>æ—¶é—´</th><th>äº‹ä»¶</th></tr></thead><tbody><tr><td>2021 å¹´ 7 æœˆ</td><td>ä¸­å›½ Bilibili å…¬å¸ç”±äº SLB Lua é…ç½®è®¡ç®—å‡ºé”™é™·å…¥æ­»å¾ªç¯å¯¼è‡´ç½‘ç«™å®•æœº</td></tr><tr><td>2021 å¹´ 10 æœˆ</td><td>éŸ©å›½ KT å…¬å¸ç”±äºè·¯ç”±é…ç½®é”™è¯¯å¯¼è‡´åœ¨å…¨å›½èŒƒå›´å†…é­å—é‡å¤§ç½‘ç»œä¸­æ–­</td></tr></tbody></table><p>è¡¨ 1 é…ç½®å¯¼è‡´çš„ç³»ç»Ÿå‡ºé”™äº‹ä»¶</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-å£°æ˜å¼é…ç½®åˆ†ç±»">1.2 å£°æ˜å¼é…ç½®åˆ†ç±»<a href="#12-å£°æ˜å¼é…ç½®åˆ†ç±»" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>äº‘åŸç”Ÿæ—¶ä»£å¸¦æ¥äº†å¦‚é›¨åæ˜¥ç¬‹èˆ¬çš„æŠ€æœ¯å‘å±•ï¼Œå‡ºç°äº†å¤§é‡é¢å‘ç»ˆæ€çš„å£°æ˜å¼é…ç½®å®è·µï¼Œå¦‚å›¾ 1 æ‰€ç¤ºï¼Œå£°æ˜å¼é…ç½®ä¸€èˆ¬å¯åˆ†ä¸ºå¦‚ä¸‹å‡ ç§æ–¹å¼ã€‚
<img loading="lazy" src="/zh-CN/assets/images/01-declarative-config-51ae2a21d367db31feb7268107ee18c8.png" width="1796" height="1076" class="img_ev3q">
å›¾ 1 å£°æ˜å¼é…ç½®æ–¹å¼åˆ†ç±»</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="121-ç»“æ„åŒ–-structured-çš„-kv">1.2.1 ç»“æ„åŒ– (Structured) çš„ KV<a href="#121-ç»“æ„åŒ–-structured-çš„-kv" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>ç»“æ„åŒ–çš„ KV å¯ä»¥æ»¡è¶³æœ€å°åŒ–æ•°æ®å£°æ˜éœ€æ±‚ï¼Œæ¯”å¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€åˆ—è¡¨å’Œå­—å…¸ç­‰æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”éšç€äº‘åŸç”ŸæŠ€æœ¯å¿«é€Ÿå‘å±•åº”ç”¨ï¼Œå£°æ˜å¼ API å¯ä»¥æ»¡è¶³ X as Data å‘å±•çš„è¯‰æ±‚ï¼Œå¹¶ä¸”é¢å‘æœºå™¨å¯è¯»å¯å†™ï¼Œé¢å‘äººç±»å¯è¯»ã€‚å…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>è¯­æ³•ç®€å•ï¼Œæ˜“äºç¼–å†™å’Œé˜…è¯»</li><li>å¤šè¯­è¨€ API ä¸°å¯Œ</li><li>æœ‰å„ç§ Path å·¥å…·æ–¹ä¾¿æ•°æ®æŸ¥è¯¢ï¼Œå¦‚ XPath, JsonPath ç­‰</li></ul></li><li>ç—›ç‚¹<ul><li>å†—ä½™ä¿¡æ¯å¤šï¼šå½“é…ç½®è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œç»´æŠ¤å’Œé˜…è¯»é…ç½®å¾ˆå›°éš¾ï¼Œå› ä¸ºé‡è¦çš„é…ç½®ä¿¡æ¯è¢«æ·¹æ²¡åœ¨äº†å¤§é‡ä¸ç›¸å…³çš„é‡å¤ç»†èŠ‚ä¸­</li><li>åŠŸèƒ½æ€§ä¸è¶³<ul><li>çº¦æŸæ ¡éªŒèƒ½åŠ›</li><li>å¤æ‚é€»è¾‘ç¼–å†™èƒ½åŠ›</li><li>æµ‹è¯•ã€è°ƒè¯•èƒ½åŠ›</li><li>ä¸æ˜“æŠ½è±¡å’Œå¤ç”¨</li><li>Kustomize çš„ Patch æ¯”è¾ƒå®šåˆ¶ï¼ŒåŸºæœ¬æ˜¯é€šè¿‡å›ºå®šå‡ ç§ Patch Merge ç­–ç•¥</li></ul></li></ul></li></ul><p>ç»“æ„åŒ– KV çš„ä»£è¡¨æŠ€æœ¯æœ‰</p><ul><li>JSON/YAMLï¼šéå¸¸æ–¹ä¾¿é˜…è¯»ï¼Œä»¥åŠè‡ªåŠ¨åŒ–å¤„ç†ï¼Œä¸åŒçš„è¯­è¨€å‡å…·æœ‰ä¸°å¯Œçš„ API æ”¯æŒã€‚</li><li><a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a>ï¼šæä¾›äº†ä¸€ç§æ— éœ€<strong>æ¨¡æ¿</strong>å’Œ <strong>DSL</strong> å³å¯è‡ªå®šä¹‰ Kubernetes èµ„æºåŸºç¡€é…ç½®å’Œå·®å¼‚åŒ–é…ç½®çš„è§£å†³æ–¹æ¡ˆï¼Œæœ¬èº«ä¸è§£å†³çº¦æŸçš„é—®é¢˜ï¼Œéœ€è¦é…åˆå¤§é‡çš„é¢å¤–å·¥å…·è¿›è¡Œçº¦æŸæ£€æŸ¥å¦‚ <a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">Kube-linter</a>ã€<a href="https://github.com/bridgecrewio/checkov" target="_blank" rel="noopener noreferrer">Checkov</a> ç­‰æ£€æŸ¥å·¥å…·ï¼Œå›¾ 2 ç¤ºå‡ºäº† Kustomize çš„å…¸å‹å·¥ä½œæ–¹å¼ã€‚</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/02-kustomize-d311c69abf70f2b93373cbcad7be71ba.png" width="1222" height="1220" class="img_ev3q">
å›¾ 2 Kustomize å…¸å‹å·¥ä½œæ–¹å¼</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="123-æ¨¡ç‰ˆåŒ–-templated-çš„-kv">1.2.3 æ¨¡ç‰ˆåŒ– (Templated) çš„ KV<a href="#123-æ¨¡ç‰ˆåŒ–-templated-çš„-kv" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>æ¨¡ç‰ˆåŒ– (Templated) çš„ KV èµ‹äºˆé™æ€é…ç½®æ•°æ®åŠ¨æ€å‚æ•°çš„èƒ½åŠ›ï¼Œå¯ä»¥åšåˆ°ä¸€ä»½æ¨¡ç‰ˆ+åŠ¨æ€å‚æ•°è¾“å‡ºä¸åŒçš„é™æ€é…ç½®æ•°æ®ã€‚å…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>ç®€å•çš„é…ç½®é€»è¾‘ï¼Œå¾ªç¯æ”¯æŒ</li><li>æ”¯æŒå¤–éƒ¨åŠ¨æ€å‚æ•°è¾“å…¥æ¨¡ç‰ˆ</li></ul></li><li>ç—›ç‚¹<ul><li>å®¹æ˜“è½å…¥æ‰€æœ‰é…ç½®å‚æ•°éƒ½æ˜¯æ¨¡ç‰ˆå‚æ•°çš„é™·é˜±</li><li>å½“é…ç½®è§„æ¨¡å˜å¤§æ—¶ï¼Œå¼€å‘è€…å’Œå·¥å…·éƒ½éš¾ä»¥ç»´æŠ¤å’Œåˆ†æå®ƒä»¬</li></ul></li></ul><p>æ¨¡ç‰ˆåŒ–ä»£è¡¨æŠ€æœ¯æœ‰:</p><ul><li><a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm</a>ï¼šKubernetes èµ„æºçš„åŒ…ç®¡ç†å·¥å…·ï¼Œé€šè¿‡é…ç½®æ¨¡ç‰ˆç®¡ç† Kubernetes èµ„æºé…ç½®ã€‚å›¾ 3 ç¤ºå‡ºäº†ä¸€ä¸ª Helm Jenkins Package ConfigMap é…ç½®æ¨¡ç‰ˆï¼Œå¯ä»¥çœ‹å‡ºè¿™äº›æ¨¡ç‰ˆæœ¬èº«éƒ½ååˆ†çŸ­å°ï¼Œå¯ä»¥ä¹¦å†™ç®€å•çš„é€»è¾‘ï¼Œé€‚åˆ Kubernetes åŸºç¡€ç»„ä»¶å›ºå®šçš„ä¸€ç³»åˆ—èµ„æºé…ç½®é€šè¿‡åŒ…ç®¡ç†+é¢å¤–çš„é…ç½®å‚æ•°è¿›è¡Œå®‰è£…ã€‚ç›¸æ¯”äºå•çº¯çš„æ¨¡ç‰ˆåŒ–çš„ KVï¼ŒHelm ä¸€å®šç¨‹åº¦ä¸Šæä¾›äº†æ¨¡ç‰ˆå­˜å‚¨/å¼•ç”¨å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†çš„èƒ½åŠ›ç›¸æ¯”äº Kustomize æ›´é€‚åˆç®¡ç†å¤–éƒ¨ Charts, ä½†æ˜¯åœ¨å¤šç¯å¢ƒã€å¤šç§Ÿæˆ·çš„é…ç½®ç®¡ç†ä¸Šä¸å¤ªæ“…é•¿ã€‚</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/03-helm-798d3c871057d3cb32f22fcd05cf718f.png" width="2108" height="1248" class="img_ev3q"></p><p>å›¾ 3 Helm Jenkins Package ConfigMap é…ç½®æ¨¡ç‰ˆ</p><ul><li>å…¶ä»–å„ç§é…ç½®æ¨¡ç‰ˆï¼šJava Velocity, Go Template ç­‰æ–‡æœ¬æ¨¡æ¿å¼•æ“éå¸¸é€‚åˆ HTML ç¼–å†™æ¨¡æ¿ã€‚ä½†æ˜¯åœ¨é…ç½®åœºæ™¯ä¸­ä½¿ç”¨æ—¶ï¼Œå­˜åœ¨æ‰€æœ‰é…ç½®å­—æ®µå³æ¨¡ç‰ˆå‚æ•°çš„é£é™©ï¼Œå¼€å‘è€…å’Œå·¥å…·éƒ½éš¾ä»¥ç»´æŠ¤å’Œåˆ†æå®ƒä»¬ã€‚</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="123-ä»£ç åŒ–-programmable-çš„-kv">1.2.3 ä»£ç åŒ– (Programmable) çš„ KV<a href="#123-ä»£ç åŒ–-programmable-çš„-kv" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>Configuration as Code (CaC), ä½¿ç”¨ä»£ç äº§ç”Ÿé…ç½®ï¼Œå°±åƒå·¥ç¨‹å¸ˆä»¬åªéœ€è¦å†™é«˜çº§ GPL ä»£ç ï¼Œè€Œä¸æ˜¯æ‰‹å·¥ç¼–å†™å®¹æ˜“å‡ºé”™è€Œä¸”éš¾ä»¥ç†è§£çš„æœåŠ¡å™¨äºŒè¿›åˆ¶ä»£ç ä¸€æ ·ã€‚é…ç½®å˜æ›´åŒä»£ç å˜æ›´åŒæ ·ä¸¥è‚ƒåœ°å¯¹å¾…ï¼ŒåŒæ ·å¯ä»¥æ‰§è¡Œå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰ã€‚ä»£ç æ¨¡å—åŒ–å’Œé‡ç”¨æ˜¯ç»´æŠ¤é…ç½®ä»£ç æ¯”æ‰‹åŠ¨ç¼–è¾‘ JSON/YAML ç­‰é…ç½®æ–‡ä»¶æ›´å®¹æ˜“çš„ä¸€ä¸ªå…³é”®åŸå› ã€‚å…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>å¿…è¦çš„ç¼–ç¨‹èƒ½åŠ›ï¼ˆå˜é‡å®šä¹‰ã€é€»è¾‘åˆ¤æ–­ã€å¾ªç¯ã€æ–­è¨€ç­‰ï¼‰</li><li>ä»£ç æ¨¡å—åŒ–ä¸æŠ½è±¡ï¼ˆæ”¯æŒå®šä¹‰æ•°æ®æ¨¡ç‰ˆï¼Œå¹¶ç”¨æ¨¡ç‰ˆå¾—åˆ°æ–°çš„é…ç½®æ•°æ®ï¼‰</li><li>å¯ä»¥æŠ½è±¡é…ç½®æ¨¡ç‰ˆ+å¹¶ä½¿ç”¨é…ç½®è¦†ç›–</li></ul></li><li>ç—›ç‚¹<ul><li>ç±»å‹æ£€æŸ¥ä¸è¶³</li><li>è¿è¡Œæ—¶é”™è¯¯</li><li>çº¦æŸèƒ½åŠ›ä¸è¶³</li></ul></li></ul><p>ä»£ç åŒ– KV çš„ä»£è¡¨æŠ€æœ¯æœ‰:</p><ul><li><a href="https://github.com/rix0rrr/gcl" target="_blank" rel="noopener noreferrer">GCL</a>ï¼šä¸€ç§ Python å®ç°çš„å£°æ˜å¼é…ç½®ç¼–ç¨‹è¯­è¨€ï¼Œæä¾›äº†å¿…è¦çš„è¨€èƒ½åŠ›æ”¯æŒæ¨¡ç‰ˆæŠ½è±¡ï¼Œä½†ç¼–è¯‘å™¨æœ¬èº«æ˜¯ Python ç¼–å†™ï¼Œä¸”è¯­è¨€æœ¬èº«æ˜¯è§£é‡Šæ‰§è¡Œï¼Œå¯¹äºå¤§çš„æ¨¡ç‰ˆå®ä¾‹ (æ¯”å¦‚ K8s å‹) æ€§èƒ½è¾ƒå·®ã€‚</li><li><a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">HCL</a>ï¼šä¸€ç§ Go å®ç°ç»“æ„åŒ–é…ç½®è¯­è¨€ï¼ŒåŸç”Ÿè¯­æ³•å—åˆ° libuclnginx é…ç½®ç­‰çš„å¯å‘ï¼Œç”¨äºåˆ›å»ºå¯¹äººç±»å’Œæœºå™¨éƒ½å‹å¥½çš„ç»“æ„åŒ–é…ç½®è¯­è¨€ï¼Œä¸»è¦é’ˆå¯¹ devops å·¥å…·ã€æœåŠ¡å™¨é…ç½®åŠ Terraform ä¸­å®šä¹‰èµ„æºé…ç½®ç­‰ã€‚</li><li><a href="https://github.com/google/jsonnet" target="_blank" rel="noopener noreferrer">Jsonnet</a>ï¼šä¸€ç§ C++ å®ç°çš„æ•°æ®æ¨¡æ¿è¯­è¨€ï¼Œé€‚ç”¨äºåº”ç”¨ç¨‹åºå·¥å…·å¼€å‘äººå‘˜ï¼Œå¯ä»¥ç”Ÿæˆé…ç½®æ•°æ®å¹¶ä¸”æ— å‰¯ä½œç”¨ç»„ç»‡ã€ç®€åŒ–ã€ç»Ÿä¸€ç®¡ç†åºå¤§çš„é…ç½®ã€‚</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="124-ç±»å‹åŒ–-typed-çš„-kv">1.2.4 ç±»å‹åŒ– (Typed) çš„ KV<a href="#124-ç±»å‹åŒ–-typed-çš„-kv" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>ç±»å‹åŒ–çš„ KVï¼ŒåŸºäºä»£ç åŒ– KVï¼Œå¤šäº†ç±»å‹æ£€æŸ¥å’Œçº¦æŸçš„èƒ½åŠ›ï¼Œå…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>é…ç½®åˆå¹¶å®Œå…¨å¹‚ç­‰ï¼Œå¤©ç„¶é˜²æ­¢é…ç½®å†²çª</li><li>ä¸°å¯Œçš„é…ç½®çº¦æŸè¯­æ³•ç”¨äºç¼–å†™çº¦æŸ</li><li>å°†ç±»å‹å’Œå€¼çº¦æŸç¼–å†™æŠ½è±¡ä¸ºåŒä¸€ç§å½¢å¼ï¼Œç¼–å†™ç®€å•</li><li>é…ç½®é¡ºåºæ— å…³</li></ul></li><li>ç—›ç‚¹<ul><li>å›¾åˆå¹¶å’Œå¹‚ç­‰åˆå¹¶ç­‰æ¦‚å¿µå¤æ‚ï¼Œç”¨æˆ·ç†è§£æˆæœ¬è¾ƒé«˜</li><li>ç±»å‹å’Œå€¼æ··åˆå®šä¹‰æé«˜æŠ½è±¡ç¨‹åº¦çš„åŒæ—¶æå‡äº†ç”¨æˆ·çš„ç†è§£æˆæœ¬ï¼Œå¹¶ä¸”æ‰€æœ‰çº¦æŸåœ¨è¿è¡Œæ—¶è¿›è¡Œæ£€æŸ¥ï¼Œå¤§è§„æ¨¡é…ç½®ä»£ç ä¸‹æœ‰æ€§èƒ½ç“¶é¢ˆ</li><li>å¯¹äºæƒ³è¦é…ç½®è¦†ç›–ã€ä¿®æ”¹çš„å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒåœºæ™¯éš¾ä»¥å®ç°</li><li>å¯¹äºå¸¦æ¡ä»¶çš„çº¦æŸåœºæ™¯ï¼Œå®šä¹‰å’Œæ ¡éªŒæ··åˆå®šä¹‰ç¼–å†™ç”¨æˆ·ç•Œé¢ä¸å‹å¥½</li></ul></li></ul><p>ç±»å‹åŒ– KV çš„ä»£è¡¨æŠ€æœ¯æœ‰:</p><ul><li><a href="https://github.com/cue-lang/cue" target="_blank" rel="noopener noreferrer">CUE</a>ï¼šCUE è§£å†³çš„æ ¸å¿ƒé—®é¢˜æ˜¯â€œç±»å‹æ£€æŸ¥â€ï¼Œä¸»è¦åº”ç”¨äºé…ç½®çº¦æŸæ ¡éªŒåœºæ™¯åŠç®€å•çš„äº‘åŸç”Ÿé…ç½®åœºæ™¯</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="125-æ¨¡å‹åŒ–-structural-çš„-kv">1.2.5 æ¨¡å‹åŒ– (Structural) çš„ KV<a href="#125-æ¨¡å‹åŒ–-structural-çš„-kv" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>æ¨¡å‹åŒ–çš„ KV åœ¨ä»£ç åŒ–å’Œç±»å‹åŒ– KV çš„åŸºç¡€ä¸Šä»¥é«˜çº§è¯­è¨€å»ºæ¨¡èƒ½åŠ›ä¸ºæ ¸å¿ƒæè¿°ï¼ŒæœŸæœ›åšåˆ°æ¨¡å‹çš„å¿«é€Ÿç¼–å†™ä¸åˆ†å‘ï¼Œå…¶ä¼˜åŠ£å¦‚ä¸‹:</p><ul><li>ä¼˜åŠ¿<ul><li>å¼•å…¥å¯åˆ†å—ã€å¯æ‰©å±•çš„ KV é…ç½®å—ç¼–å†™æ–¹å¼</li><li>ç±»é«˜çº§ç¼–ç¨‹è¯­è¨€çš„ç¼–å†™ã€æµ‹è¯•æ–¹å¼</li><li>è¯­è¨€å†…ç½®çš„å¼ºæ ¡éªŒã€å¼ºçº¦æŸæ”¯æŒ</li><li>é¢å‘äººç±»å¯è¯»å¯å†™ï¼Œé¢å‘æœºå™¨éƒ¨åˆ†å¯è¯»å¯å†™</li></ul></li><li>ä¸è¶³<ul><li>æ‰©å±•æ–°æ¨¡å‹åŠç”Ÿæ€æ„å»ºéœ€è¦ä¸€å®šçš„ç ”å‘æˆæœ¬ï¼Œæˆ–è€…ä½¿ç”¨å·¥å…·å¯¹ç¤¾åŒºä¸­å·²æœ‰çš„ JsonSchema å’Œ OpenAPI æ¨¡å‹è¿›è¡Œæ¨¡å‹è½¬æ¢ã€è¿ç§»å’Œé›†æˆã€‚</li></ul></li></ul><p>æ¨¡å‹åŒ– KV çš„ä»£è¡¨æŠ€æœ¯æœ‰:</p><ul><li><a href="https://github.com/kcl-lang/kcl" target="_blank" rel="noopener noreferrer">KCL</a>ï¼šä¸€ç§ Rust å®ç°çš„å£°æ˜å¼é…ç½®ç­–ç•¥ç¼–ç¨‹è¯­è¨€ï¼ŒæŠŠè¿ç»´ç±»ç ”å‘ç»Ÿä¸€ä¸ºä¸€ç§å£°æ˜å¼çš„ä»£ç ç¼–å†™ï¼Œå¯ä»¥é’ˆå¯¹å·®å¼‚åŒ–åº”ç”¨äº¤ä»˜åœºæ™¯æŠ½è±¡å‡ºç”¨æˆ·æ¨¡å‹å¹¶æ·»åŠ ç›¸åº”çš„çº¦æŸèƒ½åŠ›ï¼ŒæœŸæœ›å€ŸåŠ©å¯ç¼–ç¨‹ DevOps ç†å¿µè§£å†³è§„æ¨¡åŒ–è¿ç»´åœºæ™¯ä¸­çš„é…ç½®ç­–ç•¥ç¼–å†™çš„æ•ˆç‡å’Œå¯æ‰©å±•æ€§ç­‰é—®é¢˜ã€‚å›¾ 4 ç¤ºå‡ºäº†ä¸€ä¸ª KCL ç¼–å†™åº”ç”¨äº¤ä»˜é…ç½®ä»£ç çš„å…¸å‹åœºæ™¯</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/04-kcl-app-code-6232e2ae46ba5071c17bdc1a3a013d32.png" width="962" height="1030" class="img_ev3q"></p><p>å›¾ 4 ä½¿ç”¨ KCL ç¼–å†™åº”ç”¨äº¤ä»˜é…ç½®ä»£ç </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-ä¸åŒå£°æ˜å¼é…ç½®æ–¹å¼çš„é€‰æ‹©æ ‡å‡†ä¸æœ€ä½³å®è·µ">1.3 ä¸åŒå£°æ˜å¼é…ç½®æ–¹å¼çš„é€‰æ‹©æ ‡å‡†ä¸æœ€ä½³å®è·µ<a href="#13-ä¸åŒå£°æ˜å¼é…ç½®æ–¹å¼çš„é€‰æ‹©æ ‡å‡†ä¸æœ€ä½³å®è·µ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><ul><li>é…ç½®çš„è§„æ¨¡ï¼šå¯¹äºå°è§„æ¨¡çš„é…ç½®åœºæ™¯ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ YAML/JSON ç­‰é…ç½®ï¼Œæ¯”å¦‚åº”ç”¨è‡ªèº«çš„ç®€å•é…ç½®ï¼ŒCI/CD çš„é…ç½®ã€‚æ­¤å¤–å¯¹äºå°è§„æ¨¡é…ç½®åœºæ™¯å­˜åœ¨çš„å¤šç¯å¢ƒã€å¤šç§Ÿæˆ·ç­‰éœ€æ±‚å¯ä»¥å€ŸåŠ© Kustomize çš„ overlay èƒ½åŠ›å®ç°ç®€å•é…ç½®çš„åˆå¹¶è¦†ç›–ç­‰æ“ä½œã€‚</li><li>æ¨¡å‹æŠ½è±¡ä¸çº¦æŸçš„å¿…è¦æ€§ï¼šå¯¹äºè¾ƒå¤§è§„æ¨¡çš„é…ç½®åœºæ™¯ç‰¹åˆ«æ˜¯å¯¹å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒç­‰æœ‰é…ç½®æ¨¡å‹å’Œè¿ç»´ç‰¹æ€§ç ”å‘å’Œæ²‰æ·€è¿«åˆ‡éœ€æ±‚çš„ï¼Œå¯ä»¥ä½¿ç”¨ä»£ç åŒ–ã€ç±»å‹åŒ–å’Œæ¨¡å‹åŒ–çš„ KV æ–¹å¼ã€‚</li></ul><p>æ­¤å¤–ï¼Œä»ä¸åŒå£°æ˜å¼é…ç½®æ–¹å¼çš„ä½¿ç”¨åœºæ™¯å‡ºå‘</p><ul><li>å¦‚æœéœ€è¦ç¼–å†™ç»“æ„åŒ–çš„é™æ€çš„ K-Vï¼Œæˆ–ä½¿ç”¨ Kubernetes åŸç”Ÿçš„æŠ€æœ¯å·¥å…·ï¼Œå»ºè®®é€‰æ‹© YAML</li><li>å¦‚æœå¸Œæœ›å¼•å…¥ç¼–ç¨‹è¯­è¨€ä¾¿åˆ©æ€§ä»¥æ¶ˆé™¤æ–‡æœ¬(å¦‚ YAMLã€JSON) æ¨¡æ¿ï¼Œæœ‰è‰¯å¥½çš„å¯è¯»æ€§ï¼Œæˆ–è€…å·²æ˜¯ <a href="https://www.terraform.io" target="_blank" rel="noopener noreferrer">Terraform</a> çš„ç”¨æˆ·ï¼Œå»ºè®®é€‰æ‹© HCL</li><li>å¦‚æœå¸Œæœ›å¼•å…¥ç±»å‹åŠŸèƒ½æå‡ç¨³å®šæ€§ï¼Œç»´æŠ¤å¯æ‰©å±•çš„é…ç½®æ–‡ä»¶ï¼Œå»ºè®®é€‰æ‹© CUE ä¹‹ç±»çš„æ•°æ®çº¦æŸè¯­è¨€</li><li>å¦‚æœå¸Œæœ›ä»¥ç°ä»£è¯­è¨€æ–¹å¼ç¼–å†™å¤æ‚ç±»å‹å’Œå»ºæ¨¡ï¼Œç»´æŠ¤å¯æ‰©å±•çš„é…ç½®æ–‡ä»¶ï¼ŒåŸç”Ÿçš„çº¯å‡½æ•°å’Œç­–ç•¥ï¼Œå’Œç”Ÿäº§çº§çš„æ€§èƒ½å’Œè‡ªåŠ¨åŒ–ï¼Œå»ºè®®é€‰æ‹© KCL</li></ul><p>ä¸åŒäºç¤¾åŒºä¸­çš„å…¶ä»–åŒç±»å‹é¢†åŸŸè¯­è¨€ï¼ŒKCL æ˜¯ä¸€ç§é¢å‘åº”ç”¨ç ”å‘äººå‘˜å¹¶é‡‡çº³äº†ç°ä»£è¯­è¨€è®¾è®¡å’ŒæŠ€æœ¯çš„é™æ€å¼ºç±»å‹ç¼–è¯‘è¯­è¨€</p><blockquote><p>æ³¨æ„ï¼Œæœ¬æ–‡å°†ä¸ä¼šè®¨è®ºé€šç”¨è¯­è¨€ç¼–å†™é…ç½®çš„æƒ…å†µï¼Œé€šç”¨è¯­è¨€ä¸€èˆ¬æ˜¯ Overkill çš„ï¼Œå³è¿œè¿œè¶…è¿‡äº†éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œé€šç”¨è¯­è¨€å­˜åœ¨å„å¼å„æ ·çš„å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚èƒ½åŠ›è¾¹ç•Œé—®é¢˜ (å¯åŠ¨æœ¬åœ°çº¿ç¨‹ã€è®¿é—® IO, ç½‘ç»œï¼Œä»£ç æ­»å¾ªç¯ç­‰ä¸å®‰å…¨éšæ‚£)ï¼Œæ¯”å¦‚åƒéŸ³ä¹é¢†åŸŸå°±æœ‰ä¸“é—¨çš„éŸ³ç¬¦å»è¡¨ç¤ºéŸ³ä¹ï¼Œæ–¹ä¾¿å­¦ä¹ ä¸äº¤æµï¼Œä¸æ˜¯ä¸€èˆ¬æ–‡å­—è¯­è¨€å¯ä»¥è¡¨è¿°æ¸…æ¥šçš„ã€‚</p><p>æ­¤å¤–ï¼Œé€šç”¨è¯­è¨€å› ä¸ºæœ¬èº«å°±æ ·å¼ç¹å¤šï¼Œå­˜åœ¨ç»Ÿä¸€ç»´æŠ¤ã€ç®¡ç†å’Œè‡ªåŠ¨åŒ–çš„æˆæœ¬ï¼Œé€šç”¨è¯­è¨€ä¸€èˆ¬ç”¨æ¥ç¼–å†™å®¢æˆ·ç«¯è¿è¡Œæ—¶ï¼Œæ˜¯æœåŠ¡ç«¯è¿è¡Œæ—¶çš„ä¸€ä¸ªå»¶ç»­ï¼Œä¸é€‚åˆç¼–å†™ä¸è¿è¡Œæ—¶æ— å…³çš„é…ç½®ï¼Œæœ€ç»ˆè¢«ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶ä»è¿›ç¨‹å¯åŠ¨ï¼Œç¨³å®šæ€§å’Œæ‰©å±•æ€§ä¸å¥½æ§åˆ¶ï¼Œè€Œé…ç½®è¯­è¨€å¾€å¾€ç¼–å†™çš„æ˜¯æ•°æ®ï¼Œå†æ­é…ä»¥ç®€å•çš„é€»è¾‘ï¼Œæè¿°çš„æ˜¯æœŸæœ›çš„æœ€ç»ˆç»“æœï¼Œç„¶åç”±ç¼–è¯‘å™¨æˆ–è€…å¼•æ“æ¥æ¶ˆè´¹è¿™ä¸ªæœŸæœ›ç»“æœã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äºŒkcl-çš„æ ¸å¿ƒè®¾è®¡ä¸åº”ç”¨åœºæ™¯">äºŒã€KCL çš„æ ¸å¿ƒè®¾è®¡ä¸åº”ç”¨åœºæ™¯<a href="#äºŒkcl-çš„æ ¸å¿ƒè®¾è®¡ä¸åº”ç”¨åœºæ™¯" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>KCL æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•åŠå‡½æ•°è¯­è¨€ã€‚KCL é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µæ¥æ”¹è¿›å¯¹å¤§é‡ç¹æ‚é…ç½®çš„ç¼–å†™ï¼Œè‡´åŠ›äºæ„å»ºå›´ç»•é…ç½®çš„æ›´å¥½çš„æ¨¡å—åŒ–ã€æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œæ›´ç®€å•çš„é€»è¾‘ç¼–å†™ï¼Œä»¥åŠæ›´å¿«çš„è‡ªåŠ¨åŒ–é›†æˆå’Œè‰¯å¥½çš„ç”Ÿæ€å»¶å±•æ€§ã€‚</p><p>KCL çš„æ ¸å¿ƒç‰¹æ€§æ˜¯å…¶<strong>å»ºæ¨¡</strong>å’Œ<strong>çº¦æŸ</strong>èƒ½åŠ›ï¼ŒKCL æ ¸å¿ƒåŠŸèƒ½åŸºæœ¬å›´ç»• KCL è¿™ä¸ªä¸¤ä¸ªæ ¸å¿ƒç‰¹æ€§å±•å¼€ï¼Œæ­¤å¤– KCL éµå¾ªä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„é…ç½®ç†å¿µè€Œè®¾è®¡å…¶æ ¸å¿ƒç‰¹æ€§ï¼Œå¯ä»¥ä»ä¸¤ä¸ªæ–¹é¢ç†è§£ï¼š</p><ul><li><strong>ä»¥é¢†åŸŸæ¨¡å‹ä¸ºä¸­å¿ƒçš„é…ç½®è§†å›¾</strong>ï¼šå€ŸåŠ© KCL è¯­è¨€ä¸°å¯Œçš„ç‰¹æ€§åŠ <a href="https://kcl-lang.io/docs/tools/cli/openapi/" target="_blank" rel="noopener noreferrer">KCL OpenAPI</a> ç­‰å·¥å…·ï¼Œå¯ä»¥å°†ç¤¾åŒºä¸­å¹¿æ³›çš„ã€è®¾è®¡è‰¯å¥½çš„æ¨¡å‹ç›´æ¥é›†æˆåˆ° KCL ä¸­ï¼ˆæ¯”å¦‚ K8s èµ„æºæ¨¡å‹ï¼‰ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯è®¾è®¡ã€å®ç°è‡ªå·±çš„ KCL æ¨¡å‹ (åº“) ï¼Œå½¢æˆä¸€æ•´å¥—é¢†åŸŸæ¨¡å‹æ¶æ„äº¤ç”±å…¶ä»–é…ç½®ç»ˆç«¯ç”¨æˆ·ä½¿ç”¨ã€‚</li><li><strong>ä»¥ç»ˆç«¯ç”¨æˆ·ä¸ºä¸­å¿ƒçš„é…ç½®è§†å›¾</strong>ï¼šå€ŸåŠ© KCL çš„ä»£ç å°è£…ã€æŠ½è±¡å’Œå¤ç”¨èƒ½åŠ›ï¼Œå¯ä»¥å¯¹æ¨¡å‹æ¶æ„è¿›è¡Œè¿›ä¸€æ­¥æŠ½è±¡å’Œç®€åŒ–ï¼ˆæ¯”å¦‚å°† K8s èµ„æºæ¨¡å‹æŠ½è±¡ä¸ºä»¥åº”ç”¨ä¸ºæ ¸å¿ƒçš„ Server æ¨¡å‹ï¼‰ï¼Œåšåˆ°<strong>æœ€å°åŒ–ç»ˆç«¯ç”¨æˆ·é…ç½®è¾“å…¥</strong>ï¼Œç®€åŒ–ç”¨æˆ·çš„é…ç½®ç•Œé¢ï¼Œæ–¹ä¾¿æ‰‹åŠ¨æˆ–è€…ä½¿ç”¨è‡ªåŠ¨åŒ– API å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</li></ul><p>ä¸è®ºæ˜¯ä»¥ä½•ä¸ºä¸­å¿ƒçš„é…ç½®è§†å›¾ï¼Œå¯¹äºä»£ç è€Œè¨€ï¼ˆåŒ…æ‹¬é…ç½®ä»£ç ï¼‰éƒ½å­˜åœ¨å¯¹é…ç½®æ•°æ®çº¦æŸçš„éœ€æ±‚ï¼Œæ¯”å¦‚ç±»å‹çº¦æŸã€é…ç½®å­—æ®µå¿…é€‰/å¯é€‰çº¦æŸã€èŒƒå›´çº¦æŸã€ä¸å¯å˜æ€§çº¦æŸç­‰ï¼Œè¿™ä¹Ÿæ˜¯ KCL è‡´åŠ›äºè§£å†³çš„æ ¸å¿ƒé—®é¢˜ä¹‹ä¸€ã€‚ç»¼ä¸Šï¼ŒKCL æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäºçº¦æŸå’Œå£°æ˜çš„å‡½æ•°å¼è¯­è¨€ï¼ŒKCL ä¸»è¦åŒ…å«å¦‚å›¾ 5 æ‰€ç¤ºçš„æ ¸å¿ƒç‰¹æ€§ï¼š</p><p><img loading="lazy" src="/zh-CN/assets/images/05-kcl-core-feature-3a2f7be7eb09e776258cf83ffc279cbb.png" width="892" height="878" class="img_ev3q"></p><p>å›¾ 5 KCL æ ¸å¿ƒç‰¹æ€§</p><ul><li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šæºäº Pythonã€Golang ç­‰é«˜çº§è¯­è¨€ï¼Œé‡‡çº³å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ç‰¹æ€§ï¼Œä½å‰¯ä½œç”¨</li><li><strong>è®¾è®¡è‰¯å¥½</strong>ï¼šç‹¬ç«‹çš„ Spec é©±åŠ¨çš„è¯­æ³•ã€è¯­ä¹‰ã€è¿è¡Œæ—¶å’Œç³»ç»Ÿåº“è®¾è®¡</li><li><strong>å¿«é€Ÿå»ºæ¨¡</strong>ï¼šä»¥ <a href="https://kcl-lang.io/docs/reference/lang/tour#schema" target="_blank" rel="noopener noreferrer">Schema</a> ä¸ºä¸­å¿ƒçš„é…ç½®ç±»å‹åŠæ¨¡å—åŒ–æŠ½è±¡</li><li><strong>åŠŸèƒ½å®Œå¤‡</strong>ï¼šåŸºäº <a href="https://kcl-lang.io/docs/reference/lang/tour#config-operations" target="_blank" rel="noopener noreferrer">Config</a>ã€<a href="https://kcl-lang.io/docs/reference/lang/tour#schema" target="_blank" rel="noopener noreferrer">Schema</a>ã€<a href="https://kcl-lang.io/docs/reference/lang/tour#function" target="_blank" rel="noopener noreferrer">Lambda</a>ã€<a href="https://kcl-lang.io/docs/reference/lang/tour#rule" target="_blank" rel="noopener noreferrer">Rule</a> çš„é…ç½®åŠå…¶æ¨¡å‹ã€é€»è¾‘å’Œç­–ç•¥ç¼–å†™</li><li><strong>å¯é ç¨³å®š</strong>ï¼šä¾èµ–<a href="https://kcl-lang.io/docs/reference/lang/tour/#type-system" target="_blank" rel="noopener noreferrer">é™æ€ç±»å‹ç³»ç»Ÿ</a>ã€<a href="https://kcl-lang.io/docs/reference/lang/tour/#validation" target="_blank" rel="noopener noreferrer">çº¦æŸ</a>å’Œ<a href="https://kcl-lang.io/docs/reference/lang/tour#rule" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰è§„åˆ™</a>çš„é…ç½®ç¨³å®šæ€§</li><li><strong>å¼ºå¯æ‰©å±•</strong>ï¼šé€šè¿‡ç‹¬ç«‹é…ç½®å—<a href="https://kcl-lang.io/docs/reference/lang/tour/#-operators-1" target="_blank" rel="noopener noreferrer">è‡ªåŠ¨åˆå¹¶æœºåˆ¶</a>ä¿è¯é…ç½®ç¼–å†™çš„é«˜å¯æ‰©å±•æ€§</li><li><strong>æ˜“è‡ªåŠ¨åŒ–</strong>ï¼š<a href="https://kcl-lang.io/docs/reference/lang/tour/#kcl-cli-variable-override" target="_blank" rel="noopener noreferrer">CRUD APIs</a>ï¼Œ<a href="https://kcl-lang.io/docs/reference/xlang-api/overview" target="_blank" rel="noopener noreferrer">å¤šè¯­è¨€ SDK</a>ï¼Œ<a href="https://github.com/kcl-lang/kcl-plugin" target="_blank" rel="noopener noreferrer">è¯­è¨€æ’ä»¶</a> æ„æˆçš„æ¢¯åº¦è‡ªåŠ¨åŒ–æ–¹æ¡ˆ</li><li><strong>æè‡´æ€§èƒ½</strong>ï¼šä½¿ç”¨ Rust &amp; Cï¼Œ<a href="https://llvm.org/" target="_blank" rel="noopener noreferrer">LLVM</a> å®ç°ï¼Œæ”¯æŒç¼–è¯‘åˆ°æœ¬åœ°ä»£ç å’Œ <a href="https://webassembly.org/" target="_blank" rel="noopener noreferrer">WASM</a> çš„é«˜æ€§èƒ½ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶</li><li><strong>API äº²å’Œ</strong>ï¼šåŸç”Ÿæ”¯æŒ <a href="https://github.com/kcl-lang/kcl-openapi" target="_blank" rel="noopener noreferrer">OpenAPI</a>ã€ Kubernetes CRDï¼Œ Kubernetes YAML ç­‰ API ç”Ÿæ€è§„èŒƒ</li><li><strong>å¼€å‘å‹å¥½</strong>ï¼š<a href="https://kcl-lang.io/docs/tools/cli/kcl/" target="_blank" rel="noopener noreferrer">è¯­è¨€å·¥å…·</a> (Formatï¼ŒLintï¼ŒTestï¼ŒVetï¼ŒDoc ç­‰)ã€ <a href="https://github.com/kcl-lang/vscode-kcl" target="_blank" rel="noopener noreferrer">IDE æ’ä»¶</a> æ„å»ºè‰¯å¥½çš„ç ”å‘ä½“éªŒ</li><li><strong>å®‰å…¨å¯æ§</strong>ï¼šé¢å‘é¢†åŸŸï¼Œä¸åŸç”Ÿæä¾›çº¿ç¨‹ã€IO ç­‰ç³»ç»Ÿçº§åŠŸèƒ½ï¼Œä½å™ªéŸ³ï¼Œä½å®‰å…¨é£é™©ï¼Œæ˜“ç»´æŠ¤ï¼Œæ˜“æ²»ç†</li><li><strong>å¤šè¯­è¨€ SDK</strong>ï¼š<a href="https://kcl-lang.io/docs/reference/xlang-api/go-api" target="_blank" rel="noopener noreferrer">Go</a>, <a href="https://kcl-lang.io/docs/reference/xlang-api/python-api" target="_blank" rel="noopener noreferrer">Python</a> å’Œ <a href="https://kcl-lang.io/docs/reference/xlang-api/rest-api" target="_blank" rel="noopener noreferrer">REST API</a> æ»¡è¶³ä¸åŒåœºæ™¯å’Œåº”ç”¨ä½¿ç”¨éœ€æ±‚</li><li><strong>ç”Ÿäº§å¯ç”¨</strong>ï¼šå¹¿æ³›åº”ç”¨åœ¨èš‚èšé›†å›¢å¹³å°å·¥ç¨‹åŠè‡ªåŠ¨åŒ–çš„ç”Ÿäº§ç¯å¢ƒå®è·µä¸­</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/06-kcl-code-design-1993576ecb719dcef493c7ba08a1051c.png" width="520" height="394" class="img_ev3q"></p><p>å›¾ 6 KCL è¯­è¨€æ ¸å¿ƒè®¾è®¡</p><p>æ›´å¤šè¯­è¨€è®¾è®¡å’Œèƒ½åŠ›è¯¦è§ <a href="https://kcl-lang.io/docs/reference/lang/tour" target="_blank" rel="noopener noreferrer">KCL æ–‡æ¡£</a>ï¼Œå°½ç®¡ KCL ä¸æ˜¯é€šç”¨è¯­è¨€ï¼Œä½†å®ƒæœ‰ç›¸åº”çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚å›¾ 6 æ‰€ç¤ºï¼Œç ”å‘è€…å¯ä»¥é€šè¿‡ KCL ç¼–å†™<strong>é…ç½®(config)</strong>ã€<strong>æ¨¡å‹(schema)</strong>ã€<strong>å‡½æ•°(lambda)</strong>åŠ<strong>è§„åˆ™(rule)</strong>ï¼Œå…¶ä¸­ Config ç”¨äºå®šä¹‰æ•°æ®ï¼ŒSchema ç”¨äºå¯¹æ•°æ®çš„æ¨¡å‹å®šä¹‰è¿›è¡Œæè¿°ï¼ŒRule ç”¨äºå¯¹æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œå¹¶ä¸” Schema å’Œ Rule è¿˜å¯ä»¥ç»„åˆä½¿ç”¨ç”¨äºå®Œæ•´æè¿°æ•°æ®çš„æ¨¡å‹åŠå…¶çº¦æŸï¼Œæ­¤å¤–è¿˜å¯ä»¥ä½¿ç”¨ KCL ä¸­çš„ lambda çº¯å‡½æ•°è¿›è¡Œæ•°æ®ä»£ç ç»„ç»‡ï¼Œå°†å¸¸ç”¨ä»£ç å°è£…èµ·æ¥,åœ¨éœ€è¦ä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚</p><p>å¯¹äºä½¿ç”¨åœºæ™¯è€Œè¨€ï¼ŒKCL å¯ä»¥è¿›è¡Œç»“æ„åŒ– KV æ•°æ®éªŒè¯ã€å¤æ‚é…ç½®æ¨¡å‹å®šä¹‰ä¸æŠ½è±¡ã€å¼ºçº¦æŸæ ¡éªŒé¿å…é…ç½®é”™è¯¯ã€åˆ†å—ç¼–å†™åŠé…ç½®åˆå¹¶èƒ½åŠ›ã€è‡ªåŠ¨åŒ–é›†æˆå’Œå·¥ç¨‹æ‰©å±•ç­‰èƒ½åŠ›ï¼Œä¸‹é¢é’ˆå¯¹è¿™äº›åŠŸèƒ½å’Œä½¿ç”¨åœºæ™¯è¿›è¡Œé˜è¿°ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-ç»“æ„åŒ–-kv-æ•°æ®éªŒè¯">2.1 ç»“æ„åŒ– KV æ•°æ®éªŒè¯<a href="#21-ç»“æ„åŒ–-kv-æ•°æ®éªŒè¯" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>å¦‚å›¾ 7 æ‰€ç¤ºï¼ŒKCL æ”¯æŒå¯¹ JSON/YAML æ•°æ®è¿›è¡Œæ ¼å¼æ ¡éªŒã€‚ä½œä¸ºä¸€ç§é…ç½®è¯­è¨€ï¼ŒKCL åœ¨éªŒè¯æ–¹é¢å‡ ä¹æ¶µç›–äº† OpenAPI æ ¡éªŒçš„æ‰€æœ‰åŠŸèƒ½ã€‚åœ¨ KCL ä¸­å¯ä»¥é€šè¿‡ä¸€ä¸ªç»“æ„å®šä¹‰æ¥çº¦æŸé…ç½®æ•°æ®ï¼ŒåŒæ—¶æ”¯æŒé€šè¿‡ check å—è‡ªå®šä¹‰çº¦æŸè§„åˆ™ï¼Œåœ¨ schema ä¸­ä¹¦å†™æ ¡éªŒè¡¨è¾¾å¼å¯¹ schema å®šä¹‰çš„å±æ€§è¿›è¡Œæ ¡éªŒå’Œçº¦æŸã€‚é€šè¿‡ check è¡¨è¾¾å¼å¯ä»¥éå¸¸æ¸…æ™°ç®€å•åœ°æ ¡éªŒè¾“å…¥çš„ JSON/YAML æ˜¯å¦æ»¡è¶³ç›¸åº”çš„ schema ç»“æ„å®šä¹‰ä¸ check çº¦æŸã€‚</p><p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeEAAACtCAMAAACweTefAAAC91BMVEUAAAAAAAD3x6sAAAAuUo33yq0AAAD2yawJCQkODg4FBQUAAAAMDAwyVI8QEBASEhIAAAARITwoTYYSJlQ1VY9HYJMAAAAAAAAbGxtrdZcwUI3ow6pMY5MSEhIuUY6rm6E7WZFLS0stUI4AAAAAAAAvUo8tLS0kJCQyU5AEBAQAAAAsToyunqJISEhlcpYRERExU48AAAAAAAApTYxrdphcbZX2yq3IrqYyU48AAAD0x6u8pqQsUI3ww6R8fHxcXFxWVlY5OTmqm6FMY5MNDQ0uUY5jcpYAAAAsT42Jh5xnZ2dRUVH4y6wPDw8KCgr3yqwBAQEtUY4tUY4AAAD3yKrivJ4vUY82NjYwUo4RERH3yqz4yqxVaZTrw6oAAAD3yqowU5BCQkL4y6zivqnTtagwU48TExP2yKg0VY+lmaCzoqJgb5ZFX5KFhZv3y6z4yqz3yqy9qKIXFxcWFhZ7fpj4y63///8vUo8AAACTjp2Tjp6Vp8aXqMcyMjKysrJMTEzMzMwpKSmAgICqqqrU1NRUVFR+fn719fUJCAgSEhLs7OwEBAPZ2dkkJCTj4+O3t7dXV1fx8fHX19fAwMD9/f37+/tgYGDp6enb29tycnL4+PhlZWXFoYleTUEiIiKgoKB2dnY5OTmmpqZsWUzHx8fnvaGLi4uIiIixkHt6enpISEhEREQ0KiQnIBvuw6a3pKOQkJBJPDMrKysbGxtoaGgNDAvS0tK7u7vwxqzqwqurq6vTtaehl6BaWlrf39+We2lnVEc/Pz81NTUdHR0aFRHz8/Pu7u7yxajOqI+NjY0XFxfOzs7ExMSvr6+ck5+EhIRtbW2OdGNcXFwvLy8SDw4CAgKpqanHrqWdnZ2amprVr5WsjHiBalp4YlRQQjjft5yAgptQUFBXRzzjvqmjo6Pas5iWlpY/MyswJyHJycnPsqa8pqR3fZmSkpKCgoJxXU88PDw5LyeTk5O0lH6ihHHduqnrwKTBqqS7mYKlh3JDNi7YuKjMsaaFubjnAAAAdXRSTlMAgECBgMAy/vbl+Rzw7tzDJwoUBeW5sRHyhVYq97loWfvxd047/vDw241FKv7x6s+9a1Uc/vzqzIhXUlFEE/318+/UsZ+VjWE2+ffy1qiXfnZtXlseCP7wyrOll39tWT/48N3c1KOVOP306ObU0ciyqZJuW03BsFX+AAAOkElEQVR42uzay2sTURTH8euLuOnCWBFbqaFYKCoi+ER0IwguBEFUxAeKD/CFuPk5R5cuJJJ/IVmFQhaZKUECFgvJIpCshECCkOYhkdIgQpFqbasL7yTIkFZlkpnE2/R8IMklh6y+TDI3M2K18Q5sFScHr2mmbeulfs20S652dO7NwQtCDOwVrNMODl8e0Y4eAd4+M41DmqwvJ9DhNz1nfVrf3ROCddKxkZHDz9978H983PfBp/VvFaxTLl5/8Owb/ivP+OSVQcE6YYv3+C2o4erJM4K5be/oQyjj/qVj/F3tsvM3fe+hjDcftMtewVw0rB2agErG740eFMw1A9pnD9Ty3ndAMNdc3wfl/Lh9UjCXHIeSHl8UzBWDqn1D/3ZVMDecvgNFTTzi/zBdcF5T8Ee44c3OUd4WO+btOwxlfdeGBXNo48hbqOtQ3xbBHNnSdwgK+8QHsVNnfD+hss/XBHPk4hG0x5NucZCJZNCGc4J16c+OYioGIJJKFQFko/7ATLECzKdSC7BYgxVCFEIbbgnmyBPYFaYoUIhT1ACqRAE/kT6GMaIILNbArcLg+wGcOQK7zMJGjXLTwBRR2Eh/zVNpWWFr4F7h63wZ0Yn+d7DLLByi/AKAqFxK4ZnFpsJNA6QTyfLsIkyFUnk22Cg8VqyGsmnY93FkSLC2ebXJVgoniLKQAuZLg1V42aCgk2nGABbichHQzcLBHEnRedjnOy1Y205o32G/sD9ANUgVorkVhZcPliiVzZT8VAJqpC9WkkQhc7lUCL6mIuw7zNeJHTivfQNsFzYtAMgQBVcWbh5MNw73MqVQIPoKGAEKmcs5oEQ67Ps8KljbhrSJVgrPpkg36lWn/lC4aTBHlAGQIDIiRNMAvsjCchnP5QLkh30f+gRr27D2poXCNUzJygDiVII0XWgq3DRoZDU/YMhHGsBSo3AoafLAtnd8DDuwUYMd1n64TPmg+ZwyAMxQaFlha1AgSgAoUgqZ+uGc9lPIXE4BmEYrbgjWvcKVOOlpM9SXYDApI5qFs0EJddbAU6PomHnqHIbximJpZEkW9ui0VMFsPowWrBese4WRICrJ5wCZqh5ZuGEeddYgGKdAikifr3/Gn8vrVAWmAhTIUX4OABd2xv3CidgspGSsbADB5Bc99tUDGLEGA3XWAJWwXBXTkCJlvRxJxIrmvKrXqkFIXLgbBvZDeePbBGvfJijvmSYYF2ZceK3iwj1uaCeUx4Ud7paU93aHYD1dmPfDXJhx4bVrNRSe2CVY27xHoTw+l+b9MOPCaxgX7nF7T0F5XLhz59Ja1+AfJvsF61Thp12i4e94P8yFGRdew7hwrxvYr35hvhPPkU3qF+bdEhdmXHgN48I9bmgnF+5tq2G35PKdeLvJbXmhsNVQ2OX98LqXT11GosmeDS7bw4WVKrydXriMuLBahTc/dVnPF/7F3t29NBUGcBw3BNnmmEZRFkiIYmSY1J03vREERRF0Ed0E3fQHFPw4vWxz9rLZ9Oz9HeY2xsbczdC10WoDFYVNRWlheimI4EUh/QU9z1b2bjbP0eN8vqDuQhnHjzt7nuPDeV4fY8IircTbWNgTQbnQnAu/FPVhvfi8VMbSD5ppHPdcqHp3gfAW5sNGzg2ao8BZ8UsxM9ZTD0pFWLnwVNi4XwQaaXXGZ0Ll2mHhgge0zK4RVvVA2H4RbuOaaJxOqDjvzgrH+vQgxQNUeCLhSy56AdgXfJ40FXZk5pIzZWGHac5nqn7hMy0QNoN+68InL1YuvDqyAKDf6CbCLv9YIj9cJMRL/khepyPCzkLAaXhREl4cT0RehZmwoMLij6WNPb1qAJ4lLxFO+h2AfiQCE5cDXJwZaY4Hlg0uKhz/BNhS+Htir8SrKyW39QjV5N4Q5o1hePtMVFg3B6qtRWwAJLUZUZ3Vag1zNirs8c9P7OR8+A53nMb51QJVGN8bwnj+DoN+OxU2zIM0OwanGSSfGc5XapqJCns9I4aspXJhyU2B+wd+Fr7XQFNwWoEampWIsM3wMhgFFfYHQNJq4SmCNGZGYPinsXTPcLKKhTmNsGUMEhGGLml0lYSd1NNriCLEvQQmjWZkOJ48iFmIsP6jBXgxWs3CELaXfYIJHz21JeHPnBklYb6wNBMK6vRwFIOh0Jh6CfaxYmhwbMlBhDGk1QyOL1a+Eo8J78h82McDFidhdjhdgCsQ187qAVhi8exMOgHoe4eW8l6gdxp8YNSZcVQ+W2LCbBUPE2bCTJgJV6fw3liJt5eFd8MKgDdHmHB1C7P5MBNmwkyYCUtZ+PUxJryVlXjSF2ZjaTYfZsJMmAkz4WoVPnmxCoXrD9XtWWFy7P81ln68TQm7Eq+e4w7VbVG437FLhemxb174w6Nt6sN/zYf3/aMTHEePc1PChaA6m8bvBXnYpSi8yWPfXfeIF1W4D+gZ0f9ReFQMYXvq61c7SjmYMBUW7yxNhRE3IZXMTsPSq5218xGAjxDhF6/ehf5bOOEBEMoSwWH6nL44aM+zwABKmbLIjqcRU6vfEdwZdVH93Ar4noO0ZhHoLL3b9nkgwqKNtKjwamHCpdOkRtMrgYlA+NkQQD6CvKuQm/xvYe/AM0z4iVl6yE8EzYYpADmDFiibYSgMvDNZg3Y4BzEz7CbmwzzMI8sAhi2CjLT24u60Gwgb18ZHe5BZ4vnPnog5B6wLY6SSs7QmjrMBEFtNVkM+J30AYsl1YWsQVFhjBuxAMQzSp16YM35+A2F2j/gtCPchs2ZHoujz+SKOfHA0R4WnKhfG0OeBCUI07khriXB6fBKOAdu6cDJUErYMOwmu4z1oq0MwhweHmLBYwtB+RCoO6C0WIBJz+YGPWxB2GyliIgC7n4d5OpDHfHLqm/DkgKMkDO9yXO22jIBmHSPC0C4wYbGE+UIOukA6vuzsDWs1UEcX1uJUuPjUWoEwdC8BDOvGxgpRIpzT2Uen1oWjsygLkxJO6EqkmiQV5v08ExZD+CMAkw2uaCwNy2LAZIcrH8mFsGzBVMxUqfCqGoB1gAhDuxLEN2HHANVH0Do/D8w4kYwBsMdnqDCW48W/CbPdaSV1XZoK+1ZAWrMRYZNxsCxM7gqRcAII5XXg/Quhog3eNZ9mPh5DSRhL3N+Eq31XPAmvxAtcOXe1pfNn4UUvsFKymrZpeNgjergyQCIajSbcAGYjk4A7EbUC8KZf5KcAkO8DXFHvHhWW8Cqefacv3+w+0yjaVUvLJO9+lmLCOydcU04sYY6TKeVyVYN4wh8eblMfmPCfhI37Rb9z6ZNtareuxBNZWPFVmK3E2wFhh8ud6tkNwmwVT2XCnFEpV6luM+GqFVbWlBJNmItdudp5l2PCOyYsF1v4xumbra2NNeXYSrzqE5btqV0A3h5kwtUtLIX5sCWlWem90nLheJNSpjByXBcTrhphlylyrl2mkDdcqj3d3VHXWH94/4EakvDC9pf9YVNo4WP0U2+AY8LbIeyYjnYqZV3XL7cdrvkpgYVdtsVAS7vSKCMXKG9fu36itnZfHRMWW9jeM3tLobpO/qtQSixhd8hzS6bsunbjTlv9j6cGtjutuMKW+fMy+b3W0itXPOFUolOmbL7RUV/ze2zfQxGF+c8XFA2nS7928YQnQ+eV8kvdf3oWJiyq8NTZ48prrfRSkojC/dH2Df6GmLBowpbMOaX8RBv9AfGE7dOBJuWljg3ec5lwBbVy5/M2FzZoUuOhrys6rhJReEJzTqaq3cQ4WVK703rm5jyfeXwv16eXmnBN3eXrXTJZ+7lPy+GcFz9lefb0bGeTomFfxxYu83PTE/8enOdvKRpubOrcLK29S42+yNyA4SnWc3N6qd0Tr9zhtsu1t7vItLPp+IW7LeevXu280N5ErmU013Y3bvGseV+laGo5G0r9xTlnmr2gkF/a3Pu79IRtALJ99h+FpTYf/kW6sa6jtfvmzTutHW2Nh2uE6UBjd22zSiFr77wSXZixrabc/f3WVVtmMXa+XaFsOLHpqZdEhU2cCxE3fTBTFuZX3sWsKG+lJTVhMatvO3P6xLXmLpVKTlJ1NV/aR6+I/U/SFD6rA0YopcdJhekGW7Ojr8Jft9LaQ8LSSwDhL+3dP2gTURwH8IdYMmVo3ZpSQiAQMEjgkhJSM0klgUCIaJEqVFDpJCL4fo8MrbhY6x9aTK2Ug2gdHFx0sHqIFdrg4GAs0oLjQcDBBrfSQQfvmnTo0CH37ppf7/0+Q3Lc+uXu3rv8yPfl58rixtv9CetLAHDndbtKq+v/iacy+Um8hzO1zbvfYH/Ck4tWnda9md0qLQxraZX1yN+lrRy/7CW83kp4uTZpm29VaVHCHUCZ8HR1HQBqzwFgtZVw9Q/Y2lValHAHUCYMs5vWx5puV2m1Ep5bAoDKz3aVFiXsFIpJPDth+PF4Gr4vv/haXVvZTfj9fX3q1cZelRYl3BFsa2n9EQA8WKjA/OzcyscPv+DZwlOAJ+9W9SloV2l1fRJPZWrMeKiMEvY7StjvKGG/U2MST2lKzHgojRL2O0rY7yhhn1OjnVZlR2G3ZE3iEV8nzMcZcSwiDPwJTzDi2KBo8INg6VviIUYc6xd/+UGw9C1tU8IS+m4FOHapBCPOZTh64RFGnAtx7BqixIiEIY5cXOQYcU670eC4NYOMSNBEneOWp8ewnIvY21qKjEgpiX8cs8B5RqT0BpMcszFGJB2PYl5rbdELLWl9txG/1tqhzbAbihwrYyB2ghFpFwocKVOcZsQFobjBMYqLNCNuyEWTKJ/FpxJ0j3bJoDA5PoVsLyMuSYsmuqu4QO863BQReY7Km2tZRtx0bhjT74iGKa4z4rLsTY7FzsBomhZZHsik6ii2TaaI0T7YE1pChMvbvMsCY5cjdAF7JZeIdnPJ1Yg3rxZpCe0tLdKfudQzlDTz5XKdW7bKtt/WkWF9e3jyUyosRJBuz4dDiwWvjIrgMcsZYTtrHQ0Li0cnxydC6cRI6SQ7iv4DOyxWJfWINywAAAAASUVORK5CYII=" width="481" height="173" class="img_ev3q"></p><p>å›¾ 7 KCL ä¸­ç»“æ„åŒ– KV æ ¡éªŒæ–¹å¼</p><p>åŸºäºæ­¤ï¼ŒKCL æä¾›äº†ç›¸åº”çš„<a href="https://kcl-lang.io/docs/tools/cli/kcl/vet" target="_blank" rel="noopener noreferrer">æ ¡éªŒå·¥å…·</a>ç›´æ¥å¯¹ JSON/YAML æ•°æ®è¿›è¡Œæ ¡éªŒã€‚æ­¤å¤–ï¼Œé€šè¿‡ KCL schema çš„ check è¡¨è¾¾å¼å¯ä»¥éå¸¸æ¸…æ™°ç®€å•åœ°æ ¡éªŒè¾“å…¥çš„ JSON æ˜¯å¦æ»¡è¶³ç›¸åº”çš„ schema ç»“æ„å®šä¹‰ä¸ check çº¦æŸã€‚æ­¤å¤–ï¼ŒåŸºäºæ­¤èƒ½åŠ›å¯ä»¥æ„å»ºå¦‚å›¾ 8 æ‰€ç¤ºçš„ KV æ ¡éªŒå¯è§†åŒ–äº§å“ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/08-kcl-validation-ui-25856413a94366586bfd992a0c05f373.png" width="460" height="388" class="img_ev3q"></p><p>å›¾ 8 åŸºäº KCL ç»“æ„åŒ– KV æ ¡éªŒèƒ½åŠ›æ„å»ºçš„å¯è§†åŒ–äº§å“ç•Œé¢</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-å¤æ‚é…ç½®æ¨¡å‹å®šä¹‰ä¸æŠ½è±¡">2.2 å¤æ‚é…ç½®æ¨¡å‹å®šä¹‰ä¸æŠ½è±¡<a href="#22-å¤æ‚é…ç½®æ¨¡å‹å®šä¹‰ä¸æŠ½è±¡" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>å¦‚å›¾ 9 æ‰€ç¤ºï¼Œå€ŸåŠ© KCL è¯­è¨€ä¸°å¯Œçš„ç‰¹æ€§åŠ <a href="https://kcl-lang.io/docs/tools/cli/openapi/" target="_blank" rel="noopener noreferrer">KCL OpenAPI</a> ç­‰å·¥å…·ï¼Œå¯ä»¥å°†ç¤¾åŒºä¸­å¹¿æ³›çš„ã€è®¾è®¡è‰¯å¥½çš„æ¨¡å‹ç›´æ¥é›†æˆåˆ° KCL ä¸­ï¼ˆæ¯”å¦‚ K8s èµ„æºæ¨¡å‹ CRDï¼‰ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯è®¾è®¡ã€å®ç°è‡ªå·±çš„ KCL æ¨¡å‹ (åº“) ï¼Œå½¢æˆä¸€æ•´å¥—é¢†åŸŸæ¨¡å‹æ¶æ„äº¤ç”±å…¶ä»–é…ç½®ç»ˆç«¯ç”¨æˆ·ä½¿ç”¨ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/09-kcl-modeling-e03e1ccf2d4dbcc04a9205c544d1af28.png" width="753" height="389" class="img_ev3q"></p><p>å›¾ 9 KCL å¤æ‚é…ç½®å»ºæ¨¡çš„ä¸€èˆ¬æ–¹å¼</p><p>åŸºäºæ­¤ï¼Œå¯ä»¥åƒå›¾ 10 ç¤ºå‡ºçš„é‚£æ ·ç”¨ä¸€ä¸ªå¤§çš„ <a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">Konfig ä»“åº“</a> ç®¡ç†å…¨éƒ¨çš„ KCL é…ç½®ä»£ç ï¼Œå°†ä¸šåŠ¡é…ç½®ä»£ç  (åº”ç”¨ä»£ç )ã€åŸºç¡€é…ç½®ä»£ç  (æ ¸å¿ƒæ¨¡å‹+åº•å±‚æ¨¡å‹)åœ¨ä¸€ä¸ªå¤§åº“ä¸­ï¼Œæ–¹ä¾¿ä»£ç é—´çš„ç‰ˆæœ¬ä¾èµ–ç®¡ç†ï¼Œè‡ªåŠ¨åŒ–ç³»ç»Ÿå¤„ç†ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå®šä½å”¯ä¸€ä»£ç åº“çš„ç›®å½•åŠæ–‡ä»¶å³å¯ï¼Œä»£ç äº’é€šï¼Œç»Ÿä¸€ç®¡ç†ï¼Œä¾¿äºæŸ¥æ‰¾ã€ä¿®æ”¹ã€ç»´æŠ¤ï¼Œå¯ä»¥ä½¿ç”¨ç»Ÿä¸€çš„ CI/CD æµç¨‹è¿›è¡Œé…ç½®ç®¡ç†ï¼ˆæ­¤å¤–ï¼Œå¤§åº“æ¨¡å¼ä¹Ÿæ˜¯ Google ç­‰å¤´éƒ¨äº’è”ç½‘å…¬å¸å†…éƒ¨å®è·µçš„æ¨¡å¼ï¼‰ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/10-kcl-konfig-9f1f89d284dda428ab1a388d241de8a1.png" width="363" height="356" class="img_ev3q"></p><p>å›¾ 10 ä½¿ç”¨ KCL çš„è¯­è¨€èƒ½åŠ›é›†æˆé¢†åŸŸæ¨¡å‹å¹¶æŠ½è±¡ç”¨æˆ·æ¨¡å‹å¹¶ä½¿ç”¨</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-å¼ºçº¦æŸæ ¡éªŒé¿å…é…ç½®é”™è¯¯">2.3 å¼ºçº¦æŸæ ¡éªŒé¿å…é…ç½®é”™è¯¯<a href="#23-å¼ºçº¦æŸæ ¡éªŒé¿å…é…ç½®é”™è¯¯" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>å¦‚å›¾ 11 æ‰€ç¤ºï¼Œåœ¨ KCL ä¸­å¯ä»¥é€šè¿‡ä¸°å¯Œçš„å¼ºçº¦æŸæ ¡éªŒæ‰‹æ®µé¿å…é…ç½®é”™è¯¯ï¼š</p><p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjkAAAFGCAMAAAC/qX7WAAAC8VBMVEUAAAAuUo3F37P3yq0AAAAAAAAsTYoPIUQtUYw0VpACAgL3x6sCAgIAAAA8XZIuUY4tUY0vUo4jSYcAAAAAAAAEBARNbpYBAQEAAAAtT40BAQEAAABEYZOwzK4AAAAAAAAAAAAtUI1kZGSbuKkAAAAzVY/Yt6guUY4AAAAAAAAAAAAAAAAPDw+CoaQtUY4tTIQFBQVefpmUsqgAAAABAQEqTIpodJczVJAvUo8JCQnB3LMAAABqdZiglqABAQExU4/V0KwwUo/FrKUcHBwRERESEhJ6fpnB3LNcfZtBQUFUdZj4yq1GYJP4y600VpAvUo7f0a/3y62YkZ/0yKxnh5x6mKGMqqYuUY6aj58uUI6/2LFRaZVzepn4yq32yawqKirF4LR0dHTF37PF4LPF37RgeZnnwKnF37RKY5ONhpq4pKN1jJ2Bj53E4LNWdZfF4LT////4y60vUo8AAACWqMd6maGSjZ3U1NSysrJ5mKGTjp6AgIAqKioGBgVMTEza2tqHh4f7+/v19fUxMjB+fn4jJCMLCwrGxsYQDw7b29tKSkqTjp0YGBeDg4OgoKBYWFi2trYcHRxgYGAUFBLw8PA2NzXLy8u/2rBaWlrpv6T39/dubm7i4uLm5uacnJywkHpnZ2dOTk4nKCZJU0P0yKtra2u6urqNjY05QTTq6uq30KempqZ8fHxGRkbPz8+vr69CRUA8PDysrKyQpIQqMCa9vb2pqamioqIjIh3wxamWlpbBwcHFoYmKnX5dXV0zKiOKiopwcHCRkZFwf2ZTU1O4066al5uSkpJreWFWYk9SQzl2dnZea1ZSXUtqVkkgGhbYsZd4eHiClHebsY5hT0NdTEFJPDOpxq3fvKnUtaeqwpzft5x2hJtzc3Pd3d2fvKqFo6SxyaGlu5Z5im+7mYJ0dHTDw8O0oqLPqJCMcmGQkJCjhXGBaVpLS0ulmKB5eXllc1zAwMCgtpJ0X1GbfmyUemhDNi6jwKtycnKTsadGOTDTSDVKAAAAb3RSTlMAgMDAgX8hBy76l0DoG/lvUGAQW0/g77EuOIlx9ccmDGhJ/s5g2Md0OLlCEt/YZwz159DFnxn+57KrjXjm19OmE8P98tDDf27+8OzPxayZfSzl1ITk3dKQYlhD++VkT/Dm+tfTz7mopqUm4WU/1Iy+R69DAAAebElEQVR42uzasWrCYBAH8KtDzLfE4CZ0keLYOBVDluqU4JA6VWoXUYtDSw8OHPokeaI8QxbBvIW4NWlxaCndJP8P7jcdNx/HcXekztyr2hNVgq/wroqcCyaV5Yb+fPAaR9tHqU1blWup3VTRBZPbKF7cz/0hKSv1UiMmKbgZiRGT9khZ6MXsD9ygw9542nbsEy+zjBuWFcuYlE0672sGsV50SFmiG0rCMEoJu6Rs4AykZCClDBxS+NyROTKUoxlp6Vjg7blgMIWXkkI3XjGefDUmBa7FkFqkoLkRg4pIAXPMjkEVOiUjC03OoHITkkLVx1rk/FRKnxSoicfAvAkpTD3klsNcij5dgGrfNn4d/0821coBNWNwM1KQYHc533SnA2vD4DakED2Ancj/4JLC05YPBreTNik4rpwY3Em06QDyBe4v57dCfFJwAoG9WZ3lEpD6ZOf+WRQHwjiO726x5cE22111xVZX3L2ReykP+KtTiTKFjYQwfaYZUgWSIk2qIBiITdKlS/IGxFdwz0SXXRDUPZZjsswXxHEcrT74Zxi1rpeZ1fuAJjl7uXNZ158ZWd839wsaC7ufgBx3MtDGnBzXv/X0TP+rPu/prShP6KacHEt7oItpf0+m0B/oYhvf9xsaq3xf0XkK72cTeE7OpLsiJ0VJJh8FXSwCTjKkAPRnyvnl9nNs7DPleBFxNT5Zzuz+zmVfH5HT73XVE5eXcdXwdVH1uapf5YRHXQHCUY4cdnF5vLPd8/qjnGirVCFPcja1Kmvp5Eyxp+fb5eTAEiIiUuC8gWiBEqhe5RTIjBIs99B8ncE0N0qWZn1m5DQCXLo5yknhAZWTM8XuZ7fLCfhS6dwIqqMKYkMhoJL2VU4nkBBV2G2NnACroq88AyNEVnc7QJlh0DYr7Ec5PXzZzpWTM8U+IieFiohTSIk2HmqeEXQqAqISiqSPxshpgYKnY6wYCC8l6UHx7BHXYpSTYJm4zzkT7VY5gh0UAILazEEIAWx5FL+X08OLcoRk5CRAz9MDIHOgJTLwzOxSCA/LUc5mBfhVR1f66U5ZWNg1OQFS4o4vG3UAYGAC650p59H2vRyao9AoRjknLvlRjhyfSpmbamca5VBXsZ1Muv2cCXZNzg7oiNgCDqMPDU0xQh52ks7k1FjDi0Y5rTFGtIdPB+Bwerfqgdw89u1bee6hcXIm2OMPulgCBIeuFljISGnJKAIagJpaf304kyMFoGiUQyHSiA4CJUkfWlJh7pJrBB1VKEc5gx5ILp2cafZAl9thTDREGqu5h4QYDHxgLs/kUAk0JzmNgOcD2YYMtaVAZlDlHjwBJKOcBl66wlrS5b67/5q0sWtyKFFppquIR91ukZUJD+R+vp5vJUPROZ2SWrORVitiHnpvlpfzteZVXB4v4nzQhlmjFmHMug46ZlK8oujcd6tJZum/dTk5tvf4m6zPybGxKZzscnJszMlxfV057gS7jU1BjtvPsTEnx2X9CXYn52s1gf2cv+zauwoCMRCGUezsFJ9UZC18Wl/FS+8UgQ3/xHOqsPXHkgmjnEgNyrHBHqlBOabySMph2RuychJ1mMqVk0g5rFuODfZEHcrxnpNIOeyxwf6Y5amcdqr3nPttm6T489lgD1WWs10nKcoxW4VSDoMb7MphbLZSDsrhp78sxwZ7og7leM9JpBxG93OUw6rvOcqJ1KAcG+yRGpRjKo+kHJa9ISsnUYepvH85p8PH5X06fk/nvT9W5pfzYtdufpoGAziOzyzBLCbq1cSLGj3qCfSgUTl4UYyGgweDR6OJh1/bA8SttE/30kG2bu3ahWxsGYRtWdYxtgQQlhAgBA6cuEEC3PBgQgj/gR1FKJGDHkhH4XNs0suTb/q89CGF3JxUwikWh2DBpU2By3Labjz58qn7c9dtuumB2+1+Rjc9dRvO8GFXd8+r+x9uXnVZ2VdO+od33l8BhpOwqAIQp2Cxret6ol/Xi/9TjgNvsD96+JKmb3+n7NHZ4aE9b60jZ1s5aqgPGA7vY1bBsVIIpxnNXp7nfPN8XF6n7DPWuel55bKwq5wMMwCAQKr5dAnY14fKKSRzjK4LjTKAePruVOpEOQEOhl/iZJWLzkVLAEg9n68CJJ7PxR1ezrsuap2y28zY+x7XGWm796/lYHQ3A8O05o9OI8mu8aMakgobjab4QWAlHOXlvRPlVHIABpherxYMzNbkEqBEdpSQjqy8WAyJDi6n/W33GNUiXn956LKw4zyn18eO1AmwoACYLAMisw0xBMAoR0jUgcISsZZTD6cAvQae6QNIJIACMwxMs6WJKNDohYWzbrDfeezZoFrFWAf93BxA28oBGvmwpprlgHDxKUY8KmecIX+tc0iiDCJL4FkBQKwC3sdxnMhMLgSnBAfvrW7QH+2fqCyW6fvtLoON5QCZCG+WkwwGRxSmcVROPHHKCnmngkJYAK/BwPuhhP1NhdSWHBpSnVrOFbqjZaYqU6fncZvLZMcN9pIIQ0wxywnGAMIelyOyp5TDMZmhPMCHSfPNQaz58EfSl3NqOW82Wywcitro+Ooy2bG3+slyAIlksRADUmwV6Gt+c1hyUI7KFgAxZl3nGGre0DjAMyKAiBd1ZhhQ9cyKCgQmHFpOD9WKXr+wrxws+fjFWiIFKVKOI6ZNF/1sAyobratGOUjLUta3ipPlSIwGgI+MStV+WQXR/GVJGyGV/j5JzjqznGtUa3LbWI5anpvIbwNCYHAPmWIlPZDmgPJILBMvAljpX1oWcGivYb7CLAPgd+NzE1slAIJ3cKmYQmatptSJE2+wP/r6nmpR3bdch87DH895WThYBl2YM+QP12eoFrXpaT835eyvsgVcqHJ+s2vGKg1DURjGResiOApu4iuom3ZxEUV09wHcTn5w6yYhQ7dOWYxDn8AphUD2DEmGBiopuARaSHCp7dDJE9JCgx2SUkqutx+0HO5PSIaPk+Tm1JQ+VZXe/gVfoRjzOW/v2bfRj1dZzKlXt+Wk2zqz+5U8M4HCmHOkfFN1aR/UZTNHmAn2iyq3nLTp1CQzR5i38usBrUanZDA0hquc5Vm2niOMObdUEL3ZjIja06YZEvmOB69rzFYXmAd/CdClVbgX5AlZNnOu2lQQHWAhXCAmsjRABTDOVucsBOsz51GQt3LZzHmigmSOxMCIaxsti/wJVH3RnFywNnNutuZUkdpDqZ4zVDHhA4xMF99zw0VzcgGRlThB4hPjJ87IyswJkyAYd6gEgzu5zBFkgn1HKWNObMLTuUzQynWijHzAdYoaE0UqgIaZmmO1wNg6FedF2ZPKHEH2cy6PqYQ52kyTLuwl5uSDCHAiw4Yakg0zDl2wOVxOfMtDUqbnKLWtOdXj9KyMOcyUGAfTJebkgwAa/w+BH/7FRJ0Gm+MDEdEIJhXnU1nf1tjuydacNXHeL2OO57IIXLpLe04+sOEQ08LIAPx0gc3hUtW0BlQqTk853Mx+zpeyKf7DBPsve3fW2kQUxQH8qCnRcQaXTJww0SRI1Cw+COlLqebB7ckP4Me46RUt2FhttY3aurRa3FuhtYi74NJY3BCFCi4P9kX0SXFDfXDBR8/tRKOpHRMdkjuZ+yfLZaYUCj9m7jk9baatL0VOb//Y3Sf1Jlc7vRgqkJM/gVCeGICYnH5cfTXkPHnAUsIE4lDDIgAQn8bIWRpKk5MapnR07B70hvmgmeFf5fx24gl9iKuhNvoFD77O3a1eG1+N+ErIsqlCDn9p2JkqNoaRT2OblhEU8ugzdov7D+JqGJMykj/Ry76w/wFeo4a66egQXo7wItT/kH59it/jQaqETAErJ9i5T7XKGXpIM09TT28YJfcwHjVi1Nn5E2yLTDPpsW7yF7a7oVfZxqc3TdNGhVaqHMd8vlX1yRkaHR1md6LRUdwk978ZuXrjwSN21IjR3MufwLzD1ZNhtuoduTrS+3mU1eLDeHCEHRRyHCOnYlk421FybDLBvvZgivs0THKUHJv0c3j9exkhh/c4TA7O53AfIYdHOXbo59hEzmp+/vOJkMNimwl2O9RWc2c4So6oyi3LFHC4nICuuSIwcVSdPf4SIafqd8jj5MRkfyQkm9BRAuCRwDxCTvVX5ePkJEP4ooYBgj4FV3GIB3AdYEt30BcEcMcNOYrPZHpSyHGcHIUqxiK8JCon4hCVkt5oKJmMAkR1ObpERTbs4daSCa8C5cqaVynus3Smo+QUTrDHvDlBSwLgrguDhmRkfHoDoCWCEEvk5Pg1AFc9mEX0c6paTmE/JyIb754EvqgaaGEALQRQ5wGNQZHjhpy62nBYT8BEEXIcJ0ehAWAJ1TFGXtBiALUqgBQGzQPs2mPI0WpDoVAYJoyQ858T7NynUA4k/MyNHluCbzXab3JqEZYXDDkhydg3TxAhp+r7OeMm2COyS9W9CkSjHl2O/CZH1j0JV06OIutqtHz7nAVm/zxn+fpyRcjJZ/yPq/ilsALgDkmuAIAHnyp7+kBT69EP+FR84JsuqWCW8lXlDevKFLM5ejHBPnG0GFQs5nJImbLORI6YYBdyOJBjh9qqGn7jKeQUESGHXzligp3HrD3IvxyHdwI5zfSUkMNZipET9JRcgAs5VT+fU4wcXYokSq2rhJxq7+cUIycZAN0PlQxOsAs5nKWYCXapPvwPoziOq63EBHth3DU0GodAPRQbl9WJ2UKO4yfYxyUhqXIAamqgyNTQjRaHOk2OHXbIf5cTSQKoXp9XKVrOVmJxHCfHDlX53+WoCXzxUxcIOUJOSXKCXkkNJevkel8F5ax5xb8ch0+w/yFxv1QfAJ8rAn9F5mPRn22wKidzcv6jn3PlcO6bNB8+QQqyoSO/vn2Ao6rcDnImg4VZuYKF0iarQv9fzgF601j00U5SkLM0v968Q8ipnJzFPcTaWCGnY9sWgmnJdNtHji0n2KtOzkCmkWCyTZuYnMZb1zuPEEz7y65sD8VFz9auwRZDzobOA9kWHuTYoZ8zb7Yt5Cz48M9yHg+cIZjWe8dRzvzujdk7mXbc/qSfZY83UaTUtvv03qZDTM7J9P1jrc+EnOLSMMkWchp2/rucDXQ7XmLa9qGcSxTRkL795FAH2/1coIR0vyVkX/oYk3O3iZAjjWZyxAR7kXJ0SQorUESU5CoWum2TRTmTtU4OufCNkK4ugnJOdxBMDz10lp5lextKttNLzc3N+/uYnPZ05xE++jkmE+zcfGKIqRxZjbnkUDEtnIFGa3N5r4VyLmdaTqZ7mJyuO3gEtTzfk2aLE5Tsoa0sz5gccqqV7m/nQY4dPt/KXI4CEE5CMIjrOLiD4HOXqfnXvM1COVs6dg22Eibn41WCuUJbemgzLgYpwcWvtdXRvm4hxyo5UfDrAIoXwnXeqKzaUA7ZeqHp7picPXQDHtrdSva1ZXFxhmKx/pYROsvkNLZjeZVu4X2CnRM5phPscszn96o/5HjSCni0yshZe/B/5ByhmRYmB5/bjp0baLtGyMbMvXN9++kWsjkzeHF+x3Ym59jeXY3vd/NQW9lBjmk/R9YScgR+yonim1wuOVb1c+5eZLeiLL7cxrJpS/bO+YFmgrly50zn0a4thFzeff4xHtkzSMi9TTvuHRVyrJCjuL2qISeAciQAt+3kEGLDadJZc2wvB2JyHNQoQEjI4aUTaBM5UFsLwSV+f6KicsQEO39yTCfY/UGAuCsIAb1G8YNPRTn1dqutMFU2wc6JnO/s3V9LU2EcB/CK/iFWUElRVLIiogy86CaiLsoufBXRO/jSc3EG87Sds/ZPtnO2tY2xnY1N2MaYbm7gFgoyRfJiV72AvNMLIcK7Ljt/1MzK1DPdebbzBacHHvHms3meh+/2O+gThbrzHIDCTqApx5TTvXfIphwjyqFhV27KMeV0tRyzwW44OY/PUyGnx85zaJBz6oQph2I5P+w4cCQ/Dy3TdUgfeSzGTTm7Qq2cs3f3KYedwb7iSWE7PrIlR2DUC09dWWDK2RGDy3lwbo/znPbKmQ7ukrPrQl5wMDmHbLDfuX7McuQGexfKedJ/85x+OcVmsRAWEqmCRVE0E4y1knOItb74ACkAOQV7YvKjOBnDSmE+kFKwFJfDqzEAs2VVzlxJW/DBDjnrniPcW10g164baVd+bHnZ1gb7E0JkO3rlMGw1u+D9Hl1a8OYAW9T/NcsK/laWbMDjhhx/MBFwi4EY78oujrM+Gcv0/GyGtQJOQZXjGNcWTGWguGKOVA6R7RxSDgMt3Oa3/cihcqbeabKfvHh0wAb7bjk+sgo0iQ0Q/ICDxIAoYYDx5LYc7UsKcECoCR+ZB5AZ2yFHW1DzJoDJKnTIIfvK4N/kLC4AKMWBmDcGwDINJUtxbFigJi8iHprBpNM5zyHRGnNWf3CAZQlyqpFukqPjNefku4PIWQPmSBmIKRVHP4CcC0BraZccIDVXiS7AR+oAaoTfLYf7WAIXEtCZ15yEiwHvsgOZpRwAkS0DkNj3ihg14x5gPmivAmEBcUsC3A8REP0NAGM9Jkd1o18OD9hJAmAIpypAIAvAtlsOP+6dmp9Iwkck7Q0gu+VgdQp5L48O3edYpzDZAvhQMcQDYsYC4HtmWw4ThSLHKgKc7IODHCcDsfYpRbuc+5f17K3aLyeLGIkAKbIpp/VRvhIVOVYAFRL5Q46dpOI5HQ12nXur8WUXDwgZWBqAOBOKgHPNbcvJlFQ5kbGwB6iHoWRVgOgRxveSIzfYDR+95zntlyORPJBW5IQq6i0DIn5FThJAcgK/5GgLgKrNXe7ceY6PVXBUY/BMA+Jaq4B6prwlJ+LiVDlINKacK+kklNiashx8S/9bTq/N1GuTHDgnFnMuBcW3KStT8y4K1YmkvMz5oWJjKzvkaAsAgUTROTmYKAIMG41GWZ8sZ2UC0+VtOc0ANDly1sPlKaiXM4qc1CfJlHPQfk7GjmKYA1JbD8ECgOAygIr8EJmdSjKOGMBYslauJIrWRglSRlqdDm8ouDwoqr+jLQAi5HOn5Xx1KPS/y3LwfjaKLTmcqwg5VaZeByphLhQDIIUiihzIr0KmnM52ApshvsNyOH9KJcHJcoKsoMqp1uv1UhhAqTAGyZUuOedQDjXzsy4PVDnIksgeDXbDh3o5Gy02r6PBrl9OOoGUoP1UtErgCjyKNaw45NR8AALNCOBbd9gBpEqrDQWZVVIuHAma91bUN9jTmVj3NLu4ouRjynTIMRvsRpLDDvcPDA297jU5ZoNdt5wTWnpNDg2dwG6Q8+7Y8tKUQ5scs8FuODkGb7D36Ew9GuQYtU1KvljE0VFTjinnwHKeDV65evV2j8o5e9eUc1g5A+YEWIPLuXWZCjld2WCnW45R91YD9E2AfX7elNMhOVyR8VhL6UVHwPaV0CfH/Az245cj5WcXRt/42f6hkddPn/TdOH36zPWelkPDfKsOy+GYtOWNu3+k7+bVBxfO0T2v3JRzXHK4Ndvo8NDTwQd3umPS/f3LPSXn4qXOyJFmZTU3rj46sa/IDXbjyzGnMR65HG7t7avhp1f2VtPT5zmmnL+Er4SHh06rN8CmnD36OYbP8cqR0qPDI4PKsDVTDu0z9dokJ7OC/4XPq/+j7hzqD+j+DPZGMpl0zGFHpuumHB1pU4P9zkj/8BvLel7i8LckmHrujXtkj1n5R763ikebk1Uyj19xCpR+BrtB0rYnyqOHg30j/eyrUfHtciPoiTE+u6/syTcWk6Ov2KFrz9Q3UXdQTg5AheR3yjHueU5PydFy7vbDe8/6nr4eGRoaGBhQjoT7bl65rqHpvBzOu4yCD0CwosnharlcBZuDyg0kh4Y7ZFkODWmPnDJhEAoCWAhrcsL+1bB7cnNQuYHk0LAr7xk58RWmMFbFb3LyRAIabFEbVG7K6UY5uhvscXfI7bYlfpfjGLPb7R4yowwqp6fBbpDIDXYaovs8J56DTASbcpKanLDXqSSvDSo30K6cBjmnTlCRdshBzsUDIQFAVZPzZQxqtEHlphxTzj/kREJJIGoBIkSTUyOSfDEZ2RxUbhw5coPd8OklObCSNQS8rYIrGlflcFFnSYhmOW1QuYFec2g4z5Eb7DREd4P9cwNyAk1wQVGs5WcBmwfgbeNLhcTmoHJTzgFCzd6KhmbX8/OmHOPlJ3v3joIwFAVh+IBFTGNvaSGuwEchCBY2PkAsLEQXoNW5iEXWk024AdcQwd7ONWh6SaVhhjvfGv4i9zAQhnJ+u2CHp3IQy2F4W6kclaNyvtKC/T/KBTsDLdjhxHLPUTkqJ4ZyGPY5KgexHIZ7Dkk5s7vKAfNZsDNgeFtpwY6IoRwt2BGFS1TlMHwhk5STEpSz1A0Z0PBRVc65JkHl0JWzqtrnTLO6eIVi3IyqHJIFu60d3TPEVQ7JPccaju4SEpUDaOPoBl0zLdjxHHLHlqfbuO45JAt2m+wc2zR04iqH5G1lvVA4tPyUqBxE/ZA5tLmZFuyQRq2rI9ub6RIIqR1eDmxtKgfV5Oi4boukpnJg/hhCsmAvHRxWkY7MLK5/B7Pcc0pLRzVI+yoH2Ju9+2dpGAjjOP47Ak2zWOMgCF2KaLdmMh1TXYMk0cHBP5tFx3tG34KvwP3eRN9AXsMFuvs2vDSFKjg2eg93nyVwY/iS5I4HsqgsPQ6saYS9io99OXv1klqZTkMZthz6px6rcmJaSwvlInGwHCYT7FsFre176lQLAO6Vw2dXviHItheWyttwfDnWG80/pE3q8Ss6rn0hcysHYZlLa+iUsiN0XNuVsyvHuNWNtIF6i6IZNnw5PGSU2tDOFWUDdBwsh8sE+w9JMaf7eiX/j9Iyf8Tu3jlYDqvznJ1kdknLSkqtV0r+LdV8vqfRuMR3vhxGLoDy6ZlaN0EQnFPrIDAe+ly8Xprr2d0EfRqc+nJ6NoynhRAnABLRmsKYCKO3xfBwGOJXbp3ncJlgdwyDcr7YtZvVxKEwAMO7uZBewlzZC2ehUDM1UZNYjBqNQfwjClaKpqmBKlQQlVIXruYCnN3MolBmO8vxp7aVrrI05t2Fj+weEs7hO8mzVfgLIscosus5z1uNssKiyr5YjqM2k0hOaPv2PYAcpwKAord4KysUtBH77gQfebCZRHJCW6CzlSayACPV+iwH+CrnVo3+VuEukBw6aYDXKfzqTY3mXs6kD2i/S4+2gFq+29XAdsRgoOwmsXR19QAsGl53+4pc7DrFSM7JF0xOMgPcSg8omfbiWsru5CSvYSytH9sJAfXOrKvPsEuSYdS2E08tPf9VB5B4NdOu0GiZi56qcVxYNtjPqGByGkKDpQkNQwZzdpBTy82AoYCXGMwroKmwm5hr4EbKksrJkKhzb8Akdkb3OSEtmBxcByoDgObEq8wPcu7EHZAUgGLH/+X2cvaTPwDmmNQF4Dwxz4yUs7oJDGkB93P65dqVyIJyrbvTTv0gpygB3AiY6ZWC+0lOXMgAqRmpFmC0qa1NtWpFck6+YDeBNd0bDIFV2YLCuxxbXAE9gS088I++OTZgSWNS+b0cwE44kZyTL5gcnEKmBTxVwcq9y7HUR8AVjFQZSls5kryTo5TTgC+uDnKUpQXp+/BusJ9NAeVoQrUAX1/khx9/Ky71pedUhKzoju90cmBJhm9tJ3n1Mv5SXnGQg/sjnjdb0an85Asoh3oPQO4XCvFxn9uSTLEHjJ9co7l5sOduMjYH+u1CczeZXAynPnCpAfEFzZ/Dki9Hck69aIP9P3t3rJJQGMZh/JuksxyxzdFB2gyCUFzSKYfAhlqaolrjg48aupJzRV6DS6B3IW51BRFC8ryn53cNz+D39k/V3mWX5RBZjtpbTsgFe+tFKMd7DpHlyAW7fuUf7ZBdsCMFKMe3FZLl6MAFu+WorW8ryyGyHP1FOeXtSFywh/NjOfn9WDbec6KJ8IshlkP0vc/BsxykAL+pZzlIAcpxwY4UoBxf5UiWo9Z+QrYcogivcsshshy1txwX7EQRyvGeQ2Q5OnjBjmc5SAHuOS7YkQKU49sKKUI5yyScy4tM15SzJJxRWWW4VRkl4QzKLsOtiysLoJOyz3C7sTdkoPPykekekoCGi0w3SwJa3mW4lySkaYabJiHdZrbPmySm10zWVFdJTNfrDLYt/SSmed1krKaeJ0ENyjZjbcsgiWpecf92dT9JwupU3Gug92O0bqF+SPaWA9dn7rsaF8h4s6fMs657SXSzR9zTfF2PO0l4vXqTUTaV4YTQGbLOOvsyNJwYTidlAbrrTCf+l1UY3QrzZTrP3nG+NqQAm6R7Qv6Ag+kPPNwZRsGQA+6ydwa0qXz/DmeRoynDKBh6QJCziNOjkv6DytPBjSyvIk770WUVQxSwC/ipFqVapTPJFoEAJxMQhICZoUAW7QT5rNyjHBQF2BlGwRAG7EIgghEE1EF8RTBTkoaC/upDfCcnALKaY4yakM00AAAAAElFTkSuQmCC" width="569" height="326" class="img_ev3q"></p><p>å›¾ 11 KCL å¼ºçº¦æŸæ ¡éªŒæ‰‹æ®µ</p><ul><li>KCL è¯­è¨€çš„ç±»å‹ç³»ç»Ÿè¢«è®¾è®¡ä¸ºé™æ€çš„ï¼Œç±»å‹å’Œå€¼å®šä¹‰åˆ†ç¦»ï¼Œæ”¯æŒç¼–è¯‘æ—¶ç±»å‹æ¨å¯¼å’Œç±»å‹æ£€æŸ¥ï¼Œé™æ€ç±»å‹ä¸ä»…ä»…å¯ä»¥æå‰åœ¨ç¼–è¯‘æ—¶åˆ†æå¤§éƒ¨åˆ†çš„ç±»å‹é”™è¯¯ï¼Œè¿˜å¯ä»¥é™ä½åç«¯è¿è¡Œæ—¶çš„åŠ¨æ€ç±»å‹æ£€æŸ¥çš„æ€§èƒ½æŸè€—ã€‚æ­¤å¤–ï¼ŒKCL Schema ç»“æ„çš„å±æ€§å¼ºåˆ¶ä¸ºéç©ºï¼Œå¯ä»¥æœ‰æ•ˆé¿å…é…ç½®é—æ¼ã€‚</li><li>å½“éœ€è¦å¯¼å‡ºçš„ KCL é…ç½®è¢«å£°æ˜ä¹‹åï¼Œå®ƒä»¬çš„ç±»å‹å’Œå€¼å‡ä¸èƒ½å‘ç”Ÿå˜åŒ–ï¼Œè¿™æ ·çš„é™æ€ç‰¹æ€§ä¿è¯äº†é…ç½®ä¸ä¼šè¢«éšæ„ç¯¡æ”¹ã€‚</li><li>KCL æ”¯æŒé€šè¿‡ç»“æ„ä½“å†…ç½®çš„æ ¡éªŒè§„åˆ™è¿›ä¸€æ­¥ä¿éšœç¨³å®šæ€§ã€‚æ¯”å¦‚å¯¹äºå¦‚å›¾ 12 æ‰€ç¤ºçš„ KCL ä»£ç ï¼Œï¼Œåœ¨ <code>App</code> ä¸­å®šä¹‰å¯¹ <code>containerPort</code>ã€<code>services</code>ã€<code>volumes</code> çš„æ ¡éªŒè§„åˆ™ï¼Œç›®å‰æ ¡éªŒè§„åˆ™åœ¨è¿è¡Œæ—¶æ‰§è¡Œåˆ¤æ–­ï¼Œåç»­ KCL ä¼šå°è¯•é€šè¿‡ç¼–è¯‘æ—¶çš„é™æ€åˆ†æå¯¹è§„åˆ™è¿›è¡Œåˆ¤æ–­ä»è€Œå‘ç°é—®é¢˜ã€‚</li></ul><p><img loading="lazy" src="/zh-CN/assets/images/12-kcl-app-schema-c8a782c65f4e0ea0b2e05df754dd03f6.png" width="1364" height="588" class="img_ev3q"></p><p>å›¾ 12 å¸¦è§„åˆ™çº¦æŸçš„ KCL ä»£ç æ ¡éªŒ</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-åˆ†å—ç¼–å†™åŠé…ç½®åˆå¹¶">2.4 åˆ†å—ç¼–å†™åŠé…ç½®åˆå¹¶<a href="#24-åˆ†å—ç¼–å†™åŠé…ç½®åˆå¹¶" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>KCL æä¾›äº†é…ç½®åˆ†å—ç¼–å†™åŠè‡ªåŠ¨åˆå¹¶é…ç½®çš„èƒ½åŠ›ï¼Œå¹¶ä¸”æ”¯æŒå¹‚ç­‰åˆå¹¶ã€è¡¥ä¸åˆå¹¶å’Œå”¯ä¸€é…ç½®åˆå¹¶ç­‰ç­–ç•¥ã€‚å¹‚ç­‰åˆå¹¶ä¸­çš„å¤šä»½é…ç½®éœ€è¦æ»¡è¶³äº¤æ¢å¾‹ï¼Œå¹¶ä¸”éœ€è¦å¼€å‘äººå‘˜æ‰‹åŠ¨å¤„ç†åŸºç¡€é…ç½®å’Œä¸åŒç¯å¢ƒé…ç½®å†²çªã€‚ è¡¥ä¸åˆå¹¶ä½œä¸ºä¸€ä¸ªè¦†ç›–åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¦†ç›–ã€åˆ é™¤å’Œæ·»åŠ ã€‚å”¯ä¸€çš„é…ç½®è¦æ±‚é…ç½®å—æ˜¯å…¨å±€å”¯ä¸€çš„å¹¶ä¸”æœªä¿®æ”¹æˆ–ä»¥ä»»ä½•å½¢å¼é‡æ–°å®šä¹‰ã€‚ KCL é€šè¿‡å¤šç§åˆå¹¶ç­–ç•¥ç®€åŒ–äº†ç”¨æˆ·ä¾§çš„ååŒå¼€å‘ï¼Œå‡å°‘äº†é…ç½®ä¹‹é—´çš„è€¦åˆã€‚</p><p>å¦‚å›¾ 13 æ‰€ç¤ºï¼Œå¯¹äºå­˜åœ¨åŸºçº¿é…ç½®ã€å¤šç¯å¢ƒå’Œå¤šç§Ÿæˆ·çš„åº”ç”¨é…ç½®åœºæ™¯ï¼Œæœ‰ä¸€ä¸ªåŸºæœ¬é…ç½® base.kã€‚ å¼€å‘å’Œ SRE åˆ†åˆ«ç»´æŠ¤ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒçš„é…ç½® base.k å’Œ prod.kï¼Œä»–ä»¬çš„é…ç½®äº’ä¸å½±å“ï¼Œç”± KCL ç¼–è¯‘å™¨åˆå¹¶æˆä¸€ä¸ª prod ç¯å¢ƒçš„ç­‰æ•ˆé…ç½®ä»£ç ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/13-kcl-isolated-config-e7faa3b3f96a18e52a702cb39427931c.png" width="1638" height="842" class="img_ev3q"></p><p>å›¾ 13 å¤šç¯å¢ƒåœºæ™¯é…ç½®åˆ†å—ç¼–å†™å®ä¾‹</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-è‡ªåŠ¨åŒ–é›†æˆ">2.5 è‡ªåŠ¨åŒ–é›†æˆ<a href="#25-è‡ªåŠ¨åŒ–é›†æˆ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ KCL ä¸­æä¾›äº†å¾ˆå¤šè‡ªåŠ¨åŒ–ç›¸å…³çš„èƒ½åŠ›ï¼Œä¸»è¦åŒ…æ‹¬å·¥å…·å’Œå¤šè¯­è¨€ APIã€‚ é€šè¿‡ <code>package_identifier : key_identifier</code>çš„æ¨¡å¼æ”¯æŒå¯¹ä»»æ„é…ç½®é”®å€¼çš„ç´¢å¼•ï¼Œä»è€Œå®Œæˆå¯¹ä»»æ„é”®å€¼çš„å¢åˆ æ”¹æŸ¥ã€‚æ¯”å¦‚å›¾ 14 æ‰€ç¤ºä¿®æ”¹æŸä¸ªåº”ç”¨é…ç½®çš„é•œåƒå†…å®¹ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ä¿®æ”¹é•œåƒï¼Œä¿®æ”¹å‰åçš„ diff å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/14-kcl-image-update-80dc55f27d4f69507a7f00c20e7d62d8.png" width="1828" height="502" class="img_ev3q"></p><p>å›¾ 14 ä½¿ç”¨ KCL CLI/API è‡ªåŠ¨ä¿®æ”¹åº”ç”¨é…ç½®é•œåƒ</p><p>æ­¤å¤–ï¼Œå¯ä»¥åŸºäº KCL çš„è‡ªåŠ¨åŒ–èƒ½åŠ›å®ç°å¦‚å›¾ 15 æ‰€ç¤ºçš„ä¸€é•œäº¤ä»˜åŠè‡ªåŠ¨åŒ–è¿ç»´èƒ½åŠ›å¹¶é›†æˆåˆ° CI/CD å½“ä¸­ã€‚</p><p><img loading="lazy" src="/zh-CN/assets/images/15-kcl-automation-2eda1a821f8a1b7ef01e4d09891e595b.png" width="890" height="247" class="img_ev3q"></p><p>å›¾ 15 å…¸å‹ KCL è‡ªåŠ¨åŒ–é›†æˆé“¾è·¯</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‰kcl-ä¸å…¶ä»–å£°æ˜å¼é…ç½®çš„å¯¹æ¯”">ä¸‰ã€KCL ä¸å…¶ä»–å£°æ˜å¼é…ç½®çš„å¯¹æ¯”<a href="#ä¸‰kcl-ä¸å…¶ä»–å£°æ˜å¼é…ç½®çš„å¯¹æ¯”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-vs-jsonyaml">3.1 vs. JSON/YAML<a href="#31-vs-jsonyaml" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>YAML/JSON é…ç½®ç­‰é€‚åˆå°è§„æ¨¡çš„é…ç½®åœºæ™¯ï¼Œå¯¹äºå¤§è§„æ¨¡ä¸”éœ€è¦é¢‘ç¹ä¿®æ”¹çš„äº‘åŸç”Ÿé…ç½®åœºæ™¯ï¼Œæ¯”è¾ƒé€‚åˆ KCL æ¯”è¾ƒé€‚åˆï¼Œå…¶ä¸­æ¶‰åŠåˆ°ä¸»è¦å·®å¼‚æ˜¯é…ç½®æ•°æ®æŠ½è±¡ä¸å±•å¼€çš„å·®å¼‚ï¼š</p><ul><li>å¯¹äº JSON/YAML ç­‰é™æ€é…ç½®æ•°æ®å±•å¼€çš„å¥½å¤„æ˜¯ï¼šç®€å•ã€æ˜“è¯»ã€æ˜“äºå¤„ç†ï¼Œä½†æ˜¯éšç€é™æ€é…ç½®è§„æ¨¡çš„å¢åŠ ï¼Œå½“é…ç½®è§„æ¨¡è¾ƒå¤§æ—¶ï¼ŒJSON/YAML ç­‰æ–‡ä»¶ç»´æŠ¤å’Œé˜…è¯»é…ç½®å¾ˆå›°éš¾ï¼Œå› ä¸ºé‡è¦çš„é…ç½®ä¿¡æ¯è¢«<strong>æ·¹æ²¡åœ¨äº†å¤§é‡ä¸ç›¸å…³çš„é‡å¤ç»†èŠ‚</strong>ä¸­ã€‚</li><li>å¯¹äºä½¿ç”¨ KCL è¯­è¨€è¿›è¡Œé…ç½®æŠ½è±¡çš„å¥½å¤„æ˜¯ï¼šå¯¹äºé™æ€æ•°æ®ï¼ŒæŠ½è±¡ä¸€å±‚çš„å¥½å¤„è¿™æ„å‘³ç€æ•´ä½“ç³»ç»Ÿå…·æœ‰<strong>éƒ¨ç½²çš„çµæ´»æ€§</strong>ï¼Œä¸åŒçš„é…ç½®ç¯å¢ƒã€é…ç½®ç§Ÿæˆ·ã€è¿è¡Œæ—¶å¯èƒ½ä¼šå¯¹é™æ€æ•°æ®å…·æœ‰ä¸åŒçš„è¦æ±‚ï¼Œç”šè‡³ä¸åŒçš„ç»„ç»‡å¯èƒ½æœ‰ä¸åŒçš„è§„èŒƒå’Œäº§å“è¦æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ KCL å°†æœ€éœ€è¦ã€æœ€å¸¸ä¿®æ”¹çš„é…ç½®æš´éœ²ç»™ç”¨æˆ·ï¼Œå¯¹å·®å¼‚åŒ–çš„é…ç½®è¿›è¡ŒæŠ½è±¡ï¼ŒæŠ½è±¡çš„å¥½å¤„æ˜¯å¯ä»¥æ”¯æŒä¸åŒçš„é…ç½®éœ€æ±‚ã€‚å¹¶ä¸”å€ŸåŠ© KCL è¯­è¨€çº§åˆ«çš„è‡ªåŠ¨åŒ–é›†æˆèƒ½åŠ›ï¼Œè¿˜å¯ä»¥å¾ˆå¥½åœ°æ”¯æŒä¸åŒçš„è¯­è¨€ï¼Œä¸åŒçš„é…ç½® UI ç­‰ã€‚</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-vs-kustomize">3.2 vs. Kustomize<a href="#32-vs-kustomize" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>Kustomize çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯å…¶ Overlay èƒ½åŠ›ï¼Œå¹¶ Kustomize æ”¯æŒæ–‡ä»¶çº§çš„è¦†ç›–ï¼Œä½†æ˜¯å­˜åœ¨ä¼šå­˜åœ¨å¤šä¸ªè¦†ç›–é“¾æ¡çš„é—®é¢˜ï¼Œå› ä¸ºæ‰¾åˆ°å…·ä½“å­—æ®µå€¼çš„å£°æ˜å¹¶ä¸èƒ½ä¿è¯è¿™æ˜¯æœ€ç»ˆå€¼ï¼Œå› ä¸ºå…¶ä»–åœ°æ–¹å‡ºç°çš„å¦ä¸€ä¸ªå…·ä½“å€¼å¯ä»¥è¦†ç›–å®ƒï¼Œå¯¹äºå¤æ‚çš„åœºæ™¯ï¼ŒKustomize æ–‡ä»¶çš„ç»§æ‰¿é“¾æ£€ç´¢å¾€å¾€ä¸å¦‚ KCL ä»£ç ç»§æ‰¿é“¾æ£€ç´¢æ–¹ä¾¿ï¼Œéœ€è¦ä»”ç»†è€ƒè™‘æŒ‡å®šçš„é…ç½®æ–‡ä»¶è¦†ç›–é¡ºåºã€‚æ­¤å¤–ï¼ŒKustomize ä¸èƒ½è§£å†³ YAML é…ç½®ç¼–å†™ã€é…ç½®çº¦æŸæ ¡éªŒå’Œæ¨¡å‹æŠ½è±¡ä¸å¼€å‘ç­‰é—®é¢˜ï¼Œè¾ƒä¸ºé€‚ç”¨äºç®€å•çš„é…ç½®åœºæ™¯ï¼Œå½“é…ç½®ç»„ä»¶å¢å¤šæ—¶ï¼Œå¯¹äºé…ç½®çš„ä¿®æ”¹ä»ç„¶ä¼šé™·å…¥å¤§é‡é‡å¤ä¸ç›¸å…³çš„é…ç½®ç»†èŠ‚ä¸­ï¼Œå¹¶ä¸”åœ¨ IDE ä¸­ä¸èƒ½å¾ˆå¥½åœ°æ˜¾ç¤ºé…ç½®ä¹‹é—´çš„ä¾èµ–å’Œè¦†ç›–å…³ç³»æƒ…å†µï¼Œåªèƒ½é€šè¿‡æœç´¢/æ›¿æ¢ç­‰æ‰¹é‡ä¿®æ”¹é…ç½®ã€‚</p><p>åœ¨ KCL ä¸­ï¼Œé…ç½®åˆå¹¶çš„æ“ä½œå¯ä»¥ç»†ç²’åº¦åˆ°ä»£ç ä¸­æ¯ä¸€ä¸ªé…ç½®å­—æ®µï¼Œå¹¶ä¸”å¯ä»¥çµæ´»çš„è®¾ç½®åˆå¹¶ç­–ç•¥ï¼Œå¹¶ä¸å±€é™äºèµ„æºæ•´ä½“ï¼Œå¹¶ä¸”é€šè¿‡ KCL çš„ import å¯ä»¥é™æ€åˆ†æå‡ºé…ç½®ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-vs-hcl">3.3 vs. HCL<a href="#33-vs-hcl" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="331-åŠŸèƒ½å¯¹æ¯”">3.3.1 åŠŸèƒ½å¯¹æ¯”<a href="#331-åŠŸèƒ½å¯¹æ¯”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><table><thead><tr><th></th><th>HCL</th><th>KCL</th></tr></thead><tbody><tr><td>å»ºæ¨¡èƒ½åŠ›</td><td>é€šè¿‡ Terraform Go Provider Schema å®šä¹‰ï¼Œåœ¨ç”¨æˆ·ç•Œé¢ä¸ç›´æ¥æ„ŸçŸ¥ï¼Œæ­¤å¤–ç¼–å†™å¤æ‚çš„ object å’Œå¿…é€‰/å¯é€‰å­—æ®µå®šä¹‰æ—¶ç”¨æˆ·ç•Œé¢è¾ƒä¸ºç¹ç</td><td>é€šè¿‡ KCL Schema è¿›è¡Œå»ºæ¨¡ï¼Œé€šè¿‡è¯­è¨€çº§åˆ«çš„å·¥ç¨‹å’Œéƒ¨åˆ†é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œå¯ä»¥å®ç°è¾ƒé«˜çš„æ¨¡å‹æŠ½è±¡</td></tr><tr><td>çº¦æŸèƒ½åŠ›</td><td>é€šè¿‡ Variable çš„ condition å­—æ®µå¯¹åŠ¨æ€å‚æ•°è¿›è¡Œçº¦æŸï¼ŒResource æœ¬èº«çš„çº¦æŸéœ€è¦é€šè¿‡ Go Provider Schema å®šä¹‰æˆ–è€…ç»“åˆ Sentinel/Rego ç­‰ç­–ç•¥è¯­è¨€å®Œæˆï¼Œè¯­è¨€æœ¬èº«çš„å®Œæ•´èƒ½åŠ›ä¸èƒ½è‡ªé—­ç¯ï¼Œä¸”å®ç°æ–¹å¼ä¸ç»Ÿä¸€</td><td>ä»¥ Schema ä¸ºæ ¸å¿ƒï¼Œåœ¨è¿›è¡Œå»ºæ¨¡çš„åŒæ—¶å®šä¹‰å…¶çº¦æŸï¼Œåœ¨ KCL å†…éƒ¨è‡ªé—­ç¯å¹¶ä¸€ç»Ÿä¸€æ–¹å¼å®ç°ï¼Œæ”¯æŒå¤šç§çº¦æŸå‡½æ•°ç¼–å†™ï¼Œæ”¯æŒå¯é€‰/å¿…é€‰å­—æ®µå®šä¹‰</td></tr><tr><td>æ‰©å±•æ€§</td><td>Terraform HCL é€šè¿‡åˆ†æ–‡ä»¶è¿›è¡Œ Override, æ¨¡å¼æ¯”è¾ƒå›ºå®šï¼Œèƒ½åŠ›å—é™ã€‚</td><td>KCL å¯ä»¥è‡ªå®šä¹‰é…ç½®åˆ†å—ç¼–å†™æ–¹å¼å’Œå¤šç§åˆå¹¶ç­–ç•¥ï¼Œå¯ä»¥æ»¡è¶³å¤æ‚çš„å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒé…ç½®åœºæ™¯éœ€æ±‚</td></tr><tr><td>è¯­è¨€åŒ–ç¼–å†™èƒ½åŠ›</td><td>ç¼–å†™å¤æ‚çš„å¯¹è±¡å®šä¹‰å’Œå¿…é€‰/å¯é€‰å­—æ®µå®šä¹‰æ—¶ç”¨æˆ·ç•Œé¢è¾ƒä¸ºç¹ç</td><td>å¤æ‚çš„ç»“æ„å®šä¹‰ã€çº¦æŸåœºæ™¯ç¼–å†™ç®€å•ï¼Œä¸å€ŸåŠ©å…¶ä»–å¤–å›´ GPL æˆ–å·¥å…·ï¼Œè¯­è¨€ç¼–å†™è‡ªé—­ç¯</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="332-ä¸¾ä¾‹">3.3.2 ä¸¾ä¾‹<a href="#332-ä¸¾ä¾‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p><strong>Terraform HCL Variable çº¦æŸæ ¡éªŒç¼–å†™ vs. KCL Schema å£°æ˜å¼çº¦æŸæ ¡éªŒç¼–å†™</strong></p><ul><li>HCL</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">"subnet_delegations"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name               </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service_delegation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      actions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> d </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> n </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> d </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service_delegation </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> null ? true </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alltrue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> n </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service_delegation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema SubnetDelegation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service_delegation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ServiceDelegation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema ServiceDelegation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    actions?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä½¿ç”¨ ? æ ‡è®°å¯é€‰å±æ€§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subnet_delegations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">SubnetDelegation</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"subnet_delegations"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–ï¼ŒKCL è¿˜å¯ä»¥åƒé«˜çº§è¯­è¨€ä¸€æ ·å†™ç±»å‹ï¼Œå†™ç»§æ‰¿ï¼Œå†™å†…ç½®çš„çº¦æŸï¼Œè¿™äº›åŠŸèƒ½æ˜¯ HCL æ‰€ä¸å…·å¤‡çš„</p><p><strong>Terraform HCL å‡½æ•° vs. KCL Lambda å‡½æ•°ç¼–å†™</strong></p><ul><li><p>æ­£å¦‚ <a href="https://www.terraform.io/language/functions" target="_blank" rel="noopener noreferrer">https://www.terraform.io/language/functions</a> æ–‡æ¡£å’Œ <a href="https://github.com/hashicorp/terraform/issues/27696" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform/issues/27696</a> ä¸­å±•ç¤ºçš„é‚£æ ·ï¼ŒTerraform HCL æä¾›äº†ä¸°å¯Œçš„å†…ç½®å‡½æ•°ç”¨äºæä¾›ï¼Œä½†æ˜¯å¹¶ä¸æ”¯æŒç”¨æˆ·åœ¨ Terraform ä¸­ä½¿ç”¨ HCL è‡ªå®šä¹‰å‡½æ•° (æˆ–è€…éœ€è¦ç¼–å†™å¤æ‚çš„ Go Provider æ¥æ¨¡æ‹Ÿä¸€ä¸ªç”¨æˆ·çš„æœ¬åœ°è‡ªå®šä¹‰å‡½æ•°)ï¼›è€Œ KCL ä¸ä»…æ”¯æŒç”¨æˆ·ä½¿ç”¨ lambda å…³é”®å­—ç›´æ¥åœ¨ KCL ä»£ç ä¸­è‡ªå®šä¹‰å‡½æ•°ï¼Œè¿˜æ”¯æŒä½¿ç”¨ Python, Go ç­‰è¯­è¨€ä¸º KCL <a href="https://kcl-lang.io/docs/reference/plugin/overview" target="_blank" rel="noopener noreferrer">ç¼–å†™æ’ä»¶å‡½æ•°</a></p></li><li><p>KCL è‡ªå®šä¹‰å®šä¹‰å‡½æ•°å¹¶è°ƒç”¨</p></li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">add_func </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">two </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> add_func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>HCL åˆ é™¤ null å€¼ä¸ KCL ä½¿ç”¨ -n ç¼–è¯‘å‚æ•°åˆ é™¤ null å€¼</strong></p><ul><li>HCL</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable </span><span class="token string" style="color:#e3116c">"conf"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      default     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">type</span><span class="token plain">        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      inputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      args    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      command </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      env </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        limits </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cpu    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        requests </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cpu    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          memory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      script     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      workingDir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">locals</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  conf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    defaults</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resources </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> steps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> step </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> var</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">steps </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> resources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> step </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> v </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> null </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL (ç¼–è¯‘å‚æ•°æ·»åŠ  -n å¿½ç•¥ null å€¼)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">schema Param</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Step</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    env?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">:</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resources?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"limits"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"requests"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Resource</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    script?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workingDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema K8sManifest</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Param</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    results?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Step</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> K8sManifest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"conf"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç»¼ä¸Šå¯ä»¥çœ‹å‡ºï¼Œåœ¨ KCL ä¸­ï¼Œé€šè¿‡ Schema æ¥å£°æ˜æ–¹å¼å®šä¹‰å…¶ç±»å‹å’Œçº¦æŸï¼Œå¯ä»¥çœ‹å‡ºç›¸æ¯”äº Terraform HCL, åœ¨å®ç°ç›¸åŒåŠŸèƒ½çš„æƒ…å†µä¸‹ï¼ŒKCL çš„çº¦æŸå¯ä»¥ç¼–å†™çš„æ›´åŠ ç®€å• (ä¸éœ€è¦åƒ Terraform é‚£æ ·é‡å¤åœ°ä¹¦å†™ validation å’Œ condition å­—æ®µ)ï¼Œå¹¶ä¸”é¢å¤–æä¾›äº†å­—æ®µè®¾ç½®ä¸ºå¯é€‰çš„èƒ½åŠ› (<code>?</code>è¿ç®—ç¬¦ï¼Œä¸åƒ Terraform é…ç½®å­—æ®µé»˜è®¤å¯ç©ºï¼ŒKCL Schema å­—æ®µé»˜è®¤å¿…é€‰)ï¼Œç»“æ„æ›´åŠ åˆ†æ˜ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä»£ç å±‚é¢ç›´æ¥è·å¾—ç±»å‹æ£€æŸ¥å’Œçº¦æŸæ ¡éªŒçš„èƒ½åŠ›ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-vs-cue">3.4 vs. CUE<a href="#34-vs-cue" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="341-åŠŸèƒ½å¯¹æ¯”">3.4.1 åŠŸèƒ½å¯¹æ¯”<a href="#341-åŠŸèƒ½å¯¹æ¯”" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><table><thead><tr><th></th><th>CUE</th><th>KCL</th></tr></thead><tbody><tr><td>å»ºæ¨¡èƒ½åŠ›</td><td>é€šè¿‡ Struct è¿›è¡Œå»ºæ¨¡ï¼Œæ— ç»§æ‰¿ç­‰ç‰¹æ€§ï¼Œå½“æ¨¡å‹å®šä¹‰ä¹‹é—´æ— å†²çªæ—¶å¯ä»¥å®ç°è¾ƒé«˜çš„æŠ½è±¡ã€‚ç”±äº CUE åœ¨è¿è¡Œæ—¶è¿›è¡Œæ‰€æœ‰çš„çº¦æŸæ£€æŸ¥ï¼Œåœ¨å¤§è§„æ¨¡å»ºæ¨¡åœºæ™¯å¯èƒ½å­˜åœ¨æ€§èƒ½ç“¶é¢ˆ</td><td>é€šè¿‡ KCL Schema è¿›è¡Œå»ºæ¨¡ï¼Œé€šè¿‡è¯­è¨€çº§åˆ«çš„å·¥ç¨‹å’Œéƒ¨åˆ†é¢å‘å¯¹è±¡ç‰¹æ€§ï¼ˆå¦‚å•ç»§æ‰¿ï¼‰ï¼Œå¯ä»¥å®ç°è¾ƒé«˜çš„æ¨¡å‹æŠ½è±¡ã€‚ KCL æ˜¯é™æ€ç¼–è¯‘å‹è¯­è¨€ï¼Œå¯¹äºå¤§è§„æ¨¡å»ºæ¨¡åœºæ™¯å¼€é”€è¾ƒå°</td></tr><tr><td>çº¦æŸèƒ½åŠ›</td><td>CUE å°†ç±»å‹å’Œå€¼åˆå¹¶åˆ°ä¸€ä¸ªæ¦‚å¿µä¸­ï¼Œé€šè¿‡å„ç§è¯­æ³•ç®€åŒ–äº†çº¦æŸçš„ç¼–å†™ï¼Œæ¯”å¦‚ä¸éœ€è¦æ³›å‹å’Œæšä¸¾ï¼Œæ±‚å’Œç±»å‹å’Œç©ºå€¼åˆå¹¶éƒ½æ˜¯ä¸€å›äº‹</td><td>KCL æä¾›äº†è·Ÿæ›´ä¸°å¯Œçš„ check å£°æ˜å¼çº¦æŸè¯­æ³•ï¼Œç¼–å†™èµ·æ¥æ›´åŠ å®¹æ˜“ï¼Œå¯¹äºä¸€äº›é…ç½®å­—æ®µç»„åˆçº¦æŸç¼–å†™æ›´åŠ ç®€å•ï¼ˆèƒ½åŠ›ä¸Šæ¯” CUE å¤šäº† if guard ç»„åˆçº¦æŸï¼Œall/any/map/filter ç­‰é›†åˆçº¦æŸç¼–å†™æ–¹å¼ï¼Œç¼–å†™æ›´åŠ å®¹æ˜“ï¼‰</td></tr><tr><td>åˆ†å—ç¼–å†™èƒ½åŠ›</td><td>æ”¯æŒè¯­è¨€å†…éƒ¨é…ç½®åˆå¹¶ï¼ŒCUE çš„é…ç½®åˆå¹¶æ˜¯å®Œå…¨å¹‚ç­‰çš„ï¼Œå¯¹äºæ»¡è¶³å¤æ‚çš„å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒé…ç½®åœºæ™¯çš„è¦†ç›–éœ€æ±‚å¯èƒ½æ— æ³•æ»¡è¶³</td><td>KCL å¯ä»¥è‡ªå®šä¹‰é…ç½®åˆ†å—ç¼–å†™æ–¹å¼å’Œå¤šç§åˆå¹¶ç­–ç•¥ï¼ŒKCL åŒæ—¶æ”¯æŒå¹‚ç­‰å’Œéå¹‚ç­‰çš„åˆå¹¶ç­–ç•¥,å¯ä»¥æ»¡è¶³å¤æ‚çš„å¤šç§Ÿæˆ·ã€å¤šç¯å¢ƒé…ç½®åœºæ™¯éœ€æ±‚</td></tr><tr><td>è¯­è¨€åŒ–ç¼–å†™èƒ½åŠ›</td><td>å¯¹äºå¤æ‚çš„å¾ªç¯ã€æ¡ä»¶çº¦æŸåœºæ™¯ç¼–å†™å¤æ‚ï¼Œå¯¹äºéœ€è¦è¿›è¡Œé…ç½®ç²¾ç¡®ä¿®æ”¹çš„ç¼–å†™åœºæ™¯è¾ƒä¸ºç¹ç</td><td>å¤æ‚çš„ç»“æ„å®šä¹‰ã€å¾ªç¯ã€æ¡ä»¶çº¦æŸåœºæ™¯ç¼–å†™ç®€å•</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="342-ä¸¾ä¾‹">3.4.2 ä¸¾ä¾‹<a href="#342-ä¸¾ä¾‹" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p><strong>CUE çº¦æŸæ ¡éªŒç¼–å†™ vs. KCL Schema å£°æ˜å¼çº¦æŸæ ¡éªŒç¼–å†™åŠé…ç½®åˆ†å—ç¼–å†™èƒ½åŠ›</strong></p><p>CUE (æ‰§è¡Œå‘½ä»¤ <code>cue export base.cue prod.cue</code>)</p><ul><li>base.cue</li></ul><div class="language-cue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cue codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// base.cue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import "list"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#App: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType: "Standard" | "Customized" | "Global",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort: &gt;=1 &amp; &lt;=65535,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes: [...#Volume],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services: [...#Service],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Service: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clusterIP: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if type == "ClusterIP" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clusterIP: "None"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Volume: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container: string | *"*"  // The default value of `container` is "*"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mountPath: string,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _check: false &amp; list.Contains(["/", "/boot", "/home", "dev", "/etc", "/root"], mountPath),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app: #App &amp; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType: "Standard",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort: 80,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mountPath: "/tmp"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clusterIP: "None",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type: "ClusterIP"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>prod.cue</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">//</span><span class="token plain"> prod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#App &amp; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">//</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conflicting values </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>KCL (æ‰§è¡Œå‘½ä»¤ <code>kcl base.k prod.k</code>)</p><ul><li>base.k</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># base.k</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema App</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Standard"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Customized"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Global"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Volume</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Service</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> containerPort </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65535</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clusterIP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $</span><span class="token builtin">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clusterIP </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"None"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> $</span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ClusterIP"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema Volume</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*"</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># The default value of `container` is "*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mountPath </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/boot"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/home"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"dev"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/etc"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/root"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domainType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Standard"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mountPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            clusterIP </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"None"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $</span><span class="token builtin">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ClusterIP"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>prod.k</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># prod.k</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> App </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¯ä»¥ä½¿ç”¨ = å±æ€§è¿ç®—ç¬¦å¯¹ base app çš„ containerPort è¿›è¡Œä¿®æ”¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    containerPort </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># å¯ä»¥ä½¿ç”¨ += å±æ€§è¿ç®—ç¬¦å¯¹ base app çš„ volumes è¿›è¡Œæ·»åŠ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ­¤å¤„è¡¨ç¤ºåœ¨ prod ç¯å¢ƒå¢åŠ ä¸€ä¸ª volume, ä¸€å…±ä¸¤ä¸ª volume</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mountPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ­¤å¤–ç”±äº CUE çš„å¹‚ç­‰åˆå¹¶ç‰¹æ€§ï¼Œåœ¨åœºæ™¯ä¸Šå¹¶æ— æ³•ä½¿ç”¨ç±»ä¼¼ kustomize çš„ overlay é…ç½®è¦†ç›–å’Œ patch ç­‰èƒ½åŠ›ï¼Œæ¯”å¦‚ä¸Šè¿°çš„ base.cue å’Œ prod.cue ä¸€èµ·ç¼–è¯‘ä¼šæŠ¥é”™ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-performance">3.5 Performance<a href="#35-performance" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h3><p>åœ¨ä»£ç è§„æ¨¡è¾ƒå¤§æˆ–è€…è®¡ç®—é‡è¾ƒé«˜çš„åœºæ™¯æƒ…å†µä¸‹ KCL æ¯” CUE/Jsonnet/HCL ç­‰è¯­è¨€æ€§èƒ½æ›´å¥½ (CUE ç­‰è¯­è¨€å—é™äºè¿è¡Œæ—¶çº¦æŸæ£€æŸ¥å¼€é”€ï¼Œè€Œ KCL æ˜¯ä¸€ä¸ªé™æ€ç¼–è¯‘å‹è¯­è¨€)</p><ul><li>CUE (test.cue)</li></ul><div class="language-cue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cue codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import "list"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for i, _ in list.Range(0, 10000, 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "a\(i)": list.Max([1, 2])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL (test.k)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"a${i}"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Jsonnet (test.jsonnet)</li></ul><div class="language-jsonnet codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonnet codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">local a(x, y) = std.max(x, y);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    temp: {["a%d" % i]: a(1, 2) for i in std.range(0, 10000)},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Terraform HCL (test.tf, ç”±äº terraform range å‡½æ•°åªæ”¯æŒæœ€å¤š 1024 ä¸ªè¿­ä»£å™¨ï¼Œå°† range(10000) æ‹†åˆ†ä¸º 10 ä¸ªå­ range)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r1"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r2"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r3"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r4"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r5"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r6"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r7"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">6000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r8"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">7000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r9"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output </span><span class="token string" style="color:#e3116c">"r10"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> s </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">9000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a%d"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>è¿è¡Œæ—¶é—´ï¼ˆè€ƒè™‘åˆ°ç”Ÿäº§ç¯å¢ƒçš„å®é™…èµ„æºå¼€é”€ï¼Œæœ¬æ¬¡æµ‹è¯•ä»¥å•æ ¸ä¸ºå‡†ï¼‰</li></ul><table><thead><tr><th>ç¯å¢ƒ</th><th>KCL v0.4.3 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th><th>CUE v0.4.3 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th><th>Jsonnet v0.18.0 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th><th>HCL in Terraform v1.3.0 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th></tr></thead><tbody><tr><td>OS: macOS 10.15.7; CPU: Intel(R) Core(TM) i7-8850H CPU @ 2.60GHz; Memory: 32 GB 2400 MHz DDR4; ä¸å¼€å¯ NUMA</td><td>440 ms (kcl test.k)</td><td>6290 ms (cue export test.cue)</td><td>3340 ms (jsonnet test.jsonnet)</td><td>1774 ms (terraform plan -parallelism=1)</td></tr></tbody></table><p>ç»¼ä¸Šå¯ä»¥çœ‹å‡ºï¼šCUE å’Œ KCL å‡å¯ä»¥è¦†ç›–åˆ°ç»å¤§å¤šæ•°é…ç½®æ ¡éªŒåœºæ™¯ï¼Œå¹¶ä¸”å‡æ”¯æŒå±æ€§ç±»å‹å®šä¹‰ã€é…ç½®é»˜è®¤å€¼ã€çº¦æŸæ ¡éªŒç­‰ç¼–å†™ï¼Œä½†æ˜¯ CUE å¯¹äºä¸åŒçš„çº¦æŸæ¡ä»¶åœºæ™¯æ— ç»Ÿä¸€çš„å†™æ³•ï¼Œä¸”ä¸èƒ½å¾ˆå¥½åœ°é€å‡ºæ ¡éªŒé”™è¯¯ï¼ŒKCL ä½¿ç”¨ check å…³é”®å­—ä½œç»Ÿä¸€å¤„ç†ï¼Œæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é”™è¯¯è¾“å‡ºã€‚</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="å¦ä¸€ä¸ªå¤æ‚çš„ä¾‹å­">å¦ä¸€ä¸ªå¤æ‚çš„ä¾‹å­<a href="#å¦ä¸€ä¸ªå¤æ‚çš„ä¾‹å­" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h4><p>ä½¿ç”¨ KCL å’Œ CUE ç¼–å†™ Kubernetes é…ç½®</p><ul><li>CUE (test.cue)</li></ul><div class="language-cue codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cue codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> apps "k8s.io/api/apps/v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment: apps.#Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> apiVersion: "apps/v1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> kind:       "Deployment"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> metadata: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name:   "me"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels: me: "me"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>KCL (test.k)</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kubernetes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Deployment </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"me"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"me"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>ç¯å¢ƒ</th><th>KCL v0.4.3 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th><th>CUE v0.4.3 è¿è¡Œæ—¶é—´ (åŒ…å«ç¼–è¯‘+è¿è¡Œæ—¶é—´)</th></tr></thead><tbody><tr><td>OS: macOS 10.15.7; CPU: Intel(R) Core(TM) i7-8850H CPU @ 2.60GHz; Memory: 32 GB 2400 MHz DDR4; no NUMA</td><td>140 ms (kcl test.k)</td><td>350 ms (cue export test.cue)</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å››å°ç»“">å››ã€å°ç»“<a href="#å››å°ç»“" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><p>æ–‡æœ¬å¯¹å£°æ˜å¼é…ç½®æŠ€æœ¯åšäº†æ•´ä½“æ¦‚è¿°ï¼Œå…¶ä¸­é‡ç‚¹é˜è¿°äº† KCL æ¦‚å¿µã€æ ¸å¿ƒè®¾è®¡ã€ä½¿ç”¨åœºæ™¯ä»¥åŠä¸å…¶ä»–é…ç½®è¯­è¨€çš„å¯¹æ¯”ï¼ŒæœŸæœ›å¸®åŠ©å¤§å®¶æ›´å¥½çš„ç†è§£å£°æ˜å¼é…ç½®æŠ€æœ¯åŠ KCL è¯­è¨€ã€‚æ›´å¤š KCL çš„æ¦‚å¿µã€èƒŒæ™¯ã€è®¾è®¡ä¸ç”¨æˆ·æ¡ˆä¾‹ç­‰ç›¸å…³å†…å®¹ï¼Œæ¬¢è¿è®¿é—® <a href="https://kcl-lang.io/" target="_blank" rel="noopener noreferrer">KCL ç½‘ç«™</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="äº”å‚è€ƒ">äº”ã€å‚è€ƒ<a href="#äº”å‚è€ƒ" class="hash-link" aria-label="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">â€‹</a></h2><ul><li>KusionStack Cloud Native Configuration Practice Blog: <a href="https://kusionstack.io/blog/2021-kusion-intro" target="_blank" rel="noopener noreferrer">https://kusionstack.io/blog/2021-kusion-intro</a></li><li>Terraform Language: <a href="https://www.terraform.io/language" target="_blank" rel="noopener noreferrer">https://www.terraform.io/language</a></li><li>Terraform Provider Kubernetes: <a href="https://github.com/hashicorp/terraform-provider-kubernetes" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-kubernetes</a></li><li>Terraform Provider AWS: <a href="https://github.com/hashicorp/terraform-provider-aws" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/terraform-provider-aws</a></li><li>Pulumi: <a href="https://www.pulumi.com/docs/" target="_blank" rel="noopener noreferrer">https://www.pulumi.com/docs/</a></li><li>Pulumi vs. Terraform: <a href="https://www.pulumi.com/docs/intro/vs/terraform/" target="_blank" rel="noopener noreferrer">https://www.pulumi.com/docs/intro/vs/terraform/</a></li><li>Google SRE Work Book Configuration Design: <a href="https://sre.google/workbook/configuration-design/" target="_blank" rel="noopener noreferrer">https://sre.google/workbook/configuration-design/</a></li><li>Google Borg Paper: <a href="https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43438.pdf" target="_blank" rel="noopener noreferrer">https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43438.pdf</a></li><li>Holistic Configuration Management at Facebook: <a href="https://sigops.org/s/conferences/sosp/2015/current/2015-Monterey/printable/008-tang.pdf" target="_blank" rel="noopener noreferrer">https://sigops.org/s/conferences/sosp/2015/current/2015-Monterey/printable/008-tang.pdf</a></li><li>JSON Spec: <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">https://www.json.org/json-en.html</a></li><li>YAML Spec: <a href="https://yaml.org/spec/" target="_blank" rel="noopener noreferrer">https://yaml.org/spec/</a></li><li>GCL: <a href="https://github.com/rix0rrr/gcl" target="_blank" rel="noopener noreferrer">https://github.com/rix0rrr/gcl</a></li><li>HCL: <a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">https://github.com/hashicorp/hcl</a></li><li>CUE: <a href="https://github.com/cue-lang/cue" target="_blank" rel="noopener noreferrer">https://github.com/cue-lang/cue</a></li><li>Jsonnet: <a href="https://github.com/google/jsonnet" target="_blank" rel="noopener noreferrer">https://github.com/google/jsonnet</a></li><li>Dhall: <a href="https://github.com/dhall-lang/dhall-lang" target="_blank" rel="noopener noreferrer">https://github.com/dhall-lang/dhall-lang</a></li><li>Thrift: <a href="https://github.com/Thriftpy/thriftpy2" target="_blank" rel="noopener noreferrer">https://github.com/Thriftpy/thriftpy2</a></li><li>Kustomize: <a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">https://kustomize.io/</a></li><li>Kube-linter: <a href="https://github.com/stackrox/kube-linter" target="_blank" rel="noopener noreferrer">https://github.com/stackrox/kube-linter</a></li><li>Checkov: <a href="https://github.com/bridgecrewio/checkov" target="_blank" rel="noopener noreferrer">https://github.com/bridgecrewio/checkov</a></li><li>KCL Documents: <a href="https://kcl-lang.io/docs/reference/lang/tour" target="_blank" rel="noopener noreferrer">https://kcl-lang.io/docs/reference/lang/tour</a></li><li>How Terraform Works: A Visual Intro: <a href="https://betterprogramming.pub/how-terraform-works-a-visual-intro-6328cddbe067" target="_blank" rel="noopener noreferrer">https://betterprogramming.pub/how-terraform-works-a-visual-intro-6328cddbe067</a> </li><li>How Terraform Works: Modules Illustrated: <a href="https://awstip.com/terraform-modules-illustrate-26cbc48be83a" target="_blank" rel="noopener noreferrer">https://awstip.com/terraform-modules-illustrate-26cbc48be83a</a></li><li>Helm: <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">https://helm.sh/</a></li><li>Helm vs. Kustomize: <a href="https://harness.io/blog/helm-vs-kustomize" target="_blank" rel="noopener noreferrer">https://harness.io/blog/helm-vs-kustomize</a></li><li>KubeVela: <a href="https://kubevela.io/docs/" target="_blank" rel="noopener noreferrer">https://kubevela.io/docs/</a></li></ul>]]></content>
        <author>
            <name>å¾é¹é£</name>
        </author>
        <category label="KCL" term="KCL"/>
        <category label="Configuration" term="Configuration"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[GIAC 2022 ä¼šè®® KCL ä»‹ç»å†…å®¹]]></title>
        <id>https://kcl-lang.github.io/zh-CN/blog/2021-kcl-intro</id>
        <link href="https://kcl-lang.github.io/zh-CN/blog/2021-kcl-intro"/>
        <updated>2021-08-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä»‹ç»KCLäº‘åŸç”Ÿé…ç½®è¯­è¨€åœ¨èš‚èšçš„è¯ç”ŸèƒŒæ™¯ã€è¯­è¨€ç‰¹æ€§ã€å®è·µæ¢ç´¢å’Œæœªæ¥çš„å‘å±•æ€è€ƒã€‚]]></summary>
        <content type="html"><![CDATA[<p>ä»‹ç»KCLäº‘åŸç”Ÿé…ç½®è¯­è¨€åœ¨èš‚èšçš„è¯ç”ŸèƒŒæ™¯ã€è¯­è¨€ç‰¹æ€§ã€å®è·µæ¢ç´¢å’Œæœªæ¥çš„å‘å±•æ€è€ƒã€‚</p><ul><li>ç®€ä»‹ï¼š<a href="https://giac.msup.com.cn/course?id=15307" target="_blank" rel="noopener noreferrer">https://giac.msup.com.cn/course?id=15307</a></li><li>å†…å®¹ï¼š<a href="https://segmentfault.com/a/1190000040455559" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000040455559</a></li><li><a href="https://gw.alipayobjects.com/os/bmw-prod/2cb0c283-5f24-485e-b635-b6efac887eba.pdf" target="_blank" rel="noopener noreferrer">PDFä¸‹è½½</a></li></ul><p><a href="https://gw.alipayobjects.com/os/bmw-prod/2cb0c283-5f24-485e-b635-b6efac887eba.pdf" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="KCLäº‘åŸç”Ÿé…ç½®ç­–ç•¥è¯­è¨€" src="/zh-CN/assets/images/talk-cover-7bff56b2738955e27cf16a5ebb1a4506.png" width="1820" height="1366" class="img_ev3q"></a></p>]]></content>
        <author>
            <name>æŸ´æ ‘æ‰</name>
        </author>
        <category label="KCL" term="KCL"/>
    </entry>
</feed>